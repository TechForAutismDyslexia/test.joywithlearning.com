var jZ=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports);var qFt=jZ((aMt,z1)=>{function zZ(r,t){for(var e=0;e<t.length;e++){const i=t[e];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in r)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Bj(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),e}var Gj={exports:{}},A1={},kj={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=Symbol.for("react.element"),WZ=Symbol.for("react.portal"),YZ=Symbol.for("react.fragment"),qZ=Symbol.for("react.strict_mode"),KZ=Symbol.for("react.profiler"),ZZ=Symbol.for("react.provider"),QZ=Symbol.for("react.context"),JZ=Symbol.for("react.forward_ref"),tQ=Symbol.for("react.suspense"),eQ=Symbol.for("react.memo"),rQ=Symbol.for("react.lazy"),D3=Symbol.iterator;function iQ(r){return r===null||typeof r!="object"?null:(r=D3&&r[D3]||r["@@iterator"],typeof r=="function"?r:null)}var Dj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$j=Object.assign,Hj={};function by(r,t,e){this.props=r,this.context=t,this.refs=Hj,this.updater=e||Dj}by.prototype.isReactComponent={};by.prototype.setState=function(r,t){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,t,"setState")};by.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function Xj(){}Xj.prototype=by.prototype;function mM(r,t,e){this.props=r,this.context=t,this.refs=Hj,this.updater=e||Dj}var _M=mM.prototype=new Xj;_M.constructor=mM;$j(_M,by.prototype);_M.isPureReactComponent=!0;var $3=Array.isArray,Vj=Object.prototype.hasOwnProperty,gM={current:null},jj={key:!0,ref:!0,__self:!0,__source:!0};function zj(r,t,e){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Vj.call(t,i)&&!jj.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=e;else if(1<o){for(var h=Array(o),u=0;u<o;u++)h[u]=arguments[u+2];n.children=h}if(r&&r.defaultProps)for(i in o=r.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:a0,type:r,key:s,ref:a,props:n,_owner:gM.current}}function nQ(r,t){return{$$typeof:a0,type:r.type,key:t,ref:r.ref,props:r.props,_owner:r._owner}}function xM(r){return typeof r=="object"&&r!==null&&r.$$typeof===a0}function sQ(r){var t={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(e){return t[e]})}var H3=/\/+/g;function GR(r,t){return typeof r=="object"&&r!==null&&r.key!=null?sQ(""+r.key):t.toString(36)}function uE(r,t,e,i,n){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case a0:case WZ:a=!0}}if(a)return a=r,n=n(a),r=i===""?"."+GR(a,0):i,$3(n)?(e="",r!=null&&(e=r.replace(H3,"$&/")+"/"),uE(n,t,e,"",function(u){return u})):n!=null&&(xM(n)&&(n=nQ(n,e+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(H3,"$&/")+"/")+r)),t.push(n)),1;if(a=0,i=i===""?".":i+":",$3(r))for(var o=0;o<r.length;o++){s=r[o];var h=i+GR(s,o);a+=uE(s,t,e,h,n)}else if(h=iQ(r),typeof h=="function")for(r=h.call(r),o=0;!(s=r.next()).done;)s=s.value,h=i+GR(s,o++),a+=uE(s,t,e,h,n);else if(s==="object")throw t=String(r),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function dx(r,t,e){if(r==null)return r;var i=[],n=0;return uE(r,i,"","",function(s){return t.call(e,s,n++)}),i}function aQ(r){if(r._status===-1){var t=r._result;t=t(),t.then(function(e){(r._status===0||r._status===-1)&&(r._status=1,r._result=e)},function(e){(r._status===0||r._status===-1)&&(r._status=2,r._result=e)}),r._status===-1&&(r._status=0,r._result=t)}if(r._status===1)return r._result.default;throw r._result}var kn={current:null},lE={transition:null},oQ={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:lE,ReactCurrentOwner:gM};function Wj(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:dx,forEach:function(r,t,e){dx(r,function(){t.apply(this,arguments)},e)},count:function(r){var t=0;return dx(r,function(){t++}),t},toArray:function(r){return dx(r,function(t){return t})||[]},only:function(r){if(!xM(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};le.Component=by;le.Fragment=YZ;le.Profiler=KZ;le.PureComponent=mM;le.StrictMode=qZ;le.Suspense=tQ;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oQ;le.act=Wj;le.cloneElement=function(r,t,e){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var i=$j({},r.props),n=r.key,s=r.ref,a=r._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=gM.current),t.key!==void 0&&(n=""+t.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(h in t)Vj.call(t,h)&&!jj.hasOwnProperty(h)&&(i[h]=t[h]===void 0&&o!==void 0?o[h]:t[h])}var h=arguments.length-2;if(h===1)i.children=e;else if(1<h){o=Array(h);for(var u=0;u<h;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:a0,type:r.type,key:n,ref:s,props:i,_owner:a}};le.createContext=function(r){return r={$$typeof:QZ,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:ZZ,_context:r},r.Consumer=r};le.createElement=zj;le.createFactory=function(r){var t=zj.bind(null,r);return t.type=r,t};le.createRef=function(){return{current:null}};le.forwardRef=function(r){return{$$typeof:JZ,render:r}};le.isValidElement=xM;le.lazy=function(r){return{$$typeof:rQ,_payload:{_status:-1,_result:r},_init:aQ}};le.memo=function(r,t){return{$$typeof:eQ,type:r,compare:t===void 0?null:t}};le.startTransition=function(r){var t=lE.transition;lE.transition={};try{r()}finally{lE.transition=t}};le.unstable_act=Wj;le.useCallback=function(r,t){return kn.current.useCallback(r,t)};le.useContext=function(r){return kn.current.useContext(r)};le.useDebugValue=function(){};le.useDeferredValue=function(r){return kn.current.useDeferredValue(r)};le.useEffect=function(r,t){return kn.current.useEffect(r,t)};le.useId=function(){return kn.current.useId()};le.useImperativeHandle=function(r,t,e){return kn.current.useImperativeHandle(r,t,e)};le.useInsertionEffect=function(r,t){return kn.current.useInsertionEffect(r,t)};le.useLayoutEffect=function(r,t){return kn.current.useLayoutEffect(r,t)};le.useMemo=function(r,t){return kn.current.useMemo(r,t)};le.useReducer=function(r,t,e){return kn.current.useReducer(r,t,e)};le.useRef=function(r){return kn.current.useRef(r)};le.useState=function(r){return kn.current.useState(r)};le.useSyncExternalStore=function(r,t,e){return kn.current.useSyncExternalStore(r,t,e)};le.useTransition=function(){return kn.current.useTransition()};le.version="18.3.1";kj.exports=le;var F=kj.exports;const $a=Sd(F),hQ=zZ({__proto__:null,default:$a},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uQ=F,lQ=Symbol.for("react.element"),fQ=Symbol.for("react.fragment"),cQ=Object.prototype.hasOwnProperty,dQ=uQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pQ={key:!0,ref:!0,__self:!0,__source:!0};function Yj(r,t,e){var i,n={},s=null,a=null;e!==void 0&&(s=""+e),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)cQ.call(t,i)&&!pQ.hasOwnProperty(i)&&(n[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:lQ,type:r,key:s,ref:a,props:n,_owner:dQ.current}}A1.Fragment=fQ;A1.jsx=Yj;A1.jsxs=Yj;Gj.exports=A1;var C=Gj.exports,m2={},qj={exports:{}},ks={},Kj={exports:{}},Zj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function t(V,Y){var z=V.length;V.push(Y);t:for(;0<z;){var Z=z-1>>>1,Q=V[Z];if(0<n(Q,Y))V[Z]=Y,V[z]=Q,z=Z;else break t}}function e(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var Y=V[0],z=V.pop();if(z!==Y){V[0]=z;t:for(var Z=0,Q=V.length,mt=Q>>>1;Z<mt;){var Et=2*(Z+1)-1,It=V[Et],wt=Et+1,ht=V[wt];if(0>n(It,z))wt<Q&&0>n(ht,It)?(V[Z]=ht,V[wt]=z,Z=wt):(V[Z]=It,V[Et]=z,Z=Et);else if(wt<Q&&0>n(ht,z))V[Z]=ht,V[wt]=z,Z=wt;else break t}}return Y}function n(V,Y){var z=V.sortIndex-Y.sortIndex;return z!==0?z:V.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var h=[],u=[],l=1,f=null,c=3,d=!1,v=!1,_=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var Y=e(u);Y!==null;){if(Y.callback===null)i(u);else if(Y.startTime<=V)i(u),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=e(u)}}function S(V){if(_=!1,b(V),!v)if(e(h)!==null)v=!0,et(R);else{var Y=e(u);Y!==null&&st(S,Y.startTime-V)}}function R(V,Y){v=!1,_&&(_=!1,g($),$=-1),d=!0;var z=c;try{for(b(Y),f=e(h);f!==null&&(!(f.expirationTime>Y)||V&&!it());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,c=f.priorityLevel;var Q=Z(f.expirationTime<=Y);Y=r.unstable_now(),typeof Q=="function"?f.callback=Q:f===e(h)&&i(h),b(Y)}else i(h);f=e(h)}if(f!==null)var mt=!0;else{var Et=e(u);Et!==null&&st(S,Et.startTime-Y),mt=!1}return mt}finally{f=null,c=z,d=!1}}var U=!1,L=null,$=-1,k=5,H=-1;function it(){return!(r.unstable_now()-H<k)}function tt(){if(L!==null){var V=r.unstable_now();H=V;var Y=!0;try{Y=L(!0,V)}finally{Y?j():(U=!1,L=null)}}else U=!1}var j;if(typeof T=="function")j=function(){T(tt)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,K=at.port2;at.port1.onmessage=tt,j=function(){K.postMessage(null)}}else j=function(){m(tt,0)};function et(V){L=V,U||(U=!0,j())}function st(V,Y){$=m(function(){V(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_continueExecution=function(){v||d||(v=!0,et(R))},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return c},r.unstable_getFirstCallbackNode=function(){return e(h)},r.unstable_next=function(V){switch(c){case 1:case 2:case 3:var Y=3;break;default:Y=c}var z=c;c=Y;try{return V()}finally{c=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(V,Y){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=c;c=V;try{return Y()}finally{c=z}},r.unstable_scheduleCallback=function(V,Y,z){var Z=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,V){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=z+Q,V={id:l++,callback:Y,priorityLevel:V,startTime:z,expirationTime:Q,sortIndex:-1},z>Z?(V.sortIndex=z,t(u,V),e(h)===null&&V===e(u)&&(_?(g($),$=-1):_=!0,st(S,z-Z))):(V.sortIndex=Q,t(h,V),v||d||(v=!0,et(R))),V},r.unstable_shouldYield=it,r.unstable_wrapCallback=function(V){var Y=c;return function(){var z=c;c=Y;try{return V.apply(this,arguments)}finally{c=z}}}})(Zj);Kj.exports=Zj;var vQ=Kj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yQ=F,Ms=vQ;function gt(r){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+r,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+r+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qj=new Set,U_={};function Nd(r,t){iy(r,t),iy(r+"Capture",t)}function iy(r,t){for(U_[r]=t,r=0;r<t.length;r++)Qj.add(t[r])}var Sh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_2=Object.prototype.hasOwnProperty,mQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X3={},V3={};function _Q(r){return _2.call(V3,r)?!0:_2.call(X3,r)?!1:mQ.test(r)?V3[r]=!0:(X3[r]=!0,!1)}function gQ(r,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function xQ(r,t,e,i){if(t===null||typeof t>"u"||gQ(r,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dn(r,t,e,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=e,this.propertyName=r,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){en[r]=new Dn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var t=r[0];en[t]=new Dn(t,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){en[r]=new Dn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){en[r]=new Dn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){en[r]=new Dn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){en[r]=new Dn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){en[r]=new Dn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){en[r]=new Dn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){en[r]=new Dn(r,5,!1,r.toLowerCase(),null,!1,!1)});var bM=/[\-:]([a-z])/g;function TM(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var t=r.replace(bM,TM);en[t]=new Dn(t,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var t=r.replace(bM,TM);en[t]=new Dn(t,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var t=r.replace(bM,TM);en[t]=new Dn(t,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){en[r]=new Dn(r,1,!1,r.toLowerCase(),null,!1,!1)});en.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){en[r]=new Dn(r,1,!1,r.toLowerCase(),null,!0,!0)});function EM(r,t,e,i){var n=en.hasOwnProperty(t)?en[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xQ(t,e,n,i)&&(e=null),i||n===null?_Q(t)&&(e===null?r.removeAttribute(t):r.setAttribute(t,""+e)):n.mustUseProperty?r[n.propertyName]=e===null?n.type===3?!1:"":e:(t=n.attributeName,i=n.attributeNamespace,e===null?r.removeAttribute(t):(n=n.type,e=n===3||n===4&&e===!0?"":""+e,i?r.setAttributeNS(i,t,e):r.setAttribute(t,e))))}var ru=yQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,px=Symbol.for("react.element"),tv=Symbol.for("react.portal"),ev=Symbol.for("react.fragment"),wM=Symbol.for("react.strict_mode"),g2=Symbol.for("react.profiler"),Jj=Symbol.for("react.provider"),t5=Symbol.for("react.context"),IM=Symbol.for("react.forward_ref"),x2=Symbol.for("react.suspense"),b2=Symbol.for("react.suspense_list"),RM=Symbol.for("react.memo"),gu=Symbol.for("react.lazy"),e5=Symbol.for("react.offscreen"),j3=Symbol.iterator;function Qy(r){return r===null||typeof r!="object"?null:(r=j3&&r[j3]||r["@@iterator"],typeof r=="function"?r:null)}var jr=Object.assign,kR;function i_(r){if(kR===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);kR=t&&t[1]||""}return`
`+kR+r}var DR=!1;function $R(r,t){if(!r||DR)return"";DR=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(r,[],t)}else{try{t.call()}catch(u){i=u}r.call(t.prototype)}else{try{throw Error()}catch(u){i=u}r()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var h=`
`+n[a].replace(" at new "," at ");return r.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",r.displayName)),h}while(1<=a&&0<=o);break}}}finally{DR=!1,Error.prepareStackTrace=e}return(r=r?r.displayName||r.name:"")?i_(r):""}function bQ(r){switch(r.tag){case 5:return i_(r.type);case 16:return i_("Lazy");case 13:return i_("Suspense");case 19:return i_("SuspenseList");case 0:case 2:case 15:return r=$R(r.type,!1),r;case 11:return r=$R(r.type.render,!1),r;case 1:return r=$R(r.type,!0),r;default:return""}}function T2(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ev:return"Fragment";case tv:return"Portal";case g2:return"Profiler";case wM:return"StrictMode";case x2:return"Suspense";case b2:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case t5:return(r.displayName||"Context")+".Consumer";case Jj:return(r._context.displayName||"Context")+".Provider";case IM:var t=r.render;return r=r.displayName,r||(r=t.displayName||t.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case RM:return t=r.displayName||null,t!==null?t:T2(r.type)||"Memo";case gu:t=r._payload,r=r._init;try{return T2(r(t))}catch{}}return null}function TQ(r){var t=r.type;switch(r.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=t.render,r=r.displayName||r.name||"",t.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T2(t);case 8:return t===wM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vl(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function r5(r){var t=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EQ(r){var t=r5(r)?"checked":"value",e=Object.getOwnPropertyDescriptor(r.constructor.prototype,t),i=""+r[t];if(!r.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var n=e.get,s=e.set;return Object.defineProperty(r,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(r,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){r._valueTracker=null,delete r[t]}}}}function vx(r){r._valueTracker||(r._valueTracker=EQ(r))}function i5(r){if(!r)return!1;var t=r._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return r&&(i=r5(r)?r.checked?"true":"false":r.value),r=i,r!==e?(t.setValue(r),!0):!1}function UE(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function E2(r,t){var e=t.checked;return jr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??r._wrapperState.initialChecked})}function z3(r,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=vl(t.value!=null?t.value:e),r._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function n5(r,t){t=t.checked,t!=null&&EM(r,"checked",t,!1)}function w2(r,t){n5(r,t);var e=vl(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&r.value===""||r.value!=e)&&(r.value=""+e):r.value!==""+e&&(r.value=""+e);else if(i==="submit"||i==="reset"){r.removeAttribute("value");return}t.hasOwnProperty("value")?I2(r,t.type,e):t.hasOwnProperty("defaultValue")&&I2(r,t.type,vl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(r.defaultChecked=!!t.defaultChecked)}function W3(r,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+r._wrapperState.initialValue,e||t===r.value||(r.value=t),r.defaultValue=t}e=r.name,e!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,e!==""&&(r.name=e)}function I2(r,t,e){(t!=="number"||UE(r.ownerDocument)!==r)&&(e==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+e&&(r.defaultValue=""+e))}var n_=Array.isArray;function xv(r,t,e,i){if(r=r.options,t){t={};for(var n=0;n<e.length;n++)t["$"+e[n]]=!0;for(e=0;e<r.length;e++)n=t.hasOwnProperty("$"+r[e].value),r[e].selected!==n&&(r[e].selected=n),n&&i&&(r[e].defaultSelected=!0)}else{for(e=""+vl(e),t=null,n=0;n<r.length;n++){if(r[n].value===e){r[n].selected=!0,i&&(r[n].defaultSelected=!0);return}t!==null||r[n].disabled||(t=r[n])}t!==null&&(t.selected=!0)}}function R2(r,t){if(t.dangerouslySetInnerHTML!=null)throw Error(gt(91));return jr({},t,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Y3(r,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(gt(92));if(n_(e)){if(1<e.length)throw Error(gt(93));e=e[0]}t=e}t==null&&(t=""),e=t}r._wrapperState={initialValue:vl(e)}}function s5(r,t){var e=vl(t.value),i=vl(t.defaultValue);e!=null&&(e=""+e,e!==r.value&&(r.value=e),t.defaultValue==null&&r.defaultValue!==e&&(r.defaultValue=e)),i!=null&&(r.defaultValue=""+i)}function q3(r){var t=r.textContent;t===r._wrapperState.initialValue&&t!==""&&t!==null&&(r.value=t)}function a5(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C2(r,t){return r==null||r==="http://www.w3.org/1999/xhtml"?a5(t):r==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var yx,o5=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,n){MSApp.execUnsafeLocalFunction(function(){return r(t,e,i,n)})}:r}(function(r,t){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=t;else{for(yx=yx||document.createElement("div"),yx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=yx.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;t.firstChild;)r.appendChild(t.firstChild)}});function M_(r,t){if(t){var e=r.firstChild;if(e&&e===r.lastChild&&e.nodeType===3){e.nodeValue=t;return}}r.textContent=t}var __={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wQ=["Webkit","ms","Moz","O"];Object.keys(__).forEach(function(r){wQ.forEach(function(t){t=t+r.charAt(0).toUpperCase()+r.substring(1),__[t]=__[r]})});function h5(r,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||__.hasOwnProperty(r)&&__[r]?(""+t).trim():t+"px"}function u5(r,t){r=r.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,n=h5(e,t[e],i);e==="float"&&(e="cssFloat"),i?r.setProperty(e,n):r[e]=n}}var IQ=jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function A2(r,t){if(t){if(IQ[r]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(gt(137,r));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(gt(62))}}function S2(r,t){if(r.indexOf("-")===-1)return typeof t.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N2=null;function CM(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var P2=null,bv=null,Tv=null;function K3(r){if(r=u0(r)){if(typeof P2!="function")throw Error(gt(280));var t=r.stateNode;t&&(t=F1(t),P2(r.stateNode,r.type,t))}}function l5(r){bv?Tv?Tv.push(r):Tv=[r]:bv=r}function f5(){if(bv){var r=bv,t=Tv;if(Tv=bv=null,K3(r),t)for(r=0;r<t.length;r++)K3(t[r])}}function c5(r,t){return r(t)}function d5(){}var HR=!1;function p5(r,t,e){if(HR)return r(t,e);HR=!0;try{return c5(r,t,e)}finally{HR=!1,(bv!==null||Tv!==null)&&(d5(),f5())}}function L_(r,t){var e=r.stateNode;if(e===null)return null;var i=F1(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(r=r.type,i=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!i;break t;default:r=!1}if(r)return null;if(e&&typeof e!="function")throw Error(gt(231,t,typeof e));return e}var O2=!1;if(Sh)try{var Jy={};Object.defineProperty(Jy,"passive",{get:function(){O2=!0}}),window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,Jy)}catch{O2=!1}function RQ(r,t,e,i,n,s,a,o,h){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(l){this.onError(l)}}var g_=!1,ME=null,LE=!1,F2=null,CQ={onError:function(r){g_=!0,ME=r}};function AQ(r,t,e,i,n,s,a,o,h){g_=!1,ME=null,RQ.apply(CQ,arguments)}function SQ(r,t,e,i,n,s,a,o,h){if(AQ.apply(this,arguments),g_){if(g_){var u=ME;g_=!1,ME=null}else throw Error(gt(198));LE||(LE=!0,F2=u)}}function Pd(r){var t=r,e=r;if(r.alternate)for(;t.return;)t=t.return;else{r=t;do t=r,t.flags&4098&&(e=t.return),r=t.return;while(r)}return t.tag===3?e:null}function v5(r){if(r.tag===13){var t=r.memoizedState;if(t===null&&(r=r.alternate,r!==null&&(t=r.memoizedState)),t!==null)return t.dehydrated}return null}function Z3(r){if(Pd(r)!==r)throw Error(gt(188))}function NQ(r){var t=r.alternate;if(!t){if(t=Pd(r),t===null)throw Error(gt(188));return t!==r?null:r}for(var e=r,i=t;;){var n=e.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){e=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===e)return Z3(n),r;if(s===i)return Z3(n),t;s=s.sibling}throw Error(gt(188))}if(e.return!==i.return)e=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===e){a=!0,e=n,i=s;break}if(o===i){a=!0,i=n,e=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===e){a=!0,e=s,i=n;break}if(o===i){a=!0,i=s,e=n;break}o=o.sibling}if(!a)throw Error(gt(189))}}if(e.alternate!==i)throw Error(gt(190))}if(e.tag!==3)throw Error(gt(188));return e.stateNode.current===e?r:t}function y5(r){return r=NQ(r),r!==null?m5(r):null}function m5(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var t=m5(r);if(t!==null)return t;r=r.sibling}return null}var _5=Ms.unstable_scheduleCallback,Q3=Ms.unstable_cancelCallback,PQ=Ms.unstable_shouldYield,OQ=Ms.unstable_requestPaint,ei=Ms.unstable_now,FQ=Ms.unstable_getCurrentPriorityLevel,AM=Ms.unstable_ImmediatePriority,g5=Ms.unstable_UserBlockingPriority,BE=Ms.unstable_NormalPriority,UQ=Ms.unstable_LowPriority,x5=Ms.unstable_IdlePriority,S1=null,So=null;function MQ(r){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(S1,r,void 0,(r.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:GQ,LQ=Math.log,BQ=Math.LN2;function GQ(r){return r>>>=0,r===0?32:31-(LQ(r)/BQ|0)|0}var mx=64,_x=4194304;function s_(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function GE(r,t){var e=r.pendingLanes;if(e===0)return 0;var i=0,n=r.suspendedLanes,s=r.pingedLanes,a=e&268435455;if(a!==0){var o=a&~n;o!==0?i=s_(o):(s&=a,s!==0&&(i=s_(s)))}else a=e&~n,a!==0?i=s_(a):s!==0&&(i=s_(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=e&16),t=r.entangledLanes,t!==0)for(r=r.entanglements,t&=i;0<t;)e=31-Ha(t),n=1<<e,i|=r[e],t&=~n;return i}function kQ(r,t){switch(r){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DQ(r,t){for(var e=r.suspendedLanes,i=r.pingedLanes,n=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Ha(s),o=1<<a,h=n[a];h===-1?(!(o&e)||o&i)&&(n[a]=kQ(o,t)):h<=t&&(r.expiredLanes|=o),s&=~o}}function U2(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function b5(){var r=mx;return mx<<=1,!(mx&4194240)&&(mx=64),r}function XR(r){for(var t=[],e=0;31>e;e++)t.push(r);return t}function o0(r,t,e){r.pendingLanes|=t,t!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,t=31-Ha(t),r[t]=e}function $Q(r,t){var e=r.pendingLanes&~t;r.pendingLanes=t,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=t,r.mutableReadLanes&=t,r.entangledLanes&=t,t=r.entanglements;var i=r.eventTimes;for(r=r.expirationTimes;0<e;){var n=31-Ha(e),s=1<<n;t[n]=0,i[n]=-1,r[n]=-1,e&=~s}}function SM(r,t){var e=r.entangledLanes|=t;for(r=r.entanglements;e;){var i=31-Ha(e),n=1<<i;n&t|r[i]&t&&(r[i]|=t),e&=~n}}var We=0;function T5(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var E5,NM,w5,I5,R5,M2=!1,gx=[],nl=null,sl=null,al=null,B_=new Map,G_=new Map,Mu=[],HQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J3(r,t){switch(r){case"focusin":case"focusout":nl=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":B_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":G_.delete(t.pointerId)}}function tm(r,t,e,i,n,s){return r===null||r.nativeEvent!==s?(r={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=u0(t),t!==null&&NM(t)),r):(r.eventSystemFlags|=i,t=r.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),r)}function XQ(r,t,e,i,n){switch(t){case"focusin":return nl=tm(nl,r,t,e,i,n),!0;case"dragenter":return sl=tm(sl,r,t,e,i,n),!0;case"mouseover":return al=tm(al,r,t,e,i,n),!0;case"pointerover":var s=n.pointerId;return B_.set(s,tm(B_.get(s)||null,r,t,e,i,n)),!0;case"gotpointercapture":return s=n.pointerId,G_.set(s,tm(G_.get(s)||null,r,t,e,i,n)),!0}return!1}function C5(r){var t=$c(r.target);if(t!==null){var e=Pd(t);if(e!==null){if(t=e.tag,t===13){if(t=v5(e),t!==null){r.blockedOn=t,R5(r.priority,function(){w5(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){r.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fE(r){if(r.blockedOn!==null)return!1;for(var t=r.targetContainers;0<t.length;){var e=L2(r.domEventName,r.eventSystemFlags,t[0],r.nativeEvent);if(e===null){e=r.nativeEvent;var i=new e.constructor(e.type,e);N2=i,e.target.dispatchEvent(i),N2=null}else return t=u0(e),t!==null&&NM(t),r.blockedOn=e,!1;t.shift()}return!0}function tk(r,t,e){fE(r)&&e.delete(t)}function VQ(){M2=!1,nl!==null&&fE(nl)&&(nl=null),sl!==null&&fE(sl)&&(sl=null),al!==null&&fE(al)&&(al=null),B_.forEach(tk),G_.forEach(tk)}function em(r,t){r.blockedOn===t&&(r.blockedOn=null,M2||(M2=!0,Ms.unstable_scheduleCallback(Ms.unstable_NormalPriority,VQ)))}function k_(r){function t(n){return em(n,r)}if(0<gx.length){em(gx[0],r);for(var e=1;e<gx.length;e++){var i=gx[e];i.blockedOn===r&&(i.blockedOn=null)}}for(nl!==null&&em(nl,r),sl!==null&&em(sl,r),al!==null&&em(al,r),B_.forEach(t),G_.forEach(t),e=0;e<Mu.length;e++)i=Mu[e],i.blockedOn===r&&(i.blockedOn=null);for(;0<Mu.length&&(e=Mu[0],e.blockedOn===null);)C5(e),e.blockedOn===null&&Mu.shift()}var Ev=ru.ReactCurrentBatchConfig,kE=!0;function jQ(r,t,e,i){var n=We,s=Ev.transition;Ev.transition=null;try{We=1,PM(r,t,e,i)}finally{We=n,Ev.transition=s}}function zQ(r,t,e,i){var n=We,s=Ev.transition;Ev.transition=null;try{We=4,PM(r,t,e,i)}finally{We=n,Ev.transition=s}}function PM(r,t,e,i){if(kE){var n=L2(r,t,e,i);if(n===null)JR(r,t,i,DE,e),J3(r,i);else if(XQ(n,r,t,e,i))i.stopPropagation();else if(J3(r,i),t&4&&-1<HQ.indexOf(r)){for(;n!==null;){var s=u0(n);if(s!==null&&E5(s),s=L2(r,t,e,i),s===null&&JR(r,t,i,DE,e),s===n)break;n=s}n!==null&&i.stopPropagation()}else JR(r,t,i,null,e)}}var DE=null;function L2(r,t,e,i){if(DE=null,r=CM(i),r=$c(r),r!==null)if(t=Pd(r),t===null)r=null;else if(e=t.tag,e===13){if(r=v5(t),r!==null)return r;r=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;r=null}else t!==r&&(r=null);return DE=r,null}function A5(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FQ()){case AM:return 1;case g5:return 4;case BE:case UQ:return 16;case x5:return 536870912;default:return 16}default:return 16}}var Gu=null,OM=null,cE=null;function S5(){if(cE)return cE;var r,t=OM,e=t.length,i,n="value"in Gu?Gu.value:Gu.textContent,s=n.length;for(r=0;r<e&&t[r]===n[r];r++);var a=e-r;for(i=1;i<=a&&t[e-i]===n[s-i];i++);return cE=n.slice(r,1<i?1-i:void 0)}function dE(r){var t=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&t===13&&(r=13)):r=t,r===10&&(r=13),32<=r||r===13?r:0}function xx(){return!0}function ek(){return!1}function Ds(r){function t(e,i,n,s,a){this._reactName=e,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(e=r[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xx:ek,this.isPropagationStopped=ek,this}return jr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=xx)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=xx)},persist:function(){},isPersistent:xx}),t}var Ty={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},FM=Ds(Ty),h0=jr({},Ty,{view:0,detail:0}),WQ=Ds(h0),VR,jR,rm,N1=jr({},h0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UM,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rm&&(rm&&r.type==="mousemove"?(VR=r.screenX-rm.screenX,jR=r.screenY-rm.screenY):jR=VR=0,rm=r),VR)},movementY:function(r){return"movementY"in r?r.movementY:jR}}),rk=Ds(N1),YQ=jr({},N1,{dataTransfer:0}),qQ=Ds(YQ),KQ=jr({},h0,{relatedTarget:0}),zR=Ds(KQ),ZQ=jr({},Ty,{animationName:0,elapsedTime:0,pseudoElement:0}),QQ=Ds(ZQ),JQ=jr({},Ty,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),tJ=Ds(JQ),eJ=jr({},Ty,{data:0}),ik=Ds(eJ),rJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sJ(r){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(r):(r=nJ[r])?!!t[r]:!1}function UM(){return sJ}var aJ=jr({},h0,{key:function(r){if(r.key){var t=rJ[r.key]||r.key;if(t!=="Unidentified")return t}return r.type==="keypress"?(r=dE(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?iJ[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UM,charCode:function(r){return r.type==="keypress"?dE(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?dE(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),oJ=Ds(aJ),hJ=jr({},N1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nk=Ds(hJ),uJ=jr({},h0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UM}),lJ=Ds(uJ),fJ=jr({},Ty,{propertyName:0,elapsedTime:0,pseudoElement:0}),cJ=Ds(fJ),dJ=jr({},N1,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),pJ=Ds(dJ),vJ=[9,13,27,32],MM=Sh&&"CompositionEvent"in window,x_=null;Sh&&"documentMode"in document&&(x_=document.documentMode);var yJ=Sh&&"TextEvent"in window&&!x_,N5=Sh&&(!MM||x_&&8<x_&&11>=x_),sk=" ",ak=!1;function P5(r,t){switch(r){case"keyup":return vJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O5(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rv=!1;function mJ(r,t){switch(r){case"compositionend":return O5(t);case"keypress":return t.which!==32?null:(ak=!0,sk);case"textInput":return r=t.data,r===sk&&ak?null:r;default:return null}}function _J(r,t){if(rv)return r==="compositionend"||!MM&&P5(r,t)?(r=S5(),cE=OM=Gu=null,rv=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return N5&&t.locale!=="ko"?null:t.data;default:return null}}var gJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ok(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t==="input"?!!gJ[r.type]:t==="textarea"}function F5(r,t,e,i){l5(i),t=$E(t,"onChange"),0<t.length&&(e=new FM("onChange","change",null,e,i),r.push({event:e,listeners:t}))}var b_=null,D_=null;function xJ(r){V5(r,0)}function P1(r){var t=sv(r);if(i5(t))return r}function bJ(r,t){if(r==="change")return t}var U5=!1;if(Sh){var WR;if(Sh){var YR="oninput"in document;if(!YR){var hk=document.createElement("div");hk.setAttribute("oninput","return;"),YR=typeof hk.oninput=="function"}WR=YR}else WR=!1;U5=WR&&(!document.documentMode||9<document.documentMode)}function uk(){b_&&(b_.detachEvent("onpropertychange",M5),D_=b_=null)}function M5(r){if(r.propertyName==="value"&&P1(D_)){var t=[];F5(t,D_,r,CM(r)),p5(xJ,t)}}function TJ(r,t,e){r==="focusin"?(uk(),b_=t,D_=e,b_.attachEvent("onpropertychange",M5)):r==="focusout"&&uk()}function EJ(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return P1(D_)}function wJ(r,t){if(r==="click")return P1(t)}function IJ(r,t){if(r==="input"||r==="change")return P1(t)}function RJ(r,t){return r===t&&(r!==0||1/r===1/t)||r!==r&&t!==t}var za=typeof Object.is=="function"?Object.is:RJ;function $_(r,t){if(za(r,t))return!0;if(typeof r!="object"||r===null||typeof t!="object"||t===null)return!1;var e=Object.keys(r),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var n=e[i];if(!_2.call(t,n)||!za(r[n],t[n]))return!1}return!0}function lk(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function fk(r,t){var e=lk(r);r=0;for(var i;e;){if(e.nodeType===3){if(i=r+e.textContent.length,r<=t&&i>=t)return{node:e,offset:t-r};r=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=lk(e)}}function L5(r,t){return r&&t?r===t?!0:r&&r.nodeType===3?!1:t&&t.nodeType===3?L5(r,t.parentNode):"contains"in r?r.contains(t):r.compareDocumentPosition?!!(r.compareDocumentPosition(t)&16):!1:!1}function B5(){for(var r=window,t=UE();t instanceof r.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)r=t.contentWindow;else break;t=UE(r.document)}return t}function LM(r){var t=r&&r.nodeName&&r.nodeName.toLowerCase();return t&&(t==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||t==="textarea"||r.contentEditable==="true")}function CJ(r){var t=B5(),e=r.focusedElem,i=r.selectionRange;if(t!==e&&e&&e.ownerDocument&&L5(e.ownerDocument.documentElement,e)){if(i!==null&&LM(e)){if(t=i.start,r=i.end,r===void 0&&(r=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(r,e.value.length);else if(r=(t=e.ownerDocument||document)&&t.defaultView||window,r.getSelection){r=r.getSelection();var n=e.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!r.extend&&s>i&&(n=i,i=s,s=n),n=fk(e,s);var a=fk(e,i);n&&a&&(r.rangeCount!==1||r.anchorNode!==n.node||r.anchorOffset!==n.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),r.removeAllRanges(),s>i?(r.addRange(t),r.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),r.addRange(t)))}}for(t=[],r=e;r=r.parentNode;)r.nodeType===1&&t.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)r=t[e],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var AJ=Sh&&"documentMode"in document&&11>=document.documentMode,iv=null,B2=null,T_=null,G2=!1;function ck(r,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;G2||iv==null||iv!==UE(i)||(i=iv,"selectionStart"in i&&LM(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),T_&&$_(T_,i)||(T_=i,i=$E(B2,"onSelect"),0<i.length&&(t=new FM("onSelect","select",null,t,e),r.push({event:t,listeners:i}),t.target=iv)))}function bx(r,t){var e={};return e[r.toLowerCase()]=t.toLowerCase(),e["Webkit"+r]="webkit"+t,e["Moz"+r]="moz"+t,e}var nv={animationend:bx("Animation","AnimationEnd"),animationiteration:bx("Animation","AnimationIteration"),animationstart:bx("Animation","AnimationStart"),transitionend:bx("Transition","TransitionEnd")},qR={},G5={};Sh&&(G5=document.createElement("div").style,"AnimationEvent"in window||(delete nv.animationend.animation,delete nv.animationiteration.animation,delete nv.animationstart.animation),"TransitionEvent"in window||delete nv.transitionend.transition);function O1(r){if(qR[r])return qR[r];if(!nv[r])return r;var t=nv[r],e;for(e in t)if(t.hasOwnProperty(e)&&e in G5)return qR[r]=t[e];return r}var k5=O1("animationend"),D5=O1("animationiteration"),$5=O1("animationstart"),H5=O1("transitionend"),X5=new Map,dk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jl(r,t){X5.set(r,t),Nd(t,[r])}for(var KR=0;KR<dk.length;KR++){var ZR=dk[KR],SJ=ZR.toLowerCase(),NJ=ZR[0].toUpperCase()+ZR.slice(1);jl(SJ,"on"+NJ)}jl(k5,"onAnimationEnd");jl(D5,"onAnimationIteration");jl($5,"onAnimationStart");jl("dblclick","onDoubleClick");jl("focusin","onFocus");jl("focusout","onBlur");jl(H5,"onTransitionEnd");iy("onMouseEnter",["mouseout","mouseover"]);iy("onMouseLeave",["mouseout","mouseover"]);iy("onPointerEnter",["pointerout","pointerover"]);iy("onPointerLeave",["pointerout","pointerover"]);Nd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var a_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(a_));function pk(r,t,e){var i=r.type||"unknown-event";r.currentTarget=e,SQ(i,t,void 0,r),r.currentTarget=null}function V5(r,t){t=(t&4)!==0;for(var e=0;e<r.length;e++){var i=r[e],n=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],h=o.instance,u=o.currentTarget;if(o=o.listener,h!==s&&n.isPropagationStopped())break t;pk(n,o,u),s=h}else for(a=0;a<i.length;a++){if(o=i[a],h=o.instance,u=o.currentTarget,o=o.listener,h!==s&&n.isPropagationStopped())break t;pk(n,o,u),s=h}}}if(LE)throw r=F2,LE=!1,F2=null,r}function _r(r,t){var e=t[X2];e===void 0&&(e=t[X2]=new Set);var i=r+"__bubble";e.has(i)||(j5(t,r,2,!1),e.add(i))}function QR(r,t,e){var i=0;t&&(i|=4),j5(e,r,i,t)}var Tx="_reactListening"+Math.random().toString(36).slice(2);function H_(r){if(!r[Tx]){r[Tx]=!0,Qj.forEach(function(e){e!=="selectionchange"&&(PJ.has(e)||QR(e,!1,r),QR(e,!0,r))});var t=r.nodeType===9?r:r.ownerDocument;t===null||t[Tx]||(t[Tx]=!0,QR("selectionchange",!1,t))}}function j5(r,t,e,i){switch(A5(t)){case 1:var n=jQ;break;case 4:n=zQ;break;default:n=PM}e=n.bind(null,t,e,r),n=void 0,!O2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?r.addEventListener(t,e,{capture:!0,passive:n}):r.addEventListener(t,e,!0):n!==void 0?r.addEventListener(t,e,{passive:n}):r.addEventListener(t,e,!1)}function JR(r,t,e,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===n||h.nodeType===8&&h.parentNode===n))return;a=a.return}for(;o!==null;){if(a=$c(o),a===null)return;if(h=a.tag,h===5||h===6){i=s=a;continue t}o=o.parentNode}}i=i.return}p5(function(){var u=s,l=CM(e),f=[];t:{var c=X5.get(r);if(c!==void 0){var d=FM,v=r;switch(r){case"keypress":if(dE(e)===0)break t;case"keydown":case"keyup":d=oJ;break;case"focusin":v="focus",d=zR;break;case"focusout":v="blur",d=zR;break;case"beforeblur":case"afterblur":d=zR;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=rk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=qQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=lJ;break;case k5:case D5:case $5:d=QQ;break;case H5:d=cJ;break;case"scroll":d=WQ;break;case"wheel":d=pJ;break;case"copy":case"cut":case"paste":d=tJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=nk}var _=(t&4)!==0,m=!_&&r==="scroll",g=_?c!==null?c+"Capture":null:c;_=[];for(var T=u,b;T!==null;){b=T;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,g!==null&&(S=L_(T,g),S!=null&&_.push(X_(T,S,b)))),m)break;T=T.return}0<_.length&&(c=new d(c,v,null,e,l),f.push({event:c,listeners:_}))}}if(!(t&7)){t:{if(c=r==="mouseover"||r==="pointerover",d=r==="mouseout"||r==="pointerout",c&&e!==N2&&(v=e.relatedTarget||e.fromElement)&&($c(v)||v[Nh]))break t;if((d||c)&&(c=l.window===l?l:(c=l.ownerDocument)?c.defaultView||c.parentWindow:window,d?(v=e.relatedTarget||e.toElement,d=u,v=v?$c(v):null,v!==null&&(m=Pd(v),v!==m||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(_=rk,S="onMouseLeave",g="onMouseEnter",T="mouse",(r==="pointerout"||r==="pointerover")&&(_=nk,S="onPointerLeave",g="onPointerEnter",T="pointer"),m=d==null?c:sv(d),b=v==null?c:sv(v),c=new _(S,T+"leave",d,e,l),c.target=m,c.relatedTarget=b,S=null,$c(l)===u&&(_=new _(g,T+"enter",v,e,l),_.target=b,_.relatedTarget=m,S=_),m=S,d&&v)e:{for(_=d,g=v,T=0,b=_;b;b=Zd(b))T++;for(b=0,S=g;S;S=Zd(S))b++;for(;0<T-b;)_=Zd(_),T--;for(;0<b-T;)g=Zd(g),b--;for(;T--;){if(_===g||g!==null&&_===g.alternate)break e;_=Zd(_),g=Zd(g)}_=null}else _=null;d!==null&&vk(f,c,d,_,!1),v!==null&&m!==null&&vk(f,m,v,_,!0)}}t:{if(c=u?sv(u):window,d=c.nodeName&&c.nodeName.toLowerCase(),d==="select"||d==="input"&&c.type==="file")var R=bJ;else if(ok(c))if(U5)R=IJ;else{R=EJ;var U=TJ}else(d=c.nodeName)&&d.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(R=wJ);if(R&&(R=R(r,u))){F5(f,R,e,l);break t}U&&U(r,c,u),r==="focusout"&&(U=c._wrapperState)&&U.controlled&&c.type==="number"&&I2(c,"number",c.value)}switch(U=u?sv(u):window,r){case"focusin":(ok(U)||U.contentEditable==="true")&&(iv=U,B2=u,T_=null);break;case"focusout":T_=B2=iv=null;break;case"mousedown":G2=!0;break;case"contextmenu":case"mouseup":case"dragend":G2=!1,ck(f,e,l);break;case"selectionchange":if(AJ)break;case"keydown":case"keyup":ck(f,e,l)}var L;if(MM)t:{switch(r){case"compositionstart":var $="onCompositionStart";break t;case"compositionend":$="onCompositionEnd";break t;case"compositionupdate":$="onCompositionUpdate";break t}$=void 0}else rv?P5(r,e)&&($="onCompositionEnd"):r==="keydown"&&e.keyCode===229&&($="onCompositionStart");$&&(N5&&e.locale!=="ko"&&(rv||$!=="onCompositionStart"?$==="onCompositionEnd"&&rv&&(L=S5()):(Gu=l,OM="value"in Gu?Gu.value:Gu.textContent,rv=!0)),U=$E(u,$),0<U.length&&($=new ik($,r,null,e,l),f.push({event:$,listeners:U}),L?$.data=L:(L=O5(e),L!==null&&($.data=L)))),(L=yJ?mJ(r,e):_J(r,e))&&(u=$E(u,"onBeforeInput"),0<u.length&&(l=new ik("onBeforeInput","beforeinput",null,e,l),f.push({event:l,listeners:u}),l.data=L))}V5(f,t)})}function X_(r,t,e){return{instance:r,listener:t,currentTarget:e}}function $E(r,t){for(var e=t+"Capture",i=[];r!==null;){var n=r,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=L_(r,e),s!=null&&i.unshift(X_(r,s,n)),s=L_(r,t),s!=null&&i.push(X_(r,s,n))),r=r.return}return i}function Zd(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function vk(r,t,e,i,n){for(var s=t._reactName,a=[];e!==null&&e!==i;){var o=e,h=o.alternate,u=o.stateNode;if(h!==null&&h===i)break;o.tag===5&&u!==null&&(o=u,n?(h=L_(e,s),h!=null&&a.unshift(X_(e,h,o))):n||(h=L_(e,s),h!=null&&a.push(X_(e,h,o)))),e=e.return}a.length!==0&&r.push({event:t,listeners:a})}var OJ=/\r\n?/g,FJ=/\u0000|\uFFFD/g;function yk(r){return(typeof r=="string"?r:""+r).replace(OJ,`
`).replace(FJ,"")}function Ex(r,t,e){if(t=yk(t),yk(r)!==t&&e)throw Error(gt(425))}function HE(){}var k2=null,D2=null;function $2(r,t){return r==="textarea"||r==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var H2=typeof setTimeout=="function"?setTimeout:void 0,UJ=typeof clearTimeout=="function"?clearTimeout:void 0,mk=typeof Promise=="function"?Promise:void 0,MJ=typeof queueMicrotask=="function"?queueMicrotask:typeof mk<"u"?function(r){return mk.resolve(null).then(r).catch(LJ)}:H2;function LJ(r){setTimeout(function(){throw r})}function tC(r,t){var e=t,i=0;do{var n=e.nextSibling;if(r.removeChild(e),n&&n.nodeType===8)if(e=n.data,e==="/$"){if(i===0){r.removeChild(n),k_(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=n}while(e);k_(t)}function ol(r){for(;r!=null;r=r.nextSibling){var t=r.nodeType;if(t===1||t===3)break;if(t===8){if(t=r.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return r}function _k(r){r=r.previousSibling;for(var t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return r;t--}else e==="/$"&&t++}r=r.previousSibling}return null}var Ey=Math.random().toString(36).slice(2),vo="__reactFiber$"+Ey,V_="__reactProps$"+Ey,Nh="__reactContainer$"+Ey,X2="__reactEvents$"+Ey,BJ="__reactListeners$"+Ey,GJ="__reactHandles$"+Ey;function $c(r){var t=r[vo];if(t)return t;for(var e=r.parentNode;e;){if(t=e[Nh]||e[vo]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(r=_k(r);r!==null;){if(e=r[vo])return e;r=_k(r)}return t}r=e,e=r.parentNode}return null}function u0(r){return r=r[vo]||r[Nh],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function sv(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(gt(33))}function F1(r){return r[V_]||null}var V2=[],av=-1;function zl(r){return{current:r}}function xr(r){0>av||(r.current=V2[av],V2[av]=null,av--)}function tr(r,t){av++,V2[av]=r.current,r.current=t}var yl={},En=zl(yl),qn=zl(!1),ld=yl;function ny(r,t){var e=r.type.contextTypes;if(!e)return yl;var i=r.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in e)n[s]=t[s];return i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n),n}function Kn(r){return r=r.childContextTypes,r!=null}function XE(){xr(qn),xr(En)}function gk(r,t,e){if(En.current!==yl)throw Error(gt(168));tr(En,t),tr(qn,e)}function z5(r,t,e){var i=r.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(gt(108,TQ(r)||"Unknown",n));return jr({},e,i)}function VE(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||yl,ld=En.current,tr(En,r),tr(qn,qn.current),!0}function xk(r,t,e){var i=r.stateNode;if(!i)throw Error(gt(169));e?(r=z5(r,t,ld),i.__reactInternalMemoizedMergedChildContext=r,xr(qn),xr(En),tr(En,r)):xr(qn),tr(qn,e)}var nh=null,U1=!1,eC=!1;function W5(r){nh===null?nh=[r]:nh.push(r)}function kJ(r){U1=!0,W5(r)}function Wl(){if(!eC&&nh!==null){eC=!0;var r=0,t=We;try{var e=nh;for(We=1;r<e.length;r++){var i=e[r];do i=i(!0);while(i!==null)}nh=null,U1=!1}catch(n){throw nh!==null&&(nh=nh.slice(r+1)),_5(AM,Wl),n}finally{We=t,eC=!1}}return null}var ov=[],hv=0,jE=null,zE=0,Js=[],ta=0,fd=null,oh=1,hh="";function Pf(r,t){ov[hv++]=zE,ov[hv++]=jE,jE=r,zE=t}function Y5(r,t,e){Js[ta++]=oh,Js[ta++]=hh,Js[ta++]=fd,fd=r;var i=oh;r=hh;var n=32-Ha(i)-1;i&=~(1<<n),e+=1;var s=32-Ha(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,oh=1<<32-Ha(t)+n|e<<n|i,hh=s+r}else oh=1<<s|e<<n|i,hh=r}function BM(r){r.return!==null&&(Pf(r,1),Y5(r,1,0))}function GM(r){for(;r===jE;)jE=ov[--hv],ov[hv]=null,zE=ov[--hv],ov[hv]=null;for(;r===fd;)fd=Js[--ta],Js[ta]=null,hh=Js[--ta],Js[ta]=null,oh=Js[--ta],Js[ta]=null}var Fs=null,Os=null,wr=!1,La=null;function q5(r,t){var e=ra(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=r,t=r.deletions,t===null?(r.deletions=[e],r.flags|=16):t.push(e)}function bk(r,t){switch(r.tag){case 5:var e=r.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(r.stateNode=t,Fs=r,Os=ol(t.firstChild),!0):!1;case 6:return t=r.pendingProps===""||t.nodeType!==3?null:t,t!==null?(r.stateNode=t,Fs=r,Os=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=fd!==null?{id:oh,overflow:hh}:null,r.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ra(18,null,null,0),e.stateNode=t,e.return=r,r.child=e,Fs=r,Os=null,!0):!1;default:return!1}}function j2(r){return(r.mode&1)!==0&&(r.flags&128)===0}function z2(r){if(wr){var t=Os;if(t){var e=t;if(!bk(r,t)){if(j2(r))throw Error(gt(418));t=ol(e.nextSibling);var i=Fs;t&&bk(r,t)?q5(i,e):(r.flags=r.flags&-4097|2,wr=!1,Fs=r)}}else{if(j2(r))throw Error(gt(418));r.flags=r.flags&-4097|2,wr=!1,Fs=r}}}function Tk(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Fs=r}function wx(r){if(r!==Fs)return!1;if(!wr)return Tk(r),wr=!0,!1;var t;if((t=r.tag!==3)&&!(t=r.tag!==5)&&(t=r.type,t=t!=="head"&&t!=="body"&&!$2(r.type,r.memoizedProps)),t&&(t=Os)){if(j2(r))throw K5(),Error(gt(418));for(;t;)q5(r,t),t=ol(t.nextSibling)}if(Tk(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(gt(317));t:{for(r=r.nextSibling,t=0;r;){if(r.nodeType===8){var e=r.data;if(e==="/$"){if(t===0){Os=ol(r.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}r=r.nextSibling}Os=null}}else Os=Fs?ol(r.stateNode.nextSibling):null;return!0}function K5(){for(var r=Os;r;)r=ol(r.nextSibling)}function sy(){Os=Fs=null,wr=!1}function kM(r){La===null?La=[r]:La.push(r)}var DJ=ru.ReactCurrentBatchConfig;function im(r,t,e){if(r=e.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(gt(309));var i=e.stateNode}if(!i)throw Error(gt(147,r));var n=i,s=""+r;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof r!="string")throw Error(gt(284));if(!e._owner)throw Error(gt(290,r))}return r}function Ix(r,t){throw r=Object.prototype.toString.call(t),Error(gt(31,r==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":r))}function Ek(r){var t=r._init;return t(r._payload)}function Z5(r){function t(g,T){if(r){var b=g.deletions;b===null?(g.deletions=[T],g.flags|=16):b.push(T)}}function e(g,T){if(!r)return null;for(;T!==null;)t(g,T),T=T.sibling;return null}function i(g,T){for(g=new Map;T!==null;)T.key!==null?g.set(T.key,T):g.set(T.index,T),T=T.sibling;return g}function n(g,T){return g=fl(g,T),g.index=0,g.sibling=null,g}function s(g,T,b){return g.index=b,r?(b=g.alternate,b!==null?(b=b.index,b<T?(g.flags|=2,T):b):(g.flags|=2,T)):(g.flags|=1048576,T)}function a(g){return r&&g.alternate===null&&(g.flags|=2),g}function o(g,T,b,S){return T===null||T.tag!==6?(T=hC(b,g.mode,S),T.return=g,T):(T=n(T,b),T.return=g,T)}function h(g,T,b,S){var R=b.type;return R===ev?l(g,T,b.props.children,S,b.key):T!==null&&(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===gu&&Ek(R)===T.type)?(S=n(T,b.props),S.ref=im(g,T,b),S.return=g,S):(S=xE(b.type,b.key,b.props,null,g.mode,S),S.ref=im(g,T,b),S.return=g,S)}function u(g,T,b,S){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=uC(b,g.mode,S),T.return=g,T):(T=n(T,b.children||[]),T.return=g,T)}function l(g,T,b,S,R){return T===null||T.tag!==7?(T=jc(b,g.mode,S,R),T.return=g,T):(T=n(T,b),T.return=g,T)}function f(g,T,b){if(typeof T=="string"&&T!==""||typeof T=="number")return T=hC(""+T,g.mode,b),T.return=g,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case px:return b=xE(T.type,T.key,T.props,null,g.mode,b),b.ref=im(g,null,T),b.return=g,b;case tv:return T=uC(T,g.mode,b),T.return=g,T;case gu:var S=T._init;return f(g,S(T._payload),b)}if(n_(T)||Qy(T))return T=jc(T,g.mode,b,null),T.return=g,T;Ix(g,T)}return null}function c(g,T,b,S){var R=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:o(g,T,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case px:return b.key===R?h(g,T,b,S):null;case tv:return b.key===R?u(g,T,b,S):null;case gu:return R=b._init,c(g,T,R(b._payload),S)}if(n_(b)||Qy(b))return R!==null?null:l(g,T,b,S,null);Ix(g,b)}return null}function d(g,T,b,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(b)||null,o(T,g,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case px:return g=g.get(S.key===null?b:S.key)||null,h(T,g,S,R);case tv:return g=g.get(S.key===null?b:S.key)||null,u(T,g,S,R);case gu:var U=S._init;return d(g,T,b,U(S._payload),R)}if(n_(S)||Qy(S))return g=g.get(b)||null,l(T,g,S,R,null);Ix(T,S)}return null}function v(g,T,b,S){for(var R=null,U=null,L=T,$=T=0,k=null;L!==null&&$<b.length;$++){L.index>$?(k=L,L=null):k=L.sibling;var H=c(g,L,b[$],S);if(H===null){L===null&&(L=k);break}r&&L&&H.alternate===null&&t(g,L),T=s(H,T,$),U===null?R=H:U.sibling=H,U=H,L=k}if($===b.length)return e(g,L),wr&&Pf(g,$),R;if(L===null){for(;$<b.length;$++)L=f(g,b[$],S),L!==null&&(T=s(L,T,$),U===null?R=L:U.sibling=L,U=L);return wr&&Pf(g,$),R}for(L=i(g,L);$<b.length;$++)k=d(L,g,$,b[$],S),k!==null&&(r&&k.alternate!==null&&L.delete(k.key===null?$:k.key),T=s(k,T,$),U===null?R=k:U.sibling=k,U=k);return r&&L.forEach(function(it){return t(g,it)}),wr&&Pf(g,$),R}function _(g,T,b,S){var R=Qy(b);if(typeof R!="function")throw Error(gt(150));if(b=R.call(b),b==null)throw Error(gt(151));for(var U=R=null,L=T,$=T=0,k=null,H=b.next();L!==null&&!H.done;$++,H=b.next()){L.index>$?(k=L,L=null):k=L.sibling;var it=c(g,L,H.value,S);if(it===null){L===null&&(L=k);break}r&&L&&it.alternate===null&&t(g,L),T=s(it,T,$),U===null?R=it:U.sibling=it,U=it,L=k}if(H.done)return e(g,L),wr&&Pf(g,$),R;if(L===null){for(;!H.done;$++,H=b.next())H=f(g,H.value,S),H!==null&&(T=s(H,T,$),U===null?R=H:U.sibling=H,U=H);return wr&&Pf(g,$),R}for(L=i(g,L);!H.done;$++,H=b.next())H=d(L,g,$,H.value,S),H!==null&&(r&&H.alternate!==null&&L.delete(H.key===null?$:H.key),T=s(H,T,$),U===null?R=H:U.sibling=H,U=H);return r&&L.forEach(function(tt){return t(g,tt)}),wr&&Pf(g,$),R}function m(g,T,b,S){if(typeof b=="object"&&b!==null&&b.type===ev&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case px:t:{for(var R=b.key,U=T;U!==null;){if(U.key===R){if(R=b.type,R===ev){if(U.tag===7){e(g,U.sibling),T=n(U,b.props.children),T.return=g,g=T;break t}}else if(U.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===gu&&Ek(R)===U.type){e(g,U.sibling),T=n(U,b.props),T.ref=im(g,U,b),T.return=g,g=T;break t}e(g,U);break}else t(g,U);U=U.sibling}b.type===ev?(T=jc(b.props.children,g.mode,S,b.key),T.return=g,g=T):(S=xE(b.type,b.key,b.props,null,g.mode,S),S.ref=im(g,T,b),S.return=g,g=S)}return a(g);case tv:t:{for(U=b.key;T!==null;){if(T.key===U)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){e(g,T.sibling),T=n(T,b.children||[]),T.return=g,g=T;break t}else{e(g,T);break}else t(g,T);T=T.sibling}T=uC(b,g.mode,S),T.return=g,g=T}return a(g);case gu:return U=b._init,m(g,T,U(b._payload),S)}if(n_(b))return v(g,T,b,S);if(Qy(b))return _(g,T,b,S);Ix(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,T!==null&&T.tag===6?(e(g,T.sibling),T=n(T,b),T.return=g,g=T):(e(g,T),T=hC(b,g.mode,S),T.return=g,g=T),a(g)):e(g,T)}return m}var ay=Z5(!0),Q5=Z5(!1),WE=zl(null),YE=null,uv=null,DM=null;function $M(){DM=uv=YE=null}function HM(r){var t=WE.current;xr(WE),r._currentValue=t}function W2(r,t,e){for(;r!==null;){var i=r.alternate;if((r.childLanes&t)!==t?(r.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),r===e)break;r=r.return}}function wv(r,t){YE=r,DM=uv=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&t&&(Yn=!0),r.firstContext=null)}function la(r){var t=r._currentValue;if(DM!==r)if(r={context:r,memoizedValue:t,next:null},uv===null){if(YE===null)throw Error(gt(308));uv=r,YE.dependencies={lanes:0,firstContext:r}}else uv=uv.next=r;return t}var Hc=null;function XM(r){Hc===null?Hc=[r]:Hc.push(r)}function J5(r,t,e,i){var n=t.interleaved;return n===null?(e.next=e,XM(t)):(e.next=n.next,n.next=e),t.interleaved=e,Ph(r,i)}function Ph(r,t){r.lanes|=t;var e=r.alternate;for(e!==null&&(e.lanes|=t),e=r,r=r.return;r!==null;)r.childLanes|=t,e=r.alternate,e!==null&&(e.childLanes|=t),e=r,r=r.return;return e.tag===3?e.stateNode:null}var xu=!1;function VM(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t8(r,t){r=r.updateQueue,t.updateQueue===r&&(t.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Rh(r,t){return{eventTime:r,lane:t,tag:0,payload:null,callback:null,next:null}}function hl(r,t,e){var i=r.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Ph(r,e)}return n=i.interleaved,n===null?(t.next=t,XM(i)):(t.next=n.next,n.next=t),i.interleaved=t,Ph(r,e)}function pE(r,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=r.pendingLanes,e|=i,t.lanes=e,SM(r,e)}}function wk(r,t){var e=r.updateQueue,i=r.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var n=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var a={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};s===null?n=s=a:s=s.next=a,e=e.next}while(e!==null);s===null?n=s=t:s=s.next=t}else n=s=t;e={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},r.updateQueue=e;return}r=e.lastBaseUpdate,r===null?e.firstBaseUpdate=t:r.next=t,e.lastBaseUpdate=t}function qE(r,t,e,i){var n=r.updateQueue;xu=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var h=o,u=h.next;h.next=null,a===null?s=u:a.next=u,a=h;var l=r.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=h))}if(s!==null){var f=n.baseState;a=0,l=u=h=null,o=s;do{var c=o.lane,d=o.eventTime;if((i&c)===c){l!==null&&(l=l.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});t:{var v=r,_=o;switch(c=t,d=e,_.tag){case 1:if(v=_.payload,typeof v=="function"){f=v.call(d,f,c);break t}f=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,c=typeof v=="function"?v.call(d,f,c):v,c==null)break t;f=jr({},f,c);break t;case 2:xu=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,c=n.effects,c===null?n.effects=[o]:c.push(o))}else d={eventTime:d,lane:c,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=d,h=f):l=l.next=d,a|=c;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;c=o,o=c.next,c.next=null,n.lastBaseUpdate=c,n.shared.pending=null}}while(!0);if(l===null&&(h=f),n.baseState=h,n.firstBaseUpdate=u,n.lastBaseUpdate=l,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);dd|=a,r.lanes=a,r.memoizedState=f}}function Ik(r,t,e){if(r=t.effects,t.effects=null,r!==null)for(t=0;t<r.length;t++){var i=r[t],n=i.callback;if(n!==null){if(i.callback=null,i=e,typeof n!="function")throw Error(gt(191,n));n.call(i)}}}var l0={},No=zl(l0),j_=zl(l0),z_=zl(l0);function Xc(r){if(r===l0)throw Error(gt(174));return r}function jM(r,t){switch(tr(z_,t),tr(j_,r),tr(No,l0),r=t.nodeType,r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C2(null,"");break;default:r=r===8?t.parentNode:t,t=r.namespaceURI||null,r=r.tagName,t=C2(t,r)}xr(No),tr(No,t)}function oy(){xr(No),xr(j_),xr(z_)}function e8(r){Xc(z_.current);var t=Xc(No.current),e=C2(t,r.type);t!==e&&(tr(j_,r),tr(No,e))}function zM(r){j_.current===r&&(xr(No),xr(j_))}var $r=zl(0);function KE(r){for(var t=r;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rC=[];function WM(){for(var r=0;r<rC.length;r++)rC[r]._workInProgressVersionPrimary=null;rC.length=0}var vE=ru.ReactCurrentDispatcher,iC=ru.ReactCurrentBatchConfig,cd=0,Xr=null,Ni=null,$i=null,ZE=!1,E_=!1,W_=0,$J=0;function hn(){throw Error(gt(321))}function YM(r,t){if(t===null)return!1;for(var e=0;e<t.length&&e<r.length;e++)if(!za(r[e],t[e]))return!1;return!0}function qM(r,t,e,i,n,s){if(cd=s,Xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vE.current=r===null||r.memoizedState===null?jJ:zJ,r=e(i,n),E_){s=0;do{if(E_=!1,W_=0,25<=s)throw Error(gt(301));s+=1,$i=Ni=null,t.updateQueue=null,vE.current=WJ,r=e(i,n)}while(E_)}if(vE.current=QE,t=Ni!==null&&Ni.next!==null,cd=0,$i=Ni=Xr=null,ZE=!1,t)throw Error(gt(300));return r}function KM(){var r=W_!==0;return W_=0,r}function fo(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $i===null?Xr.memoizedState=$i=r:$i=$i.next=r,$i}function fa(){if(Ni===null){var r=Xr.alternate;r=r!==null?r.memoizedState:null}else r=Ni.next;var t=$i===null?Xr.memoizedState:$i.next;if(t!==null)$i=t,Ni=r;else{if(r===null)throw Error(gt(310));Ni=r,r={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},$i===null?Xr.memoizedState=$i=r:$i=$i.next=r}return $i}function Y_(r,t){return typeof t=="function"?t(r):t}function nC(r){var t=fa(),e=t.queue;if(e===null)throw Error(gt(311));e.lastRenderedReducer=r;var i=Ni,n=i.baseQueue,s=e.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,e.pending=null}if(n!==null){s=n.next,i=i.baseState;var o=a=null,h=null,u=s;do{var l=u.lane;if((cd&l)===l)h!==null&&(h=h.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:r(i,u.action);else{var f={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};h===null?(o=h=f,a=i):h=h.next=f,Xr.lanes|=l,dd|=l}u=u.next}while(u!==null&&u!==s);h===null?a=i:h.next=o,za(i,t.memoizedState)||(Yn=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=h,e.lastRenderedState=i}if(r=e.interleaved,r!==null){n=r;do s=n.lane,Xr.lanes|=s,dd|=s,n=n.next;while(n!==r)}else n===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function sC(r){var t=fa(),e=t.queue;if(e===null)throw Error(gt(311));e.lastRenderedReducer=r;var i=e.dispatch,n=e.pending,s=t.memoizedState;if(n!==null){e.pending=null;var a=n=n.next;do s=r(s,a.action),a=a.next;while(a!==n);za(s,t.memoizedState)||(Yn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),e.lastRenderedState=s}return[s,i]}function r8(){}function i8(r,t){var e=Xr,i=fa(),n=t(),s=!za(i.memoizedState,n);if(s&&(i.memoizedState=n,Yn=!0),i=i.queue,ZM(a8.bind(null,e,i,r),[r]),i.getSnapshot!==t||s||$i!==null&&$i.memoizedState.tag&1){if(e.flags|=2048,q_(9,s8.bind(null,e,i,n,t),void 0,null),zi===null)throw Error(gt(349));cd&30||n8(e,t,n)}return n}function n8(r,t,e){r.flags|=16384,r={getSnapshot:t,value:e},t=Xr.updateQueue,t===null?(t={lastEffect:null,stores:null},Xr.updateQueue=t,t.stores=[r]):(e=t.stores,e===null?t.stores=[r]:e.push(r))}function s8(r,t,e,i){t.value=e,t.getSnapshot=i,o8(t)&&h8(r)}function a8(r,t,e){return e(function(){o8(t)&&h8(r)})}function o8(r){var t=r.getSnapshot;r=r.value;try{var e=t();return!za(r,e)}catch{return!0}}function h8(r){var t=Ph(r,1);t!==null&&Xa(t,r,1,-1)}function Rk(r){var t=fo();return typeof r=="function"&&(r=r()),t.memoizedState=t.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Y_,lastRenderedState:r},t.queue=r,r=r.dispatch=VJ.bind(null,Xr,r),[t.memoizedState,r]}function q_(r,t,e,i){return r={tag:r,create:t,destroy:e,deps:i,next:null},t=Xr.updateQueue,t===null?(t={lastEffect:null,stores:null},Xr.updateQueue=t,t.lastEffect=r.next=r):(e=t.lastEffect,e===null?t.lastEffect=r.next=r:(i=e.next,e.next=r,r.next=i,t.lastEffect=r)),r}function u8(){return fa().memoizedState}function yE(r,t,e,i){var n=fo();Xr.flags|=r,n.memoizedState=q_(1|t,e,void 0,i===void 0?null:i)}function M1(r,t,e,i){var n=fa();i=i===void 0?null:i;var s=void 0;if(Ni!==null){var a=Ni.memoizedState;if(s=a.destroy,i!==null&&YM(i,a.deps)){n.memoizedState=q_(t,e,s,i);return}}Xr.flags|=r,n.memoizedState=q_(1|t,e,s,i)}function Ck(r,t){return yE(8390656,8,r,t)}function ZM(r,t){return M1(2048,8,r,t)}function l8(r,t){return M1(4,2,r,t)}function f8(r,t){return M1(4,4,r,t)}function c8(r,t){if(typeof t=="function")return r=r(),t(r),function(){t(null)};if(t!=null)return r=r(),t.current=r,function(){t.current=null}}function d8(r,t,e){return e=e!=null?e.concat([r]):null,M1(4,4,c8.bind(null,t,r),e)}function QM(){}function p8(r,t){var e=fa();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&YM(t,i[1])?i[0]:(e.memoizedState=[r,t],r)}function v8(r,t){var e=fa();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&YM(t,i[1])?i[0]:(r=r(),e.memoizedState=[r,t],r)}function y8(r,t,e){return cd&21?(za(e,t)||(e=b5(),Xr.lanes|=e,dd|=e,r.baseState=!0),t):(r.baseState&&(r.baseState=!1,Yn=!0),r.memoizedState=e)}function HJ(r,t){var e=We;We=e!==0&&4>e?e:4,r(!0);var i=iC.transition;iC.transition={};try{r(!1),t()}finally{We=e,iC.transition=i}}function m8(){return fa().memoizedState}function XJ(r,t,e){var i=ll(r);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},_8(r))g8(t,e);else if(e=J5(r,t,e,i),e!==null){var n=Gn();Xa(e,r,i,n),x8(e,t,i)}}function VJ(r,t,e){var i=ll(r),n={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(_8(r))g8(t,n);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,e);if(n.hasEagerState=!0,n.eagerState=o,za(o,a)){var h=t.interleaved;h===null?(n.next=n,XM(t)):(n.next=h.next,h.next=n),t.interleaved=n;return}}catch{}finally{}e=J5(r,t,n,i),e!==null&&(n=Gn(),Xa(e,r,i,n),x8(e,t,i))}}function _8(r){var t=r.alternate;return r===Xr||t!==null&&t===Xr}function g8(r,t){E_=ZE=!0;var e=r.pending;e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t}function x8(r,t,e){if(e&4194240){var i=t.lanes;i&=r.pendingLanes,e|=i,t.lanes=e,SM(r,e)}}var QE={readContext:la,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},jJ={readContext:la,useCallback:function(r,t){return fo().memoizedState=[r,t===void 0?null:t],r},useContext:la,useEffect:Ck,useImperativeHandle:function(r,t,e){return e=e!=null?e.concat([r]):null,yE(4194308,4,c8.bind(null,t,r),e)},useLayoutEffect:function(r,t){return yE(4194308,4,r,t)},useInsertionEffect:function(r,t){return yE(4,2,r,t)},useMemo:function(r,t){var e=fo();return t=t===void 0?null:t,r=r(),e.memoizedState=[r,t],r},useReducer:function(r,t,e){var i=fo();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:t},i.queue=r,r=r.dispatch=XJ.bind(null,Xr,r),[i.memoizedState,r]},useRef:function(r){var t=fo();return r={current:r},t.memoizedState=r},useState:Rk,useDebugValue:QM,useDeferredValue:function(r){return fo().memoizedState=r},useTransition:function(){var r=Rk(!1),t=r[0];return r=HJ.bind(null,r[1]),fo().memoizedState=r,[t,r]},useMutableSource:function(){},useSyncExternalStore:function(r,t,e){var i=Xr,n=fo();if(wr){if(e===void 0)throw Error(gt(407));e=e()}else{if(e=t(),zi===null)throw Error(gt(349));cd&30||n8(i,t,e)}n.memoizedState=e;var s={value:e,getSnapshot:t};return n.queue=s,Ck(a8.bind(null,i,s,r),[r]),i.flags|=2048,q_(9,s8.bind(null,i,s,e,t),void 0,null),e},useId:function(){var r=fo(),t=zi.identifierPrefix;if(wr){var e=hh,i=oh;e=(i&~(1<<32-Ha(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=W_++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=$J++,t=":"+t+"r"+e.toString(32)+":";return r.memoizedState=t},unstable_isNewReconciler:!1},zJ={readContext:la,useCallback:p8,useContext:la,useEffect:ZM,useImperativeHandle:d8,useInsertionEffect:l8,useLayoutEffect:f8,useMemo:v8,useReducer:nC,useRef:u8,useState:function(){return nC(Y_)},useDebugValue:QM,useDeferredValue:function(r){var t=fa();return y8(t,Ni.memoizedState,r)},useTransition:function(){var r=nC(Y_)[0],t=fa().memoizedState;return[r,t]},useMutableSource:r8,useSyncExternalStore:i8,useId:m8,unstable_isNewReconciler:!1},WJ={readContext:la,useCallback:p8,useContext:la,useEffect:ZM,useImperativeHandle:d8,useInsertionEffect:l8,useLayoutEffect:f8,useMemo:v8,useReducer:sC,useRef:u8,useState:function(){return sC(Y_)},useDebugValue:QM,useDeferredValue:function(r){var t=fa();return Ni===null?t.memoizedState=r:y8(t,Ni.memoizedState,r)},useTransition:function(){var r=sC(Y_)[0],t=fa().memoizedState;return[r,t]},useMutableSource:r8,useSyncExternalStore:i8,useId:m8,unstable_isNewReconciler:!1};function Ua(r,t){if(r&&r.defaultProps){t=jr({},t),r=r.defaultProps;for(var e in r)t[e]===void 0&&(t[e]=r[e]);return t}return t}function Y2(r,t,e,i){t=r.memoizedState,e=e(i,t),e=e==null?t:jr({},t,e),r.memoizedState=e,r.lanes===0&&(r.updateQueue.baseState=e)}var L1={isMounted:function(r){return(r=r._reactInternals)?Pd(r)===r:!1},enqueueSetState:function(r,t,e){r=r._reactInternals;var i=Gn(),n=ll(r),s=Rh(i,n);s.payload=t,e!=null&&(s.callback=e),t=hl(r,s,n),t!==null&&(Xa(t,r,n,i),pE(t,r,n))},enqueueReplaceState:function(r,t,e){r=r._reactInternals;var i=Gn(),n=ll(r),s=Rh(i,n);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=hl(r,s,n),t!==null&&(Xa(t,r,n,i),pE(t,r,n))},enqueueForceUpdate:function(r,t){r=r._reactInternals;var e=Gn(),i=ll(r),n=Rh(e,i);n.tag=2,t!=null&&(n.callback=t),t=hl(r,n,i),t!==null&&(Xa(t,r,i,e),pE(t,r,i))}};function Ak(r,t,e,i,n,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!$_(e,i)||!$_(n,s):!0}function b8(r,t,e){var i=!1,n=yl,s=t.contextType;return typeof s=="object"&&s!==null?s=la(s):(n=Kn(t)?ld:En.current,i=t.contextTypes,s=(i=i!=null)?ny(r,n):yl),t=new t(e,s),r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=L1,r.stateNode=t,t._reactInternals=r,i&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=s),t}function Sk(r,t,e,i){r=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==r&&L1.enqueueReplaceState(t,t.state,null)}function q2(r,t,e,i){var n=r.stateNode;n.props=e,n.state=r.memoizedState,n.refs={},VM(r);var s=t.contextType;typeof s=="object"&&s!==null?n.context=la(s):(s=Kn(t)?ld:En.current,n.context=ny(r,s)),n.state=r.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Y2(r,t,s,e),n.state=r.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&L1.enqueueReplaceState(n,n.state,null),qE(r,e,n,i),n.state=r.memoizedState),typeof n.componentDidMount=="function"&&(r.flags|=4194308)}function hy(r,t){try{var e="",i=t;do e+=bQ(i),i=i.return;while(i);var n=e}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:t,stack:n,digest:null}}function aC(r,t,e){return{value:r,source:null,stack:e??null,digest:t??null}}function K2(r,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var YJ=typeof WeakMap=="function"?WeakMap:Map;function T8(r,t,e){e=Rh(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){tw||(tw=!0,aP=i),K2(r,t)},e}function E8(r,t,e){e=Rh(-1,e),e.tag=3;var i=r.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;e.payload=function(){return i(n)},e.callback=function(){K2(r,t)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){K2(r,t),typeof i!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),e}function Nk(r,t,e){var i=r.pingCache;if(i===null){i=r.pingCache=new YJ;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(e)||(n.add(e),r=htt.bind(null,r,t,e),t.then(r,r))}function Pk(r){do{var t;if((t=r.tag===13)&&(t=r.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return r;r=r.return}while(r!==null);return null}function Ok(r,t,e,i,n){return r.mode&1?(r.flags|=65536,r.lanes=n,r):(r===t?r.flags|=65536:(r.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Rh(-1,1),t.tag=2,hl(e,t,1))),e.lanes|=1),r)}var qJ=ru.ReactCurrentOwner,Yn=!1;function An(r,t,e,i){t.child=r===null?Q5(t,null,e,i):ay(t,r.child,e,i)}function Fk(r,t,e,i,n){e=e.render;var s=t.ref;return wv(t,n),i=qM(r,t,e,i,s,n),e=KM(),r!==null&&!Yn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~n,Oh(r,t,n)):(wr&&e&&BM(t),t.flags|=1,An(r,t,i,n),t.child)}function Uk(r,t,e,i,n){if(r===null){var s=e.type;return typeof s=="function"&&!aL(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=s,w8(r,t,s,i,n)):(r=xE(e.type,null,i,t,t.mode,n),r.ref=t.ref,r.return=t,t.child=r)}if(s=r.child,!(r.lanes&n)){var a=s.memoizedProps;if(e=e.compare,e=e!==null?e:$_,e(a,i)&&r.ref===t.ref)return Oh(r,t,n)}return t.flags|=1,r=fl(s,i),r.ref=t.ref,r.return=t,t.child=r}function w8(r,t,e,i,n){if(r!==null){var s=r.memoizedProps;if($_(s,i)&&r.ref===t.ref)if(Yn=!1,t.pendingProps=i=s,(r.lanes&n)!==0)r.flags&131072&&(Yn=!0);else return t.lanes=r.lanes,Oh(r,t,n)}return Z2(r,t,e,i,n)}function I8(r,t,e){var i=t.pendingProps,n=i.children,s=r!==null?r.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(fv,gs),gs|=e;else{if(!(e&1073741824))return r=s!==null?s.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:r,cachePool:null,transitions:null},t.updateQueue=null,tr(fv,gs),gs|=r,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:e,tr(fv,gs),gs|=i}else s!==null?(i=s.baseLanes|e,t.memoizedState=null):i=e,tr(fv,gs),gs|=i;return An(r,t,n,e),t.child}function R8(r,t){var e=t.ref;(r===null&&e!==null||r!==null&&r.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Z2(r,t,e,i,n){var s=Kn(e)?ld:En.current;return s=ny(t,s),wv(t,n),e=qM(r,t,e,i,s,n),i=KM(),r!==null&&!Yn?(t.updateQueue=r.updateQueue,t.flags&=-2053,r.lanes&=~n,Oh(r,t,n)):(wr&&i&&BM(t),t.flags|=1,An(r,t,e,n),t.child)}function Mk(r,t,e,i,n){if(Kn(e)){var s=!0;VE(t)}else s=!1;if(wv(t,n),t.stateNode===null)mE(r,t),b8(t,e,i),q2(t,e,i,n),i=!0;else if(r===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var h=a.context,u=e.contextType;typeof u=="object"&&u!==null?u=la(u):(u=Kn(e)?ld:En.current,u=ny(t,u));var l=e.getDerivedStateFromProps,f=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||h!==u)&&Sk(t,a,i,u),xu=!1;var c=t.memoizedState;a.state=c,qE(t,i,a,n),h=t.memoizedState,o!==i||c!==h||qn.current||xu?(typeof l=="function"&&(Y2(t,e,l,i),h=t.memoizedState),(o=xu||Ak(t,e,o,i,c,h,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),a.props=i,a.state=h,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,t8(r,t),o=t.memoizedProps,u=t.type===t.elementType?o:Ua(t.type,o),a.props=u,f=t.pendingProps,c=a.context,h=e.contextType,typeof h=="object"&&h!==null?h=la(h):(h=Kn(e)?ld:En.current,h=ny(t,h));var d=e.getDerivedStateFromProps;(l=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||c!==h)&&Sk(t,a,i,h),xu=!1,c=t.memoizedState,a.state=c,qE(t,i,a,n);var v=t.memoizedState;o!==f||c!==v||qn.current||xu?(typeof d=="function"&&(Y2(t,e,d,i),v=t.memoizedState),(u=xu||Ak(t,e,u,i,c,v,h)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,v,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,v,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&c===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&c===r.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),a.props=i,a.state=v,a.context=h,i=u):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&c===r.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&c===r.memoizedState||(t.flags|=1024),i=!1)}return Q2(r,t,e,i,s,n)}function Q2(r,t,e,i,n,s){R8(r,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&xk(t,e,!1),Oh(r,t,s);i=t.stateNode,qJ.current=t;var o=a&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,r!==null&&a?(t.child=ay(t,r.child,null,s),t.child=ay(t,null,o,s)):An(r,t,o,s),t.memoizedState=i.state,n&&xk(t,e,!0),t.child}function C8(r){var t=r.stateNode;t.pendingContext?gk(r,t.pendingContext,t.pendingContext!==t.context):t.context&&gk(r,t.context,!1),jM(r,t.containerInfo)}function Lk(r,t,e,i,n){return sy(),kM(n),t.flags|=256,An(r,t,e,i),t.child}var J2={dehydrated:null,treeContext:null,retryLane:0};function tP(r){return{baseLanes:r,cachePool:null,transitions:null}}function A8(r,t,e){var i=t.pendingProps,n=$r.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(r===null||r.memoizedState!==null)&&(n|=1),tr($r,n&1),r===null)return z2(t),r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(t.mode&1?r.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,r=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=k1(a,i,0,null),r=jc(r,i,e,null),s.return=t,r.return=t,s.sibling=r,t.child=s,t.child.memoizedState=tP(e),t.memoizedState=J2,r):JM(t,a));if(n=r.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return KJ(r,t,a,i,o,n,e);if(s){s=i.fallback,a=t.mode,n=r.child,o=n.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=h,t.deletions=null):(i=fl(n,h),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=fl(o,s):(s=jc(s,a,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=r.child.memoizedState,a=a===null?tP(e):{baseLanes:a.baseLanes|e,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~e,t.memoizedState=J2,i}return s=r.child,r=s.sibling,i=fl(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,r!==null&&(e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)),t.child=i,t.memoizedState=null,i}function JM(r,t){return t=k1({mode:"visible",children:t},r.mode,0,null),t.return=r,r.child=t}function Rx(r,t,e,i){return i!==null&&kM(i),ay(t,r.child,null,e),r=JM(t,t.pendingProps.children),r.flags|=2,t.memoizedState=null,r}function KJ(r,t,e,i,n,s,a){if(e)return t.flags&256?(t.flags&=-257,i=aC(Error(gt(422))),Rx(r,t,a,i)):t.memoizedState!==null?(t.child=r.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=k1({mode:"visible",children:i.children},n,0,null),s=jc(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&ay(t,r.child,null,a),t.child.memoizedState=tP(a),t.memoizedState=J2,s);if(!(t.mode&1))return Rx(r,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(gt(419)),i=aC(s,i,void 0),Rx(r,t,a,i)}if(o=(a&r.childLanes)!==0,Yn||o){if(i=zi,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Ph(r,n),Xa(i,r,n,-1))}return sL(),i=aC(Error(gt(421))),Rx(r,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=r.child,t=utt.bind(null,r),n._reactRetry=t,null):(r=s.treeContext,Os=ol(n.nextSibling),Fs=t,wr=!0,La=null,r!==null&&(Js[ta++]=oh,Js[ta++]=hh,Js[ta++]=fd,oh=r.id,hh=r.overflow,fd=t),t=JM(t,i.children),t.flags|=4096,t)}function Bk(r,t,e){r.lanes|=t;var i=r.alternate;i!==null&&(i.lanes|=t),W2(r.return,t,e)}function oC(r,t,e,i,n){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=n)}function S8(r,t,e){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(An(r,t,i.children,e),i=$r.current,i&2)i=i&1|2,t.flags|=128;else{if(r!==null&&r.flags&128)t:for(r=t.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Bk(r,e,t);else if(r.tag===19)Bk(r,e,t);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break t;for(;r.sibling===null;){if(r.return===null||r.return===t)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}i&=1}if(tr($r,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(e=t.child,n=null;e!==null;)r=e.alternate,r!==null&&KE(r)===null&&(n=e),e=e.sibling;e=n,e===null?(n=t.child,t.child=null):(n=e.sibling,e.sibling=null),oC(t,!1,n,e,s);break;case"backwards":for(e=null,n=t.child,t.child=null;n!==null;){if(r=n.alternate,r!==null&&KE(r)===null){t.child=n;break}r=n.sibling,n.sibling=e,e=n,n=r}oC(t,!0,e,null,s);break;case"together":oC(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mE(r,t){!(t.mode&1)&&r!==null&&(r.alternate=null,t.alternate=null,t.flags|=2)}function Oh(r,t,e){if(r!==null&&(t.dependencies=r.dependencies),dd|=t.lanes,!(e&t.childLanes))return null;if(r!==null&&t.child!==r.child)throw Error(gt(153));if(t.child!==null){for(r=t.child,e=fl(r,r.pendingProps),t.child=e,e.return=t;r.sibling!==null;)r=r.sibling,e=e.sibling=fl(r,r.pendingProps),e.return=t;e.sibling=null}return t.child}function ZJ(r,t,e){switch(t.tag){case 3:C8(t),sy();break;case 5:e8(t);break;case 1:Kn(t.type)&&VE(t);break;case 4:jM(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;tr(WE,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(tr($r,$r.current&1),t.flags|=128,null):e&t.child.childLanes?A8(r,t,e):(tr($r,$r.current&1),r=Oh(r,t,e),r!==null?r.sibling:null);tr($r,$r.current&1);break;case 19:if(i=(e&t.childLanes)!==0,r.flags&128){if(i)return S8(r,t,e);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),tr($r,$r.current),i)break;return null;case 22:case 23:return t.lanes=0,I8(r,t,e)}return Oh(r,t,e)}var N8,eP,P8,O8;N8=function(r,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)r.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};eP=function(){};P8=function(r,t,e,i){var n=r.memoizedProps;if(n!==i){r=t.stateNode,Xc(No.current);var s=null;switch(e){case"input":n=E2(r,n),i=E2(r,i),s=[];break;case"select":n=jr({},n,{value:void 0}),i=jr({},i,{value:void 0}),s=[];break;case"textarea":n=R2(r,n),i=R2(r,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(r.onclick=HE)}A2(e,i);var a;e=null;for(u in n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(a in o)o.hasOwnProperty(a)&&(e||(e={}),e[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(U_.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var h=i[u];if(o=n!=null?n[u]:void 0,i.hasOwnProperty(u)&&h!==o&&(h!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(e||(e={}),e[a]="");for(a in h)h.hasOwnProperty(a)&&o[a]!==h[a]&&(e||(e={}),e[a]=h[a])}else e||(s||(s=[]),s.push(u,e)),e=h;else u==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,o=o?o.__html:void 0,h!=null&&o!==h&&(s=s||[]).push(u,h)):u==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(u,""+h):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(U_.hasOwnProperty(u)?(h!=null&&u==="onScroll"&&_r("scroll",r),s||o===h||(s=[])):(s=s||[]).push(u,h))}e&&(s=s||[]).push("style",e);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};O8=function(r,t,e,i){e!==i&&(t.flags|=4)};function nm(r,t){if(!wr)switch(r.tailMode){case"hidden":t=r.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?r.tail=null:e.sibling=null;break;case"collapsed":e=r.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||r.tail===null?r.tail=null:r.tail.sibling=null:i.sibling=null}}function un(r){var t=r.alternate!==null&&r.alternate.child===r.child,e=0,i=0;if(t)for(var n=r.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=r,n=n.sibling;else for(n=r.child;n!==null;)e|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=r,n=n.sibling;return r.subtreeFlags|=i,r.childLanes=e,t}function QJ(r,t,e){var i=t.pendingProps;switch(GM(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return Kn(t.type)&&XE(),un(t),null;case 3:return i=t.stateNode,oy(),xr(qn),xr(En),WM(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(r===null||r.child===null)&&(wx(t)?t.flags|=4:r===null||r.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,La!==null&&(uP(La),La=null))),eP(r,t),un(t),null;case 5:zM(t);var n=Xc(z_.current);if(e=t.type,r!==null&&t.stateNode!=null)P8(r,t,e,i,n),r.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(gt(166));return un(t),null}if(r=Xc(No.current),wx(t)){i=t.stateNode,e=t.type;var s=t.memoizedProps;switch(i[vo]=t,i[V_]=s,r=(t.mode&1)!==0,e){case"dialog":_r("cancel",i),_r("close",i);break;case"iframe":case"object":case"embed":_r("load",i);break;case"video":case"audio":for(n=0;n<a_.length;n++)_r(a_[n],i);break;case"source":_r("error",i);break;case"img":case"image":case"link":_r("error",i),_r("load",i);break;case"details":_r("toggle",i);break;case"input":z3(i,s),_r("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},_r("invalid",i);break;case"textarea":Y3(i,s),_r("invalid",i)}A2(e,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Ex(i.textContent,o,r),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Ex(i.textContent,o,r),n=["children",""+o]):U_.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&_r("scroll",i)}switch(e){case"input":vx(i),W3(i,s,!0);break;case"textarea":vx(i),q3(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=HE)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=a5(e)),r==="http://www.w3.org/1999/xhtml"?e==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof i.is=="string"?r=a.createElement(e,{is:i.is}):(r=a.createElement(e),e==="select"&&(a=r,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):r=a.createElementNS(r,e),r[vo]=t,r[V_]=i,N8(r,t,!1,!1),t.stateNode=r;t:{switch(a=S2(e,i),e){case"dialog":_r("cancel",r),_r("close",r),n=i;break;case"iframe":case"object":case"embed":_r("load",r),n=i;break;case"video":case"audio":for(n=0;n<a_.length;n++)_r(a_[n],r);n=i;break;case"source":_r("error",r),n=i;break;case"img":case"image":case"link":_r("error",r),_r("load",r),n=i;break;case"details":_r("toggle",r),n=i;break;case"input":z3(r,i),n=E2(r,i),_r("invalid",r);break;case"option":n=i;break;case"select":r._wrapperState={wasMultiple:!!i.multiple},n=jr({},i,{value:void 0}),_r("invalid",r);break;case"textarea":Y3(r,i),n=R2(r,i),_r("invalid",r);break;default:n=i}A2(e,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var h=o[s];s==="style"?u5(r,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&o5(r,h)):s==="children"?typeof h=="string"?(e!=="textarea"||h!=="")&&M_(r,h):typeof h=="number"&&M_(r,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(U_.hasOwnProperty(s)?h!=null&&s==="onScroll"&&_r("scroll",r):h!=null&&EM(r,s,h,a))}switch(e){case"input":vx(r),W3(r,i,!1);break;case"textarea":vx(r),q3(r);break;case"option":i.value!=null&&r.setAttribute("value",""+vl(i.value));break;case"select":r.multiple=!!i.multiple,s=i.value,s!=null?xv(r,!!i.multiple,s,!1):i.defaultValue!=null&&xv(r,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(r.onclick=HE)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(r&&t.stateNode!=null)O8(r,t,r.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(gt(166));if(e=Xc(z_.current),Xc(No.current),wx(t)){if(i=t.stateNode,e=t.memoizedProps,i[vo]=t,(s=i.nodeValue!==e)&&(r=Fs,r!==null))switch(r.tag){case 3:Ex(i.nodeValue,e,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Ex(i.nodeValue,e,(r.mode&1)!==0)}s&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[vo]=t,t.stateNode=i}return un(t),null;case 13:if(xr($r),i=t.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wr&&Os!==null&&t.mode&1&&!(t.flags&128))K5(),sy(),t.flags|=98560,s=!1;else if(s=wx(t),i!==null&&i.dehydrated!==null){if(r===null){if(!s)throw Error(gt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(gt(317));s[vo]=t}else sy(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),s=!1}else La!==null&&(uP(La),La=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(r!==null&&r.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(r===null||$r.current&1?Ui===0&&(Ui=3):sL())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return oy(),eP(r,t),r===null&&H_(t.stateNode.containerInfo),un(t),null;case 10:return HM(t.type._context),un(t),null;case 17:return Kn(t.type)&&XE(),un(t),null;case 19:if(xr($r),s=t.memoizedState,s===null)return un(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)nm(s,!1);else{if(Ui!==0||r!==null&&r.flags&128)for(r=t.child;r!==null;){if(a=KE(r),a!==null){for(t.flags|=128,nm(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)s=e,r=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e=e.sibling;return tr($r,$r.current&1|2),t.child}r=r.sibling}s.tail!==null&&ei()>uy&&(t.flags|=128,i=!0,nm(s,!1),t.lanes=4194304)}else{if(!i)if(r=KE(a),r!==null){if(t.flags|=128,i=!0,e=r.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),nm(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!wr)return un(t),null}else 2*ei()-s.renderingStartTime>uy&&e!==1073741824&&(t.flags|=128,i=!0,nm(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(e=s.last,e!==null?e.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ei(),t.sibling=null,e=$r.current,tr($r,i?e&1|2:e&1),t):(un(t),null);case 22:case 23:return nL(),i=t.memoizedState!==null,r!==null&&r.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?gs&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(gt(156,t.tag))}function JJ(r,t){switch(GM(t),t.tag){case 1:return Kn(t.type)&&XE(),r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 3:return oy(),xr(qn),xr(En),WM(),r=t.flags,r&65536&&!(r&128)?(t.flags=r&-65537|128,t):null;case 5:return zM(t),null;case 13:if(xr($r),r=t.memoizedState,r!==null&&r.dehydrated!==null){if(t.alternate===null)throw Error(gt(340));sy()}return r=t.flags,r&65536?(t.flags=r&-65537|128,t):null;case 19:return xr($r),null;case 4:return oy(),null;case 10:return HM(t.type._context),null;case 22:case 23:return nL(),null;case 24:return null;default:return null}}var Cx=!1,ln=!1,ttt=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function lv(r,t){var e=r.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){Wr(r,t,i)}else e.current=null}function rP(r,t,e){try{e()}catch(i){Wr(r,t,i)}}var Gk=!1;function ett(r,t){if(k2=kE,r=B5(),LM(r)){if("selectionStart"in r)var e={start:r.selectionStart,end:r.selectionEnd};else t:{e=(e=r.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var a=0,o=-1,h=-1,u=0,l=0,f=r,c=null;e:for(;;){for(var d;f!==e||n!==0&&f.nodeType!==3||(o=a+n),f!==s||i!==0&&f.nodeType!==3||(h=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)c=f,f=d;for(;;){if(f===r)break e;if(c===e&&++u===n&&(o=a),c===s&&++l===i&&(h=a),(d=f.nextSibling)!==null)break;f=c,c=f.parentNode}f=d}e=o===-1||h===-1?null:{start:o,end:h}}else e=null}e=e||{start:0,end:0}}else e=null;for(D2={focusedElem:r,selectionRange:e},kE=!1,Vt=t;Vt!==null;)if(t=Vt,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,Vt=r;else for(;Vt!==null;){t=Vt;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,m=v.memoizedState,g=t.stateNode,T=g.getSnapshotBeforeUpdate(t.elementType===t.type?_:Ua(t.type,_),m);g.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gt(163))}}catch(S){Wr(t,t.return,S)}if(r=t.sibling,r!==null){r.return=t.return,Vt=r;break}Vt=t.return}return v=Gk,Gk=!1,v}function w_(r,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&r)===r){var s=n.destroy;n.destroy=void 0,s!==void 0&&rP(t,e,s)}n=n.next}while(n!==i)}}function B1(r,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&r)===r){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function iP(r){var t=r.ref;if(t!==null){var e=r.stateNode;switch(r.tag){case 5:r=e;break;default:r=e}typeof t=="function"?t(r):t.current=r}}function F8(r){var t=r.alternate;t!==null&&(r.alternate=null,F8(t)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(t=r.stateNode,t!==null&&(delete t[vo],delete t[V_],delete t[X2],delete t[BJ],delete t[GJ])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function U8(r){return r.tag===5||r.tag===3||r.tag===4}function kk(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||U8(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function nP(r,t,e){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(r,t):e.insertBefore(r,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(r,e)):(t=e,t.appendChild(r)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=HE));else if(i!==4&&(r=r.child,r!==null))for(nP(r,t,e),r=r.sibling;r!==null;)nP(r,t,e),r=r.sibling}function sP(r,t,e){var i=r.tag;if(i===5||i===6)r=r.stateNode,t?e.insertBefore(r,t):e.appendChild(r);else if(i!==4&&(r=r.child,r!==null))for(sP(r,t,e),r=r.sibling;r!==null;)sP(r,t,e),r=r.sibling}var Ki=null,Ma=!1;function vu(r,t,e){for(e=e.child;e!==null;)M8(r,t,e),e=e.sibling}function M8(r,t,e){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(S1,e)}catch{}switch(e.tag){case 5:ln||lv(e,t);case 6:var i=Ki,n=Ma;Ki=null,vu(r,t,e),Ki=i,Ma=n,Ki!==null&&(Ma?(r=Ki,e=e.stateNode,r.nodeType===8?r.parentNode.removeChild(e):r.removeChild(e)):Ki.removeChild(e.stateNode));break;case 18:Ki!==null&&(Ma?(r=Ki,e=e.stateNode,r.nodeType===8?tC(r.parentNode,e):r.nodeType===1&&tC(r,e),k_(r)):tC(Ki,e.stateNode));break;case 4:i=Ki,n=Ma,Ki=e.stateNode.containerInfo,Ma=!0,vu(r,t,e),Ki=i,Ma=n;break;case 0:case 11:case 14:case 15:if(!ln&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&rP(e,t,a),n=n.next}while(n!==i)}vu(r,t,e);break;case 1:if(!ln&&(lv(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(o){Wr(e,t,o)}vu(r,t,e);break;case 21:vu(r,t,e);break;case 22:e.mode&1?(ln=(i=ln)||e.memoizedState!==null,vu(r,t,e),ln=i):vu(r,t,e);break;default:vu(r,t,e)}}function Dk(r){var t=r.updateQueue;if(t!==null){r.updateQueue=null;var e=r.stateNode;e===null&&(e=r.stateNode=new ttt),t.forEach(function(i){var n=ltt.bind(null,r,i);e.has(i)||(e.add(i),i.then(n,n))})}}function Ca(r,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var n=e[i];try{var s=r,a=t,o=a;t:for(;o!==null;){switch(o.tag){case 5:Ki=o.stateNode,Ma=!1;break t;case 3:Ki=o.stateNode.containerInfo,Ma=!0;break t;case 4:Ki=o.stateNode.containerInfo,Ma=!0;break t}o=o.return}if(Ki===null)throw Error(gt(160));M8(s,a,n),Ki=null,Ma=!1;var h=n.alternate;h!==null&&(h.return=null),n.return=null}catch(u){Wr(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)L8(t,r),t=t.sibling}function L8(r,t){var e=r.alternate,i=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ca(t,r),so(r),i&4){try{w_(3,r,r.return),B1(3,r)}catch(_){Wr(r,r.return,_)}try{w_(5,r,r.return)}catch(_){Wr(r,r.return,_)}}break;case 1:Ca(t,r),so(r),i&512&&e!==null&&lv(e,e.return);break;case 5:if(Ca(t,r),so(r),i&512&&e!==null&&lv(e,e.return),r.flags&32){var n=r.stateNode;try{M_(n,"")}catch(_){Wr(r,r.return,_)}}if(i&4&&(n=r.stateNode,n!=null)){var s=r.memoizedProps,a=e!==null?e.memoizedProps:s,o=r.type,h=r.updateQueue;if(r.updateQueue=null,h!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&n5(n,s),S2(o,a);var u=S2(o,s);for(a=0;a<h.length;a+=2){var l=h[a],f=h[a+1];l==="style"?u5(n,f):l==="dangerouslySetInnerHTML"?o5(n,f):l==="children"?M_(n,f):EM(n,l,f,u)}switch(o){case"input":w2(n,s);break;case"textarea":s5(n,s);break;case"select":var c=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?xv(n,!!s.multiple,d,!1):c!==!!s.multiple&&(s.defaultValue!=null?xv(n,!!s.multiple,s.defaultValue,!0):xv(n,!!s.multiple,s.multiple?[]:"",!1))}n[V_]=s}catch(_){Wr(r,r.return,_)}}break;case 6:if(Ca(t,r),so(r),i&4){if(r.stateNode===null)throw Error(gt(162));n=r.stateNode,s=r.memoizedProps;try{n.nodeValue=s}catch(_){Wr(r,r.return,_)}}break;case 3:if(Ca(t,r),so(r),i&4&&e!==null&&e.memoizedState.isDehydrated)try{k_(t.containerInfo)}catch(_){Wr(r,r.return,_)}break;case 4:Ca(t,r),so(r);break;case 13:Ca(t,r),so(r),n=r.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(rL=ei())),i&4&&Dk(r);break;case 22:if(l=e!==null&&e.memoizedState!==null,r.mode&1?(ln=(u=ln)||l,Ca(t,r),ln=u):Ca(t,r),so(r),i&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!l&&r.mode&1)for(Vt=r,l=r.child;l!==null;){for(f=Vt=l;Vt!==null;){switch(c=Vt,d=c.child,c.tag){case 0:case 11:case 14:case 15:w_(4,c,c.return);break;case 1:lv(c,c.return);var v=c.stateNode;if(typeof v.componentWillUnmount=="function"){i=c,e=c.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(_){Wr(i,e,_)}}break;case 5:lv(c,c.return);break;case 22:if(c.memoizedState!==null){Hk(f);continue}}d!==null?(d.return=c,Vt=d):Hk(f)}l=l.sibling}t:for(l=null,f=r;;){if(f.tag===5){if(l===null){l=f;try{n=f.stateNode,u?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,h=f.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,o.style.display=h5("display",a))}catch(_){Wr(r,r.return,_)}}}else if(f.tag===6){if(l===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(_){Wr(r,r.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===r)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;l===f&&(l=null),f=f.return}l===f&&(l=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ca(t,r),so(r),i&4&&Dk(r);break;case 21:break;default:Ca(t,r),so(r)}}function so(r){var t=r.flags;if(t&2){try{t:{for(var e=r.return;e!==null;){if(U8(e)){var i=e;break t}e=e.return}throw Error(gt(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(M_(n,""),i.flags&=-33);var s=kk(r);sP(r,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=kk(r);nP(r,o,a);break;default:throw Error(gt(161))}}catch(h){Wr(r,r.return,h)}r.flags&=-3}t&4096&&(r.flags&=-4097)}function rtt(r,t,e){Vt=r,B8(r)}function B8(r,t,e){for(var i=(r.mode&1)!==0;Vt!==null;){var n=Vt,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||Cx;if(!a){var o=n.alternate,h=o!==null&&o.memoizedState!==null||ln;o=Cx;var u=ln;if(Cx=a,(ln=h)&&!u)for(Vt=n;Vt!==null;)a=Vt,h=a.child,a.tag===22&&a.memoizedState!==null?Xk(n):h!==null?(h.return=a,Vt=h):Xk(n);for(;s!==null;)Vt=s,B8(s),s=s.sibling;Vt=n,Cx=o,ln=u}$k(r)}else n.subtreeFlags&8772&&s!==null?(s.return=n,Vt=s):$k(r)}}function $k(r){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ln||B1(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ln)if(e===null)i.componentDidMount();else{var n=t.elementType===t.type?e.memoizedProps:Ua(t.type,e.memoizedProps);i.componentDidUpdate(n,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ik(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Ik(t,a,e)}break;case 5:var o=t.stateNode;if(e===null&&t.flags&4){e=o;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&e.focus();break;case"img":h.src&&(e.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var f=l.dehydrated;f!==null&&k_(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gt(163))}ln||t.flags&512&&iP(t)}catch(c){Wr(t,t.return,c)}}if(t===r){Vt=null;break}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}}function Hk(r){for(;Vt!==null;){var t=Vt;if(t===r){Vt=null;break}var e=t.sibling;if(e!==null){e.return=t.return,Vt=e;break}Vt=t.return}}function Xk(r){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{B1(4,t)}catch(h){Wr(t,e,h)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(h){Wr(t,n,h)}}var s=t.return;try{iP(t)}catch(h){Wr(t,s,h)}break;case 5:var a=t.return;try{iP(t)}catch(h){Wr(t,a,h)}}}catch(h){Wr(t,t.return,h)}if(t===r){Vt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Vt=o;break}Vt=t.return}}var itt=Math.ceil,JE=ru.ReactCurrentDispatcher,tL=ru.ReactCurrentOwner,aa=ru.ReactCurrentBatchConfig,ke=0,zi=null,Ei=null,tn=0,gs=0,fv=zl(0),Ui=0,K_=null,dd=0,G1=0,eL=0,I_=null,Wn=null,rL=0,uy=1/0,ih=null,tw=!1,aP=null,ul=null,Ax=!1,ku=null,ew=0,R_=0,oP=null,_E=-1,gE=0;function Gn(){return ke&6?ei():_E!==-1?_E:_E=ei()}function ll(r){return r.mode&1?ke&2&&tn!==0?tn&-tn:DJ.transition!==null?(gE===0&&(gE=b5()),gE):(r=We,r!==0||(r=window.event,r=r===void 0?16:A5(r.type)),r):1}function Xa(r,t,e,i){if(50<R_)throw R_=0,oP=null,Error(gt(185));o0(r,e,i),(!(ke&2)||r!==zi)&&(r===zi&&(!(ke&2)&&(G1|=e),Ui===4&&Lu(r,tn)),Zn(r,i),e===1&&ke===0&&!(t.mode&1)&&(uy=ei()+500,U1&&Wl()))}function Zn(r,t){var e=r.callbackNode;DQ(r,t);var i=GE(r,r===zi?tn:0);if(i===0)e!==null&&Q3(e),r.callbackNode=null,r.callbackPriority=0;else if(t=i&-i,r.callbackPriority!==t){if(e!=null&&Q3(e),t===1)r.tag===0?kJ(Vk.bind(null,r)):W5(Vk.bind(null,r)),MJ(function(){!(ke&6)&&Wl()}),e=null;else{switch(T5(i)){case 1:e=AM;break;case 4:e=g5;break;case 16:e=BE;break;case 536870912:e=x5;break;default:e=BE}e=j8(e,G8.bind(null,r))}r.callbackPriority=t,r.callbackNode=e}}function G8(r,t){if(_E=-1,gE=0,ke&6)throw Error(gt(327));var e=r.callbackNode;if(Iv()&&r.callbackNode!==e)return null;var i=GE(r,r===zi?tn:0);if(i===0)return null;if(i&30||i&r.expiredLanes||t)t=rw(r,i);else{t=i;var n=ke;ke|=2;var s=D8();(zi!==r||tn!==t)&&(ih=null,uy=ei()+500,Vc(r,t));do try{att();break}catch(o){k8(r,o)}while(!0);$M(),JE.current=s,ke=n,Ei!==null?t=0:(zi=null,tn=0,t=Ui)}if(t!==0){if(t===2&&(n=U2(r),n!==0&&(i=n,t=hP(r,n))),t===1)throw e=K_,Vc(r,0),Lu(r,i),Zn(r,ei()),e;if(t===6)Lu(r,i);else{if(n=r.current.alternate,!(i&30)&&!ntt(n)&&(t=rw(r,i),t===2&&(s=U2(r),s!==0&&(i=s,t=hP(r,s))),t===1))throw e=K_,Vc(r,0),Lu(r,i),Zn(r,ei()),e;switch(r.finishedWork=n,r.finishedLanes=i,t){case 0:case 1:throw Error(gt(345));case 2:Of(r,Wn,ih);break;case 3:if(Lu(r,i),(i&130023424)===i&&(t=rL+500-ei(),10<t)){if(GE(r,0)!==0)break;if(n=r.suspendedLanes,(n&i)!==i){Gn(),r.pingedLanes|=r.suspendedLanes&n;break}r.timeoutHandle=H2(Of.bind(null,r,Wn,ih),t);break}Of(r,Wn,ih);break;case 4:if(Lu(r,i),(i&4194240)===i)break;for(t=r.eventTimes,n=-1;0<i;){var a=31-Ha(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=ei()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*itt(i/1960))-i,10<i){r.timeoutHandle=H2(Of.bind(null,r,Wn,ih),i);break}Of(r,Wn,ih);break;case 5:Of(r,Wn,ih);break;default:throw Error(gt(329))}}}return Zn(r,ei()),r.callbackNode===e?G8.bind(null,r):null}function hP(r,t){var e=I_;return r.current.memoizedState.isDehydrated&&(Vc(r,t).flags|=256),r=rw(r,t),r!==2&&(t=Wn,Wn=e,t!==null&&uP(t)),r}function uP(r){Wn===null?Wn=r:Wn.push.apply(Wn,r)}function ntt(r){for(var t=r;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var n=e[i],s=n.getSnapshot;n=n.value;try{if(!za(s(),n))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===r)break;for(;t.sibling===null;){if(t.return===null||t.return===r)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lu(r,t){for(t&=~eL,t&=~G1,r.suspendedLanes|=t,r.pingedLanes&=~t,r=r.expirationTimes;0<t;){var e=31-Ha(t),i=1<<e;r[e]=-1,t&=~i}}function Vk(r){if(ke&6)throw Error(gt(327));Iv();var t=GE(r,0);if(!(t&1))return Zn(r,ei()),null;var e=rw(r,t);if(r.tag!==0&&e===2){var i=U2(r);i!==0&&(t=i,e=hP(r,i))}if(e===1)throw e=K_,Vc(r,0),Lu(r,t),Zn(r,ei()),e;if(e===6)throw Error(gt(345));return r.finishedWork=r.current.alternate,r.finishedLanes=t,Of(r,Wn,ih),Zn(r,ei()),null}function iL(r,t){var e=ke;ke|=1;try{return r(t)}finally{ke=e,ke===0&&(uy=ei()+500,U1&&Wl())}}function pd(r){ku!==null&&ku.tag===0&&!(ke&6)&&Iv();var t=ke;ke|=1;var e=aa.transition,i=We;try{if(aa.transition=null,We=1,r)return r()}finally{We=i,aa.transition=e,ke=t,!(ke&6)&&Wl()}}function nL(){gs=fv.current,xr(fv)}function Vc(r,t){r.finishedWork=null,r.finishedLanes=0;var e=r.timeoutHandle;if(e!==-1&&(r.timeoutHandle=-1,UJ(e)),Ei!==null)for(e=Ei.return;e!==null;){var i=e;switch(GM(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&XE();break;case 3:oy(),xr(qn),xr(En),WM();break;case 5:zM(i);break;case 4:oy();break;case 13:xr($r);break;case 19:xr($r);break;case 10:HM(i.type._context);break;case 22:case 23:nL()}e=e.return}if(zi=r,Ei=r=fl(r.current,null),tn=gs=t,Ui=0,K_=null,eL=G1=dd=0,Wn=I_=null,Hc!==null){for(t=0;t<Hc.length;t++)if(e=Hc[t],i=e.interleaved,i!==null){e.interleaved=null;var n=i.next,s=e.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}e.pending=i}Hc=null}return r}function k8(r,t){do{var e=Ei;try{if($M(),vE.current=QE,ZE){for(var i=Xr.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}ZE=!1}if(cd=0,$i=Ni=Xr=null,E_=!1,W_=0,tL.current=null,e===null||e.return===null){Ui=1,K_=t,Ei=null;break}t:{var s=r,a=e.return,o=e,h=t;if(t=tn,o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var u=h,l=o,f=l.tag;if(!(l.mode&1)&&(f===0||f===11||f===15)){var c=l.alternate;c?(l.updateQueue=c.updateQueue,l.memoizedState=c.memoizedState,l.lanes=c.lanes):(l.updateQueue=null,l.memoizedState=null)}var d=Pk(a);if(d!==null){d.flags&=-257,Ok(d,a,o,s,t),d.mode&1&&Nk(s,u,t),t=d,h=u;var v=t.updateQueue;if(v===null){var _=new Set;_.add(h),t.updateQueue=_}else v.add(h);break t}else{if(!(t&1)){Nk(s,u,t),sL();break t}h=Error(gt(426))}}else if(wr&&o.mode&1){var m=Pk(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),Ok(m,a,o,s,t),kM(hy(h,o));break t}}s=h=hy(h,o),Ui!==4&&(Ui=2),I_===null?I_=[s]:I_.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=T8(s,h,t);wk(s,g);break t;case 1:o=h;var T=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ul===null||!ul.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var S=E8(s,o,t);wk(s,S);break t}}s=s.return}while(s!==null)}H8(e)}catch(R){t=R,Ei===e&&e!==null&&(Ei=e=e.return);continue}break}while(!0)}function D8(){var r=JE.current;return JE.current=QE,r===null?QE:r}function sL(){(Ui===0||Ui===3||Ui===2)&&(Ui=4),zi===null||!(dd&268435455)&&!(G1&268435455)||Lu(zi,tn)}function rw(r,t){var e=ke;ke|=2;var i=D8();(zi!==r||tn!==t)&&(ih=null,Vc(r,t));do try{stt();break}catch(n){k8(r,n)}while(!0);if($M(),ke=e,JE.current=i,Ei!==null)throw Error(gt(261));return zi=null,tn=0,Ui}function stt(){for(;Ei!==null;)$8(Ei)}function att(){for(;Ei!==null&&!PQ();)$8(Ei)}function $8(r){var t=V8(r.alternate,r,gs);r.memoizedProps=r.pendingProps,t===null?H8(r):Ei=t,tL.current=null}function H8(r){var t=r;do{var e=t.alternate;if(r=t.return,t.flags&32768){if(e=JJ(e,t),e!==null){e.flags&=32767,Ei=e;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ui=6,Ei=null;return}}else if(e=QJ(e,t,gs),e!==null){Ei=e;return}if(t=t.sibling,t!==null){Ei=t;return}Ei=t=r}while(t!==null);Ui===0&&(Ui=5)}function Of(r,t,e){var i=We,n=aa.transition;try{aa.transition=null,We=1,ott(r,t,e,i)}finally{aa.transition=n,We=i}return null}function ott(r,t,e,i){do Iv();while(ku!==null);if(ke&6)throw Error(gt(327));e=r.finishedWork;var n=r.finishedLanes;if(e===null)return null;if(r.finishedWork=null,r.finishedLanes=0,e===r.current)throw Error(gt(177));r.callbackNode=null,r.callbackPriority=0;var s=e.lanes|e.childLanes;if($Q(r,s),r===zi&&(Ei=zi=null,tn=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Ax||(Ax=!0,j8(BE,function(){return Iv(),null})),s=(e.flags&15990)!==0,e.subtreeFlags&15990||s){s=aa.transition,aa.transition=null;var a=We;We=1;var o=ke;ke|=4,tL.current=null,ett(r,e),L8(e,r),CJ(D2),kE=!!k2,D2=k2=null,r.current=e,rtt(e),OQ(),ke=o,We=a,aa.transition=s}else r.current=e;if(Ax&&(Ax=!1,ku=r,ew=n),s=r.pendingLanes,s===0&&(ul=null),MQ(e.stateNode),Zn(r,ei()),t!==null)for(i=r.onRecoverableError,e=0;e<t.length;e++)n=t[e],i(n.value,{componentStack:n.stack,digest:n.digest});if(tw)throw tw=!1,r=aP,aP=null,r;return ew&1&&r.tag!==0&&Iv(),s=r.pendingLanes,s&1?r===oP?R_++:(R_=0,oP=r):R_=0,Wl(),null}function Iv(){if(ku!==null){var r=T5(ew),t=aa.transition,e=We;try{if(aa.transition=null,We=16>r?16:r,ku===null)var i=!1;else{if(r=ku,ku=null,ew=0,ke&6)throw Error(gt(331));var n=ke;for(ke|=4,Vt=r.current;Vt!==null;){var s=Vt,a=s.child;if(Vt.flags&16){var o=s.deletions;if(o!==null){for(var h=0;h<o.length;h++){var u=o[h];for(Vt=u;Vt!==null;){var l=Vt;switch(l.tag){case 0:case 11:case 15:w_(8,l,s)}var f=l.child;if(f!==null)f.return=l,Vt=f;else for(;Vt!==null;){l=Vt;var c=l.sibling,d=l.return;if(F8(l),l===u){Vt=null;break}if(c!==null){c.return=d,Vt=c;break}Vt=d}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var m=_.sibling;_.sibling=null,_=m}while(_!==null)}}Vt=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Vt=a;else t:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:w_(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Vt=g;break t}Vt=s.return}}var T=r.current;for(Vt=T;Vt!==null;){a=Vt;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,Vt=b;else t:for(a=T;Vt!==null;){if(o=Vt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:B1(9,o)}}catch(R){Wr(o,o.return,R)}if(o===a){Vt=null;break t}var S=o.sibling;if(S!==null){S.return=o.return,Vt=S;break t}Vt=o.return}}if(ke=n,Wl(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(S1,r)}catch{}i=!0}return i}finally{We=e,aa.transition=t}}return!1}function jk(r,t,e){t=hy(e,t),t=T8(r,t,1),r=hl(r,t,1),t=Gn(),r!==null&&(o0(r,1,t),Zn(r,t))}function Wr(r,t,e){if(r.tag===3)jk(r,r,e);else for(;t!==null;){if(t.tag===3){jk(t,r,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ul===null||!ul.has(i))){r=hy(e,r),r=E8(t,r,1),t=hl(t,r,1),r=Gn(),t!==null&&(o0(t,1,r),Zn(t,r));break}}t=t.return}}function htt(r,t,e){var i=r.pingCache;i!==null&&i.delete(t),t=Gn(),r.pingedLanes|=r.suspendedLanes&e,zi===r&&(tn&e)===e&&(Ui===4||Ui===3&&(tn&130023424)===tn&&500>ei()-rL?Vc(r,0):eL|=e),Zn(r,t)}function X8(r,t){t===0&&(r.mode&1?(t=_x,_x<<=1,!(_x&130023424)&&(_x=4194304)):t=1);var e=Gn();r=Ph(r,t),r!==null&&(o0(r,t,e),Zn(r,e))}function utt(r){var t=r.memoizedState,e=0;t!==null&&(e=t.retryLane),X8(r,e)}function ltt(r,t){var e=0;switch(r.tag){case 13:var i=r.stateNode,n=r.memoizedState;n!==null&&(e=n.retryLane);break;case 19:i=r.stateNode;break;default:throw Error(gt(314))}i!==null&&i.delete(t),X8(r,e)}var V8;V8=function(r,t,e){if(r!==null)if(r.memoizedProps!==t.pendingProps||qn.current)Yn=!0;else{if(!(r.lanes&e)&&!(t.flags&128))return Yn=!1,ZJ(r,t,e);Yn=!!(r.flags&131072)}else Yn=!1,wr&&t.flags&1048576&&Y5(t,zE,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;mE(r,t),r=t.pendingProps;var n=ny(t,En.current);wv(t,e),n=qM(null,t,i,r,n,e);var s=KM();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kn(i)?(s=!0,VE(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,VM(t),n.updater=L1,t.stateNode=n,n._reactInternals=t,q2(t,i,r,e),t=Q2(null,t,i,!0,s,e)):(t.tag=0,wr&&s&&BM(t),An(null,t,n,e),t=t.child),t;case 16:i=t.elementType;t:{switch(mE(r,t),r=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=ctt(i),r=Ua(i,r),n){case 0:t=Z2(null,t,i,r,e);break t;case 1:t=Mk(null,t,i,r,e);break t;case 11:t=Fk(null,t,i,r,e);break t;case 14:t=Uk(null,t,i,Ua(i.type,r),e);break t}throw Error(gt(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ua(i,n),Z2(r,t,i,n,e);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ua(i,n),Mk(r,t,i,n,e);case 3:t:{if(C8(t),r===null)throw Error(gt(387));i=t.pendingProps,s=t.memoizedState,n=s.element,t8(r,t),qE(t,i,null,e);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=hy(Error(gt(423)),t),t=Lk(r,t,i,e,n);break t}else if(i!==n){n=hy(Error(gt(424)),t),t=Lk(r,t,i,e,n);break t}else for(Os=ol(t.stateNode.containerInfo.firstChild),Fs=t,wr=!0,La=null,e=Q5(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(sy(),i===n){t=Oh(r,t,e);break t}An(r,t,i,e)}t=t.child}return t;case 5:return e8(t),r===null&&z2(t),i=t.type,n=t.pendingProps,s=r!==null?r.memoizedProps:null,a=n.children,$2(i,n)?a=null:s!==null&&$2(i,s)&&(t.flags|=32),R8(r,t),An(r,t,a,e),t.child;case 6:return r===null&&z2(t),null;case 13:return A8(r,t,e);case 4:return jM(t,t.stateNode.containerInfo),i=t.pendingProps,r===null?t.child=ay(t,null,i,e):An(r,t,i,e),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ua(i,n),Fk(r,t,i,n,e);case 7:return An(r,t,t.pendingProps,e),t.child;case 8:return An(r,t,t.pendingProps.children,e),t.child;case 12:return An(r,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,tr(WE,i._currentValue),i._currentValue=a,s!==null)if(za(s.value,a)){if(s.children===n.children&&!qn.current){t=Oh(r,t,e);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var h=o.firstContext;h!==null;){if(h.context===i){if(s.tag===1){h=Rh(-1,e&-e),h.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?h.next=h:(h.next=l.next,l.next=h),u.pending=h}}s.lanes|=e,h=s.alternate,h!==null&&(h.lanes|=e),W2(s.return,e,t),o.lanes|=e;break}h=h.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(gt(341));a.lanes|=e,o=a.alternate,o!==null&&(o.lanes|=e),W2(a,e,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}An(r,t,n.children,e),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,wv(t,e),n=la(n),i=i(n),t.flags|=1,An(r,t,i,e),t.child;case 14:return i=t.type,n=Ua(i,t.pendingProps),n=Ua(i.type,n),Uk(r,t,i,n,e);case 15:return w8(r,t,t.type,t.pendingProps,e);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Ua(i,n),mE(r,t),t.tag=1,Kn(i)?(r=!0,VE(t)):r=!1,wv(t,e),b8(t,i,n),q2(t,i,n,e),Q2(null,t,i,!0,r,e);case 19:return S8(r,t,e);case 22:return I8(r,t,e)}throw Error(gt(156,t.tag))};function j8(r,t){return _5(r,t)}function ftt(r,t,e,i){this.tag=r,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(r,t,e,i){return new ftt(r,t,e,i)}function aL(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ctt(r){if(typeof r=="function")return aL(r)?1:0;if(r!=null){if(r=r.$$typeof,r===IM)return 11;if(r===RM)return 14}return 2}function fl(r,t){var e=r.alternate;return e===null?(e=ra(r.tag,t,r.key,r.mode),e.elementType=r.elementType,e.type=r.type,e.stateNode=r.stateNode,e.alternate=r,r.alternate=e):(e.pendingProps=t,e.type=r.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=r.flags&14680064,e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=r.sibling,e.index=r.index,e.ref=r.ref,e}function xE(r,t,e,i,n,s){var a=2;if(i=r,typeof r=="function")aL(r)&&(a=1);else if(typeof r=="string")a=5;else t:switch(r){case ev:return jc(e.children,n,s,t);case wM:a=8,n|=8;break;case g2:return r=ra(12,e,t,n|2),r.elementType=g2,r.lanes=s,r;case x2:return r=ra(13,e,t,n),r.elementType=x2,r.lanes=s,r;case b2:return r=ra(19,e,t,n),r.elementType=b2,r.lanes=s,r;case e5:return k1(e,n,s,t);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Jj:a=10;break t;case t5:a=9;break t;case IM:a=11;break t;case RM:a=14;break t;case gu:a=16,i=null;break t}throw Error(gt(130,r==null?r:typeof r,""))}return t=ra(a,e,t,n),t.elementType=r,t.type=i,t.lanes=s,t}function jc(r,t,e,i){return r=ra(7,r,i,t),r.lanes=e,r}function k1(r,t,e,i){return r=ra(22,r,i,t),r.elementType=e5,r.lanes=e,r.stateNode={isHidden:!1},r}function hC(r,t,e){return r=ra(6,r,null,t),r.lanes=e,r}function uC(r,t,e){return t=ra(4,r.children!==null?r.children:[],r.key,t),t.lanes=e,t.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},t}function dtt(r,t,e,i,n){this.tag=t,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=XR(0),this.expirationTimes=XR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=XR(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function oL(r,t,e,i,n,s,a,o,h){return r=new dtt(r,t,e,o,h),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ra(3,null,null,t),r.current=s,s.stateNode=r,s.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},VM(s),r}function ptt(r,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tv,key:i==null?null:""+i,children:r,containerInfo:t,implementation:e}}function z8(r){if(!r)return yl;r=r._reactInternals;t:{if(Pd(r)!==r||r.tag!==1)throw Error(gt(170));var t=r;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Kn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(gt(171))}if(r.tag===1){var e=r.type;if(Kn(e))return z5(r,e,t)}return t}function W8(r,t,e,i,n,s,a,o,h){return r=oL(e,i,!0,r,n,s,a,o,h),r.context=z8(null),e=r.current,i=Gn(),n=ll(e),s=Rh(i,n),s.callback=t??null,hl(e,s,n),r.current.lanes=n,o0(r,n,i),Zn(r,i),r}function D1(r,t,e,i){var n=t.current,s=Gn(),a=ll(n);return e=z8(e),t.context===null?t.context=e:t.pendingContext=e,t=Rh(s,a),t.payload={element:r},i=i===void 0?null:i,i!==null&&(t.callback=i),r=hl(n,t,a),r!==null&&(Xa(r,n,a,s),pE(r,n,a)),a}function iw(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function zk(r,t){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var e=r.retryLane;r.retryLane=e!==0&&e<t?e:t}}function hL(r,t){zk(r,t),(r=r.alternate)&&zk(r,t)}function vtt(){return null}var Y8=typeof reportError=="function"?reportError:function(r){console.error(r)};function uL(r){this._internalRoot=r}$1.prototype.render=uL.prototype.render=function(r){var t=this._internalRoot;if(t===null)throw Error(gt(409));D1(r,t,null,null)};$1.prototype.unmount=uL.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var t=r.containerInfo;pd(function(){D1(null,r,null,null)}),t[Nh]=null}};function $1(r){this._internalRoot=r}$1.prototype.unstable_scheduleHydration=function(r){if(r){var t=I5();r={blockedOn:null,target:r,priority:t};for(var e=0;e<Mu.length&&t!==0&&t<Mu[e].priority;e++);Mu.splice(e,0,r),e===0&&C5(r)}};function lL(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function H1(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Wk(){}function ytt(r,t,e,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var u=iw(a);s.call(u)}}var a=W8(t,i,r,0,null,!1,!1,"",Wk);return r._reactRootContainer=a,r[Nh]=a.current,H_(r.nodeType===8?r.parentNode:r),pd(),a}for(;n=r.lastChild;)r.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var u=iw(h);o.call(u)}}var h=oL(r,0,!1,null,null,!1,!1,"",Wk);return r._reactRootContainer=h,r[Nh]=h.current,H_(r.nodeType===8?r.parentNode:r),pd(function(){D1(t,h,e,i)}),h}function X1(r,t,e,i,n){var s=e._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var h=iw(a);o.call(h)}}D1(t,a,r,n)}else a=ytt(e,t,r,n,i);return iw(a)}E5=function(r){switch(r.tag){case 3:var t=r.stateNode;if(t.current.memoizedState.isDehydrated){var e=s_(t.pendingLanes);e!==0&&(SM(t,e|1),Zn(t,ei()),!(ke&6)&&(uy=ei()+500,Wl()))}break;case 13:pd(function(){var i=Ph(r,1);if(i!==null){var n=Gn();Xa(i,r,1,n)}}),hL(r,1)}};NM=function(r){if(r.tag===13){var t=Ph(r,134217728);if(t!==null){var e=Gn();Xa(t,r,134217728,e)}hL(r,134217728)}};w5=function(r){if(r.tag===13){var t=ll(r),e=Ph(r,t);if(e!==null){var i=Gn();Xa(e,r,t,i)}hL(r,t)}};I5=function(){return We};R5=function(r,t){var e=We;try{return We=r,t()}finally{We=e}};P2=function(r,t,e){switch(t){case"input":if(w2(r,e),t=e.name,e.type==="radio"&&t!=null){for(e=r;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==r&&i.form===r.form){var n=F1(i);if(!n)throw Error(gt(90));i5(i),w2(i,n)}}}break;case"textarea":s5(r,e);break;case"select":t=e.value,t!=null&&xv(r,!!e.multiple,t,!1)}};c5=iL;d5=pd;var mtt={usingClientEntryPoint:!1,Events:[u0,sv,F1,l5,f5,iL]},sm={findFiberByHostInstance:$c,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_tt={bundleType:sm.bundleType,version:sm.version,rendererPackageName:sm.rendererPackageName,rendererConfig:sm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ru.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=y5(r),r===null?null:r.stateNode},findFiberByHostInstance:sm.findFiberByHostInstance||vtt,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sx.isDisabled&&Sx.supportsFiber)try{S1=Sx.inject(_tt),So=Sx}catch{}}ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mtt;ks.createPortal=function(r,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lL(t))throw Error(gt(200));return ptt(r,t,null,e)};ks.createRoot=function(r,t){if(!lL(r))throw Error(gt(299));var e=!1,i="",n=Y8;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=oL(r,1,!1,null,null,e,!1,i,n),r[Nh]=t.current,H_(r.nodeType===8?r.parentNode:r),new uL(t)};ks.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var t=r._reactInternals;if(t===void 0)throw typeof r.render=="function"?Error(gt(188)):(r=Object.keys(r).join(","),Error(gt(268,r)));return r=y5(t),r=r===null?null:r.stateNode,r};ks.flushSync=function(r){return pd(r)};ks.hydrate=function(r,t,e){if(!H1(t))throw Error(gt(200));return X1(null,r,t,!0,e)};ks.hydrateRoot=function(r,t,e){if(!lL(r))throw Error(gt(405));var i=e!=null&&e.hydratedSources||null,n=!1,s="",a=Y8;if(e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),t=W8(t,null,r,1,e??null,n,!1,s,a),r[Nh]=t.current,H_(r),i)for(r=0;r<i.length;r++)e=i[r],n=e._getVersion,n=n(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,n]:t.mutableSourceEagerHydrationData.push(e,n);return new $1(t)};ks.render=function(r,t,e){if(!H1(t))throw Error(gt(200));return X1(null,r,t,!1,e)};ks.unmountComponentAtNode=function(r){if(!H1(r))throw Error(gt(40));return r._reactRootContainer?(pd(function(){X1(null,null,r,!1,function(){r._reactRootContainer=null,r[Nh]=null})}),!0):!1};ks.unstable_batchedUpdates=iL;ks.unstable_renderSubtreeIntoContainer=function(r,t,e,i){if(!H1(e))throw Error(gt(200));if(r==null||r._reactInternals===void 0)throw Error(gt(38));return X1(r,t,e,!1,i)};ks.version="18.3.1-next-f1338f8080-20240426";function q8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(q8)}catch(r){console.error(r)}}q8(),qj.exports=ks;var gtt=qj.exports,Yk=gtt;m2.createRoot=Yk.createRoot,m2.hydrateRoot=Yk.hydrateRoot;/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z_(){return Z_=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Z_.apply(this,arguments)}var Du;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Du||(Du={}));const qk="popstate";function xtt(r){r===void 0&&(r={});function t(i,n){let{pathname:s,search:a,hash:o}=i.location;return lP("",{pathname:s,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function e(i,n){return typeof n=="string"?n:nw(n)}return Ttt(t,e,null,r)}function Ii(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function K8(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function btt(){return Math.random().toString(36).substr(2,8)}function Kk(r,t){return{usr:r.state,key:r.key,idx:t}}function lP(r,t,e,i){return e===void 0&&(e=null),Z_({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?wy(t):t,{state:e,key:t&&t.key||i||btt()})}function nw(r){let{pathname:t="/",search:e="",hash:i=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function wy(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substr(i),r=r.substr(0,i)),r&&(t.pathname=r)}return t}function Ttt(r,t,e,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:s=!1}=i,a=n.history,o=Du.Pop,h=null,u=l();u==null&&(u=0,a.replaceState(Z_({},a.state,{idx:u}),""));function l(){return(a.state||{idx:null}).idx}function f(){o=Du.Pop;let m=l(),g=m==null?null:m-u;u=m,h&&h({action:o,location:_.location,delta:g})}function c(m,g){o=Du.Push;let T=lP(_.location,m,g);u=l()+1;let b=Kk(T,u),S=_.createHref(T);try{a.pushState(b,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;n.location.assign(S)}s&&h&&h({action:o,location:_.location,delta:1})}function d(m,g){o=Du.Replace;let T=lP(_.location,m,g);u=l();let b=Kk(T,u),S=_.createHref(T);a.replaceState(b,"",S),s&&h&&h({action:o,location:_.location,delta:0})}function v(m){let g=n.location.origin!=="null"?n.location.origin:n.location.href,T=typeof m=="string"?m:nw(m);return T=T.replace(/ $/,"%20"),Ii(g,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,g)}let _={get action(){return o},get location(){return r(n,a)},listen(m){if(h)throw new Error("A history only accepts one active listener");return n.addEventListener(qk,f),h=m,()=>{n.removeEventListener(qk,f),h=null}},createHref(m){return t(n,m)},createURL:v,encodeLocation(m){let g=v(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:c,replace:d,go(m){return a.go(m)}};return _}var Zk;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Zk||(Zk={}));function Ett(r,t,e){e===void 0&&(e="/");let i=typeof t=="string"?wy(t):t,n=fL(i.pathname||"/",e);if(n==null)return null;let s=Z8(r);wtt(s);let a=null;for(let o=0;a==null&&o<s.length;++o){let h=Ltt(n);a=Ftt(s[o],h)}return a}function Z8(r,t,e,i){t===void 0&&(t=[]),e===void 0&&(e=[]),i===void 0&&(i="");let n=(s,a,o)=>{let h={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};h.relativePath.startsWith("/")&&(Ii(h.relativePath.startsWith(i),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(i.length));let u=cl([i,h.relativePath]),l=e.concat(h);s.children&&s.children.length>0&&(Ii(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Z8(s.children,t,l,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:Ptt(u,s.index),routesMeta:l})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))n(s,a);else for(let h of Q8(s.path))n(s,a,h)}),t}function Q8(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,n=e.endsWith("?"),s=e.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let a=Q8(i.join("/")),o=[];return o.push(...a.map(h=>h===""?s:[s,h].join("/"))),n&&o.push(...a),o.map(h=>r.startsWith("/")&&h===""?"/":h)}function wtt(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:Ott(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}const Itt=/^:[\w-]+$/,Rtt=3,Ctt=2,Att=1,Stt=10,Ntt=-2,Qk=r=>r==="*";function Ptt(r,t){let e=r.split("/"),i=e.length;return e.some(Qk)&&(i+=Ntt),t&&(i+=Ctt),e.filter(n=>!Qk(n)).reduce((n,s)=>n+(Itt.test(s)?Rtt:s===""?Att:Stt),i)}function Ott(r,t){return r.length===t.length&&r.slice(0,-1).every((i,n)=>i===t[n])?r[r.length-1]-t[t.length-1]:0}function Ftt(r,t){let{routesMeta:e}=r,i={},n="/",s=[];for(let a=0;a<e.length;++a){let o=e[a],h=a===e.length-1,u=n==="/"?t:t.slice(n.length)||"/",l=Utt({path:o.relativePath,caseSensitive:o.caseSensitive,end:h},u);if(!l)return null;Object.assign(i,l.params);let f=o.route;s.push({params:i,pathname:cl([n,l.pathname]),pathnameBase:Dtt(cl([n,l.pathnameBase])),route:f}),l.pathnameBase!=="/"&&(n=cl([n,l.pathnameBase]))}return s}function Utt(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=Mtt(r.path,r.caseSensitive,r.end),n=t.match(e);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((u,l,f)=>{let{paramName:c,isOptional:d}=l;if(c==="*"){let _=o[f]||"";a=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const v=o[f];return d&&!v?u[c]=void 0:u[c]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function Mtt(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),K8(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let i=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,h)=>(i.push({paramName:o,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function Ltt(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return K8(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function fL(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}function Btt(r,t){t===void 0&&(t="/");let{pathname:e,search:i="",hash:n=""}=typeof r=="string"?wy(r):r;return{pathname:e?e.startsWith("/")?e:Gtt(e,t):t,search:$tt(i),hash:Htt(n)}}function Gtt(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(n=>{n===".."?e.length>1&&e.pop():n!=="."&&e.push(n)}),e.length>1?e.join("/"):"/"}function lC(r,t,e,i){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ktt(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function J8(r,t){let e=ktt(r);return t?e.map((i,n)=>n===r.length-1?i.pathname:i.pathnameBase):e.map(i=>i.pathnameBase)}function tz(r,t,e,i){i===void 0&&(i=!1);let n;typeof r=="string"?n=wy(r):(n=Z_({},r),Ii(!n.pathname||!n.pathname.includes("?"),lC("?","pathname","search",n)),Ii(!n.pathname||!n.pathname.includes("#"),lC("#","pathname","hash",n)),Ii(!n.search||!n.search.includes("#"),lC("#","search","hash",n)));let s=r===""||n.pathname==="",a=s?"/":n.pathname,o;if(a==null)o=e;else{let f=t.length-1;if(!i&&a.startsWith("..")){let c=a.split("/");for(;c[0]==="..";)c.shift(),f-=1;n.pathname=c.join("/")}o=f>=0?t[f]:"/"}let h=Btt(n,o),u=a&&a!=="/"&&a.endsWith("/"),l=(s||a===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(u||l)&&(h.pathname+="/"),h}const cl=r=>r.join("/").replace(/\/\/+/g,"/"),Dtt=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),$tt=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Htt=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Xtt(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const ez=["post","put","patch","delete"];new Set(ez);const Vtt=["get",...ez];new Set(Vtt);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Q_(){return Q_=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Q_.apply(this,arguments)}const cL=F.createContext(null),jtt=F.createContext(null),Od=F.createContext(null),V1=F.createContext(null),Fd=F.createContext({outlet:null,matches:[],isDataRoute:!1}),rz=F.createContext(null);function ztt(r,t){let{relative:e}=t===void 0?{}:t;f0()||Ii(!1);let{basename:i,navigator:n}=F.useContext(Od),{hash:s,pathname:a,search:o}=nz(r,{relative:e}),h=a;return i!=="/"&&(h=a==="/"?i:cl([i,a])),n.createHref({pathname:h,search:o,hash:s})}function f0(){return F.useContext(V1)!=null}function j1(){return f0()||Ii(!1),F.useContext(V1).location}function iz(r){F.useContext(Od).static||F.useLayoutEffect(r)}function Wtt(){let{isDataRoute:r}=F.useContext(Fd);return r?aet():Ytt()}function Ytt(){f0()||Ii(!1);let r=F.useContext(cL),{basename:t,future:e,navigator:i}=F.useContext(Od),{matches:n}=F.useContext(Fd),{pathname:s}=j1(),a=JSON.stringify(J8(n,e.v7_relativeSplatPath)),o=F.useRef(!1);return iz(()=>{o.current=!0}),F.useCallback(function(u,l){if(l===void 0&&(l={}),!o.current)return;if(typeof u=="number"){i.go(u);return}let f=tz(u,JSON.parse(a),s,l.relative==="path");r==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:cl([t,f.pathname])),(l.replace?i.replace:i.push)(f,l.state,l)},[t,i,a,s,r])}function nz(r,t){let{relative:e}=t===void 0?{}:t,{future:i}=F.useContext(Od),{matches:n}=F.useContext(Fd),{pathname:s}=j1(),a=JSON.stringify(J8(n,i.v7_relativeSplatPath));return F.useMemo(()=>tz(r,JSON.parse(a),s,e==="path"),[r,a,s,e])}function qtt(r,t){return Ktt(r,t)}function Ktt(r,t,e,i){f0()||Ii(!1);let{navigator:n}=F.useContext(Od),{matches:s}=F.useContext(Fd),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let u=j1(),l;if(t){var f;let m=typeof t=="string"?wy(t):t;h==="/"||(f=m.pathname)!=null&&f.startsWith(h)||Ii(!1),l=m}else l=u;let c=l.pathname||"/",d=c;if(h!=="/"){let m=h.replace(/^\//,"").split("/");d="/"+c.replace(/^\//,"").split("/").slice(m.length).join("/")}let v=Ett(r,{pathname:d}),_=eet(v&&v.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:cl([h,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?h:cl([h,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,e,i);return t&&_?F.createElement(V1.Provider,{value:{location:Q_({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Du.Pop}},_):_}function Ztt(){let r=set(),t=Xtt(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),e?F.createElement("pre",{style:n},e):null,null)}const Qtt=F.createElement(Ztt,null);class Jtt extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?F.createElement(Fd.Provider,{value:this.props.routeContext},F.createElement(rz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tet(r){let{routeContext:t,match:e,children:i}=r,n=F.useContext(cL);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Fd.Provider,{value:t},i)}function eet(r,t,e,i){var n;if(t===void 0&&(t=[]),e===void 0&&(e=null),i===void 0&&(i=null),r==null){var s;if((s=e)!=null&&s.errors)r=e.matches;else return null}let a=r,o=(n=e)==null?void 0:n.errors;if(o!=null){let l=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);l>=0||Ii(!1),a=a.slice(0,Math.min(a.length,l+1))}let h=!1,u=-1;if(e&&i&&i.v7_partialHydration)for(let l=0;l<a.length;l++){let f=a[l];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=l),f.route.id){let{loaderData:c,errors:d}=e,v=f.route.loader&&c[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||v){h=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((l,f,c)=>{let d,v=!1,_=null,m=null;e&&(d=o&&f.route.id?o[f.route.id]:void 0,_=f.route.errorElement||Qtt,h&&(u<0&&c===0?(v=!0,m=null):u===c&&(v=!0,m=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,c+1)),T=()=>{let b;return d?b=_:v?b=m:f.route.Component?b=F.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=l,F.createElement(tet,{match:f,routeContext:{outlet:l,matches:g,isDataRoute:e!=null},children:b})};return e&&(f.route.ErrorBoundary||f.route.errorElement||c===0)?F.createElement(Jtt,{location:e.location,revalidation:e.revalidation,component:_,error:d,children:T(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):T()},null)}var sz=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(sz||{}),sw=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(sw||{});function ret(r){let t=F.useContext(cL);return t||Ii(!1),t}function iet(r){let t=F.useContext(jtt);return t||Ii(!1),t}function net(r){let t=F.useContext(Fd);return t||Ii(!1),t}function az(r){let t=net(),e=t.matches[t.matches.length-1];return e.route.id||Ii(!1),e.route.id}function set(){var r;let t=F.useContext(rz),e=iet(sw.UseRouteError),i=az(sw.UseRouteError);return t!==void 0?t:(r=e.errors)==null?void 0:r[i]}function aet(){let{router:r}=ret(sz.UseNavigateStable),t=az(sw.UseNavigateStable),e=F.useRef(!1);return iz(()=>{e.current=!0}),F.useCallback(function(n,s){s===void 0&&(s={}),e.current&&(typeof n=="number"?r.navigate(n):r.navigate(n,Q_({fromRouteId:t},s)))},[r,t])}function ns(r){Ii(!1)}function oet(r){let{basename:t="/",children:e=null,location:i,navigationType:n=Du.Pop,navigator:s,static:a=!1,future:o}=r;f0()&&Ii(!1);let h=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:h,navigator:s,static:a,future:Q_({v7_relativeSplatPath:!1},o)}),[h,o,s,a]);typeof i=="string"&&(i=wy(i));let{pathname:l="/",search:f="",hash:c="",state:d=null,key:v="default"}=i,_=F.useMemo(()=>{let m=fL(l,h);return m==null?null:{location:{pathname:m,search:f,hash:c,state:d,key:v},navigationType:n}},[h,l,f,c,d,v,n]);return _==null?null:F.createElement(Od.Provider,{value:u},F.createElement(V1.Provider,{children:e,value:_}))}function het(r){let{children:t,location:e}=r;return qtt(fP(t),e)}new Promise(()=>{});function fP(r,t){t===void 0&&(t=[]);let e=[];return F.Children.forEach(r,(i,n)=>{if(!F.isValidElement(i))return;let s=[...t,n];if(i.type===F.Fragment){e.push.apply(e,fP(i.props.children,s));return}i.type!==ns&&Ii(!1),!i.props.index||!i.props.children||Ii(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=fP(i.props.children,s)),e.push(a)}),e}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cP(){return cP=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},cP.apply(this,arguments)}function uet(r,t){if(r==null)return{};var e={},i=Object.keys(r),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(e[n]=r[n]);return e}function fet(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function cet(r,t){return r.button===0&&(!t||t==="_self")&&!fet(r)}const det=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],pet="6";try{window.__reactRouterVersion=pet}catch{}const vet="startTransition",Jk=hQ[vet];function yet(r){let{basename:t,children:e,future:i,window:n}=r,s=F.useRef();s.current==null&&(s.current=xtt({window:n,v5Compat:!0}));let a=s.current,[o,h]=F.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},l=F.useCallback(f=>{u&&Jk?Jk(()=>h(f)):h(f)},[h,u]);return F.useLayoutEffect(()=>a.listen(l),[a,l]),F.createElement(oet,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,future:i})}const met=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dP=F.forwardRef(function(t,e){let{onClick:i,relative:n,reloadDocument:s,replace:a,state:o,target:h,to:u,preventScrollReset:l,unstable_viewTransition:f}=t,c=uet(t,det),{basename:d}=F.useContext(Od),v,_=!1;if(typeof u=="string"&&_et.test(u)&&(v=u,met))try{let b=new URL(window.location.href),S=u.startsWith("//")?new URL(b.protocol+u):new URL(u),R=fL(S.pathname,d);S.origin===b.origin&&R!=null?u=R+S.search+S.hash:_=!0}catch{}let m=ztt(u,{relative:n}),g=get(u,{replace:a,state:o,target:h,preventScrollReset:l,relative:n,unstable_viewTransition:f});function T(b){i&&i(b),b.defaultPrevented||g(b)}return F.createElement("a",cP({},c,{href:v||m,onClick:_||s?i:T,ref:e,target:h}))});var tD;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(tD||(tD={}));var eD;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(eD||(eD={}));function get(r,t){let{target:e,replace:i,state:n,preventScrollReset:s,relative:a,unstable_viewTransition:o}=t===void 0?{}:t,h=Wtt(),u=j1(),l=nz(r,{relative:a});return F.useCallback(f=>{if(cet(f,e)){f.preventDefault();let c=i!==void 0?i:nw(u)===nw(l);h(r,{replace:c,state:n,preventScrollReset:s,relative:a,unstable_viewTransition:o})}},[u,h,l,i,n,e,r,s,a,o])}function xet(){return C.jsx(C.Fragment,{children:C.jsxs("div",{className:"App1",children:[C.jsxs("div",{className:"header-container",children:[C.jsx("h1",{className:"head1",children:"Word Search"}),C.jsx("img",{src:"word_search icon.png",alt:"Search Icon",className:"image"})]}),C.jsx("h3",{children:"Welcome to the Puzzle Game"}),C.jsxs("span",{children:[C.jsx(dP,{to:"/word-matching/game1",children:C.jsx("button",{className:"Start-button",children:"Start"})}),C.jsx(dP,{to:"https://joywithlearning.com/games ",children:C.jsx("button",{className:"Home-button",children:"Home"})})]})]})})}var z1={exports:{}},Ud=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Ud||{}),oz=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(oz||{}),pP=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(pP||{}),Wt=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Wt||{}),Ga=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Ga||{}),At=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(At||{}),Rv=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Rv||{}),ie=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(ie||{}),Nt=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(Nt||{}),uh=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(uh||{}),Ch=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Ch||{}),ml=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(ml||{}),ia=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(ia||{}),Ff=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Ff||{}),dL=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(dL||{}),na=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(na||{}),Si=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Si||{}),ui=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(ui||{}),Po=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Po||{});const bet={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},Zt={ADAPTER:bet,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var fC=/iPhone/i,rD=/iPod/i,iD=/iPad/i,nD=/\biOS-universal(?:.+)Mac\b/i,cC=/\bAndroid(?:.+)Mobile\b/i,sD=/Android/i,Qd=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Nx=/Silk/i,th=/Windows Phone/i,aD=/\bWindows(?:.+)ARM\b/i,oD=/BlackBerry/i,hD=/BB10/i,uD=/Opera Mini/i,lD=/\b(CriOS|Chrome)(?:.+)Mobile/i,fD=/Mobile(?:.+)Firefox\b/i,cD=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Tet(r){return function(t){return t.test(r)}}function J_(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var n=Tet(e),s={apple:{phone:n(fC)&&!n(th),ipod:n(rD),tablet:!n(fC)&&(n(iD)||cD(t))&&!n(th),universal:n(nD),device:(n(fC)||n(rD)||n(iD)||n(nD)||cD(t))&&!n(th)},amazon:{phone:n(Qd),tablet:!n(Qd)&&n(Nx),device:n(Qd)||n(Nx)},android:{phone:!n(th)&&n(Qd)||!n(th)&&n(cC),tablet:!n(th)&&!n(Qd)&&!n(cC)&&(n(Nx)||n(sD)),device:!n(th)&&(n(Qd)||n(Nx)||n(cC)||n(sD))||n(/\bokhttp\b/i)},windows:{phone:n(th),tablet:n(aD),device:n(th)||n(aD)},other:{blackberry:n(oD),blackberry10:n(hD),opera:n(uD),firefox:n(fD),chrome:n(lD),device:n(oD)||n(hD)||n(uD)||n(fD)||n(lD)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Eet=J_.default??J_,cv=Eet(globalThis.navigator);Zt.RETINA_PREFIX=/@([0-9\.]+)x/;Zt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var hz={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(h,u,l){this.fn=h,this.context=u,this.once=l||!1}function s(h,u,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new n(l,f||h,c),v=e?e+u:u;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],d]:h._events[v].push(d):(h._events[v]=d,h._eventsCount++),h}function a(h,u){--h._eventsCount===0?h._events=new i:delete h._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)t.call(l,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},o.prototype.listeners=function(u){var l=e?e+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},o.prototype.listenerCount=function(u){var l=e?e+u:u,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,l,f,c,d,v){var _=e?e+u:u;if(!this._events[_])return!1;var m=this._events[_],g=arguments.length,T,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,f),!0;case 4:return m.fn.call(m.context,l,f,c),!0;case 5:return m.fn.call(m.context,l,f,c,d),!0;case 6:return m.fn.call(m.context,l,f,c,d,v),!0}for(b=1,T=new Array(g-1);b<g;b++)T[b-1]=arguments[b];m.fn.apply(m.context,T)}else{var S=m.length,R;for(b=0;b<S;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,l);break;case 3:m[b].fn.call(m[b].context,l,f);break;case 4:m[b].fn.call(m[b].context,l,f,c);break;default:if(!T)for(R=1,T=new Array(g-1);R<g;R++)T[R-1]=arguments[R];m[b].fn.apply(m[b].context,T)}}return!0},o.prototype.on=function(u,l,f){return s(this,u,l,f,!1)},o.prototype.once=function(u,l,f){return s(this,u,l,f,!0)},o.prototype.removeListener=function(u,l,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!l)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var _=0,m=[],g=v.length;_<g;_++)(v[_].fn!==l||c&&!v[_].once||f&&v[_].context!==f)&&m.push(v[_]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var l;return u?(l=e?e+u:u,this._events[l]&&a(this,l)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(hz);var wet=hz.exports;const c0=Sd(wet);var pL={exports:{}};pL.exports=W1;pL.exports.default=W1;function W1(r,t,e){e=e||2;var i=t&&t.length,n=i?t[0]*e:r.length,s=uz(r,0,n,e,!0),a=[];if(!s||s.next===s.prev)return a;var o,h,u,l,f,c,d;if(i&&(s=Net(r,t,s,e)),r.length>80*e){o=u=r[0],h=l=r[1];for(var v=e;v<n;v+=e)f=r[v],c=r[v+1],f<o&&(o=f),c<h&&(h=c),f>u&&(u=f),c>l&&(l=c);d=Math.max(u-o,l-h),d=d!==0?32767/d:0}return tg(s,a,e,o,h,d,0),a}function uz(r,t,e,i,n){var s,a;if(n===mP(r,t,e,i)>0)for(s=t;s<e;s+=i)a=dD(s,r[s],r[s+1],a);else for(s=e-i;s>=t;s-=i)a=dD(s,r[s],r[s+1],a);return a&&Y1(a,a.next)&&(rg(a),a=a.next),a}function vd(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(Y1(e,e.next)||Hr(e.prev,e,e.next)===0)){if(rg(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function tg(r,t,e,i,n,s,a){if(r){!a&&s&&Met(r,i,n,s);for(var o=r,h,u;r.prev!==r.next;){if(h=r.prev,u=r.next,s?Ret(r,i,n,s):Iet(r)){t.push(h.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),rg(r),r=u.next,o=u.next;continue}if(r=u,r===o){a?a===1?(r=Cet(vd(r),t,e),tg(r,t,e,i,n,s,2)):a===2&&Aet(r,t,e,i,n,s):tg(vd(r),t,e,i,n,s,1);break}}}}function Iet(r){var t=r.prev,e=r,i=r.next;if(Hr(t,e,i)>=0)return!1;for(var n=t.x,s=e.x,a=i.x,o=t.y,h=e.y,u=i.y,l=n<s?n<a?n:a:s<a?s:a,f=o<h?o<u?o:u:h<u?h:u,c=n>s?n>a?n:a:s>a?s:a,d=o>h?o>u?o:u:h>u?h:u,v=i.next;v!==t;){if(v.x>=l&&v.x<=c&&v.y>=f&&v.y<=d&&dv(n,o,s,h,a,u,v.x,v.y)&&Hr(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Ret(r,t,e,i){var n=r.prev,s=r,a=r.next;if(Hr(n,s,a)>=0)return!1;for(var o=n.x,h=s.x,u=a.x,l=n.y,f=s.y,c=a.y,d=o<h?o<u?o:u:h<u?h:u,v=l<f?l<c?l:c:f<c?f:c,_=o>h?o>u?o:u:h>u?h:u,m=l>f?l>c?l:c:f>c?f:c,g=vP(d,v,t,e,i),T=vP(_,m,t,e,i),b=r.prevZ,S=r.nextZ;b&&b.z>=g&&S&&S.z<=T;){if(b.x>=d&&b.x<=_&&b.y>=v&&b.y<=m&&b!==n&&b!==a&&dv(o,l,h,f,u,c,b.x,b.y)&&Hr(b.prev,b,b.next)>=0||(b=b.prevZ,S.x>=d&&S.x<=_&&S.y>=v&&S.y<=m&&S!==n&&S!==a&&dv(o,l,h,f,u,c,S.x,S.y)&&Hr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=_&&b.y>=v&&b.y<=m&&b!==n&&b!==a&&dv(o,l,h,f,u,c,b.x,b.y)&&Hr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;S&&S.z<=T;){if(S.x>=d&&S.x<=_&&S.y>=v&&S.y<=m&&S!==n&&S!==a&&dv(o,l,h,f,u,c,S.x,S.y)&&Hr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function Cet(r,t,e){var i=r;do{var n=i.prev,s=i.next.next;!Y1(n,s)&&lz(n,i,i.next,s)&&eg(n,s)&&eg(s,n)&&(t.push(n.i/e|0),t.push(i.i/e|0),t.push(s.i/e|0),rg(i),rg(i.next),i=r=s),i=i.next}while(i!==r);return vd(i)}function Aet(r,t,e,i,n,s){var a=r;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Get(a,o)){var h=fz(a,o);a=vd(a,a.next),h=vd(h,h.next),tg(a,t,e,i,n,s,0),tg(h,t,e,i,n,s,0);return}o=o.next}a=a.next}while(a!==r)}function Net(r,t,e,i){var n=[],s,a,o,h,u;for(s=0,a=t.length;s<a;s++)o=t[s]*i,h=s<a-1?t[s+1]*i:r.length,u=uz(r,o,h,i,!1),u===u.next&&(u.steiner=!0),n.push(Bet(u));for(n.sort(Pet),s=0;s<n.length;s++)e=Oet(n[s],e);return e}function Pet(r,t){return r.x-t.x}function Oet(r,t){var e=Fet(r,t);if(!e)return t;var i=fz(e,r);return vd(i,i.next),vd(e,e.next)}function Fet(r,t){var e=t,i=r.x,n=r.y,s=-1/0,a;do{if(n<=e.y&&n>=e.next.y&&e.next.y!==e.y){var o=e.x+(n-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=i&&o>s&&(s=o,a=e.x<e.next.x?e:e.next,o===i))return a}e=e.next}while(e!==t);if(!a)return null;var h=a,u=a.x,l=a.y,f=1/0,c;e=a;do i>=e.x&&e.x>=u&&i!==e.x&&dv(n<l?i:s,n,u,l,n<l?s:i,n,e.x,e.y)&&(c=Math.abs(n-e.y)/(i-e.x),eg(e,r)&&(c<f||c===f&&(e.x>a.x||e.x===a.x&&Uet(a,e)))&&(a=e,f=c)),e=e.next;while(e!==h);return a}function Uet(r,t){return Hr(r.prev,r,t.prev)<0&&Hr(t.next,r,r.next)<0}function Met(r,t,e,i){var n=r;do n.z===0&&(n.z=vP(n.x,n.y,t,e,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,Let(n)}function Let(r){var t,e,i,n,s,a,o,h,u=1;do{for(e=r,r=null,s=null,a=0;e;){for(a++,i=e,o=0,t=0;t<u&&(o++,i=i.nextZ,!!i);t++);for(h=u;o>0||h>0&&i;)o!==0&&(h===0||!i||e.z<=i.z)?(n=e,e=e.nextZ,o--):(n=i,i=i.nextZ,h--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;e=i}s.nextZ=null,u*=2}while(a>1);return r}function vP(r,t,e,i,n){return r=(r-e)*n|0,t=(t-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function Bet(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function dv(r,t,e,i,n,s,a,o){return(n-a)*(t-o)>=(r-a)*(s-o)&&(r-a)*(i-o)>=(e-a)*(t-o)&&(e-a)*(s-o)>=(n-a)*(i-o)}function Get(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!ket(r,t)&&(eg(r,t)&&eg(t,r)&&Det(r,t)&&(Hr(r.prev,r,t.prev)||Hr(r,t.prev,t))||Y1(r,t)&&Hr(r.prev,r,r.next)>0&&Hr(t.prev,t,t.next)>0)}function Hr(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function Y1(r,t){return r.x===t.x&&r.y===t.y}function lz(r,t,e,i){var n=Ox(Hr(r,t,e)),s=Ox(Hr(r,t,i)),a=Ox(Hr(e,i,r)),o=Ox(Hr(e,i,t));return!!(n!==s&&a!==o||n===0&&Px(r,e,t)||s===0&&Px(r,i,t)||a===0&&Px(e,r,i)||o===0&&Px(e,t,i))}function Px(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function Ox(r){return r>0?1:r<0?-1:0}function ket(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&lz(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function eg(r,t){return Hr(r.prev,r,r.next)<0?Hr(r,t,r.next)>=0&&Hr(r,r.prev,t)>=0:Hr(r,t,r.prev)<0||Hr(r,r.next,t)<0}function Det(r,t){var e=r,i=!1,n=(r.x+t.x)/2,s=(r.y+t.y)/2;do e.y>s!=e.next.y>s&&e.next.y!==e.y&&n<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function fz(r,t){var e=new yP(r.i,r.x,r.y),i=new yP(t.i,t.x,t.y),n=r.next,s=t.prev;return r.next=t,t.prev=r,e.next=n,n.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function dD(r,t,e,i){var n=new yP(r,t,e);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function rg(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function yP(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}W1.deviation=function(r,t,e,i){var n=t&&t.length,s=n?t[0]*e:r.length,a=Math.abs(mP(r,0,s,e));if(n)for(var o=0,h=t.length;o<h;o++){var u=t[o]*e,l=o<h-1?t[o+1]*e:r.length;a-=Math.abs(mP(r,u,l,e))}var f=0;for(o=0;o<i.length;o+=3){var c=i[o]*e,d=i[o+1]*e,v=i[o+2]*e;f+=Math.abs((r[c]-r[v])*(r[d+1]-r[c+1])-(r[c]-r[d])*(r[v+1]-r[c+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function mP(r,t,e,i){for(var n=0,s=t,a=e-i;s<e;s+=i)n+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return n}W1.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,n=0;n<r.length;n++){for(var s=0;s<r[n].length;s++)for(var a=0;a<t;a++)e.vertices.push(r[n][s][a]);n>0&&(i+=r[n-1].length,e.holes.push(i))}return e};var $et=pL.exports;const d0=Sd($et);var aw={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */aw.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,n=r&&!r.nodeType&&r,s=typeof m_=="object"&&m_;(s.global===s||s.window===s||s.self===s)&&(e=s);var a,o=2147483647,h=36,u=1,l=26,f=38,c=700,d=72,v=128,_="-",m=/^xn--/,g=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=h-u,R=Math.floor,U=String.fromCharCode,L;function $(z){throw new RangeError(b[z])}function k(z,Z){for(var Q=z.length,mt=[];Q--;)mt[Q]=Z(z[Q]);return mt}function H(z,Z){var Q=z.split("@"),mt="";Q.length>1&&(mt=Q[0]+"@",z=Q[1]),z=z.replace(T,".");var Et=z.split("."),It=k(Et,Z).join(".");return mt+It}function it(z){for(var Z=[],Q=0,mt=z.length,Et,It;Q<mt;)Et=z.charCodeAt(Q++),Et>=55296&&Et<=56319&&Q<mt?(It=z.charCodeAt(Q++),(It&64512)==56320?Z.push(((Et&1023)<<10)+(It&1023)+65536):(Z.push(Et),Q--)):Z.push(Et);return Z}function tt(z){return k(z,function(Z){var Q="";return Z>65535&&(Z-=65536,Q+=U(Z>>>10&1023|55296),Z=56320|Z&1023),Q+=U(Z),Q}).join("")}function j(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:h}function at(z,Z){return z+22+75*(z<26)-((Z!=0)<<5)}function K(z,Z,Q){var mt=0;for(z=Q?R(z/c):z>>1,z+=R(z/Z);z>S*l>>1;mt+=h)z=R(z/S);return R(mt+(S+1)*z/(z+f))}function et(z){var Z=[],Q=z.length,mt,Et=0,It=v,wt=d,ht,I,M,O,N,B,G,W,X;for(ht=z.lastIndexOf(_),ht<0&&(ht=0),I=0;I<ht;++I)z.charCodeAt(I)>=128&&$("not-basic"),Z.push(z.charCodeAt(I));for(M=ht>0?ht+1:0;M<Q;){for(O=Et,N=1,B=h;M>=Q&&$("invalid-input"),G=j(z.charCodeAt(M++)),(G>=h||G>R((o-Et)/N))&&$("overflow"),Et+=G*N,W=B<=wt?u:B>=wt+l?l:B-wt,!(G<W);B+=h)X=h-W,N>R(o/X)&&$("overflow"),N*=X;mt=Z.length+1,wt=K(Et-O,mt,O==0),R(Et/mt)>o-It&&$("overflow"),It+=R(Et/mt),Et%=mt,Z.splice(Et++,0,It)}return tt(Z)}function st(z){var Z,Q,mt,Et,It,wt,ht,I,M,O,N,B=[],G,W,X,ut;for(z=it(z),G=z.length,Z=v,Q=0,It=d,wt=0;wt<G;++wt)N=z[wt],N<128&&B.push(U(N));for(mt=Et=B.length,Et&&B.push(_);mt<G;){for(ht=o,wt=0;wt<G;++wt)N=z[wt],N>=Z&&N<ht&&(ht=N);for(W=mt+1,ht-Z>R((o-Q)/W)&&$("overflow"),Q+=(ht-Z)*W,Z=ht,wt=0;wt<G;++wt)if(N=z[wt],N<Z&&++Q>o&&$("overflow"),N==Z){for(I=Q,M=h;O=M<=It?u:M>=It+l?l:M-It,!(I<O);M+=h)ut=I-O,X=h-O,B.push(U(at(O+ut%X,0))),I=R(ut/X);B.push(U(at(I,0))),It=K(Q,W,mt==Et),Q=0,++mt}++Q,++Z}return B.join("")}function V(z){return H(z,function(Z){return m.test(Z)?et(Z.slice(4).toLowerCase()):Z})}function Y(z){return H(z,function(Z){return g.test(Z)?"xn--"+st(Z):Z})}if(a={version:"1.4.1",ucs2:{decode:it,encode:tt},decode:et,encode:st,toASCII:Y,toUnicode:V},i&&n)if(r.exports==i)n.exports=a;else for(L in a)a.hasOwnProperty(L)&&(i[L]=a[L]);else e.punycode=a})(m_)})(aw,aw.exports);var Het=aw.exports,Xet=Error,Vet=EvalError,jet=RangeError,zet=ReferenceError,cz=SyntaxError,p0=TypeError,Wet=URIError,Yet=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(e in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==n||a.enumerable!==!0)return!1}return!0},pD=typeof Symbol<"u"&&Symbol,qet=Yet,Ket=function(){return typeof pD!="function"||typeof Symbol!="function"||typeof pD("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:qet()},dC={__proto__:null,foo:{}},Zet=Object,Qet=function(){return{__proto__:dC}.foo===dC.foo&&!(dC instanceof Zet)},Jet="Function.prototype.bind called on incompatible ",trt=Object.prototype.toString,ert=Math.max,rrt="[object Function]",vD=function(t,e){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var s=0;s<e.length;s+=1)i[s+t.length]=e[s];return i},irt=function(t,e){for(var i=[],n=e,s=0;n<t.length;n+=1,s+=1)i[s]=t[n];return i},nrt=function(r,t){for(var e="",i=0;i<r.length;i+=1)e+=r[i],i+1<r.length&&(e+=t);return e},srt=function(t){var e=this;if(typeof e!="function"||trt.apply(e)!==rrt)throw new TypeError(Jet+e);for(var i=irt(arguments,1),n,s=function(){if(this instanceof n){var l=e.apply(this,vD(i,arguments));return Object(l)===l?l:this}return e.apply(t,vD(i,arguments))},a=ert(0,e.length-i.length),o=[],h=0;h<a;h++)o[h]="$"+h;if(n=Function("binder","return function ("+nrt(o,",")+"){ return binder.apply(this,arguments); }")(s),e.prototype){var u=function(){};u.prototype=e.prototype,n.prototype=new u,u.prototype=null}return n},art=srt,vL=Function.prototype.bind||art,ort=Function.prototype.call,hrt=Object.prototype.hasOwnProperty,urt=vL,lrt=urt.call(ort,hrt),fe,frt=Xet,crt=Vet,drt=jet,prt=zet,ly=cz,Cv=p0,vrt=Wet,dz=Function,pC=function(r){try{return dz('"use strict"; return ('+r+").constructor;")()}catch{}},zc=Object.getOwnPropertyDescriptor;if(zc)try{zc({},"")}catch{zc=null}var vC=function(){throw new Cv},yrt=zc?function(){try{return arguments.callee,vC}catch{try{return zc(arguments,"callee").get}catch{return vC}}}():vC,Jd=Ket(),mrt=Qet(),Di=Object.getPrototypeOf||(mrt?function(r){return r.__proto__}:null),Kp={},_rt=typeof Uint8Array>"u"||!Di?fe:Di(Uint8Array),Wc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?fe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?fe:ArrayBuffer,"%ArrayIteratorPrototype%":Jd&&Di?Di([][Symbol.iterator]()):fe,"%AsyncFromSyncIteratorPrototype%":fe,"%AsyncFunction%":Kp,"%AsyncGenerator%":Kp,"%AsyncGeneratorFunction%":Kp,"%AsyncIteratorPrototype%":Kp,"%Atomics%":typeof Atomics>"u"?fe:Atomics,"%BigInt%":typeof BigInt>"u"?fe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?fe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?fe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?fe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":frt,"%eval%":eval,"%EvalError%":crt,"%Float32Array%":typeof Float32Array>"u"?fe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?fe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?fe:FinalizationRegistry,"%Function%":dz,"%GeneratorFunction%":Kp,"%Int8Array%":typeof Int8Array>"u"?fe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?fe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?fe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Jd&&Di?Di(Di([][Symbol.iterator]())):fe,"%JSON%":typeof JSON=="object"?JSON:fe,"%Map%":typeof Map>"u"?fe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Jd||!Di?fe:Di(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?fe:Promise,"%Proxy%":typeof Proxy>"u"?fe:Proxy,"%RangeError%":drt,"%ReferenceError%":prt,"%Reflect%":typeof Reflect>"u"?fe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?fe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Jd||!Di?fe:Di(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?fe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Jd&&Di?Di(""[Symbol.iterator]()):fe,"%Symbol%":Jd?Symbol:fe,"%SyntaxError%":ly,"%ThrowTypeError%":yrt,"%TypedArray%":_rt,"%TypeError%":Cv,"%Uint8Array%":typeof Uint8Array>"u"?fe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?fe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?fe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?fe:Uint32Array,"%URIError%":vrt,"%WeakMap%":typeof WeakMap>"u"?fe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?fe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?fe:WeakSet};if(Di)try{null.error}catch(r){var grt=Di(Di(r));Wc["%Error.prototype%"]=grt}var xrt=function r(t){var e;if(t==="%AsyncFunction%")e=pC("async function () {}");else if(t==="%GeneratorFunction%")e=pC("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=pC("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=r("%AsyncGenerator%");n&&Di&&(e=Di(n.prototype))}return Wc[t]=e,e},yD={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v0=vL,ow=lrt,brt=v0.call(Function.call,Array.prototype.concat),Trt=v0.call(Function.apply,Array.prototype.splice),mD=v0.call(Function.call,String.prototype.replace),hw=v0.call(Function.call,String.prototype.slice),Ert=v0.call(Function.call,RegExp.prototype.exec),wrt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Irt=/\\(\\)?/g,Rrt=function(t){var e=hw(t,0,1),i=hw(t,-1);if(e==="%"&&i!=="%")throw new ly("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new ly("invalid intrinsic syntax, expected opening `%`");var n=[];return mD(t,wrt,function(s,a,o,h){n[n.length]=o?mD(h,Irt,"$1"):a||s}),n},Crt=function(t,e){var i=t,n;if(ow(yD,i)&&(n=yD[i],i="%"+n[0]+"%"),ow(Wc,i)){var s=Wc[i];if(s===Kp&&(s=xrt(i)),typeof s>"u"&&!e)throw new Cv("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:s}}throw new ly("intrinsic "+t+" does not exist!")},Iy=function(t,e){if(typeof t!="string"||t.length===0)throw new Cv("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new Cv('"allowMissing" argument must be a boolean');if(Ert(/^%?[^%]*%?$/,t)===null)throw new ly("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Rrt(t),n=i.length>0?i[0]:"",s=Crt("%"+n+"%",e),a=s.name,o=s.value,h=!1,u=s.alias;u&&(n=u[0],Trt(i,brt([0,1],u)));for(var l=1,f=!0;l<i.length;l+=1){var c=i[l],d=hw(c,0,1),v=hw(c,-1);if((d==='"'||d==="'"||d==="`"||v==='"'||v==="'"||v==="`")&&d!==v)throw new ly("property names with quotes must have matching quotes");if((c==="constructor"||!f)&&(h=!0),n+="."+c,a="%"+n+"%",ow(Wc,a))o=Wc[a];else if(o!=null){if(!(c in o)){if(!e)throw new Cv("base intrinsic for "+t+" exists, but the property is not available.");return}if(zc&&l+1>=i.length){var _=zc(o,c);f=!!_,f&&"get"in _&&!("originalValue"in _.get)?o=_.get:o=o[c]}else f=ow(o,c),o=o[c];f&&!h&&(Wc[a]=o)}}return o},pz={exports:{}},yC,_D;function yL(){if(_D)return yC;_D=1;var r=Iy,t=r("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return yC=t,yC}var Art=Iy,bE=Art("%Object.getOwnPropertyDescriptor%",!0);if(bE)try{bE([],"length")}catch{bE=null}var vz=bE,gD=yL(),Srt=cz,tp=p0,xD=vz,Nrt=function(t,e,i){if(!t||typeof t!="object"&&typeof t!="function")throw new tp("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new tp("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new tp("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new tp("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new tp("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new tp("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,h=!!xD&&xD(t,e);if(gD)gD(t,e,{configurable:a===null&&h?h.configurable:!a,enumerable:n===null&&h?h.enumerable:!n,value:i,writable:s===null&&h?h.writable:!s});else if(o||!n&&!s&&!a)t[e]=i;else throw new Srt("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_P=yL(),yz=function(){return!!_P};yz.hasArrayLengthDefineBug=function(){if(!_P)return null;try{return _P([],"length",{value:1}).length!==1}catch{return!0}};var Prt=yz,Ort=Iy,bD=Nrt,Frt=Prt(),TD=vz,ED=p0,Urt=Ort("%Math.floor%"),Mrt=function(t,e){if(typeof t!="function")throw new ED("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||Urt(e)!==e)throw new ED("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,s=!0;if("length"in t&&TD){var a=TD(t,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(s=!1)}return(n||s||!i)&&(Frt?bD(t,"length",e,!0,!0):bD(t,"length",e)),t};(function(r){var t=vL,e=Iy,i=Mrt,n=p0,s=e("%Function.prototype.apply%"),a=e("%Function.prototype.call%"),o=e("%Reflect.apply%",!0)||t.call(a,s),h=yL(),u=e("%Math.max%");r.exports=function(c){if(typeof c!="function")throw new n("a function is required");var d=o(t,a,arguments);return i(d,1+u(0,c.length-(arguments.length-1)),!0)};var l=function(){return o(t,s,arguments)};h?h(r.exports,"apply",{value:l}):r.exports.apply=l})(pz);var Lrt=pz.exports,mz=Iy,_z=Lrt,Brt=_z(mz("String.prototype.indexOf")),Grt=function(t,e){var i=mz(t,!!e);return typeof i=="function"&&Brt(t,".prototype.")>-1?_z(i):i};const krt={},Drt=Object.freeze(Object.defineProperty({__proto__:null,default:krt},Symbol.toStringTag,{value:"Module"})),$rt=Bj(Drt);var mL=typeof Map=="function"&&Map.prototype,mC=Object.getOwnPropertyDescriptor&&mL?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,uw=mL&&mC&&typeof mC.get=="function"?mC.get:null,wD=mL&&Map.prototype.forEach,_L=typeof Set=="function"&&Set.prototype,_C=Object.getOwnPropertyDescriptor&&_L?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,lw=_L&&_C&&typeof _C.get=="function"?_C.get:null,ID=_L&&Set.prototype.forEach,Hrt=typeof WeakMap=="function"&&WeakMap.prototype,C_=Hrt?WeakMap.prototype.has:null,Xrt=typeof WeakSet=="function"&&WeakSet.prototype,A_=Xrt?WeakSet.prototype.has:null,Vrt=typeof WeakRef=="function"&&WeakRef.prototype,RD=Vrt?WeakRef.prototype.deref:null,jrt=Boolean.prototype.valueOf,zrt=Object.prototype.toString,Wrt=Function.prototype.toString,Yrt=String.prototype.match,gL=String.prototype.slice,$u=String.prototype.replace,qrt=String.prototype.toUpperCase,CD=String.prototype.toLowerCase,gz=RegExp.prototype.test,AD=Array.prototype.concat,po=Array.prototype.join,Krt=Array.prototype.slice,SD=Math.floor,gP=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gC=Object.getOwnPropertySymbols,xP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,fy=typeof Symbol=="function"&&typeof Symbol.iterator=="object",wn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===fy||!0)?Symbol.toStringTag:null,xz=Object.prototype.propertyIsEnumerable,ND=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function PD(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||gz.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-SD(-r):SD(r);if(i!==r){var n=String(i),s=gL.call(t,n.length+1);return $u.call(n,e,"$&_")+"."+$u.call($u.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $u.call(t,e,"$&_")}var bP=$rt,OD=bP.custom,FD=Tz(OD)?OD:null,Zrt=function r(t,e,i,n){var s=e||{};if(bu(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(bu(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=bu(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(bu(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(bu(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return wz(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var h=String(t);return o?PD(t,h):h}if(typeof t=="bigint"){var u=String(t)+"n";return o?PD(t,u):u}var l=typeof s.depth>"u"?5:s.depth;if(typeof i>"u"&&(i=0),i>=l&&l>0&&typeof t=="object")return TP(t)?"[Array]":"[Object]";var f=vit(s,i);if(typeof n>"u")n=[];else if(Ez(n,t)>=0)return"[Circular]";function c(j,at,K){if(at&&(n=Krt.call(n),n.push(at)),K){var et={depth:s.depth};return bu(s,"quoteStyle")&&(et.quoteStyle=s.quoteStyle),r(j,et,i+1,n)}return r(j,s,i+1,n)}if(typeof t=="function"&&!UD(t)){var d=ait(t),v=Fx(t,c);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(v.length>0?" { "+po.call(v,", ")+" }":"")}if(Tz(t)){var _=fy?$u.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):xP.call(t);return typeof t=="object"&&!fy?am(_):_}if(cit(t)){for(var m="<"+CD.call(String(t.nodeName)),g=t.attributes||[],T=0;T<g.length;T++)m+=" "+g[T].name+"="+bz(Qrt(g[T].value),"double",s);return m+=">",t.childNodes&&t.childNodes.length&&(m+="..."),m+="</"+CD.call(String(t.nodeName))+">",m}if(TP(t)){if(t.length===0)return"[]";var b=Fx(t,c);return f&&!pit(b)?"["+EP(b,f)+"]":"[ "+po.call(b,", ")+" ]"}if(tit(t)){var S=Fx(t,c);return!("cause"in Error.prototype)&&"cause"in t&&!xz.call(t,"cause")?"{ ["+String(t)+"] "+po.call(AD.call("[cause]: "+c(t.cause),S),", ")+" }":S.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+po.call(S,", ")+" }"}if(typeof t=="object"&&a){if(FD&&typeof t[FD]=="function"&&bP)return bP(t,{depth:l-i});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(oit(t)){var R=[];return wD&&wD.call(t,function(j,at){R.push(c(at,t,!0)+" => "+c(j,t))}),MD("Map",uw.call(t),R,f)}if(lit(t)){var U=[];return ID&&ID.call(t,function(j){U.push(c(j,t))}),MD("Set",lw.call(t),U,f)}if(hit(t))return xC("WeakMap");if(fit(t))return xC("WeakSet");if(uit(t))return xC("WeakRef");if(rit(t))return am(c(Number(t)));if(nit(t))return am(c(gP.call(t)));if(iit(t))return am(jrt.call(t));if(eit(t))return am(c(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===m_)return"{ [object globalThis] }";if(!Jrt(t)&&!UD(t)){var L=Fx(t,c),$=ND?ND(t)===Object.prototype:t instanceof Object||t.constructor===Object,k=t instanceof Object?"":"null prototype",H=!$&&wn&&Object(t)===t&&wn in t?gL.call(Yl(t),8,-1):k?"Object":"",it=$||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",tt=it+(H||k?"["+po.call(AD.call([],H||[],k||[]),": ")+"] ":"");return L.length===0?tt+"{}":f?tt+"{"+EP(L,f)+"}":tt+"{ "+po.call(L,", ")+" }"}return String(t)};function bz(r,t,e){var i=(e.quoteStyle||t)==="double"?'"':"'";return i+r+i}function Qrt(r){return $u.call(String(r),/"/g,"&quot;")}function TP(r){return Yl(r)==="[object Array]"&&(!wn||!(typeof r=="object"&&wn in r))}function Jrt(r){return Yl(r)==="[object Date]"&&(!wn||!(typeof r=="object"&&wn in r))}function UD(r){return Yl(r)==="[object RegExp]"&&(!wn||!(typeof r=="object"&&wn in r))}function tit(r){return Yl(r)==="[object Error]"&&(!wn||!(typeof r=="object"&&wn in r))}function eit(r){return Yl(r)==="[object String]"&&(!wn||!(typeof r=="object"&&wn in r))}function rit(r){return Yl(r)==="[object Number]"&&(!wn||!(typeof r=="object"&&wn in r))}function iit(r){return Yl(r)==="[object Boolean]"&&(!wn||!(typeof r=="object"&&wn in r))}function Tz(r){if(fy)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!xP)return!1;try{return xP.call(r),!0}catch{}return!1}function nit(r){if(!r||typeof r!="object"||!gP)return!1;try{return gP.call(r),!0}catch{}return!1}var sit=Object.prototype.hasOwnProperty||function(r){return r in this};function bu(r,t){return sit.call(r,t)}function Yl(r){return zrt.call(r)}function ait(r){if(r.name)return r.name;var t=Yrt.call(Wrt.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function Ez(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function oit(r){if(!uw||!r||typeof r!="object")return!1;try{uw.call(r);try{lw.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function hit(r){if(!C_||!r||typeof r!="object")return!1;try{C_.call(r,C_);try{A_.call(r,A_)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function uit(r){if(!RD||!r||typeof r!="object")return!1;try{return RD.call(r),!0}catch{}return!1}function lit(r){if(!lw||!r||typeof r!="object")return!1;try{lw.call(r);try{uw.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function fit(r){if(!A_||!r||typeof r!="object")return!1;try{A_.call(r,A_);try{C_.call(r,C_)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function cit(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function wz(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return wz(gL.call(r,0,t.maxStringLength),t)+i}var n=$u.call($u.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,dit);return bz(n,"single",t)}function dit(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+qrt.call(t.toString(16))}function am(r){return"Object("+r+")"}function xC(r){return r+" { ? }"}function MD(r,t,e,i){var n=i?EP(e,i):po.call(e,", ");return r+" ("+t+") {"+n+"}"}function pit(r){for(var t=0;t<r.length;t++)if(Ez(r[t],`
`)>=0)return!1;return!0}function vit(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=po.call(Array(r.indent+1)," ");else return null;return{base:e,prev:po.call(Array(t+1),e)}}function EP(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+po.call(r,","+e)+`
`+t.prev}function Fx(r,t){var e=TP(r),i=[];if(e){i.length=r.length;for(var n=0;n<r.length;n++)i[n]=bu(r,n)?t(r[n],r):""}var s=typeof gC=="function"?gC(r):[],a;if(fy){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var h in r)bu(r,h)&&(e&&String(Number(h))===h&&h<r.length||fy&&a["$"+h]instanceof Symbol||(gz.call(/[^\w$]/,h)?i.push(t(h,r)+": "+t(r[h],r)):i.push(h+": "+t(r[h],r))));if(typeof gC=="function")for(var u=0;u<s.length;u++)xz.call(r,s[u])&&i.push("["+t(s[u])+"]: "+t(r[s[u]],r));return i}var Iz=Iy,Ry=Grt,yit=Zrt,mit=p0,Ux=Iz("%WeakMap%",!0),Mx=Iz("%Map%",!0),_it=Ry("WeakMap.prototype.get",!0),git=Ry("WeakMap.prototype.set",!0),xit=Ry("WeakMap.prototype.has",!0),bit=Ry("Map.prototype.get",!0),Tit=Ry("Map.prototype.set",!0),Eit=Ry("Map.prototype.has",!0),xL=function(r,t){for(var e=r,i;(i=e.next)!==null;e=i)if(i.key===t)return e.next=i.next,i.next=r.next,r.next=i,i},wit=function(r,t){var e=xL(r,t);return e&&e.value},Iit=function(r,t,e){var i=xL(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},Rit=function(r,t){return!!xL(r,t)},Cit=function(){var t,e,i,n={assert:function(s){if(!n.has(s))throw new mit("Side channel does not contain "+yit(s))},get:function(s){if(Ux&&s&&(typeof s=="object"||typeof s=="function")){if(t)return _it(t,s)}else if(Mx){if(e)return bit(e,s)}else if(i)return wit(i,s)},has:function(s){if(Ux&&s&&(typeof s=="object"||typeof s=="function")){if(t)return xit(t,s)}else if(Mx){if(e)return Eit(e,s)}else if(i)return Rit(i,s);return!1},set:function(s,a){Ux&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Ux),git(t,s,a)):Mx?(e||(e=new Mx),Tit(e,s,a)):(i||(i={key:{},next:null}),Iit(i,s,a))}};return n},Ait=String.prototype.replace,Sit=/%20/g,bC={RFC1738:"RFC1738",RFC3986:"RFC3986"},bL={default:bC.RFC3986,formatters:{RFC1738:function(r){return Ait.call(r,Sit,"+")},RFC3986:function(r){return String(r)}},RFC1738:bC.RFC1738,RFC3986:bC.RFC3986},Nit=bL,TC=Object.prototype.hasOwnProperty,kc=Array.isArray,ao=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),Pit=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(kc(i)){for(var n=[],s=0;s<i.length;++s)typeof i[s]<"u"&&n.push(i[s]);e.obj[e.prop]=n}}},Rz=function(t,e){for(var i=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)typeof t[n]<"u"&&(i[n]=t[n]);return i},Oit=function r(t,e,i){if(!e)return t;if(typeof e!="object"){if(kc(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!TC.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var n=t;return kc(t)&&!kc(e)&&(n=Rz(t,i)),kc(t)&&kc(e)?(e.forEach(function(s,a){if(TC.call(t,a)){var o=t[a];o&&typeof o=="object"&&s&&typeof s=="object"?t[a]=r(o,s,i):t.push(s)}else t[a]=s}),t):Object.keys(e).reduce(function(s,a){var o=e[a];return TC.call(s,a)?s[a]=r(s[a],o,i):s[a]=o,s},n)},Fit=function(t,e){return Object.keys(e).reduce(function(i,n){return i[n]=e[n],i},t)},Uit=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},EC=1024,Mit=function(t,e,i,n,s){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),i==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var o="",h=0;h<a.length;h+=EC){for(var u=a.length>=EC?a.slice(h,h+EC):a,l=[],f=0;f<u.length;++f){var c=u.charCodeAt(f);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===Nit.RFC1738&&(c===40||c===41)){l[l.length]=u.charAt(f);continue}if(c<128){l[l.length]=ao[c];continue}if(c<2048){l[l.length]=ao[192|c>>6]+ao[128|c&63];continue}if(c<55296||c>=57344){l[l.length]=ao[224|c>>12]+ao[128|c>>6&63]+ao[128|c&63];continue}f+=1,c=65536+((c&1023)<<10|u.charCodeAt(f)&1023),l[l.length]=ao[240|c>>18]+ao[128|c>>12&63]+ao[128|c>>6&63]+ao[128|c&63]}o+=l.join("")}return o},Lit=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],n=0;n<e.length;++n)for(var s=e[n],a=s.obj[s.prop],o=Object.keys(a),h=0;h<o.length;++h){var u=o[h],l=a[u];typeof l=="object"&&l!==null&&i.indexOf(l)===-1&&(e.push({obj:a,prop:u}),i.push(l))}return Pit(e),t},Bit=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Git=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},kit=function(t,e){return[].concat(t,e)},Dit=function(t,e){if(kc(t)){for(var i=[],n=0;n<t.length;n+=1)i.push(e(t[n]));return i}return e(t)},Cz={arrayToObject:Rz,assign:Fit,combine:kit,compact:Lit,decode:Uit,encode:Mit,isBuffer:Git,isRegExp:Bit,maybeMap:Dit,merge:Oit},Az=Cit,TE=Cz,S_=bL,$it=Object.prototype.hasOwnProperty,Sz={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},co=Array.isArray,Hit=Array.prototype.push,Nz=function(r,t){Hit.apply(r,co(t)?t:[t])},Xit=Date.prototype.toISOString,LD=S_.default,Ai={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:TE.encode,encodeValuesOnly:!1,format:LD,formatter:S_.formatters[LD],indices:!1,serializeDate:function(t){return Xit.call(t)},skipNulls:!1,strictNullHandling:!1},Vit=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},wC={},jit=function r(t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T){for(var b=t,S=T,R=0,U=!1;(S=S.get(wC))!==void 0&&!U;){var L=S.get(t);if(R+=1,typeof L<"u"){if(L===R)throw new RangeError("Cyclic object value");U=!0}typeof S.get(wC)>"u"&&(R=0)}if(typeof l=="function"?b=l(e,b):b instanceof Date?b=d(b):i==="comma"&&co(b)&&(b=TE.maybeMap(b,function(z){return z instanceof Date?d(z):z})),b===null){if(a)return u&&!m?u(e,Ai.encoder,g,"key",v):e;b=""}if(Vit(b)||TE.isBuffer(b)){if(u){var $=m?e:u(e,Ai.encoder,g,"key",v);return[_($)+"="+_(u(b,Ai.encoder,g,"value",v))]}return[_(e)+"="+_(String(b))]}var k=[];if(typeof b>"u")return k;var H;if(i==="comma"&&co(b))m&&u&&(b=TE.maybeMap(b,u)),H=[{value:b.length>0?b.join(",")||null:void 0}];else if(co(l))H=l;else{var it=Object.keys(b);H=f?it.sort(f):it}var tt=h?e.replace(/\./g,"%2E"):e,j=n&&co(b)&&b.length===1?tt+"[]":tt;if(s&&co(b)&&b.length===0)return j+"[]";for(var at=0;at<H.length;++at){var K=H[at],et=typeof K=="object"&&typeof K.value<"u"?K.value:b[K];if(!(o&&et===null)){var st=c&&h?K.replace(/\./g,"%2E"):K,V=co(b)?typeof i=="function"?i(j,st):j:j+(c?"."+st:"["+st+"]");T.set(t,R);var Y=Az();Y.set(wC,T),Nz(k,r(et,V,i,n,s,a,o,h,i==="comma"&&m&&co(b)?null:u,l,f,c,d,v,_,m,g,Y))}}return k},zit=function(t){if(!t)return Ai;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||Ai.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=S_.default;if(typeof t.format<"u"){if(!$it.call(S_.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var n=S_.formatters[i],s=Ai.filter;(typeof t.filter=="function"||co(t.filter))&&(s=t.filter);var a;if(t.arrayFormat in Sz?a=t.arrayFormat:"indices"in t?a=t.indices?"indices":"repeat":a=Ai.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:Ai.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ai.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Ai.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ai.charsetSentinel,commaRoundTrip:t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Ai.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ai.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Ai.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Ai.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ai.encodeValuesOnly,filter:s,format:i,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ai.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ai.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ai.strictNullHandling}},Wit=function(r,t){var e=r,i=zit(t),n,s;typeof i.filter=="function"?(s=i.filter,e=s("",e)):co(i.filter)&&(s=i.filter,n=s);var a=[];if(typeof e!="object"||e===null)return"";var o=Sz[i.arrayFormat],h=o==="comma"&&i.commaRoundTrip;n||(n=Object.keys(e)),i.sort&&n.sort(i.sort);for(var u=Az(),l=0;l<n.length;++l){var f=n[l];i.skipNulls&&e[f]===null||Nz(a,jit(e[f],f,o,h,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var c=a.join(i.delimiter),d=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""},cy=Cz,wP=Object.prototype.hasOwnProperty,Yit=Array.isArray,Jr={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:cy.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},qit=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},Pz=function(r,t){return r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1?r.split(","):r},Kit="utf8=%26%2310003%3B",Zit="utf8=%E2%9C%93",Qit=function(t,e){var i={__proto__:null},n=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=e.parameterLimit===1/0?void 0:e.parameterLimit,a=n.split(e.delimiter,s),o=-1,h,u=e.charset;if(e.charsetSentinel)for(h=0;h<a.length;++h)a[h].indexOf("utf8=")===0&&(a[h]===Zit?u="utf-8":a[h]===Kit&&(u="iso-8859-1"),o=h,h=a.length);for(h=0;h<a.length;++h)if(h!==o){var l=a[h],f=l.indexOf("]="),c=f===-1?l.indexOf("="):f+1,d,v;c===-1?(d=e.decoder(l,Jr.decoder,u,"key"),v=e.strictNullHandling?null:""):(d=e.decoder(l.slice(0,c),Jr.decoder,u,"key"),v=cy.maybeMap(Pz(l.slice(c+1),e),function(m){return e.decoder(m,Jr.decoder,u,"value")})),v&&e.interpretNumericEntities&&u==="iso-8859-1"&&(v=qit(v)),l.indexOf("[]=")>-1&&(v=Yit(v)?[v]:v);var _=wP.call(i,d);_&&e.duplicates==="combine"?i[d]=cy.combine(i[d],v):(!_||e.duplicates==="last")&&(i[d]=v)}return i},Jit=function(r,t,e,i){for(var n=i?t:Pz(t,e),s=r.length-1;s>=0;--s){var a,o=r[s];if(o==="[]"&&e.parseArrays)a=e.allowEmptyArrays&&n===""?[]:[].concat(n);else{a=e.plainObjects?Object.create(null):{};var h=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,u=e.decodeDotInKeys?h.replace(/%2E/g,"."):h,l=parseInt(u,10);!e.parseArrays&&u===""?a={0:n}:!isNaN(l)&&o!==u&&String(l)===u&&l>=0&&e.parseArrays&&l<=e.arrayLimit?(a=[],a[l]=n):u!=="__proto__"&&(a[u]=n)}n=a}return n},tnt=function(t,e,i,n){if(t){var s=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,h=i.depth>0&&a.exec(s),u=h?s.slice(0,h.index):s,l=[];if(u){if(!i.plainObjects&&wP.call(Object.prototype,u)&&!i.allowPrototypes)return;l.push(u)}for(var f=0;i.depth>0&&(h=o.exec(s))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&wP.call(Object.prototype,h[1].slice(1,-1))&&!i.allowPrototypes)return;l.push(h[1])}return h&&l.push("["+s.slice(h.index)+"]"),Jit(l,e,i,n)}},ent=function(t){if(!t)return Jr;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e=typeof t.charset>"u"?Jr.charset:t.charset,i=typeof t.duplicates>"u"?Jr.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var n=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Jr.allowDots:!!t.allowDots;return{allowDots:n,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Jr.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Jr.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Jr.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Jr.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Jr.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Jr.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Jr.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Jr.decoder,delimiter:typeof t.delimiter=="string"||cy.isRegExp(t.delimiter)?t.delimiter:Jr.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Jr.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Jr.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Jr.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Jr.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Jr.strictNullHandling}},rnt=function(r,t){var e=ent(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?Object.create(null):{};for(var i=typeof r=="string"?Qit(r,e):r,n=e.plainObjects?Object.create(null):{},s=Object.keys(i),a=0;a<s.length;++a){var o=s[a],h=tnt(o,i[o],e,typeof r=="string");n=cy.merge(n,h,e)}return e.allowSparse===!0?n:cy.compact(n)},int=Wit,nnt=rnt,snt=bL,ant={formats:snt,parse:nnt,stringify:int},ont=Het;function Va(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var hnt=/^([a-z0-9.+-]+:)/i,unt=/:[0-9]*$/,lnt=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,fnt=["<",">",'"',"`"," ","\r",`
`,"	"],cnt=["{","}","|","\\","^","`"].concat(fnt),IP=["'"].concat(cnt),BD=["%","/","?",";","#"].concat(IP),GD=["/","?","#"],dnt=255,kD=/^[+a-z0-9A-Z_-]{0,63}$/,pnt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,vnt={javascript:!0,"javascript:":!0},RP={javascript:!0,"javascript:":!0},Av={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},CP=ant;function q1(r,t,e){if(r&&typeof r=="object"&&r instanceof Va)return r;var i=new Va;return i.parse(r,t,e),i}Va.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),n=i!==-1&&i<r.indexOf("#")?"?":"#",s=r.split(n),a=/\\/g;s[0]=s[0].replace(a,"/"),r=s.join(n);var o=r;if(o=o.trim(),!e&&r.split("#").length===1){var h=lnt.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=CP.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=hnt.exec(o);if(u){u=u[0];var l=u.toLowerCase();this.protocol=l,o=o.substr(u.length)}if(e||u||o.match(/^\/\/[^@/]+@[^@/]+/)){var f=o.substr(0,2)==="//";f&&!(u&&RP[u])&&(o=o.substr(2),this.slashes=!0)}if(!RP[u]&&(f||u&&!Av[u])){for(var c=-1,d=0;d<GD.length;d++){var v=o.indexOf(GD[d]);v!==-1&&(c===-1||v<c)&&(c=v)}var _,m;c===-1?m=o.lastIndexOf("@"):m=o.lastIndexOf("@",c),m!==-1&&(_=o.slice(0,m),o=o.slice(m+1),this.auth=decodeURIComponent(_)),c=-1;for(var d=0;d<BD.length;d++){var v=o.indexOf(BD[d]);v!==-1&&(c===-1||v<c)&&(c=v)}c===-1&&(c=o.length),this.host=o.slice(0,c),o=o.slice(c),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var T=this.hostname.split(/\./),d=0,b=T.length;d<b;d++){var S=T[d];if(S&&!S.match(kD)){for(var R="",U=0,L=S.length;U<L;U++)S.charCodeAt(U)>127?R+="x":R+=S[U];if(!R.match(kD)){var $=T.slice(0,d),k=T.slice(d+1),H=S.match(pnt);H&&($.push(H[1]),k.unshift(H[2])),k.length&&(o="/"+k.join(".")+o),this.hostname=$.join(".");break}}}this.hostname.length>dnt?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=ont.toASCII(this.hostname));var it=this.port?":"+this.port:"",tt=this.hostname||"";this.host=tt+it,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),o[0]!=="/"&&(o="/"+o))}if(!vnt[l])for(var d=0,b=IP.length;d<b;d++){var j=IP[d];if(o.indexOf(j)!==-1){var at=encodeURIComponent(j);at===j&&(at=escape(j)),o=o.split(j).join(at)}}var K=o.indexOf("#");K!==-1&&(this.hash=o.substr(K),o=o.slice(0,K));var et=o.indexOf("?");if(et!==-1?(this.search=o.substr(et),this.query=o.substr(et+1),t&&(this.query=CP.parse(this.query)),o=o.slice(0,et)):t&&(this.search="",this.query={}),o&&(this.pathname=o),Av[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var it=this.pathname||"",st=this.search||"";this.path=it+st}return this.href=this.format(),this};function ynt(r){return typeof r=="string"&&(r=q1(r)),r instanceof Va?r.format():Va.prototype.format.call(r)}Va.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",n=!1,s="";this.host?n=r+this.host:this.hostname&&(n=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=CP.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var a=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Av[t])&&n!==!1?(n="//"+(n||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):n||(n=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),e=e.replace(/[?#]/g,function(o){return encodeURIComponent(o)}),a=a.replace("#","%23"),t+n+e+a+i};function mnt(r,t){return q1(r,!1,!0).resolve(t)}Va.prototype.resolve=function(r){return this.resolveObject(q1(r,!1,!0)).format()};Va.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new Va;t.parse(r,!1,!0),r=t}for(var e=new Va,i=Object.keys(this),n=0;n<i.length;n++){var s=i[n];e[s]=this[s]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var a=Object.keys(r),o=0;o<a.length;o++){var h=a[o];h!=="protocol"&&(e[h]=r[h])}return Av[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!Av[r.protocol]){for(var u=Object.keys(r),l=0;l<u.length;l++){var f=u[l];e[f]=r[f]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!RP[r.protocol]){for(var b=(r.pathname||"").split("/");b.length&&!(r.host=b.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),e.pathname=b.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var c=e.pathname||"",d=e.search||"";e.path=c+d}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var v=e.pathname&&e.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",m=_||v||e.host&&r.pathname,g=m,T=e.pathname&&e.pathname.split("/")||[],b=r.pathname&&r.pathname.split("/")||[],S=e.protocol&&!Av[e.protocol];if(S&&(e.hostname="",e.port=null,e.host&&(T[0]===""?T[0]=e.host:T.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(b[0]===""?b[0]=r.host:b.unshift(r.host)),r.host=null),m=m&&(b[0]===""||T[0]==="")),_)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,T=b;else if(b.length)T||(T=[]),T.pop(),T=T.concat(b),e.search=r.search,e.query=r.query;else if(r.search!=null){if(S){e.host=T.shift(),e.hostname=e.host;var R=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;R&&(e.auth=R.shift(),e.hostname=R.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!T.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var U=T.slice(-1)[0],L=(e.host||r.host||T.length>1)&&(U==="."||U==="..")||U==="",$=0,k=T.length;k>=0;k--)U=T[k],U==="."?T.splice(k,1):U===".."?(T.splice(k,1),$++):$&&(T.splice(k,1),$--);if(!m&&!g)for(;$--;$)T.unshift("..");m&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),L&&T.join("/").substr(-1)!=="/"&&T.push("");var H=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(S){e.hostname=H?"":T.length?T.shift():"",e.host=e.hostname;var R=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;R&&(e.auth=R.shift(),e.hostname=R.shift(),e.host=e.hostname)}return m=m||e.host&&T.length,m&&!H&&T.unshift(""),T.length>0?e.pathname=T.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};Va.prototype.parseHost=function(){var r=this.host,t=unt.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var _nt=q1,gnt=mnt,xnt=ynt;const DD={};function He(r,t,e=3){if(DD[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),DD[t]=!0}function Aa(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function om(r){return r.split("?")[0].split("#")[0]}function bnt(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Tnt(r,t,e){return r.replace(new RegExp(bnt(t),"g"),e)}function Ent(r,t){let e="",i=0,n=-1,s=0,a=-1;for(let o=0;o<=r.length;++o){if(o<r.length)a=r.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(n===o-1||s===1))if(n!==o-1&&s===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const h=e.lastIndexOf("/");if(h!==e.length-1){h===-1?(e="",i=0):(e=e.slice(0,h),i=e.length-1-e.lastIndexOf("/")),n=o,s=0;continue}}else if(e.length===2||e.length===1){e="",i=0,n=o,s=0;continue}}}else e.length>0?e+=`/${r.slice(n+1,o)}`:e=r.slice(n+1,o),i=o-n-1;n=o,s=0}else a===46&&s!==-1?++s:s=-1}return e}const oa={toPosix(r){return Tnt(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Aa(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(Aa(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=om(this.toPosix(t??Zt.ADAPTER.getBaseUrl())),n=om(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?oa.join(n,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Aa(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=Ent(r),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return Aa(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(Aa(i),i.length>0)if(t===void 0)t=i;else{const n=r[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Aa(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,n=!0;const s=this.getProtocol(r),a=r;r=r.slice(s.length);for(let o=r.length-1;o>=1;--o)if(t=r.charCodeAt(o),t===47){if(!n){i=o;break}}else n=!1;return i===-1?e?"/":this.isUrl(a)?s+r:s:e&&i===1?"//":s+r.slice(0,i)},rootname(r){Aa(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Aa(r),t&&Aa(t),r=om(this.toPosix(r));let e=0,i=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let a=t.length-1,o=-1;for(s=r.length-1;s>=0;--s){const h=r.charCodeAt(s);if(h===47){if(!n){e=s+1;break}}else o===-1&&(n=!1,o=s+1),a>=0&&(h===t.charCodeAt(a)?--a===-1&&(i=s):(a=-1,i=o))}return e===i?i=o:i===-1&&(i=r.length),r.slice(e,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!n){e=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(e,i)},extname(r){Aa(r),r=om(this.toPosix(r));let t=-1,e=0,i=-1,n=!0,s=0;for(let a=r.length-1;a>=0;--a){const o=r.charCodeAt(a);if(o===47){if(!n){e=a+1;break}continue}i===-1&&(n=!1,i=a+1),o===46?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){Aa(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=om(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let n;t.root=this.rootname(r),i||this.hasProtocol(r)?n=1:n=0;let s=-1,a=0,o=-1,h=!0,u=r.length-1,l=0;for(;u>=n;--u){if(e=r.charCodeAt(u),e===47){if(!h){a=u+1;break}continue}o===-1&&(h=!1,o=u+1),e===46?s===-1?s=u:l!==1&&(l=1):s!==-1&&(l=-1)}return s===-1||o===-1||l===0||l===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&i?t.base=t.name=r.slice(1,o):t.base=t.name=r.slice(a,o)):(a===0&&i?(t.name=r.slice(1,s),t.base=r.slice(1,o)):(t.name=r.slice(a,s),t.base=r.slice(a,o)),t.ext=r.slice(s,o)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let IC;async function wnt(){return IC??(IC=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return ia.UNPACK;const t=await new Promise(a=>{const o=document.createElement("video");o.onloadeddata=()=>a(o),o.onerror=()=>a(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!t)return ia.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,n),r.deleteFramebuffer(i),r.deleteTexture(e),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),n[0]<=n[3]?ia.PMA:ia.UNPACK})()),IC}let RC;function Int(){return typeof RC>"u"&&(RC=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:Zt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Zt.ADAPTER.getWebGLRenderingContext())return!1;const e=Zt.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const n=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),RC}var Rnt={grad:.9,turn:360,rad:360/(2*Math.PI)},eh=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Hi=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},sa=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},Oz=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},$D=function(r){return{r:sa(r.r,0,255),g:sa(r.g,0,255),b:sa(r.b,0,255),a:sa(r.a)}},CC=function(r){return{r:Hi(r.r),g:Hi(r.g),b:Hi(r.b),a:Hi(r.a,3)}},Cnt=/^#([0-9a-f]{3,8})$/i,Lx=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},Fz=function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=Math.max(t,e,i),a=s-Math.min(t,e,i),o=a?s===t?(e-i)/a:s===e?2+(i-t)/a:4+(t-e)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:n}},Uz=function(r){var t=r.h,e=r.s,i=r.v,n=r.a;t=t/360*6,e/=100,i/=100;var s=Math.floor(t),a=i*(1-e),o=i*(1-(t-s)*e),h=i*(1-(1-t+s)*e),u=s%6;return{r:255*[i,o,a,a,h,i][u],g:255*[h,i,i,o,a,a][u],b:255*[a,a,h,i,i,o][u],a:n}},HD=function(r){return{h:Oz(r.h),s:sa(r.s,0,100),l:sa(r.l,0,100),a:sa(r.a)}},XD=function(r){return{h:Hi(r.h),s:Hi(r.s),l:Hi(r.l),a:Hi(r.a,3)}},VD=function(r){return Uz((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},N_=function(r){return{h:(t=Fz(r)).h,s:(n=(200-(e=t.s))*(i=t.v)/100)>0&&n<200?e*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,i,n},Ant=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Snt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Nnt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pnt=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,AP={string:[[function(r){var t=Cnt.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Hi(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Hi(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=Nnt.exec(r)||Pnt.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:$D({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=Ant.exec(r)||Snt.exec(r);if(!t)return null;var e,i,n=HD({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(Rnt[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return VD(n)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,n=r.a,s=n===void 0?1:n;return eh(t)&&eh(e)&&eh(i)?$D({r:Number(t),g:Number(e),b:Number(i),a:Number(s)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,n=r.a,s=n===void 0?1:n;if(!eh(t)||!eh(e)||!eh(i))return null;var a=HD({h:Number(t),s:Number(e),l:Number(i),a:Number(s)});return VD(a)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,n=r.a,s=n===void 0?1:n;if(!eh(t)||!eh(e)||!eh(i))return null;var a=function(o){return{h:Oz(o.h),s:sa(o.s,0,100),v:sa(o.v,0,100),a:sa(o.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(s)});return Uz(a)},"hsv"]]},jD=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},Ont=function(r){return typeof r=="string"?jD(r.trim(),AP.string):typeof r=="object"&&r!==null?jD(r,AP.object):[null,void 0]},AC=function(r,t){var e=N_(r);return{h:e.h,s:sa(e.s+100*t,0,100),l:e.l,a:e.a}},SC=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},zD=function(r,t){var e=N_(r);return{h:e.h,s:e.s,l:sa(e.l+100*t,0,100),a:e.a}},SP=function(){function r(t){this.parsed=Ont(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Hi(SC(this.rgba),2)},r.prototype.isDark=function(){return SC(this.rgba)<.5},r.prototype.isLight=function(){return SC(this.rgba)>=.5},r.prototype.toHex=function(){return t=CC(this.rgba),e=t.r,i=t.g,n=t.b,a=(s=t.a)<1?Lx(Hi(255*s)):"","#"+Lx(e)+Lx(i)+Lx(n)+a;var t,e,i,n,s,a},r.prototype.toRgb=function(){return CC(this.rgba)},r.prototype.toRgbString=function(){return t=CC(this.rgba),e=t.r,i=t.g,n=t.b,(s=t.a)<1?"rgba("+e+", "+i+", "+n+", "+s+")":"rgb("+e+", "+i+", "+n+")";var t,e,i,n,s},r.prototype.toHsl=function(){return XD(N_(this.rgba))},r.prototype.toHslString=function(){return t=XD(N_(this.rgba)),e=t.h,i=t.s,n=t.l,(s=t.a)<1?"hsla("+e+", "+i+"%, "+n+"%, "+s+")":"hsl("+e+", "+i+"%, "+n+"%)";var t,e,i,n,s},r.prototype.toHsv=function(){return t=Fz(this.rgba),{h:Hi(t.h),s:Hi(t.s),v:Hi(t.v),a:Hi(t.a,3)};var t},r.prototype.invert=function(){return oo({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),oo(AC(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),oo(AC(this.rgba,-t))},r.prototype.grayscale=function(){return oo(AC(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),oo(zD(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),oo(zD(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?oo({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Hi(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=N_(this.rgba);return typeof t=="number"?oo({h:t,s:e.s,l:e.l,a:e.a}):Hi(e.h)},r.prototype.isEqual=function(t){return this.toHex()===oo(t).toHex()},r}(),oo=function(r){return r instanceof SP?r:new SP(r)},WD=[],Fnt=function(r){r.forEach(function(t){WD.indexOf(t)<0&&(t(SP,AP),WD.push(t))})};function Unt(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var n in e)i[e[n]]=n;var s={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,h,u=i[this.toHex()];if(u)return u;if(a!=null&&a.closest){var l=this.toRgb(),f=1/0,c="black";if(!s.length)for(var d in e)s[d]=new r(e[d]).toRgb();for(var v in e){var _=(o=l,h=s[v],Math.pow(o.r-h.r,2)+Math.pow(o.g-h.g,2)+Math.pow(o.b-h.b,2));_<f&&(f=_,c=v)}return c}},t.string.push([function(a){var o=a.toLowerCase(),h=o==="transparent"?"#0000":e[o];return h?new r(h).toRgb():null},"name"])}Fnt([Unt]);const Zp=class EE{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof EE)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,s)=>n===e[s]);if(t!==null&&e!==null){const n=Object.keys(t),s=Object.keys(e);return n.length!==s.length?!1:n.every(a=>t[a]===e[a])}return t===e}toRgba(){const[t,e,i,n]=this._components;return{r:t,g:e,b:i,a:n}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,i,n]=this._components;return t[0]=e,t[1]=i,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,n,s]=EE.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=n,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,n=this._int>>8&255,s=this._int&255;return e&&(i=i*t+.5|0,n=n*t+.5|0,s=s*t+.5|0),(t*255<<24)+(i<<16)+(n<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,n,s]=this._components;return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t}normalize(t){let e,i,n,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const a=t;e=(a>>16&255)/255,i=(a>>8&255)/255,n=(a&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,n,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,n,s=255]=t,e/=255,i/=255,n/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=EE.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const a=oo(t);a.isValid()&&({r:e,g:i,b:n,a:s}=a.rgba,e/=255,i/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=n,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((n,s)=>{t[s]=Math.min(Math.max(n,e),i)}),t)}};Zp.shared=new Zp,Zp.temp=new Zp,Zp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Yr=Zp;function Mnt(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[Wt.NORMAL_NPM]=Wt.NORMAL,r[Wt.ADD_NPM]=Wt.ADD,r[Wt.SCREEN_NPM]=Wt.SCREEN,t[Wt.NORMAL]=Wt.NORMAL_NPM,t[Wt.ADD]=Wt.ADD_NPM,t[Wt.SCREEN]=Wt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const Mz=Mnt();function Lz(r,t){return Mz[t?1:0][r]}function Lnt(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function Bz(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function fw(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function YD(r){return!(r&r-1)&&!!r}function qD(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function P_(r,t,e){const i=r.length;let n;if(t>=i||e===0)return;e=t+e>i?i-t:e;const s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}function pv(r){return r===0?0:r<0?-1:1}let Bnt=0;function ig(){return++Bnt}const NP=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};NP.EMPTY=new NP(0,0,0,0);let KD=NP;const ZD={},ho=Object.create(null),yu=Object.create(null);function QD(r,t,e){for(let i=0,n=4*e*t;i<t;++i,n+=4)if(r[n+3]!==0)return!1;return!0}function JD(r,t,e,i,n){const s=4*t;for(let a=i,o=i*s+4*e;a<=n;++a,o+=s)if(r[o+3]!==0)return!1;return!0}function Gnt(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const n=i.getImageData(0,0,t,e).data;let s=0,a=0,o=t-1,h=e-1;for(;a<e&&QD(n,t,a);)++a;if(a===e)return KD.EMPTY;for(;QD(n,t,h);)--h;for(;JD(n,t,s,a,h);)++s;for(;JD(n,t,o,a,h);)--o;return++o,++h,new KD(s,a,o,h)}function knt(r){const t=Gnt(r),{width:e,height:i}=t;let n=null;if(!t.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:n}}function Dnt(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function dy(r,t=1){var i;const e=(i=Zt.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var jt=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(jt||{});const PP=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},t4=(r,t)=>PP(r).priority??t,te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(PP).forEach(t=>{t.type.forEach(e=>{var i,n;return(n=(i=this._removeHandlers)[e])==null?void 0:n.call(i,t)})}),this},add(...r){return r.map(PP).forEach(t=>{t.type.forEach(e=>{var s,a;const i=this._addHandlers,n=this._queue;i[e]?(s=i[e])==null||s.call(i,t):(n[e]=n[e]||[],(a=n[e])==null||a.push(t))})}),this},handle(r,t,e){var a;const i=this._addHandlers,n=this._removeHandlers;if(i[r]||n[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,n[r]=e;const s=this._queue;return s[r]&&((a=s[r])==null||a.forEach(o=>t(o)),delete s[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((n,s)=>t4(s,e)-t4(n,e)))},i=>{const n=t.indexOf(i.ref);n!==-1&&t.splice(n,1)})}};let $nt=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}};const Hnt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Xnt(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function Vnt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=Hnt.replace(/%forloop%/gi,Xnt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const NC=0,PC=1,OC=2,FC=3,UC=4,MC=5;let ql=class Gz{constructor(){this.data=0,this.blendMode=Wt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<NC)}set blend(t){!!(this.data&1<<NC)!==t&&(this.data^=1<<NC)}get offsets(){return!!(this.data&1<<PC)}set offsets(t){!!(this.data&1<<PC)!==t&&(this.data^=1<<PC)}get culling(){return!!(this.data&1<<OC)}set culling(t){!!(this.data&1<<OC)!==t&&(this.data^=1<<OC)}get depthTest(){return!!(this.data&1<<FC)}set depthTest(t){!!(this.data&1<<FC)!==t&&(this.data^=1<<FC)}get depthMask(){return!!(this.data&1<<MC)}set depthMask(t){!!(this.data&1<<MC)!==t&&(this.data^=1<<MC)}get clockwiseFrontFace(){return!!(this.data&1<<UC)}set clockwiseFrontFace(t){!!(this.data&1<<UC)!==t&&(this.data^=1<<UC)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Wt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Gz;return t.depthTest=!1,t.blend=!0,t}};ql.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const OP=[];function kz(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=OP.length-1;i>=0;--i){const n=OP[i];if(n.test&&n.test(r,e))return new n(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}let ja=class{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,n,s,a,o,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:l}=this;this._aliasCount++;for(let f=0,c=l.length;f<c;f++)l[f][u](t,e,i,n,s,a,o,h);return l===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(ja.prototype,{dispatch:{value:ja.prototype.emit},run:{value:ja.prototype.emit}});let ng=class{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new ja("setRealSize"),this.onUpdate=new ja("update"),this.onError=new ja("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}},Dz=class extends ng{constructor(t,e){const{width:i,height:n}=e||{};if(!i||!n)throw new Error("BufferResource width or height invalid");super(i,n),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const n=t.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ia.UNPACK);const s=e.realWidth,a=e.realHeight;return i.width===s&&i.height===a?n.texSubImage2D(e.target,0,0,0,s,a,e.format,i.type,this.data):(i.width=s,i.height=a,n.texImage2D(e.target,0,i.internalFormat,s,a,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}};const jnt={scaleMode:uh.NEAREST,alphaMode:ia.NPM},FP=class Qp extends c0{constructor(t=null,e=null){super(),e=Object.assign({},Qp.defaultOptions,e);const{alphaMode:i,mipmap:n,anisotropicLevel:s,scaleMode:a,width:o,height:h,wrapMode:u,format:l,type:f,target:c,resolution:d,resourceOptions:v}=e;t&&!(t instanceof ng)&&(t=kz(t,v),t.internal=!0),this.resolution=d||Zt.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((h||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=a,this.format=l,this.type=f,this.target=c,this.alphaMode=i,this.uid=ig(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&h>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=YD(this.realWidth)&&YD(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete yu[this.cacheId],delete ho[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Qp.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=Zt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${ig()}`}s=t._pixiId}let a=yu[s];if(n&&i&&!a)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return a||(a=new Qp(t,e),a.cacheId=s,Qp.addToCache(a,s)),a}static fromBuffer(t,e,i,n){t=t||new Float32Array(e*i*4);const s=new Dz(t,{width:e,height:i,...n==null?void 0:n.resourceOptions});let a,o;return t instanceof Float32Array?(a=At.RGBA,o=ie.FLOAT):t instanceof Int32Array?(a=At.RGBA_INTEGER,o=ie.INT):t instanceof Uint32Array?(a=At.RGBA_INTEGER,o=ie.UNSIGNED_INT):t instanceof Int16Array?(a=At.RGBA_INTEGER,o=ie.SHORT):t instanceof Uint16Array?(a=At.RGBA_INTEGER,o=ie.UNSIGNED_SHORT):t instanceof Int8Array?(a=At.RGBA,o=ie.BYTE):(a=At.RGBA,o=ie.UNSIGNED_BYTE),s.internal=!0,new Qp(s,Object.assign({},jnt,{type:o,format:a},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),yu[e]&&yu[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),yu[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=yu[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete yu[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete yu[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};FP.defaultOptions={mipmap:ml.POW2,anisotropicLevel:0,scaleMode:uh.LINEAR,wrapMode:Ch.CLAMP,alphaMode:ia.UNPACK,target:Rv.TEXTURE_2D,format:At.RGBA,type:ie.UNSIGNED_BYTE},FP._globalBatch=0;let Re=FP,UP=class{constructor(){this.texArray=null,this.blend=0,this.type=Ga.TRIANGLES,this.start=0,this.size=0,this.data=null}},znt=0,Pi=class $z{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=znt++,this.disposeRunner=new ja("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Po.ELEMENT_ARRAY_BUFFER:Po.ARRAY_BUFFER}get index(){return this.type===Po.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new $z(t)}},e4=class Hz{constructor(t,e=0,i=!1,n=ie.FLOAT,s,a,o,h=1){this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o,this.divisor=h}destroy(){this.buffer=null}static from(t,e,i,n,s){return new Hz(t,e,i,n,s)}};const Wnt={Float32Array,Uint32Array,Int32Array,Uint8Array};function Ynt(r,t){let e=0,i=0;const n={};for(let h=0;h<r.length;h++)i+=t[h],e+=r[h].length;const s=new ArrayBuffer(e*4);let a=null,o=0;for(let h=0;h<r.length;h++){const u=t[h],l=r[h],f=Bz(l);n[f]||(n[f]=new Wnt[f](s)),a=n[f];for(let c=0;c<l.length;c++){const d=(c/u|0)*i+o,v=c%u;a[d+v]=l[c]}o+=u}return new Float32Array(s)}const r4={5126:4,5123:2,5121:1};let qnt=0;const Knt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let y0=class MP{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=qnt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ja("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,n=!1,s,a,o,h=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Pi||(e instanceof Array&&(e=new Float32Array(e)),e=new Pi(e));const u=t.split("|");if(u.length>1){for(let f=0;f<u.length;f++)this.addAttribute(u[f],e,i,n,s);return this}let l=this.buffers.indexOf(e);return l===-1&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new e4(l,i,n,s,a,o,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof Pi||(t instanceof Array&&(t=new Uint16Array(t)),t=new Pi(t)),t.type=Po.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new Pi;let n;for(n in this.attributes){const s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*r4[s.type]/4),s.buffer=0}for(i.data=Ynt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new MP;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new Pi(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new e4(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Po.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new MP,i=[],n=[],s=[];let a;for(let o=0;o<t.length;o++){a=t[o];for(let h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(let o=0;o<a.buffers.length;o++)i[o]=new Knt[Bz(a.buffers[o].data)](n[o]),e.buffers[o]=new Pi(i[o]);for(let o=0;o<t.length;o++){a=t[o];for(let h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Po.ELEMENT_ARRAY_BUFFER;let o=0,h=0,u=0,l=0;for(let f=0;f<a.buffers.length;f++)if(a.buffers[f]!==a.indexBuffer){l=f;break}for(const f in a.attributes){const c=a.attributes[f];(c.buffer|0)===l&&(h+=c.size*r4[c.type]/4)}for(let f=0;f<t.length;f++){const c=t[f].indexBuffer.data;for(let d=0;d<c.length;d++)e.indexBuffer.data[d+u]+=o;o+=t[f].buffers[l].data.length/h,u+=c.length}}return e}},Xz=class extends y0{constructor(t=!1){super(),this._buffer=new Pi(null,t,!1),this._indexBuffer=new Pi(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ie.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ie.FLOAT).addAttribute("aColor",this._buffer,4,!0,ie.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ie.FLOAT).addIndex(this._indexBuffer)}};const cw=Math.PI*2,Znt=180/Math.PI,Qnt=Math.PI/180;var Zi=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Zi||{});let Xe=class Vz{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Vz(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}};Xe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Bx=[new Xe,new Xe,new Xe,new Xe];let Ve=class LP{constructor(t=0,e=0,i=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=Zi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new LP(0,0,0,0)}clone(){return new LP(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const $=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=$)return!1;const k=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>k}const i=this.left,n=this.right,s=this.top,a=this.bottom;if(n<=i||a<=s)return!1;const o=Bx[0].set(t.left,t.top),h=Bx[1].set(t.left,t.bottom),u=Bx[2].set(t.right,t.top),l=Bx[3].set(t.right,t.bottom);if(u.x<=o.x||h.y<=o.y)return!1;const f=Math.sign(e.a*e.d-e.b*e.c);if(f===0||(e.apply(o,o),e.apply(h,h),e.apply(u,u),e.apply(l,l),Math.max(o.x,h.x,u.x,l.x)<=i||Math.min(o.x,h.x,u.x,l.x)>=n||Math.max(o.y,h.y,u.y,l.y)<=s||Math.min(o.y,h.y,u.y,l.y)>=a))return!1;const c=f*(h.y-o.y),d=f*(o.x-h.x),v=c*i+d*s,_=c*n+d*s,m=c*i+d*a,g=c*n+d*a;if(Math.max(v,_,m,g)<=c*o.x+d*o.y||Math.min(v,_,m,g)>=c*l.x+d*l.y)return!1;const T=f*(o.y-u.y),b=f*(u.x-o.x),S=T*i+b*s,R=T*n+b*s,U=T*i+b*a,L=T*n+b*a;return!(Math.max(S,R,U,L)<=T*o.x+b*o.y||Math.min(S,R,U,L)>=T*l.x+b*l.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this}};Ve.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let jz=class zz{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=Zi.CIRC}clone(){return new zz(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i}getBounds(){return new Ve(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};jz.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};let Wz=class Yz{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.width=i,this.height=n,this.type=Zi.ELIP}clone(){return new Yz(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1}getBounds(){return new Ve(this.x-this.width,this.y-this.height,this.width,this.height)}};Wz.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let O_=class qz{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let n=0,s=e.length;n<s;n++)i.push(e[n].x,e[n].y);e=i}this.points=e,this.type=Zi.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new qz(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const n=this.points.length/2;for(let s=0,a=n-1;s<n;a=s++){const o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],l=this.points[a*2+1];h>e!=l>e&&t<(u-o)*((e-h)/(l-h))+o&&(i=!i)}return i}};O_.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};let Kz=class Zz{constructor(t=0,e=0,i=0,n=0,s=20){this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=Zi.RREC}clone(){return new Zz(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let n=t-(this.x+i),s=e-(this.y+i);const a=i*i;if(n*n+s*s<=a||(n=t-(this.x+this.width-i),n*n+s*s<=a)||(s=e-(this.y+this.height-i),n*n+s*s<=a)||(n=t-(this.x+i),n*n+s*s<=a))return!0}return!1}};Kz.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let Mi=class wE{constructor(t=1,e=0,i=0,n=1,s=0,a=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Xe;const i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Xe;const i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this}append(t){const e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this}setTransform(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(cw-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new wE;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new wE}static get TEMP_MATRIX(){return new wE}};Mi.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Uf=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Mf=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Lf=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Bf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],BP=[],Qz=[],Gx=Math.sign;function Jnt(){for(let r=0;r<16;r++){const t=[];BP.push(t);for(let e=0;e<16;e++){const i=Gx(Uf[r]*Uf[e]+Lf[r]*Mf[e]),n=Gx(Mf[r]*Uf[e]+Bf[r]*Mf[e]),s=Gx(Uf[r]*Lf[e]+Lf[r]*Bf[e]),a=Gx(Mf[r]*Lf[e]+Bf[r]*Bf[e]);for(let o=0;o<16;o++)if(Uf[o]===i&&Mf[o]===n&&Lf[o]===s&&Bf[o]===a){t.push(o);break}}}for(let r=0;r<16;r++){const t=new Mi;t.set(Uf[r],Mf[r],Lf[r],Bf[r],0,0),Qz.push(t)}}Jnt();const Cr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Uf[r],uY:r=>Mf[r],vX:r=>Lf[r],vY:r=>Bf[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>BP[r][t],sub:(r,t)=>BP[r][Cr.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Cr.S:Cr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Cr.E:Cr.W:t>0?r>0?Cr.SE:Cr.SW:r>0?Cr.NE:Cr.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const n=Qz[Cr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};let Hu=class Jz{constructor(t,e,i=0,n=0){this._x=i,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Jz(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}};Hu.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const GP=class{constructor(){this.worldTransform=new Mi,this.localTransform=new Mi,this.position=new Hu(this.onChange,this,0,0),this.scale=new Hu(this.onChange,this,1,1),this.pivot=new Hu(this.onChange,this,0,0),this.skew=new Hu(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};GP.IDENTITY=new GP;let K1=GP;K1.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var tst=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,est=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function i4(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function LC(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function tW(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return LC(2*t);case"bvec3":return LC(3*t);case"bvec4":return LC(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Sv=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],rst={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},ist={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function nst(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in r.uniforms){const s=t[n];if(!s){((i=r.uniforms[n])==null?void 0:i.group)===!0&&(r.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const a=r.uniforms[n];let o=!1;for(let h=0;h<Sv.length;h++)if(Sv[h].test(s,a)){e.push(Sv[h].code(n,a)),o=!0;break}if(!o){const h=(s.size===1&&!s.isArray?rst:ist)[s.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const eW={};let ep=eW;function sst(){if(ep===eW||ep!=null&&ep.isContextLost()){const r=Zt.ADAPTER.createCanvas();let t;Zt.PREFER_ENV>=Ud.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),ep=t}return ep}let kx;function ast(){if(!kx){kx=na.MEDIUM;const r=sst();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(kx=t.precision?na.HIGH:na.MEDIUM)}}return kx}function n4(r,t){const e=r.getShaderSource(t).split(`
`).map((u,l)=>`${l}: ${u}`),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),o=[""];a.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function ost(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||n4(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||n4(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const hst={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function rW(r){return hst[r]}let Dx=null;const s4={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function iW(r,t){if(!Dx){const e=Object.keys(s4);Dx={};for(let i=0;i<e.length;++i){const n=e[i];Dx[r[n]]=s4[n]}}return Dx[t]}function a4(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===na.HIGH&&e!==na.HIGH&&(i=na.MEDIUM),`precision ${i} float;
${r}`}else if(e!==na.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let hm;function ust(){if(typeof hm=="boolean")return hm;try{hm=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{hm=!1}return hm}let lst=0;const $x={},kP=class Jp{constructor(t,e,i="pixi-shader",n={}){this.extra={},this.id=lst++,this.vertexSrc=t||Jp.defaultVertexSrc,this.fragmentSrc=e||Jp.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),$x[i]?($x[i]++,i+=`-${$x[i]}`):$x[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=a4(this.vertexSrc,Jp.defaultVertexPrecision,na.HIGH),this.fragmentSrc=a4(this.fragmentSrc,Jp.defaultFragmentPrecision,ast())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return est}static get defaultFragmentSrc(){return tst}static from(t,e,i){const n=t+e;let s=ZD[n];return s||(ZD[n]=s=new Jp(t,e,i)),s}};kP.defaultVertexPrecision=na.HIGH,kP.defaultFragmentPrecision=cv.apple.device?na.HIGH:na.MEDIUM;let lh=kP,fst=0,Yc=class IE{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=fst++,this.static=!!e,this.ubo=!!i,t instanceof Pi?(this.buffer=t,this.buffer.type=Po.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Pi(new Float32Array(1)),this.buffer.type=Po.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new IE(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new IE(t,e,i)}static uboFrom(t,e){return new IE(t,e??!0,!0)}},dl=class nW{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Yc?this.uniformGroup=e:this.uniformGroup=new Yc(e):this.uniformGroup=new Yc({}),this.disposeRunner=new ja("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const n=e.uniforms[i];if(n.group===!0&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const n=lh.from(t,e);return new nW(n,i)}},cst=class{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let s=0;s<t;s++)i[s]=s;this.defaultGroupCache[t]=Yc.from({uSamplers:i},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new lh(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Mi,default:this.defaultGroupCache[t]};return new dl(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}},DP=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}};function dst(){return!cv.apple.device}function pst(r){let t=!0;const e=Zt.ADAPTER.getNavigator();if(cv.tablet||cv.phone){if(cv.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(cv.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}let Z1=class{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}};var vst=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,yst=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const o_=class Pa extends Z1{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Xz,this.vertexSize=6,this.state=ql.for2d(),this.size=Pa.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??pst(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??dst(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return He("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return yst}static get defaultFragmentTemplate(){return vst}setShaderGenerator({vertex:t=Pa.defaultVertexSrc,fragment:e=Pa.defaultFragmentTemplate}={}){this.shaderGenerator=new cst(t,e)}contextChange(){const t=this.renderer.gl;Zt.PREFER_ENV===Ud.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Pa.defaultMaxTextures),this.maxTextures=Vnt(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Pa,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new UP);for(;e.length<n;)e.push(new DP);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=Pa._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,a=this.renderer.textureGC.count;let o=++Re._globalBatch,h=0,u=i[0],l=0;n.copyBoundTextures(s,e);for(let f=0;f<this._bufferSize;++f){const c=t[f];t[f]=null,c._batchEnabled!==o&&(u.count>=e&&(n.boundArray(u,s,o,e),this.buildDrawCalls(u,l,f),l=f,u=i[++h],++o),c._batchEnabled=o,c.touched=a,u.elements[u.count++]=c)}u.count>0&&(n.boundArray(u,s,o,e),this.buildDrawCalls(u,l,this._bufferSize),++h,++o);for(let f=0;f<s.length;f++)s[f]=null;Re._globalBatch=o}buildDrawCalls(t,e,i){const{_bufferedElements:n,_attributeBuffer:s,_indexBuffer:a,vertexSize:o}=this,h=Pa._drawCallPool;let u=this._dcIndex,l=this._aIndex,f=this._iIndex,c=h[u];c.start=this._iIndex,c.texArray=t;for(let d=e;d<i;++d){const v=n[d],_=v._texture.baseTexture,m=Mz[_.alphaMode?1:0][v.blendMode];n[d]=null,e<d&&c.blend!==m&&(c.size=f-c.start,e=d,c=h[++u],c.texArray=t,c.start=f),this.packInterleavedGeometry(v,s,a,l,f),l+=v.vertexData.length/2*o,f+=v.indices.length,c.blend=m}e<i&&(c.size=f-c.start,++u),this._dcIndex=u,this._aIndex=l,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;Pa.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,n=Pa._drawCallPool;let s=null;for(let a=0;a<t;a++){const{texArray:o,type:h,size:u,start:l,blend:f}=n[a];s!==o&&(s=o,this.bindAndClearTexArray(o)),this.state.blendMode=f,i.set(this.state),e.drawElements(h,u,e.UNSIGNED_SHORT,l*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Pa.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=fw(Math.ceil(t/8)),i=qD(e),n=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new $nt(n*this.vertexSize*4)),s}getIndexBuffer(t){const e=fw(Math.ceil(t/12)),i=qD(e),n=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let s=this._iBuffers[i];return s||(this._iBuffers[i]=s=new Uint16Array(n)),s}packInterleavedGeometry(t,e,i,n,s){const{uint32View:a,float32View:o}=e,h=n/this.vertexSize,u=t.uvs,l=t.indices,f=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),v=Yr.shared.setValue(t._tintRGB).toPremultiplied(d,t._texture.baseTexture.alphaMode>0);for(let _=0;_<f.length;_+=2)o[n++]=f[_],o[n++]=f[_+1],o[n++]=u[_],o[n++]=u[_+1],a[n++]=v,o[n++]=c;for(let _=0;_<l.length;_++)i[s++]=h+l[_]}};o_.defaultBatchSize=4096,o_.extension={name:"batch",type:jt.RendererPlugin},o_._drawCallPool=[],o_._textureArrayPool=[];let Gf=o_;te.add(Gf);var mst=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_st=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const $P=class h_ extends dl{constructor(t,e,i){const n=lh.from(t||h_.defaultVertexSrc,e||h_.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=h_.defaultResolution,this.multisample=h_.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ql}apply(t,e,i,n,s){t.applyFilter(this,e,i,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return _st}static get defaultFragmentSrc(){return mst}};$P.defaultResolution=1,$P.defaultMultisample=ui.NONE;let vv=$P;class dw{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Yr(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:n}=t,s=i??e;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}dw.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},dw.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"background"};te.add(dw);let sW=class{constructor(t){this.renderer=t,this.emptyRenderer=new Z1(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,i,n){const{elements:s,ids:a,count:o}=t;let h=0;for(let u=0;u<o;u++){const l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){const c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}}destroy(){this.renderer=null}};sW.extension={type:jt.RendererSystem,name:"batch"};te.add(sW);let o4=0,pw=class{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=o4++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=o4++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(Zt.PREFER_ENV>=Ud.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};pw.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},pw.extension={type:jt.RendererSystem,name:"context"};te.add(pw);let HP=class{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ja("disposeFramebuffer"),this.multisample=ui.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Re(null,{scaleMode:uh.NEAREST,resolution:1,mipmap:ml.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Re(null,{scaleMode:uh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ml.OFF,format:At.DEPTH_COMPONENT,type:ie.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}},aW=class extends Re{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],n=arguments[2],s=arguments[3];t={width:e,height:i,scaleMode:n,resolution:s}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=ui.NONE),super(null,t),this.mipmap=ml.OFF,this.valid=!0,this._clear=new Yr([0,0,0,0]),this.framebuffer=new HP(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}},Fh=class extends ng{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,n=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=Dnt(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,n){const s=t.gl,a=e.realWidth,o=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===ia.UNPACK),!this.noSubImage&&e.target===s.TEXTURE_2D&&i.width===a&&i.height===o?s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,n):(i.width=a,i.height=o,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}},oW=class extends Fh{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;Fh.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Zt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=a=>{i(a),this.onError.emit(a)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ia.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let n=!0;const s=e._glTextures;for(const a in s){const o=s[a];if(o!==i&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}},TL=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const n=e.width,s=e.height;if(i){const a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Cr.add(i,Cr.NW),this.x0=h+a*Cr.uX(i),this.y0=u+o*Cr.uY(i),i=Cr.add(i,2),this.x1=h+a*Cr.uX(i),this.y1=u+o*Cr.uY(i),i=Cr.add(i,2),this.x2=h+a*Cr.uX(i),this.y2=u+o*Cr.uY(i),i=Cr.add(i,2),this.x3=h+a*Cr.uX(i),this.y3=u+o*Cr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};TL.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const h4=new TL;function Hx(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}let ue=class Je extends c0{constructor(t,e,i,n,s,a,o){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Ve(0,0,1,1)),t instanceof Je&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=h4,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new Xe(a.x,a.y):new Xe(0,0),this.defaultBorders=o,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&ho[e.url]&&Je.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Je.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new Je(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===h4&&(this._uvs=new TL),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=Zt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof Re){if(!t.cacheId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${o}-${ig()}`,Re.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${ig()}`}s=t._pixiId}let a=ho[s];if(n&&i&&!a)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!a&&!(t instanceof Re)?(e.resolution||(e.resolution=dy(t)),a=new Je(new Re(t,e)),a.baseTexture.cacheId=s,Re.addToCache(a.baseTexture,s),Je.addToCache(a,s)):!a&&t instanceof Re&&(a=new Je(t),Je.addToCache(a,s)),a}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=Je.from(t,Object.assign({resourceOptions:i},e),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,i,n){return new Je(Re.fromBuffer(t,e,i,n))}static fromLoader(t,e,i,n){const s=new Re(t,Object.assign({scaleMode:Re.defaultOptions.scaleMode,resolution:dy(e)},n)),{resource:a}=s;a instanceof oW&&(a.url=e);const o=new Je(s);return i||(i=e),Re.addToCache(o.baseTexture,i),Je.addToCache(o,i),i!==e&&(Re.addToCache(o.baseTexture,e),Je.addToCache(o,e)),o.baseTexture.valid?Promise.resolve(o):new Promise(h=>{o.baseTexture.once("loaded",()=>h(o))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),ho[e]&&ho[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),ho[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=ho[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete ho[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)ho[t.textureCacheIds[e]]===t&&delete ho[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:n,height:s}=t,a=e+n>this.baseTexture.width,o=i+s>this.baseTexture.height;if(a||o){const h=a&&o?"and":"or",u=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,l=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${h} ${l}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Je._EMPTY||(Je._EMPTY=new Je(new Re),Hx(Je._EMPTY),Hx(Je._EMPTY.baseTexture)),Je._EMPTY}static get WHITE(){if(!Je._WHITE){const t=Zt.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Je._WHITE=new Je(Re.from(t)),Hx(Je._WHITE),Hx(Je._WHITE.baseTexture)}return Je._WHITE}},hW=class uW extends ue{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,a=Math.round(e*n)/n;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,i&&this.baseTexture.resize(s,a),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new uW(new aW(t))}},lW=class{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=ui.NONE){const n=new aW(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new hW(n)}getOptimalTexture(t,e,i=1,n=ui.NONE){let s;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=fw(t),e=fw(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a}getFilterTexture(t,e,i){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||ui.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}};lW.SCREEN_KEY=-1;let gst=class extends y0{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}},fW=class extends y0{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Pi(this.vertices),this.uvBuffer=new Pi(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}},xst=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ui.NONE,this.sourceFrame=new Ve,this.destinationFrame=new Ve,this.bindingSourceFrame=new Ve,this.bindingDestinationFrame=new Ve,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};const Xx=[new Xe,new Xe,new Xe,new Xe],BC=new Mi;let cW=class{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new lW,this.statePool=[],this.quad=new gst,this.quadUv=new fW,this.tempRect=new Ve,this.activeState={},this.globalUniforms=new Yc({outputFrame:new Ve,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new xst,a=i.renderTexture;let o,h;if(a.current){const m=a.current;o=m.resolution,h=m.multisample}else o=i.resolution,h=i.multisample;let u=e[0].resolution||o,l=e[0].multisample??h,f=e[0].padding,c=e[0].autoFit,d=e[0].legacy??!0;for(let m=1;m<e.length;m++){const g=e[m];u=Math.min(u,g.resolution||o),l=Math.min(l,g.multisample??h),f=this.useMaxPadding?Math.max(f,g.padding):f+g.padding,c=c&&g.autoFit,d=d||(g.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=u,s.multisample=l,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(f);const v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(BC.copyFrom(i.projection.transform).invert(),v),c?(s.sourceFrame.fit(v),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(v)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,l),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){const u=n.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,h.renderTexture,Ff.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,l=this.getOptimalFilterTexture(u.width,u.height,e.resolution);l.filterFrame=u.filterFrame;let f=0;for(f=0;f<i.length-1;++f){f===1&&e.multisample>1&&(l=this.getOptimalFilterTexture(u.width,u.height,e.resolution),l.filterFrame=u.filterFrame),i[f].apply(this,u,l,Ff.CLEAR,e);const c=u;u=l,l=c}i[f].apply(this,u,h.renderTexture,Ff.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=Ff.CLEAR){const{renderTexture:i,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,i.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(e===Ff.CLEAR||e===Ff.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Ga.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Ga.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:n}=this.activeState,{orig:s}=e._texture,a=t.set(n.width,0,0,n.height,i.x,i.y),o=e.worldTransform.copyTo(Mi.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/s.width,1/s.height),a.translate(e.anchor.x,e.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,n=ui.NONE){return this.texturePool.getOptimalTexture(t,e,i,n)}getFilterTexture(t,e,i){if(typeof t=="number"){const s=t;t=e,e=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||ui.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=Xx[0],n=Xx[1],s=Xx[2],a=Xx[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);const o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h}roundFrame(t,e,i,n,s){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(s){const{a,b:o,c:h,d:u}=s;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?BC.copyFrom(s):BC.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)}}};cW.extension={type:jt.RendererSystem,name:"filter"};te.add(cW);let bst=class{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ui.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};const Tst=new Ve;let dW=class{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new HP(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ve,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Zt.PREFER_ENV===Ud.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let a=0;a<t.colorTextures.length;a++){const o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const a=e.width>>i,o=e.height>>i,h=a/e.width;this.setViewport(e.x*h,e.y*h,a,o)}else{const a=t.width>>i,o=t.height>>i;this.setViewport(0,0,a,o)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,n){const s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,n,s=pP.COLOR|pP.DEPTH){const{gl:a}=this;a.clearColor(t,e,i,n),a.clear(s)}initFramebuffer(t){const{gl:e}=this,i=new bst(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let a;this.renderer.context.webGLVersion===1?a=e.DEPTH_STENCIL:t.depth&&t.stencil?a=e.DEPTH24_STENCIL8:t.depth?a=e.DEPTH_COMPONENT24:a=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,a,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,a,t.width,t.height)}const n=t.colorTextures;let s=n.length;e.drawBuffers||(s=Math.min(s,1));for(let a=0;a<s;a++){const o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0),a===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer():n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const o=[];for(let h=0;h<a;h++){const u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),h===0&&n.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||i.createRenderbuffer();let h,u;this.renderer.context.webGLVersion===1?(h=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):t.depth&&t.stencil?(h=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):t.depth?(h=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(h=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,u,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,u,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,h,i.RENDERBUFFER,n.stencil)}else n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=ui.NONE;if(t<=1||e===null)return i;for(let n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=ui.NONE),i}blit(t,e,i){const{current:n,renderer:s,gl:a,CONTEXT_UID:o}=this;if(s.context.webGLVersion!==2||!n)return;const h=n.glFramebuffers[o];if(!h)return;if(!t){if(!h.msaaBuffer)return;const l=n.colorTextures[0];if(!l)return;h.blitFramebuffer||(h.blitFramebuffer=new HP(n.width,n.height),h.blitFramebuffer.addColorTexture(0,l)),t=h.blitFramebuffer,t.colorTextures[0]!==l&&(t.colorTextures[0]=l,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=Tst,e.width=n.width,e.height=n.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,h.framebuffer),a.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,u?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,n=t.height,s=this.gl,a=e.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a);let o,h;this.renderer.context.webGLVersion===1?(o=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH_STENCIL):t.depth?(o=s.DEPTH_STENCIL_ATTACHMENT,h=s.DEPTH24_STENCIL8):(o=s.STENCIL_ATTACHMENT,h=s.STENCIL_INDEX8),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,h,i,n):s.renderbufferStorage(s.RENDERBUFFER,h,i,n),s.framebufferRenderbuffer(s.FRAMEBUFFER,o,s.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ve}destroy(){this.renderer=null}};dW.extension={type:jt.RendererSystem,name:"framebuffer"};te.add(dW);const GC={5126:4,5123:2,5121:1};let pW=class{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;Zt.PREFER_ENV===Ud.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=n=>i.bindVertexArrayOES(n),t.deleteVertexArray=n=>i.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(n,s)=>i.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,a,o,h)=>i.drawElementsInstancedANGLE(n,s,a,o,h),t.drawArraysInstanced=(n,s,a,o)=>i.drawArraysInstancedANGLE(n,s,a,o)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const n=t.buffers[i];e.update(n)}}checkCompatibility(t,e){const i=t.attributes,n=e.attributeData;for(const s in n)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,e){const i=t.attributes,n=e.attributeData,s=["g",t.id];for(const a in i)n[a]&&s.push(a,n[a].location);return s.join("-")}initGeometryVao(t,e,i=!0){const n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);const h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID];let l=u[h];if(l)return u[o.id]=l,l;const f=t.buffers,c=t.attributes,d={},v={};for(const _ in f)d[_]=0,v[_]=0;for(const _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn(`PIXI Geometry attribute '${_}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[_].buffer]+=c[_].size*GC[c[_].type];for(const _ in c){const m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*GC[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*GC[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(let _=0;_<f.length;_++){const m=f[_];a.bind(m),i&&m._glBuffers[s].refCount++}return this.activateVao(t,o),u[o.id]=l,u[h]=l,n.bindVertexArray(null),a.unbind(Po.ARRAY_BUFFER),l}disposeGeometry(t,e){var o;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,a=(o=this.renderer)==null?void 0:o.buffer;if(t.disposeRunner.remove(this),!!i){if(a)for(let h=0;h<s.length;h++){const u=s[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&a.dispose(s[h],e))}if(!e){for(const h in i)if(h[0]==="g"){const u=i[h];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let h=null;for(const u in o){const l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);const d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,l.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,n){const{gl:s}=this,a=this._activeGeometry;if(a.indexBuffer){const o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};pW.extension={type:jt.RendererSystem,name:"geometry"};te.add(pW);const u4=new Mi;let EL=class{constructor(t,e){this._texture=t,this.mapCoord=new Mi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const n=e.orig,s=e.trim;s&&(u4.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(u4));const a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0}};var Est=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,wst=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;let Ist=class extends vv{constructor(t,e,i){let n=null;typeof t!="string"&&e===void 0&&i===void 0&&(n=t,t=void 0,e=void 0,i=void 0),super(t||wst,e||Est,i),this.maskSprite=n,this.maskMatrix=new Mi}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,n){const s=this._maskSprite,a=s._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new EL(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,e,i,n))}},Rst=class{constructor(t=null){this.type=Si.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=vv.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Si.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}},vW=class{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const s=this.maskDataPool.pop()||new Rst;s.pooled=!0,s.maskObject=e,i=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(n),i._colorMask=n?n._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==Si.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Si.SCISSOR:this.renderer.scissor.push(i);break;case Si.STENCIL:this.renderer.stencil.push(i);break;case Si.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Si.COLOR:this.pushColorMask(i);break}i.type===Si.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Si.SCISSOR:this.renderer.scissor.pop(e);break;case Si.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Si.SPRITE:this.popSpriteMask(e);break;case Si.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Si.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Si.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Si.SCISSOR:t.type=Si.STENCIL:t.type=Si.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Ist])),n[0].resolution=t.resolution,n[0].multisample=t.multisample,n[0].maskSprite=e;const s=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=s,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}};vW.extension={type:jt.RendererSystem,name:"mask"};te.add(vW);let yW=class{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};const l4=new Mi,f4=[],mW=class RE extends yW{constructor(t){super(t),this.glConst=Zt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:n}=this,s=n.renderTexture,a=i.getBounds(!0,f4.pop()??new Ve);this.roundFrameToPixels(a,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),e&&a.fit(e),t._scissorRectLocal=a}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:n,d:s}=t;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||RE.isMatrixRotated(e.worldTransform)||RE.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,n,s){RE.isMatrixRotated(s)||(s=s?l4.copyFrom(s):l4.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&f4.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};mW.extension={type:jt.RendererSystem,name:"scissor"};let Cst=mW;te.add(Cst);let _W=class extends yW{constructor(t){super(t),this.glConst=Zt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,n,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(t._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=i?i._colorMask:15;n!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(i._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}};_W.extension={type:jt.RendererSystem,name:"stencil"};te.add(_W);class gW{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return He("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}gW.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"_plugin"};te.add(gW);let xW=class{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Mi,this.transform=null}update(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,e,i,n){const s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d}setTransform(t){}destroy(){this.renderer=null}};xW.extension={type:jt.RendererSystem,name:"projection"};te.add(xW);const Ast=new K1,c4=new Ve;class bW{constructor(t){this.renderer=t,this._tempMatrix=new Mi}generateTexture(t,e){const{region:i,...n}=e||{},s=(i==null?void 0:i.copyTo(c4))||t.getLocalBounds(c4,!0),a=n.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/a),s.height=Math.max(s.height,1/a),n.width=s.width,n.height=s.height,n.resolution=a,n.multisample??(n.multisample=this.renderer.multisample);const o=hW.create(n);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const h=t.transform;return t.transform=Ast,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=h,o}destroy(){}}bW.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"textureGenerator"};te.add(bW);const ff=new Ve,um=new Ve;let TW=class{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ve,this.destinationFrame=new Ve,this.viewportFrame=new Ve}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const n=this.renderer;this.current=t;let s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(ff.width=t.frame.width,ff.height=t.frame.height,e=ff),i||(um.x=t.frame.x,um.y=t.frame.y,um.width=e.width,um.height=e.height,i=um),a=s.framebuffer):(o=n.resolution,e||(ff.width=n._view.screen.width,ff.height=n._view.screen.height,e=ff),i||(i=ff,i.width=e.width,i.height=e.height));const h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Yr.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,o=s.width!==a.width||s.height!==a.height;if(o){let{x:h,y:u,width:l,height:f}=this.viewportFrame;h=Math.round(h),u=Math.round(u),l=Math.round(l),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,u,l,f)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),o&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};TW.extension={type:jt.RendererSystem,name:"renderTexture"};te.add(TW);let Sst=class{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function Nst(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=t.getActiveAttrib(r,n);if(s.name.startsWith("gl_"))continue;const a=iW(t,s.type),o={type:a,name:s.name,size:rW(a),location:t.getAttribLocation(r,s.name)};e[s.name]=o}return e}function Pst(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let n=0;n<i;n++){const s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=iW(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:tW(h,s.size)}}return e}function Ost(r,t){var o;const e=i4(r,r.VERTEX_SHADER,t.vertexSrc),i=i4(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i);const s=(o=t.extra)==null?void 0:o.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||ost(r,n,e,i),t.attributeData=Nst(n,r),t.uniformData=Pst(n,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((u,l)=>u>l?1:-1);for(let u=0;u<h.length;u++)t.attributeData[h[u]].location=u,r.bindAttribLocation(n,u,h[u]);r.linkProgram(n)}r.deleteShader(e),r.deleteShader(i);const a={};for(const h in t.uniformData){const u=t.uniformData[h];a[h]={location:r.getUniformLocation(n,h),value:tW(u.type,u.size)}}return new Sst(n,a)}function Fst(r,t,e,i,n){e.buffer.update(n)}const Ust={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},EW={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Mst(r){const t=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let e=0,i=0,n=0;for(let s=0;s<t.length;s++){const a=t[s];if(e=EW[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){const o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Lst(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,n)=>i.index-n.index),e}function Bst(r,t){if(!r.autoManage)return{size:0,syncFunc:Fst};const e=Lst(r.uniforms,t),{uboElements:i,size:n}=Mst(e),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let a=0;a<i.length;a++){const o=i[a],h=r.uniforms[o.data.name],u=o.data.name;let l=!1;for(let f=0;f<Sv.length;f++){const c=Sv[f];if(c.codeUbo&&c.test(o.data,h)){s.push(`offset = ${o.offset/4};`,Sv[f].codeUbo(o.data.name,h)),l=!0;break}}if(!l)if(o.data.size>1){const f=rW(o.data.type),c=Math.max(EW[o.data.type]/16,1),d=f/c,v=(4-d%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${o.offset/4};

                t = 0;

                for(var i=0; i < ${o.data.size*c}; i++)
                {
                    for(var j = 0; j < ${d}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${v};
                }

                `)}else{const f=Ust[o.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${o.offset/4};
                ${f};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let Gst=0;const Vx={textureCount:0,uboCount:0};let wW=class{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Gst++}systemCheck(){if(!ust())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Vx.textureCount=0,Vx.uboCount=0,this.syncUniformGroup(t.uniformGroup,Vx)),n}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=nst(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,Vx,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(t,this.shader.program.uniformData,"ubo");let o=this._uboCache[a];if(o||(o=this._uboCache[a]=Bst(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const n=t.uniforms,s=[`${i}-`];for(const a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,n=Ost(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};wW.extension={type:jt.RendererSystem,name:"shader"};te.add(wW);class vw{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}vw.defaultOptions={hello:!1},vw.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"startup"};te.add(vw);function kst(r,t=[]){return t[Wt.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.ADD]=[r.ONE,r.ONE],t[Wt.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.NONE]=[0,0],t[Wt.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Wt.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Wt.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Wt.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Wt.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Wt.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Wt.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Wt.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Wt.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Wt.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Wt.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const Dst=0,$st=1,Hst=2,Xst=3,Vst=4,jst=5,IW=class XP{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Wt.NONE,this._blendEq=!1,this.map=[],this.map[Dst]=this.setBlend,this.map[$st]=this.setOffset,this.map[Hst]=this.setCullFace,this.map[Xst]=this.setDepthTest,this.map[Vst]=this.setFrontFace,this.map[jst]=this.setDepthMask,this.checks=[],this.defaultState=new ql,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=kst(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(XP.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(XP.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};IW.extension={type:jt.RendererSystem,name:"state"};let zst=IW;te.add(zst);class Wst extends c0{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),i=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of i)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new ja(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const n in this.runners)this.runners[n].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=i.find(a=>this._systemsHash[a]===n);n[t.name](e[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const u_=class CE{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=CE.defaultMaxIdle,this.checkCountMax=CE.defaultCheckCountMax,this.mode=CE.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==dL.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let n=0;n<e.length;n++){const s=e[n];s.resource&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){let n=0;for(let s=0;s<e.length;s++)e[s]!==null&&(e[n++]=e[s]);e.length=n}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};u_.defaultMode=dL.AUTO,u_.defaultMaxIdle=60*60,u_.defaultCheckCountMax=60*10,u_.extension={type:jt.RendererSystem,name:"textureGC"};let kf=u_;te.add(kf);let kC=class{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ie.UNSIGNED_BYTE,this.internalFormat=At.RGBA,this.samplerType=0}};function Yst(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:Nt.FLOAT,[r.RGBA]:Nt.FLOAT,[r.ALPHA]:Nt.FLOAT,[r.LUMINANCE]:Nt.FLOAT,[r.LUMINANCE_ALPHA]:Nt.FLOAT,[r.R8]:Nt.FLOAT,[r.R8_SNORM]:Nt.FLOAT,[r.RG8]:Nt.FLOAT,[r.RG8_SNORM]:Nt.FLOAT,[r.RGB8]:Nt.FLOAT,[r.RGB8_SNORM]:Nt.FLOAT,[r.RGB565]:Nt.FLOAT,[r.RGBA4]:Nt.FLOAT,[r.RGB5_A1]:Nt.FLOAT,[r.RGBA8]:Nt.FLOAT,[r.RGBA8_SNORM]:Nt.FLOAT,[r.RGB10_A2]:Nt.FLOAT,[r.RGB10_A2UI]:Nt.FLOAT,[r.SRGB8]:Nt.FLOAT,[r.SRGB8_ALPHA8]:Nt.FLOAT,[r.R16F]:Nt.FLOAT,[r.RG16F]:Nt.FLOAT,[r.RGB16F]:Nt.FLOAT,[r.RGBA16F]:Nt.FLOAT,[r.R32F]:Nt.FLOAT,[r.RG32F]:Nt.FLOAT,[r.RGB32F]:Nt.FLOAT,[r.RGBA32F]:Nt.FLOAT,[r.R11F_G11F_B10F]:Nt.FLOAT,[r.RGB9_E5]:Nt.FLOAT,[r.R8I]:Nt.INT,[r.R8UI]:Nt.UINT,[r.R16I]:Nt.INT,[r.R16UI]:Nt.UINT,[r.R32I]:Nt.INT,[r.R32UI]:Nt.UINT,[r.RG8I]:Nt.INT,[r.RG8UI]:Nt.UINT,[r.RG16I]:Nt.INT,[r.RG16UI]:Nt.UINT,[r.RG32I]:Nt.INT,[r.RG32UI]:Nt.UINT,[r.RGB8I]:Nt.INT,[r.RGB8UI]:Nt.UINT,[r.RGB16I]:Nt.INT,[r.RGB16UI]:Nt.UINT,[r.RGB32I]:Nt.INT,[r.RGB32UI]:Nt.UINT,[r.RGBA8I]:Nt.INT,[r.RGBA8UI]:Nt.UINT,[r.RGBA16I]:Nt.INT,[r.RGBA16UI]:Nt.UINT,[r.RGBA32I]:Nt.INT,[r.RGBA32UI]:Nt.UINT,[r.DEPTH_COMPONENT16]:Nt.FLOAT,[r.DEPTH_COMPONENT24]:Nt.FLOAT,[r.DEPTH_COMPONENT32F]:Nt.FLOAT,[r.DEPTH_STENCIL]:Nt.FLOAT,[r.DEPTH24_STENCIL8]:Nt.FLOAT,[r.DEPTH32F_STENCIL8]:Nt.FLOAT}:t={[r.RGB]:Nt.FLOAT,[r.RGBA]:Nt.FLOAT,[r.ALPHA]:Nt.FLOAT,[r.LUMINANCE]:Nt.FLOAT,[r.LUMINANCE_ALPHA]:Nt.FLOAT,[r.DEPTH_STENCIL]:Nt.FLOAT},t}function qst(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[ie.UNSIGNED_BYTE]:{[At.RGBA]:r.RGBA8,[At.RGB]:r.RGB8,[At.RG]:r.RG8,[At.RED]:r.R8,[At.RGBA_INTEGER]:r.RGBA8UI,[At.RGB_INTEGER]:r.RGB8UI,[At.RG_INTEGER]:r.RG8UI,[At.RED_INTEGER]:r.R8UI,[At.ALPHA]:r.ALPHA,[At.LUMINANCE]:r.LUMINANCE,[At.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ie.BYTE]:{[At.RGBA]:r.RGBA8_SNORM,[At.RGB]:r.RGB8_SNORM,[At.RG]:r.RG8_SNORM,[At.RED]:r.R8_SNORM,[At.RGBA_INTEGER]:r.RGBA8I,[At.RGB_INTEGER]:r.RGB8I,[At.RG_INTEGER]:r.RG8I,[At.RED_INTEGER]:r.R8I},[ie.UNSIGNED_SHORT]:{[At.RGBA_INTEGER]:r.RGBA16UI,[At.RGB_INTEGER]:r.RGB16UI,[At.RG_INTEGER]:r.RG16UI,[At.RED_INTEGER]:r.R16UI,[At.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[ie.SHORT]:{[At.RGBA_INTEGER]:r.RGBA16I,[At.RGB_INTEGER]:r.RGB16I,[At.RG_INTEGER]:r.RG16I,[At.RED_INTEGER]:r.R16I},[ie.UNSIGNED_INT]:{[At.RGBA_INTEGER]:r.RGBA32UI,[At.RGB_INTEGER]:r.RGB32UI,[At.RG_INTEGER]:r.RG32UI,[At.RED_INTEGER]:r.R32UI,[At.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[ie.INT]:{[At.RGBA_INTEGER]:r.RGBA32I,[At.RGB_INTEGER]:r.RGB32I,[At.RG_INTEGER]:r.RG32I,[At.RED_INTEGER]:r.R32I},[ie.FLOAT]:{[At.RGBA]:r.RGBA32F,[At.RGB]:r.RGB32F,[At.RG]:r.RG32F,[At.RED]:r.R32F,[At.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[ie.HALF_FLOAT]:{[At.RGBA]:r.RGBA16F,[At.RGB]:r.RGB16F,[At.RG]:r.RG16F,[At.RED]:r.R16F},[ie.UNSIGNED_SHORT_5_6_5]:{[At.RGB]:r.RGB565},[ie.UNSIGNED_SHORT_4_4_4_4]:{[At.RGBA]:r.RGBA4},[ie.UNSIGNED_SHORT_5_5_5_1]:{[At.RGBA]:r.RGB5_A1},[ie.UNSIGNED_INT_2_10_10_10_REV]:{[At.RGBA]:r.RGB10_A2,[At.RGBA_INTEGER]:r.RGB10_A2UI},[ie.UNSIGNED_INT_10F_11F_11F_REV]:{[At.RGB]:r.R11F_G11F_B10F},[ie.UNSIGNED_INT_5_9_9_9_REV]:{[At.RGB]:r.RGB9_E5},[ie.UNSIGNED_INT_24_8]:{[At.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[ie.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[At.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[ie.UNSIGNED_BYTE]:{[At.RGBA]:r.RGBA,[At.RGB]:r.RGB,[At.ALPHA]:r.ALPHA,[At.LUMINANCE]:r.LUMINANCE,[At.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[ie.UNSIGNED_SHORT_5_6_5]:{[At.RGB]:r.RGB},[ie.UNSIGNED_SHORT_4_4_4_4]:{[At.RGBA]:r.RGBA},[ie.UNSIGNED_SHORT_5_5_5_1]:{[At.RGBA]:r.RGBA}},t}let RW=class{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Re,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=qst(t),this.samplerTypes=Yst(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const i=new kC(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new kC(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:n}=this;if(i)for(let s=t-1;s>=0;--s){const a=e[s];a&&a._glTextures[n].samplerType!==Nt.FLOAT&&this.renderer.texture.unbind(a)}}initTexture(t){const e=new kC(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??Nt.FLOAT,this.webGLVersion===2&&t.type===ie.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(n=t.resource)==null?void 0:n.upload(i,t,e))e.samplerType!==Nt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,a=t.realHeight,o=i.gl;(e.width!==s||e.height!==a||e.dirtyId<0)&&(e.width=s,e.height=a,o.texImage2D(t.target,0,e.internalFormat,s,a,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&P_(this.managedTextures,n,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===ml.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Ch.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==ml.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===uh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===uh.LINEAR){const s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===uh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===uh.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}};RW.extension={type:jt.RendererSystem,name:"texture"};te.add(RW);class CW{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:n}=this;e&&n.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:n}=this,s=e.createTransformFeedback();t._glTransformFeedbacks[n]=s,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s);for(let a=0;a<t.buffers.length;a++){const o=t.buffers[a];o&&(i.buffer.update(o),o._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,a,o._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let a=0;a<t.buffers.length;a++){const o=t.buffers[a];if(!o)continue;const h=o._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&s.dispose(o,e))}i&&(e||n.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}CW.extension={type:jt.RendererSystem,name:"transformFeedback"};te.add(CW);class yw{constructor(t){this.renderer=t}init(t){this.screen=new Ve(0,0,t.width,t.height),this.element=t.view||Zt.ADAPTER.createCanvas(),this.resolution=t.resolution||Zt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=i,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",i,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}yw.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},yw.extension={type:[jt.RendererSystem,jt.CanvasRendererSystem],name:"_view"};te.add(yw);Zt.PREFER_ENV=Ud.WEBGL2;Zt.STRICT_TEXTURE_CACHE=!1;Zt.RENDER_OPTIONS={...pw.defaultOptions,...dw.defaultOptions,...yw.defaultOptions,...vw.defaultOptions};Object.defineProperties(Zt,{WRAP_MODE:{get(){return Re.defaultOptions.wrapMode},set(r){He("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Re.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Re.defaultOptions.scaleMode},set(r){He("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Re.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Re.defaultOptions.mipmap},set(r){He("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Re.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Re.defaultOptions.anisotropicLevel},set(r){He("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Re.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return He("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),vv.defaultResolution},set(r){vv.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return He("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),vv.defaultMultisample},set(r){vv.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Gf.defaultMaxTextures},set(r){He("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Gf.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Gf.defaultBatchSize},set(r){He("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Gf.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Gf.canUploadSameBuffer},set(r){He("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Gf.canUploadSameBuffer=r}},GC_MODE:{get(){return kf.defaultMode},set(r){He("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),kf.defaultMode=r}},GC_MAX_IDLE:{get(){return kf.defaultMaxIdle},set(r){He("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),kf.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return kf.defaultCheckCountMax},set(r){He("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),kf.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return lh.defaultVertexPrecision},set(r){He("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),lh.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return lh.defaultFragmentPrecision},set(r){He("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),lh.defaultFragmentPrecision=r}}});const Kst={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},wL={ADAPTER:Kst,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Zst=J_.default??J_;Zst(globalThis.navigator);wL.RETINA_PREFIX=/@([0-9\.]+)x/;wL.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Qst={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(h,u,l){this.fn=h,this.context=u,this.once=l||!1}function s(h,u,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new n(l,f||h,c),v=e?e+u:u;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],d]:h._events[v].push(d):(h._events[v]=d,h._eventsCount++),h}function a(h,u){--h._eventsCount===0?h._events=new i:delete h._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)t.call(l,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},o.prototype.listeners=function(u){var l=e?e+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},o.prototype.listenerCount=function(u){var l=e?e+u:u,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,l,f,c,d,v){var _=e?e+u:u;if(!this._events[_])return!1;var m=this._events[_],g=arguments.length,T,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,f),!0;case 4:return m.fn.call(m.context,l,f,c),!0;case 5:return m.fn.call(m.context,l,f,c,d),!0;case 6:return m.fn.call(m.context,l,f,c,d,v),!0}for(b=1,T=new Array(g-1);b<g;b++)T[b-1]=arguments[b];m.fn.apply(m.context,T)}else{var S=m.length,R;for(b=0;b<S;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,l);break;case 3:m[b].fn.call(m[b].context,l,f);break;case 4:m[b].fn.call(m[b].context,l,f,c);break;default:if(!T)for(R=1,T=new Array(g-1);R<g;R++)T[R-1]=arguments[R];m[b].fn.apply(m[b].context,T)}}return!0},o.prototype.on=function(u,l,f){return s(this,u,l,f,!1)},o.prototype.once=function(u,l,f){return s(this,u,l,f,!0)},o.prototype.removeListener=function(u,l,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!l)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var _=0,m=[],g=v.length;_<g;_++)(v[_].fn!==l||c&&!v[_].once||f&&v[_].context!==f)&&m.push(v[_]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var l;return u?(l=e?e+u:u,this._events[l]&&a(this,l)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(Qst);const d4={};function Jst(r,t,e=3){if(d4[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),d4[t]=!0}function tat(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[Wt.NORMAL_NPM]=Wt.NORMAL,r[Wt.ADD_NPM]=Wt.ADD,r[Wt.SCREEN_NPM]=Wt.SCREEN,t[Wt.NORMAL]=Wt.NORMAL_NPM,t[Wt.ADD]=Wt.ADD_NPM,t[Wt.SCREEN]=Wt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}tat();var py=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(py||{});let DC=class{constructor(t,e=null,i=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}};const AW=class ss{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new DC(null,null,1/0),this.deltaMS=1/ss.targetFPMS,this.elapsedMS=1/ss.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=py.NORMAL){return this._addListener(new DC(t,e,i))}addOnce(t,e,i=py.NORMAL){return this._addListener(new DC(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ss.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,ss.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ss._shared){const t=ss._shared=new ss;t.autoStart=!0,t._protected=!0}return ss._shared}static get system(){if(!ss._system){const t=ss._system=new ss;t.autoStart=!0,t._protected=!0}return ss._system}};AW.targetFPMS=.06;let Bn=AW;Object.defineProperties(wL,{TARGET_FPMS:{get(){return Bn.targetFPMS},set(r){Jst("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Bn.targetFPMS=r}}});let SW=class{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,py.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Bn.shared:new Bn,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}};SW.extension=jt.Application;te.add(SW);const NW=[];te.handleByList(jt.Renderer,NW);function eat(r){for(const t of NW)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}class PW{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=ui.HIGH?this.multisample=ui.HIGH:e>=ui.MEDIUM?this.multisample=ui.MEDIUM:e>=ui.LOW?this.multisample=ui.LOW:this.multisample=ui.NONE}destroy(){}}PW.extension={type:jt.RendererSystem,name:"_multisample"};te.add(PW);let rat=class{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}},OW=class{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,s.buffer)}}bindBufferRange(t,e,i){const{gl:n,CONTEXT_UID:s}=this;i=i||0;const a=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,a.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,n=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const s=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,s)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new rat(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}};OW.extension={type:jt.RendererSystem,name:"buffer"};te.add(OW);class FW{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let n,s,a,o;if(e&&(n=e.renderTexture,s=e.clear,a=e.transform,o=e.skipUpdateTransform),this.renderingToScreen=!n,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=a,!i.context.isLost){if(n||(this.lastObjectRendered=t),!o){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}i.renderTexture.bind(n),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),n&&(e.blit&&i.framebuffer.blit(),n.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}FW.extension={type:jt.RendererSystem,name:"objectRenderer"};te.add(FW);const AE=class VP extends Wst{constructor(t){super(),this.type=oz.WEBGL,t=Object.assign({},Zt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Yc({projectionMatrix:new Mi},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:VP.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(He("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=VP.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:Int()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return He("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return He("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return He("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){He("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){He("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return He("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};AE.extension={type:jt.Renderer,priority:1},AE.__plugins={},AE.__systems={};let IL=AE;te.handleByMap(jt.RendererPlugin,IL.__plugins);te.handleByMap(jt.RendererSystem,IL.__systems);te.add(IL);let UW=class extends ng{constructor(t,e){const{width:i,height:n}=e||{};super(i,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const a=new Re;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ng?this.addResourceAt(t[i],i):this.addResourceAt(kz(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}},iat=class extends UW{constructor(t,e){const{width:i,height:n}=e||{};let s,a;Array.isArray(t)?(s=t,a=t.length):a=t,super(a,{width:i,height:n}),s&&this.initFromArray(s,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Rv.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:n,itemDirtyIds:s,items:a}=this,{gl:o}=t;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(let h=0;h<n;h++){const u=a[h];s[h]<u.dirtyId&&(s[h]=u.dirtyId,u.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,h,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}},nat=class extends Fh{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}};const MW=class l_ extends UW{constructor(t,e){const{width:i,height:n,autoLoad:s,linkBaseTexture:a}=e||{};if(t&&t.length!==l_.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:n});for(let o=0;o<l_.SIDES;o++)this.items[o].target=Rv.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=a!==!1,t&&this.initFromArray(t,e),s!==!1&&this.load()}bind(t){super.bind(t),t.target=Rv.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Rv.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const n=this.itemDirtyIds;for(let s=0;s<l_.SIDES;s++){const a=this.items[s];(n[s]<a.dirtyId||i.dirtyId<e.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,i),n[s]=a.dirtyId):n[s]<-1&&(t.gl.texImage2D(a.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),n[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===l_.SIDES}};MW.SIDES=6;let sat=MW,aat=class f_ extends Fh{constructor(t,e){e=e||{};let i,n,s;typeof t=="string"?(i=f_.EMPTY,n=t,s=!0):(i=t,n=null,s=!1),super(i),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??s,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await Zt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ia.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return f_._EMPTY=f_._EMPTY??Zt.ADAPTER.createCanvas(0,0),f_._EMPTY}};const jP=class SE extends Fh{constructor(t,e){e=e||{},super(Zt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},SE.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Fh.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,s=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*e,s=this._overrideHeight||this._overrideWidth/e*i),n=Math.round(n),s=Math.round(s);const a=this.source;a.width=n,a.height=s,a._pixiId=`canvas_${ig()}`,a.getContext("2d").drawImage(t,0,0,e,i,0,0,n,s),this._resolve(),this._resolve=null}}static getSize(t){const e=SE.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&SE.SVG_XML.test(t)}};jP.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,jP.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let zP=jP;class oat extends Fh{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const WP=class YP extends Fh{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];Fh.crossOrigin(i,n,e.crossorigin);for(let s=0;s<t.length;++s){const a=document.createElement("source");let{src:o,mime:h}=t[s];if(o=o||t[s],o.startsWith("data:"))h=o.slice(5,o.indexOf(";"));else if(!o.startsWith("blob:")){const u=o.split("?").shift().toLowerCase(),l=u.slice(u.lastIndexOf(".")+1);h=h||YP.MIME_TYPES[l]||`video/${l}`}a.src=o,h&&(a.type=h),i.appendChild(a)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Bn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Bn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Bn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Bn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||YP.TYPES.includes(e)}};WP.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],WP.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let LW=WP;OP.push(aat,oW,nat,LW,oat,zP,Dz,sat,iat);let mw=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ve.EMPTY:(t=t||new Ve(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:n,c:s,d:a,tx:o,ty:h}=t,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)}addQuad(t){let e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s}addFrame(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)}addFrameMatrix(t,e,i,n,s){const a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty;let c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_}addVertexData(t,e,i){let n=this.minX,s=this.minY,a=this.maxX,o=this.maxY;for(let h=e;h<i;h+=2){const u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o}addVertices(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)}addVerticesMatrix(t,e,i,n,s=0,a=s){const o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty;let d=this.minX,v=this.minY,_=this.maxX,m=this.maxY;for(let g=i;g<n;g+=2){const T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m}addBounds(t){const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){const o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){const o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}},vy=class BW extends c0{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new K1,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new mw,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const n=e[i];Object.defineProperty(BW.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ve),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ve),t=this._localBoundsRect),this._localBounds||(this._localBounds=new mw);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-s,a}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,n=1,s=0,a=0,o=0,h=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=s,this.skew.x=a,this.skew.y=o,this.pivot.x=h,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new hat),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Znt}set angle(t){this.transform.rotation=t*Qnt}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}},hat=class extends vy{constructor(){super(...arguments),this.sortDirty=null}};vy.prototype.displayObjectUpdateTransform=vy.prototype.updateTransform;const uat=new Mi;function lat(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const GW=class qP extends vy{constructor(){super(),this.children=[],this.sortableChildren=qP.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);P_(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,P_(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,P_(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,n=e,s=n-i;let a;if(s>0&&s<=n){a=this.children.splice(i,s);for(let o=0;o<a.length;++o)a[o].parent=null,a[o].transform&&(a[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<a.length;++o)a[o].emit("removed",this),this.emit("childRemoved",a[o],this,o);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(lat),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let n=0,s=this.children.length;n<s;++n){const a=this.children[n];a.visible&&a.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==qP.prototype._render&&(i=this.getBounds(!0));const s=t.projection.transform;if(s&&(n?(n=uat.copyFrom(n),n.prepend(s)):n=s),i&&e.intersects(i,n))this._render(t);else if(this.cullArea)return;for(let a=0,o=this.children.length;a<o;++a){const h=this.children[a],u=h.cullable;h.cullable=u||!this.cullArea,h.render(t),h.cullable=u}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}}renderAdvanced(t){var s,a,o;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let h=0;h<e.length;h++)e[h].enabled&&this._enabledFilters.push(e[h])}const n=e&&((s=this._enabledFilters)==null?void 0:s.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Si.NONE));if(n&&t.batch.flush(),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let h=0,u=this.children.length;h<u;++h)this.children[h].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<i.length;++n)i[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};GW.defaultSortableChildren=!1;let Ls=GW;Ls.prototype.containerUpdateTransform=Ls.prototype.updateTransform;Object.defineProperties(Zt,{SORTABLE_CHILDREN:{get(){return Ls.defaultSortableChildren},set(r){He("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ls.defaultSortableChildren=r}}});var Q1=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Q1||{});const lm=new Xe,fat=new Uint16Array([0,1,2,0,2,3]);let m0=class kW extends Ls{constructor(t){super(),this._anchor=new Hu(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Yr(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Wt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ue.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=fat,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Zt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=pv(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=pv(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,a=e.d,o=e.tx,h=e.ty,u=this.vertexData,l=t.trim,f=t.orig,c=this._anchor;let d=0,v=0,_=0,m=0;if(l?(v=l.x-c._x*f.width,d=v+l.width,m=l.y-c._y*f.height,_=m+l.height):(v=-c._x*f.width,d=v+f.width,m=-c._y*f.height,_=m+f.height),u[0]=i*v+s*m+o,u[1]=a*m+n*v+h,u[2]=i*d+s*m+o,u[3]=a*m+n*d+h,u[4]=i*d+s*_+o,u[5]=a*_+n*d+h,u[6]=i*v+s*_+o,u[7]=a*_+n*v+h,this._roundPixels){const g=Zt.RESOLUTION;for(let T=0;T<u.length;++T)u[T]=Math.round(u[T]*g)/g}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,s=this.transform.worldTransform,a=s.a,o=s.b,h=s.c,u=s.d,l=s.tx,f=s.ty,c=-n._x*i.width,d=c+i.width,v=-n._y*i.height,_=v+i.height;if(e[0]=a*c+h*v+l,e[1]=u*v+o*c+f,e[2]=a*d+h*v+l,e[3]=u*v+o*d+f,e[4]=a*d+h*_+l,e[5]=u*_+o*d+f,e[6]=a*c+h*_+l,e[7]=u*_+o*c+f,this._roundPixels){const m=Zt.RESOLUTION;for(let g=0;g<e.length;++g)e[g]=Math.round(e[g]*m)/m}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new mw),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ve),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,lm);const e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x;let s=0;return lm.x>=n&&lm.x<n+e&&(s=-i*this.anchor.y,lm.y>=s&&lm.y<s+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof ue?t:ue.from(t,e);return new kW(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=pv(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=pv(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ue.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}};const jx={willReadFrequently:!0},uo=class Kt{static get experimentalLetterSpacingSupported(){let t=Kt._experimentalLetterSpacingSupported;if(t!==void 0){const e=Zt.ADAPTER.getCanvasRenderingContext2D().prototype;t=Kt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,n,s,a,o,h,u){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}static measureText(t,e,i,n=Kt._canvas){i=i??e.wordWrap;const s=e.toFontString(),a=Kt.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);const o=n.getContext("2d",jx);o.font=s;const h=(i?Kt.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),u=new Array(h.length);let l=0;for(let v=0;v<h.length;v++){const _=Kt._measureText(h[v],e.letterSpacing,o);u[v]=_,l=Math.max(l,_)}let f=l+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);const c=e.lineHeight||a.fontSize+e.strokeThickness;let d=Math.max(c,a.fontSize+e.strokeThickness*2)+e.leading+(h.length-1)*(c+e.leading);return e.dropShadow&&(d+=e.dropShadowDistance),new Kt(t,e,f,d,h,u,c+e.leading,l,a)}static _measureText(t,e,i){let n=!1;Kt.experimentalLetterSpacingSupported&&(Kt.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let s=i.measureText(t).width;return s>0&&(n?s-=e:s+=(Kt.graphemeSegmenter(t).length-1)*e),s}static wordWrap(t,e,i=Kt._canvas){const n=i.getContext("2d",jx);let s=0,a="",o="";const h=Object.create(null),{letterSpacing:u,whiteSpace:l}=e,f=Kt.collapseSpaces(l),c=Kt.collapseNewlines(l);let d=!f;const v=e.wordWrapWidth+u,_=Kt.tokenize(t);for(let m=0;m<_.length;m++){let g=_[m];if(Kt.isNewline(g)){if(!c){o+=Kt.addLine(a),d=!f,a="",s=0;continue}g=" "}if(f){const b=Kt.isBreakingSpace(g),S=Kt.isBreakingSpace(a[a.length-1]);if(b&&S)continue}const T=Kt.getFromCache(g,u,h,n);if(T>v)if(a!==""&&(o+=Kt.addLine(a),a="",s=0),Kt.canBreakWords(g,e.breakWords)){const b=Kt.wordWrapSplit(g);for(let S=0;S<b.length;S++){let R=b[S],U=R,L=1;for(;b[S+L];){const k=b[S+L];if(!Kt.canBreakChars(U,k,g,S,e.breakWords))R+=k;else break;U=k,L++}S+=L-1;const $=Kt.getFromCache(R,u,h,n);$+s>v&&(o+=Kt.addLine(a),d=!1,a="",s=0),a+=R,s+=$}}else{a.length>0&&(o+=Kt.addLine(a),a="",s=0);const b=m===_.length-1;o+=Kt.addLine(g,!b),d=!1,a="",s=0}else T+s>v&&(d=!1,o+=Kt.addLine(a),a="",s=0),(a.length>0||!Kt.isBreakingSpace(g)||d)&&(a+=g,s+=T)}return o+=Kt.addLine(a,!1),o}static addLine(t,e=!0){return t=Kt.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,n){let s=i[t];return typeof s!="number"&&(s=Kt._measureText(t,e,n)+e,i[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!Kt.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:Kt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Kt._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const s=t[n],a=t[n+1];if(Kt.isBreakingSpace(s,a)||Kt.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,n,s){return!0}static wordWrapSplit(t){return Kt.graphemeSegmenter(t)}static measureFont(t){if(Kt._fonts[t])return Kt._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=Kt._canvas,n=Kt._context;n.font=t;const s=Kt.METRICS_STRING+Kt.BASELINE_SYMBOL,a=Math.ceil(n.measureText(s).width);let o=Math.ceil(n.measureText(Kt.BASELINE_SYMBOL).width);const h=Math.ceil(Kt.HEIGHT_MULTIPLIER*o);if(o=o*Kt.BASELINE_MULTIPLIER|0,a===0||h===0)return Kt._fonts[t]=e,e;i.width=a,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,o);const u=n.getImageData(0,0,a,h).data,l=u.length,f=a*4;let c=0,d=0,v=!1;for(c=0;c<o;++c){for(let _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d+=f;else break}for(e.ascent=o-c,d=l-f,v=!1,c=h;c>o;--c){for(let _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d-=f;else break}return e.descent=c-o,e.fontSize=e.ascent+e.descent,Kt._fonts[t]=e,e}static clearMetrics(t=""){t?delete Kt._fonts[t]:Kt._fonts={}}static get _canvas(){var t;if(!Kt.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",jx))!=null&&t.measureText)return Kt.__canvas=i,i;e=Zt.ADAPTER.createCanvas()}catch{e=Zt.ADAPTER.createCanvas()}e.width=e.height=10,Kt.__canvas=e}return Kt.__canvas}static get _context(){return Kt.__context||(Kt.__context=Kt._canvas.getContext("2d",jx)),Kt.__context}};uo.METRICS_STRING="|ÉqÅ",uo.BASELINE_SYMBOL="M",uo.BASELINE_MULTIPLIER=1.4,uo.HEIGHT_MULTIPLIER=2,uo.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),uo.experimentalLetterSpacing=!1,uo._fonts={},uo._newlines=[10,13],uo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Df=uo;const cat=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],DW=class c_{constructor(t){this.styleID=0,this.reset(),HC(this,t,t)}clone(){const t={};return HC(t,this,c_.defaultStyle),new c_(t)}reset(){HC(this,c_.defaultStyle,c_.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=$C(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=$C(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){dat(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=$C(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!cat.includes(n)&&(n=`"${n}"`),e[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};DW.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Q1.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let _w=DW;function $C(r){const t=Yr.shared,e=i=>{const n=t.setValue(i);return n.alpha===1?n.toHex():n.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function dat(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function HC(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const pat={texture:!0,children:!1,baseTexture:!0},$W=class KP extends m0{constructor(t,e,i){let n=!1;i||(i=Zt.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const s=ue.from(i);s.orig=new Ve,s.trim=new Ve,super(s),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=KP.defaultResolution??Zt.RESOLUTION,this._autoResolution=KP.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Df.experimentalLetterSpacing}static set experimentalLetterSpacing(t){He("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Df.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,n=Df.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,a=n.height,o=n.lines,h=n.lineHeight,u=n.lineWidths,l=n.maxLineWidth,f=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let c,d;const v=e.dropShadow?2:1;for(let _=0;_<v;++_){const m=e.dropShadow&&_===0,g=m?Math.ceil(Math.max(1,a)+e.padding*2):0,T=g*this._resolution;if(m){i.fillStyle="black",i.strokeStyle="black";const S=e.dropShadowColor,R=e.dropShadowBlur*this._resolution,U=e.dropShadowDistance*this._resolution;i.shadowColor=Yr.shared.setValue(S).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=R,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*U,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*U+T}else i.fillStyle=this._generateFillStyle(e,o,n),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let b=(h-f.fontSize)/2;h-f.fontSize<0&&(b=0);for(let S=0;S<o.length;S++)c=e.strokeThickness/2,d=e.strokeThickness/2+S*h+f.ascent+b,e.align==="right"?c+=l-u[S]:e.align==="center"&&(c+=(l-u[S])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[S],c+e.padding,d+e.padding-g,!0),e.fill&&this.drawLetterSpacing(o[S],c+e.padding,d+e.padding-g)}this.updateTexture()}drawLetterSpacing(t,e,i,n=!1){const s=this._style.letterSpacing;let a=!1;if(Df.experimentalLetterSpacingSupported&&(Df.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||a){n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let o=e;const h=Df.graphemeSegmenter(t);let u=this.context.measureText(t).width,l=0;for(let f=0;f<h.length;++f){const c=h[f];n?this.context.strokeText(c,o,i):this.context.fillText(c,o,i);let d="";for(let v=f+1;v<h.length;++v)d+=h[v];l=this.context.measureText(d).width,o+=u-l+s,u=l}}updateTexture(){const t=this.canvas;if(this._style.trim){const a=knt(t);a.data&&(t.width=a.width,t.height=a.height,this.context.putImageData(a.data,0,0))}const e=this._texture,i=this._style,n=i.trim?0:i.padding,s=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let s;const a=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,h=this.canvas.width/this._resolution-a-o*2,u=this.canvas.height/this._resolution-a-o*2,l=n.slice(),f=t.fillGradientStops.slice();if(!f.length){const c=l.length+1;for(let d=1;d<c;++d)f.push(d/c)}if(l.unshift(n[0]),f.unshift(0),l.push(n[n.length-1]),f.push(1),t.fillGradientType===Q1.LINEAR_VERTICAL){s=this.context.createLinearGradient(h/2,o,h/2,u+o);const c=i.fontProperties.fontSize+t.strokeThickness;for(let d=0;d<e.length;d++){const v=i.lineHeight*(d-1)+c,_=i.lineHeight*d;let m=_;d>0&&v>_&&(m=(_+v)/2);const g=_+c,T=i.lineHeight*(d+1);let b=g;d+1<e.length&&T<g&&(b=(g+T)/2);const S=(b-m)/u;for(let R=0;R<l.length;R++){let U=0;typeof f[R]=="number"?U=f[R]:U=R/l.length;let L=Math.min(1,Math.max(0,m/u+U*S));L=Number(L.toFixed(5)),s.addColorStop(L,l[R])}}}else{s=this.context.createLinearGradient(o,u/2,h+o,u/2);const c=l.length+1;let d=1;for(let v=0;v<l.length;v++){let _;typeof f[v]=="number"?_=f[v]:_=d/c,s.addColorStop(_,l[v]),d++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},pat,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=pv(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=pv(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof _w?this._style=t:this._style=new _w(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};$W.defaultAutoResolution=!0;let vat=$W,gw=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}},NE=class{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in e){const a=e[s].match(/^[a-z]+/gm)[0],o=e[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const u in o){const l=o[u].split("="),f=l[0],c=l[1].replace(/"/gm,""),d=parseFloat(c),v=isNaN(d)?c:d;h[f]=v}i[a].push(h)}const n=new gw;return i.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}},ZP=class{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new gw,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),h=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<n.length;u++)e.common.push({lineHeight:parseInt(n[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)e.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<a.length;u++){const l=a[u];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(let u=0;u<o.length;u++)e.kerning.push({first:parseInt(o[u].getAttribute("first"),10),second:parseInt(o[u].getAttribute("second"),10),amount:parseInt(o[u].getAttribute("amount"),10)});for(let u=0;u<h.length;u++)e.distanceField.push({fieldType:h[u].getAttribute("fieldType"),distanceRange:parseInt(h[u].getAttribute("distanceRange"),10)});return e}},QP=class{static test(t){return typeof t=="string"&&t.includes("<font>")?ZP.test(Zt.ADAPTER.parseXML(t)):!1}static parse(t){return ZP.parse(Zt.ADAPTER.parseXML(t))}};const XC=[NE,ZP,QP];function yat(r){for(let t=0;t<XC.length;t++)if(XC[t].test(r))return XC[t];return null}function mat(r,t,e,i,n,s){const a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;let o;const h=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,l=r.width/i-h-u*2,f=r.height/i-h-u*2,c=a.slice(),d=e.fillGradientStops.slice();if(!d.length){const v=c.length+1;for(let _=1;_<v;++_)d.push(_/v)}if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),e.fillGradientType===Q1.LINEAR_VERTICAL){o=t.createLinearGradient(l/2,u,l/2,f+u);let v=0;const _=(s.fontProperties.fontSize+e.strokeThickness)/f;for(let m=0;m<n.length;m++){const g=s.lineHeight*m;for(let T=0;T<c.length;T++){let b=0;typeof d[T]=="number"?b=d[T]:b=T/c.length;const S=g/f+b*_;let R=Math.max(v,S);R=Math.min(R,1),o.addColorStop(R,c[T]),v=R}}}else{o=t.createLinearGradient(u,f/2,l+u,f/2);const v=c.length+1;let _=1;for(let m=0;m<c.length;m++){let g;typeof d[m]=="number"?g=d[m]:g=_/v,o.addColorStop(g,c[m]),_++}}return o}function _at(r,t,e,i,n,s,a){const o=e.text,h=e.fontProperties;t.translate(i,n),t.scale(s,s);const u=a.strokeThickness/2,l=-(a.strokeThickness/2);if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=mat(r,t,a,s,[o],e),t.strokeStyle=a.stroke,a.dropShadow){const f=a.dropShadowColor,c=a.dropShadowBlur*s,d=a.dropShadowDistance*s;t.shadowColor=Yr.shared.setValue(f).setAlpha(a.dropShadowAlpha).toRgbaString(),t.shadowBlur=c,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(o,u,l+e.lineHeight-h.descent),a.fill&&t.fillText(o,u,l+e.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function PE(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function HW(r){return Array.from?Array.from(r):r.split("")}function gat(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,h=a;o<=h;o++)t.push(String.fromCharCode(o))}else t.push(...HW(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const mu=class lo{constructor(t,e,i){var l;const[n]=t.info,[s]=t.common,[a]=t.page,[o]=t.distanceField,h=dy(a.file),u={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=u;for(let f=0;f<t.page.length;f++){const{id:c,file:d}=t.page[f];u[c]=e instanceof Array?e[f]:e[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(u[c].baseTexture.alphaMode=ia.NO_PREMULTIPLIED_ALPHA,u[c].baseTexture.mipmap=ml.OFF)}for(let f=0;f<t.char.length;f++){const{id:c,page:d}=t.char[f];let{x:v,y:_,width:m,height:g,xoffset:T,yoffset:b,xadvance:S}=t.char[f];v/=h,_/=h,m/=h,g/=h,T/=h,b/=h,S/=h;const R=new Ve(v+u[d].frame.x/h,_+u[d].frame.y/h,m,g);this.chars[c]={xOffset:T,yOffset:b,xAdvance:S,kerning:{},texture:new ue(u[d].baseTexture,R),page:d}}for(let f=0;f<t.kerning.length;f++){let{first:c,second:d,amount:v}=t.kerning[f];c/=h,d/=h,v/=h,this.chars[d]&&(this.chars[d].kerning[c]=v)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((l=o==null?void 0:o.fieldType)==null?void 0:l.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let n;if(t instanceof gw)n=t;else{const a=yat(t);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(t)}e instanceof ue&&(e=[e]);const s=new lo(n,e,i);return lo.available[s.font]=s,s}static uninstall(t){const e=lo.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete lo.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:s,resolution:a,textureWidth:o,textureHeight:h,...u}=Object.assign({},lo.defaultOptions,i),l=gat(n),f=e instanceof _w?e:new _w(e),c=o,d=new gw;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};let v=0,_=0,m,g,T,b=0;const S=[];for(let U=0;U<l.length;U++){m||(m=Zt.ADAPTER.createCanvas(),m.width=o,m.height=h,g=m.getContext("2d"),T=new Re(m,{resolution:a,...u}),S.push(new ue(T)),d.page.push({id:S.length-1,file:""}));const L=l[U],$=Df.measureText(L,f,!1,m),k=$.width,H=Math.ceil($.height),it=Math.ceil((f.fontStyle==="italic"?2:1)*k);if(_>=h-H*a){if(_===0)throw new Error(`[BitmapFont] textureHeight ${h}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${L}')`);--U,m=null,g=null,T=null,_=0,v=0,b=0;continue}if(b=Math.max(H+$.fontProperties.descent,b),it*a+v>=c){if(v===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${L}')`);--U,_+=b*a,_=Math.ceil(_),v=0,b=0;continue}_at(m,g,$,v,_,a,f);const tt=PE($.text);d.char.push({id:tt,page:S.length-1,x:v/a,y:_/a,width:it,height:H,xoffset:0,yoffset:0,xadvance:k-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),v+=(it+2*s)*a,v=Math.ceil(v)}if(!(i!=null&&i.skipKerning))for(let U=0,L=l.length;U<L;U++){const $=l[U];for(let k=0;k<L;k++){const H=l[k],it=g.measureText($).width,tt=g.measureText(H).width,j=g.measureText($+H).width-(it+tt);j&&d.kerning.push({first:PE($),second:PE(H),amount:j})}}const R=new lo(d,S,!0);return lo.available[t]!==void 0&&lo.uninstall(t),lo.available[t]=R,R}};mu.ALPHA=[["a","z"],["A","Z"]," "],mu.NUMERIC=[["0","9"]],mu.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],mu.ASCII=[[" ","~"]],mu.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:mu.ALPHANUMERIC},mu.available={};let _u=mu,xat=class{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}};const VC=new Xe,p4=new O_,XW=class VW extends Ls{constructor(t,e,i,n=Ga.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||ql.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Zt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ga.TRIANGLES&&e.length<VW.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,s=n.a,a=n.b,o=n.c,h=n.d,u=n.tx,l=n.ty,f=this.vertexData;for(let c=0;c<f.length/2;c++){const d=e[c*2],v=e[c*2+1];f[c*2]=s*d+o*v+u,f[c*2+1]=a*d+h*v+l}if(this._roundPixels){const c=Zt.RESOLUTION;for(let d=0;d<f.length;++d)f[d]=Math.round(f[d]*c)/c}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new xat(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,VC);const e=this.geometry.getBuffer("aVertexPosition").data,i=p4.points,n=this.geometry.getIndex().data,s=n.length,a=this.drawMode===4?3:1;for(let o=0;o+2<s;o+=a){const h=n[o]*2,u=n[o+1]*2,l=n[o+2]*2;if(i[0]=e[h],i[1]=e[h+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[l],i[5]=e[l+1],p4.contains(VC.x,VC.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};XW.BATCHABLE_SIZE=100;let sg=XW,J1=class extends y0{constructor(t,e,i){super();const n=new Pi(t),s=new Pi(e,!0),a=new Pi(i,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,ie.FLOAT).addAttribute("aTextureCoord",s,2,!1,ie.FLOAT).addIndex(a),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};var bat=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Tat=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;let ag=class extends dl{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Mi.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||lh.from(Tat,bat),i),this._colorDirty=!1,this.uvMatrix=new EL(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Yr(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Yr.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}};var Eat=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,wat=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const v4=[],y4=[],m4=[],jW=class zW extends Ls{constructor(t,e={}){super();const{align:i,tint:n,maxWidth:s,letterSpacing:a,fontName:o,fontSize:h}=Object.assign({},zW.styleDefaults,e);if(!_u.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Yr(n),this._font=void 0,this._fontName=o,this._fontSize=h,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new Hu(()=>{this.dirty=!0},this,0,0),this._roundPixels=Zt.ROUND_PIXELS,this.dirty=!0,this._resolution=Zt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var it;const t=_u.available[this._fontName],e=this.fontSize,i=e/t.size,n=new Xe,s=[],a=[],o=[],h=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=HW(h),l=this._maxWidth*t.size/e,f=t.distanceFieldType==="none"?v4:y4;let c=null,d=0,v=0,_=0,m=-1,g=0,T=0,b=0,S=0;for(let tt=0;tt<u.length;tt++){const j=u[tt],at=PE(j);if(/(?:\s)/.test(j)&&(m=tt,g=d,S++),j==="\r"||j===`
`){a.push(d),o.push(-1),v=Math.max(v,d),++_,++T,n.x=0,n.y+=t.lineHeight,c=null,S=0;continue}const K=t.chars[at];if(!K)continue;c&&K.kerning[c]&&(n.x+=K.kerning[c]);const et=m4.pop()||{texture:ue.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Xe};et.texture=K.texture,et.line=_,et.charCode=at,et.position.x=Math.round(n.x+K.xOffset+this._letterSpacing/2),et.position.y=Math.round(n.y+K.yOffset),et.prevSpaces=S,s.push(et),d=et.position.x+Math.max(K.xAdvance-K.xOffset,K.texture.orig.width),n.x+=K.xAdvance+this._letterSpacing,b=Math.max(b,K.yOffset+K.texture.height),c=at,m!==-1&&l>0&&n.x>l&&(++T,P_(s,1+m-T,1+tt-m),tt=m,m=-1,a.push(g),o.push(s.length>0?s[s.length-1].prevSpaces:0),v=Math.max(v,g),_++,n.x=0,n.y+=t.lineHeight,c=null,S=0)}const R=u[u.length-1];R!=="\r"&&R!==`
`&&(/(?:\s)/.test(R)&&(d=g),a.push(d),v=Math.max(v,d),o.push(-1));const U=[];for(let tt=0;tt<=_;tt++){let j=0;this._align==="right"?j=v-a[tt]:this._align==="center"?j=(v-a[tt])/2:this._align==="justify"&&(j=o[tt]<0?0:(v-a[tt])/o[tt]),U.push(j)}const L=s.length,$={},k=[],H=this._activePagesMeshData;f.push(...H);for(let tt=0;tt<L;tt++){const j=s[tt].texture,at=j.baseTexture.uid;if(!$[at]){let K=f.pop();if(!K){const st=new J1;let V,Y;t.distanceFieldType==="none"?(V=new ag(ue.EMPTY),Y=Wt.NORMAL):(V=new ag(ue.EMPTY,{program:lh.from(wat,Eat),uniforms:{uFWidth:0}}),Y=Wt.NORMAL_NPM);const z=new sg(st,V);z.blendMode=Y,K={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}K.index=0,K.indexCount=0,K.vertexCount=0,K.uvsCount=0,K.total=0;const{_textureCache:et}=this;et[at]=et[at]||new ue(j.baseTexture),K.mesh.texture=et[at],K.mesh.tint=this._tintColor.value,k.push(K),$[at]=K}$[at].total++}for(let tt=0;tt<H.length;tt++)k.includes(H[tt])||this.removeChild(H[tt].mesh);for(let tt=0;tt<k.length;tt++)k[tt].mesh.parent!==this&&this.addChild(k[tt].mesh);this._activePagesMeshData=k;for(const tt in $){const j=$[tt],at=j.total;if(!(((it=j.indices)==null?void 0:it.length)>6*at)||j.vertices.length<sg.BATCHABLE_SIZE*2)j.vertices=new Float32Array(4*2*at),j.uvs=new Float32Array(4*2*at),j.indices=new Uint16Array(6*at);else{const K=j.total,et=j.vertices;for(let st=K*4*2;st<et.length;st++)et[st]=0}j.mesh.size=6*at}for(let tt=0;tt<L;tt++){const j=s[tt];let at=j.position.x+U[j.line]*(this._align==="justify"?j.prevSpaces:1);this._roundPixels&&(at=Math.round(at));const K=at*i,et=j.position.y*i,st=j.texture,V=$[st.baseTexture.uid],Y=st.frame,z=st._uvs,Z=V.index++;V.indices[Z*6+0]=0+Z*4,V.indices[Z*6+1]=1+Z*4,V.indices[Z*6+2]=2+Z*4,V.indices[Z*6+3]=0+Z*4,V.indices[Z*6+4]=2+Z*4,V.indices[Z*6+5]=3+Z*4,V.vertices[Z*8+0]=K,V.vertices[Z*8+1]=et,V.vertices[Z*8+2]=K+Y.width*i,V.vertices[Z*8+3]=et,V.vertices[Z*8+4]=K+Y.width*i,V.vertices[Z*8+5]=et+Y.height*i,V.vertices[Z*8+6]=K,V.vertices[Z*8+7]=et+Y.height*i,V.uvs[Z*8+0]=z.x0,V.uvs[Z*8+1]=z.y0,V.uvs[Z*8+2]=z.x1,V.uvs[Z*8+3]=z.y1,V.uvs[Z*8+4]=z.x2,V.uvs[Z*8+5]=z.y2,V.uvs[Z*8+6]=z.x3,V.uvs[Z*8+7]=z.y3}this._textWidth=v*i,this._textHeight=(n.y+t.lineHeight)*i;for(const tt in $){const j=$[tt];if(this.anchor.x!==0||this.anchor.y!==0){let st=0;const V=this._textWidth*this.anchor.x,Y=this._textHeight*this.anchor.y;for(let z=0;z<j.total;z++)j.vertices[st++]-=V,j.vertices[st++]-=Y,j.vertices[st++]-=V,j.vertices[st++]-=Y,j.vertices[st++]-=V,j.vertices[st++]-=Y,j.vertices[st++]-=V,j.vertices[st++]-=Y}this._maxLineHeight=b*i;const at=j.mesh.geometry.getBuffer("aVertexPosition"),K=j.mesh.geometry.getBuffer("aTextureCoord"),et=j.mesh.geometry.getIndex();at.data=j.vertices,K.data=j.uvs,et.data=j.indices,at.update(),K.update(),et.update()}for(let tt=0;tt<s.length;tt++)m4.push(s[tt]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:n}=_u.available[this._fontName];if(i!=="none"){const{a:s,b:a,c:o,d:h}=this.worldTransform,u=Math.sqrt(s*s+a*a),l=Math.sqrt(o*o+h*h),f=(Math.abs(u)+Math.abs(l))/2,c=this.fontSize/n,d=t._view.resolution;for(const v of this._activePagesMeshData)v.mesh.shader.uniforms.uFWidth=f*e*c*d}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=_u.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!_u.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??_u.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=_u.available[this._fontName].distanceFieldType==="none"?v4:y4;i.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],i.filter(n=>e[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=ue.EMPTY});for(const n in e)e[n].destroy(),delete e[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};jW.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let Iat=jW;const _4={loader:jt.LoadParser,resolver:jt.ResolveParser,cache:jt.CacheParser,detection:jt.DetectionParser};te.handle(jt.Asset,r=>{const t=r.ref;Object.entries(_4).filter(([e])=>!!t[e]).forEach(([e,i])=>te.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(_4).filter(e=>!!t[e]).forEach(e=>te.remove(t[e]))});class Rat{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Cy(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function Ay(r,t){const e=r.split("?")[0],i=oa.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Ba=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),Cat=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function WW(r,t,e,i,n){const s=t[e];for(let a=0;a<s.length;a++){const o=s[a];e<t.length-1?WW(r.replace(i[e],o),t,e+1,i,n):n.push(r.replace(i[e],o))}}function Aat(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const n=[];e.forEach(s=>{const a=s.substring(1,s.length-1).split(",");n.push(a)}),WW(r,n,0,e,i)}else i.push(r);return i}const xw=r=>!Array.isArray(r);class Sat{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Ba(t);let n;for(let o=0;o<this.parsers.length;o++){const h=this.parsers[o];if(h.test(e)){n=h.getCacheableAssets(i,e);break}}n||(n={},i.forEach(o=>{n[o]=e}));const s=Object.keys(n),a={cacheKeys:s,keys:i};if(i.forEach(o=>{this._cacheMap.set(o,a)}),s.forEach(o=>{this._cache.has(o)&&this._cache.get(o)!==e&&console.warn("[Cache] already has key:",o),this._cache.set(o,n[o])}),e instanceof ue){const o=e;i.forEach(h=>{o.baseTexture!==ue.EMPTY.baseTexture&&Re.addToCache(o.baseTexture,h),ue.addToCache(o,h)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Dc=new Sat;let Nat=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var a,o;let n=null,s=null;if(e.loadParser&&(s=this._parserHash[e.loadParser],s||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!s){for(let h=0;h<this.parsers.length;h++){const u=this.parsers[h];if(u.load&&((a=u.test)!=null&&a.call(u,t,e,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(t,e,this),i.parser=s;for(let h=0;h<this.parsers.length;h++){const u=this.parsers[h];u.parse&&u.parse&&await((o=u.testParse)==null?void 0:o.call(u,n,e,this))&&(n=await u.parse(n,e,this)||n,i.parser=u)}return n})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const n={},s=xw(t),a=Ba(t,u=>({alias:[u],src:u})),o=a.length,h=a.map(async u=>{const l=oa.toAbsolute(u.src);if(!n[u.src])try{this.promiseCache[l]||(this.promiseCache[l]=this._getLoadPromiseAndParser(l,u)),n[u.src]=await this.promiseCache[l].promise,e&&e(++i/o)}catch(f){throw delete this.promiseCache[l],delete n[u.src],new Error(`[Loader.load] Failed to load ${l}.
${f}`)}});return await Promise.all(h),s?n[a[0].src]:n}async unload(t){const e=Ba(t,i=>({alias:[i],src:i})).map(async i=>{var a,o;const n=oa.toAbsolute(i.src),s=this.promiseCache[n];if(s){const h=await s.promise;delete this.promiseCache[n],(o=(a=s.parser)==null?void 0:a.unload)==null||o.call(a,h,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}};var Kl=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Kl||{});const Pat=".json",Oat="application/json",Fat={extension:{type:jt.LoadParser,priority:Kl.Low},name:"loadJson",test(r){return Cy(r,Oat)||Ay(r,Pat)},async load(r){return await(await Zt.ADAPTER.fetch(r)).json()}};te.add(Fat);const Uat=".txt",Mat="text/plain",Lat={name:"loadTxt",extension:{type:jt.LoadParser,priority:Kl.Low},test(r){return Cy(r,Mat)||Ay(r,Uat)},async load(r){return await(await Zt.ADAPTER.fetch(r)).text()}};te.add(Lat);const Bat=["normal","bold","100","200","300","400","500","600","700","800","900"],Gat=[".ttf",".otf",".woff",".woff2"],kat=["font/ttf","font/otf","font/woff","font/woff2"],Dat=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function $at(r){const t=oa.extname(r),e=oa.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let i=e.length>0;for(const s of e)if(!s.match(Dat)){i=!1;break}let n=e.join(" ");return i||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const Hat=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Xat(r){return Hat.test(r)?r:encodeURI(r)}const Vat={extension:{type:jt.LoadParser,priority:Kl.Low},name:"loadWebFont",test(r){return Cy(r,kat)||Ay(r,Gat)},async load(r,t){var i,n,s;const e=Zt.ADAPTER.getFontFaceSet();if(e){const a=[],o=((i=t.data)==null?void 0:i.family)??$at(r),h=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(l=>Bat.includes(l)))??["normal"],u=t.data??{};for(let l=0;l<h.length;l++){const f=h[l],c=new FontFace(o,`url(${Xat(r)})`,{...u,weight:f});await c.load(),e.add(c),a.push(c)}return a.length===1?a[0]:a}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>Zt.ADAPTER.getFontFaceSet().delete(t))}};te.add(Vat);const jat=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Nv=null,JP=class{constructor(){Nv||(Nv=URL.createObjectURL(new Blob([jat],{type:"application/javascript"}))),this.worker=new Worker(Nv)}};JP.revokeObjectURL=function(){Nv&&(URL.revokeObjectURL(Nv),Nv=null)};const zat=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Pv=null;class YW{constructor(){Pv||(Pv=URL.createObjectURL(new Blob([zat],{type:"application/javascript"}))),this.worker=new Worker(Pv)}}YW.revokeObjectURL=function(){Pv&&(URL.revokeObjectURL(Pv),Pv=null)};let g4=0,jC;class Wat{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new JP;e.addEventListener("message",i=>{e.terminate(),JP.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){jC===void 0&&(jC=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<jC&&(this._createdWorkers++,t=new YW().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((n,s)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[g4]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:g4++,id:i})}}const x4=new Wat;function RL(r,t,e){r.resource.internal=!0;const i=new ue(r),n=()=>{delete t.promiseCache[e],Dc.has(e)&&Dc.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),i}const Yat=[".jpeg",".jpg",".png",".webp",".avif"],qat=["image/jpeg","image/png","image/webp","image/avif"];async function Kat(r){const t=await Zt.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const tI={name:"loadTextures",extension:{type:jt.LoadParser,priority:Kl.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Cy(r,qat)||Ay(r,Yat)},async load(r,t,e){var o;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;i?this.config.preferWorkers&&await x4.isImageBitmapSupported()?n=await x4.loadImageBitmap(r):n=await Kat(r):n=await new Promise((h,u)=>{const l=new Image;l.crossOrigin=this.config.crossOrigin,l.src=r,l.complete?h(l):(l.onload=()=>h(l),l.onerror=f=>u(f))});const s={...t.data};s.resolution??(s.resolution=dy(r)),i&&((o=s.resourceOptions)==null?void 0:o.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const a=new Re(n,s);return a.resource.src=r,RL(a,e,r)},unload(r){r.destroy(!0)}};te.add(tI);const Zat=".svg",Qat="image/svg+xml",Jat={extension:{type:jt.LoadParser,priority:Kl.High},name:"loadSVG",test(r){return Cy(r,Qat)||Ay(r,Zat)},async testParse(r){return zP.test(r)},async parse(r,t,e){var s;const i=new zP(r,(s=t==null?void 0:t.data)==null?void 0:s.resourceOptions);await i.load();const n=new Re(i,{resolution:dy(r),...t==null?void 0:t.data});return n.resource.src=t.src,RL(n,e,t.src)},async load(r,t){return(await Zt.ADAPTER.fetch(r)).text()},unload:tI.unload};te.add(Jat);const tot=[".mp4",".m4v",".webm",".ogv"],eot=["video/mp4","video/webm","video/ogg"],rot={name:"loadVideo",extension:{type:jt.LoadParser,priority:Kl.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return Cy(r,eot)||Ay(r,tot)},async load(r,t,e){var a;let i;const n=await(await Zt.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(n);try{const o={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(a=t==null?void 0:t.data)==null?void 0:a.resourceOptions,autoLoad:!0},h=new LW(s,o);await h.load();const u=new Re(h,{alphaMode:await wnt(),resolution:dy(r),...t==null?void 0:t.data});u.resource.src=r,i=RL(u,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(o){throw URL.revokeObjectURL(s),o}return i},unload(r){r.destroy(!0)}};te.add(rot);class iot{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:n,srcs:s}=t;return Ba(e||i||n||s,a=>typeof a=="string"?a:Array.isArray(a)?a.map(o=>(o==null?void 0:o.src)??(o==null?void 0:o.srcs)??o):a!=null&&a.src||a!=null&&a.srcs?a.src??a.srcs:a,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(n=>{const s=n.src??n.srcs,a=n.alias??n.name;let o;if(typeof a=="string"){const h=this._createBundleAssetId(t,a);i.push(h),o=[a,h]}else{const h=a.map(u=>this._createBundleAssetId(t,u));i.push(...h),o=[...a,...h]}this.add({...n,alias:o,src:s})}):Object.keys(e).forEach(n=>{const s=[n,this._createBundleAssetId(t,n)];if(typeof e[n]=="string")this.add({alias:s,src:e[n]});else if(Array.isArray(e[n]))this.add({alias:s,src:e[n]});else{const a=e[n],o=a.src??a.srcs;this.add({...a,alias:s,src:Array.isArray(o)?o:[o]})}i.push(...s)}),this._bundles[t]=i}add(t,e,i,n,s){const a=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(He("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),a.push({alias:t,src:e,data:i,format:n,loadParser:s})):Array.isArray(t)?a.push(...t):a.push(t);let o;o=h=>{this.hasKey(h)&&console.warn(`[Resolver] already has key: ${h} overwriting`)},Ba(a).forEach(h=>{const{src:u,srcs:l}=h;let{data:f,format:c,loadParser:d}=h;const v=Ba(u||l).map(g=>typeof g=="string"?Aat(g):Array.isArray(g)?g:[g]),_=this.getAlias(h);Array.isArray(_)?_.forEach(o):o(_);const m=[];v.forEach(g=>{g.forEach(T=>{let b={};if(typeof T!="object"){b.src=T;for(let S=0;S<this._parsers.length;S++){const R=this._parsers[S];if(R.test(T)){b=R.parse(T);break}}}else f=T.data??f,c=T.format??c,d=T.loadParser??d,b={...b,...T};if(!_)throw new Error(`[Resolver] alias is undefined for this asset: ${b.src}`);b=this.buildResolvedAsset(b,{aliases:_,data:f,format:c,loadParser:d}),m.push(b)})}),_.forEach(g=>{this._assetMap[g]=m})})}resolveBundle(t){const e=xw(t);t=Ba(t);const i={};return t.forEach(n=>{const s=this._bundles[n];if(s){const a=this.resolve(s),o={};for(const h in a){const u=a[h];o[this._extractAssetIdFromBundle(n,h)]=u}i[n]=o}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const n in e)i[n]=e[n].src;return i}return e.src}resolve(t){const e=xw(t);t=Ba(t);const i={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const a=s[0],o=this._getPreferredOrder(s);o==null||o.priority.forEach(h=>{o.params[h].forEach(u=>{const l=s.filter(f=>f[h]?f[h]===u:!1);l.length&&(s=l)})}),this._resolverHash[n]=s[0]??a}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});i[n]=this._resolverHash[n]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:n,loadParser:s,format:a}=e;return(this._basePath||this._rootPath)&&(t.src=oa.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=s??t.loadParser,t.format=a??t.format??oa.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class not{constructor(){this._detections=[],this._initialized=!1,this.resolver=new iot,this.loader=new Nat,this.cache=Dc,this._backgroundLoader=new Rat(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const e=((s=t.texturePreference)==null?void 0:s.resolution)??1,i=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(a=t.texturePreference)==null?void 0:a.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,n,s){this.resolver.add(t,e,i,n,s)}async load(t,e){this._initialized||await this.init();const i=xw(t),n=Ba(t).map(o=>{if(typeof o!="string"){const h=this.resolver.getAlias(o);return h.some(u=>!this.resolver.hasKey(u))&&this.add(o),Array.isArray(h)?h[0]:h}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),s=this.resolver.resolve(n),a=await this._mapLoadToResolve(s,e);return i?a[n[0]]:a}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},a=Object.keys(n);let o=0,h=0;const u=()=>{e==null||e(++o/h)},l=a.map(f=>{const c=n[f];return h+=Object.keys(c).length,this._mapLoadToResolve(c,u).then(d=>{s[f]=d})});return await Promise.all(l),i?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Dc.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Dc.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(i,e);this._backgroundLoader.active=!0;const a={};return i.forEach((o,h)=>{const u=s[o.src],l=[o.src];o.alias&&l.push(...o.alias),a[n[h]]=u,Dc.set(l,u)}),a}async unload(t){this._initialized||await this.init();const e=Ba(t).map(n=>typeof n!="string"?n.src:n),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Ba(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Dc.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,n)=>e.indexOf(i)===n),e}get detections(){return this._detections}get preferWorkers(){return tI.config.preferWorkers}set preferWorkers(t){He("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const zx=new not;te.handleByList(jt.LoadParser,zx.loader.parsers).handleByList(jt.ResolveParser,zx.resolver.parsers).handleByList(jt.CacheParser,zx.cache.parsers).handleByList(jt.DetectionParser,zx.detections);const sot={extension:jt.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof ue),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((n,s)=>{e[i+(s===0?"":s+1)]=n})}),e}};te.add(sot);async function qW(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const aot={extension:{type:jt.DetectionParser,priority:1},test:async()=>qW("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};te.add(aot);const oot={extension:{type:jt.DetectionParser,priority:0},test:async()=>qW("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};te.add(oot);const b4=["png","jpg","jpeg"],hot={extension:{type:jt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...b4],remove:async r=>r.filter(t=>!b4.includes(t))};te.add(hot);const uot="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function CL(r){return uot?!1:document.createElement("video").canPlayType(r)!==""}const lot={extension:{type:jt.DetectionParser,priority:0},test:async()=>CL("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};te.add(lot);const fot={extension:{type:jt.DetectionParser,priority:0},test:async()=>CL("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};te.add(fot);const cot={extension:{type:jt.DetectionParser,priority:0},test:async()=>CL("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};te.add(cot);const dot={extension:jt.ResolveParser,test:tI.test,parse:r=>{var t;return{resolution:parseFloat(((t=Zt.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:oa.extname(r).slice(1),src:r}}};te.add(dot);const pot=[".xml",".fnt"],vot={extension:{type:jt.LoadParser,priority:Kl.Normal},name:"loadBitmapFont",test(r){return pot.includes(oa.extname(r).toLowerCase())},async testParse(r){return NE.test(r)||QP.test(r)},async parse(r,t,e){const i=NE.test(r)?NE.parse(r):QP.parse(r),{src:n}=t,{page:s}=i,a=[];for(let u=0;u<s.length;++u){const l=s[u].file;let f=oa.join(oa.dirname(n),l);f=Cat(f,n),a.push(f)}const o=await e.load(a),h=a.map(u=>o[u]);return _u.install(i,h,!0)},async load(r,t){return(await Zt.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};te.add(vot);const bw={build(r){const t=r.points;let e,i,n,s,a,o;if(r.type===Zi.CIRC){const v=r.shape;e=v.x,i=v.y,a=o=v.radius,n=s=0}else if(r.type===Zi.ELIP){const v=r.shape;e=v.x,i=v.y,a=v.width,o=v.height,n=s=0}else{const v=r.shape,_=v.width/2,m=v.height/2;e=v.x+_,i=v.y+m,a=o=Math.max(0,Math.min(v.radius,Math.min(_,m))),n=_-a,s=m-o}if(!(a>=0&&o>=0&&n>=0&&s>=0)){t.length=0;return}const h=Math.ceil(2.3*Math.sqrt(a+o)),u=h*8+(n?4:0)+(s?4:0);if(t.length=u,u===0)return;if(h===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=i+s,t[2]=t[4]=e-n,t[5]=t[7]=i-s;return}let l=0,f=h*4+(n?2:0)+2,c=f,d=u;{const v=n+a,_=s,m=e+v,g=e-v,T=i+_;if(t[l++]=m,t[l++]=T,t[--f]=T,t[--f]=g,s){const b=i-_;t[c++]=g,t[c++]=b,t[--d]=b,t[--d]=m}}for(let v=1;v<h;v++){const _=Math.PI/2*(v/h),m=n+Math.cos(_)*a,g=s+Math.sin(_)*o,T=e+m,b=e-m,S=i+g,R=i-g;t[l++]=T,t[l++]=S,t[--f]=S,t[--f]=b,t[c++]=b,t[c++]=R,t[--d]=R,t[--d]=T}{const v=n,_=s+o,m=e+v,g=e-v,T=i+_,b=i-_;t[l++]=m,t[l++]=T,t[--d]=b,t[--d]=m,n&&(t[l++]=g,t[l++]=T,t[--d]=b,t[--d]=g)}},triangulate(r,t){const e=r.points,i=t.points,n=t.indices;if(e.length===0)return;let s=i.length/2;const a=s;let o,h;if(r.type!==Zi.RREC){const l=r.shape;o=l.x,h=l.y}else{const l=r.shape;o=l.x+l.width/2,h=l.y+l.height/2}const u=r.matrix;i.push(r.matrix?u.a*o+u.c*h+u.tx:o,r.matrix?u.b*o+u.d*h+u.ty:h),s++,i.push(e[0],e[1]);for(let l=2;l<e.length;l+=2)i.push(e[l],e[l+1]),n.push(s++,a,s);n.push(a+1,a,s)}};function T4(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let n=0,s=r[e-2],a=r[e-1];n<e;n+=2){const o=r[n],h=r[n+1];i+=(o-s)*(h+a),s=o,a=h}if(!t&&i>0||t&&i<=0){const n=e/2;for(let s=n+n%2;s<e;s+=2){const a=e-s-2,o=e-s-1,h=s,u=s+1;[r[a],r[h]]=[r[h],r[a]],[r[o],r[u]]=[r[u],r[o]]}}}const KW={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,n=t.points,s=t.indices;if(e.length>=6){T4(e,!1);const a=[];for(let u=0;u<i.length;u++){const l=i[u];T4(l.points,!0),a.push(e.length/2),e=e.concat(l.points)}const o=d0(e,a,2);if(!o)return;const h=n.length/2;for(let u=0;u<o.length;u+=3)s.push(o[u]+h),s.push(o[u+1]+h),s.push(o[u+2]+h);for(let u=0;u<e.length;u++)n.push(e[u])}}},yot={build(r){const t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,a=r.points;a.length=0,n>=0&&s>=0&&a.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},mot={build(r){bw.build(r)},triangulate(r,t){bw.triangulate(r,t)}};var Qs=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Qs||{}),Xu=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(Xu||{});const yy={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};let E4=class{static curveTo(t,e,i,n,s,a){const o=a[a.length-2],h=a[a.length-1]-e,u=o-t,l=n-e,f=i-t,c=Math.abs(h*f-u*l);if(c<1e-8||s===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;const d=h*h+u*u,v=l*l+f*f,_=h*l+u*f,m=s*Math.sqrt(d)/c,g=s*Math.sqrt(v)/c,T=m*_/d,b=g*_/v,S=m*f+g*u,R=m*l+g*h,U=u*(g+T),L=h*(g+T),$=f*(m+b),k=l*(m+b),H=Math.atan2(L-R,U-S),it=Math.atan2(k-R,$-S);return{cx:S+t,cy:R+e,radius:s,startAngle:H,endAngle:it,anticlockwise:u*l>f*h}}static arc(t,e,i,n,s,a,o,h,u){const l=o-a,f=yy._segmentsCount(Math.abs(l)*s,Math.ceil(Math.abs(l)/cw)*40),c=l/(f*2),d=c*2,v=Math.cos(c),_=Math.sin(c),m=f-1,g=m%1/m;for(let T=0;T<=m;++T){const b=T+g*T,S=c+a+d*b,R=Math.cos(S),U=-Math.sin(S);u.push((v*R+_*U)*s+i,(v*-U+_*R)*s+n)}}},_ot=class{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}},got=class ZW{static curveLength(t,e,i,n,s,a,o,h){let u=0,l=0,f=0,c=0,d=0,v=0,_=0,m=0,g=0,T=0,b=0,S=t,R=e;for(let U=1;U<=10;++U)l=U/10,f=l*l,c=f*l,d=1-l,v=d*d,_=v*d,m=_*t+3*v*l*i+3*d*f*s+c*o,g=_*e+3*v*l*n+3*d*f*a+c*h,T=S-m,b=R-g,S=m,R=g,u+=Math.sqrt(T*T+b*b);return u}static curveTo(t,e,i,n,s,a,o){const h=o[o.length-2],u=o[o.length-1];o.length-=2;const l=yy._segmentsCount(ZW.curveLength(h,u,t,e,i,n,s,a));let f=0,c=0,d=0,v=0,_=0;o.push(h,u);for(let m=1,g=0;m<=l;++m)g=m/l,f=1-g,c=f*f,d=c*f,v=g*g,_=v*g,o.push(d*h+3*c*g*t+3*f*v*i+_*s,d*u+3*c*g*e+3*f*v*n+_*a)}};function w4(r,t,e,i,n,s,a,o){const h=r-e*n,u=t-i*n,l=r+e*s,f=t+i*s;let c,d;a?(c=i,d=-e):(c=-i,d=e);const v=h+c,_=u+d,m=l+c,g=f+d;return o.push(v,_,m,g),2}function cf(r,t,e,i,n,s,a,o){const h=e-r,u=i-t;let l=Math.atan2(h,u),f=Math.atan2(n-r,s-t);o&&l<f?l+=Math.PI*2:!o&&l>f&&(f+=Math.PI*2);let c=l;const d=f-l,v=Math.abs(d),_=Math.sqrt(h*h+u*u),m=(15*v*Math.sqrt(_)/Math.PI>>0)+1,g=d/m;if(c+=g,o){a.push(r,t,e,i);for(let T=1,b=c;T<m;T++,b+=g)a.push(r,t,r+Math.sin(b)*_,t+Math.cos(b)*_);a.push(r,t,n,s)}else{a.push(e,i,r,t);for(let T=1,b=c;T<m;T++,b+=g)a.push(r+Math.sin(b)*_,t+Math.cos(b)*_,r,t);a.push(n,s,r,t)}return m*2}function xot(r,t){const e=r.shape;let i=r.points||e.points.slice();const n=t.closePointEps;if(i.length===0)return;const s=r.lineStyle,a=new Xe(i[0],i[1]),o=new Xe(i[i.length-2],i[i.length-1]),h=e.type!==Zi.POLY||e.closeStroke,u=Math.abs(a.x-o.x)<n&&Math.abs(a.y-o.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));const st=(a.x+o.x)*.5,V=(o.y+a.y)*.5;i.unshift(st,V),i.push(st,V)}const l=t.points,f=i.length/2;let c=i.length;const d=l.length/2,v=s.width/2,_=v*v,m=s.miterLimit*s.miterLimit;let g=i[0],T=i[1],b=i[2],S=i[3],R=0,U=0,L=-(T-S),$=g-b,k=0,H=0,it=Math.sqrt(L*L+$*$);L/=it,$/=it,L*=v,$*=v;const tt=s.alignment,j=(1-tt)*2,at=tt*2;h||(s.cap===Xu.ROUND?c+=cf(g-L*(j-at)*.5,T-$*(j-at)*.5,g-L*j,T-$*j,g+L*at,T+$*at,l,!0)+2:s.cap===Xu.SQUARE&&(c+=w4(g,T,L,$,j,at,!0,l))),l.push(g-L*j,T-$*j,g+L*at,T+$*at);for(let st=1;st<f-1;++st){g=i[(st-1)*2],T=i[(st-1)*2+1],b=i[st*2],S=i[st*2+1],R=i[(st+1)*2],U=i[(st+1)*2+1],L=-(T-S),$=g-b,it=Math.sqrt(L*L+$*$),L/=it,$/=it,L*=v,$*=v,k=-(S-U),H=b-R,it=Math.sqrt(k*k+H*H),k/=it,H/=it,k*=v,H*=v;const V=b-g,Y=T-S,z=b-R,Z=U-S,Q=V*z+Y*Z,mt=Y*z-Z*V,Et=mt<0;if(Math.abs(mt)<.001*Math.abs(Q)){l.push(b-L*j,S-$*j,b+L*at,S+$*at),Q>=0&&(s.join===Qs.ROUND?c+=cf(b,S,b-L*j,S-$*j,b-k*j,S-H*j,l,!1)+4:c+=2,l.push(b-k*at,S-H*at,b+k*j,S+H*j));continue}const It=(-L+g)*(-$+S)-(-L+b)*(-$+T),wt=(-k+R)*(-H+S)-(-k+b)*(-H+U),ht=(V*wt-z*It)/mt,I=(Z*It-Y*wt)/mt,M=(ht-b)*(ht-b)+(I-S)*(I-S),O=b+(ht-b)*j,N=S+(I-S)*j,B=b-(ht-b)*at,G=S-(I-S)*at,W=Math.min(V*V+Y*Y,z*z+Z*Z),X=Et?j:at,ut=W+X*X*_,ft=M<=ut;let ct=s.join;if(ct===Qs.MITER&&M/_>m&&(ct=Qs.BEVEL),ft)switch(ct){case Qs.MITER:{l.push(O,N,B,G);break}case Qs.BEVEL:{Et?l.push(O,N,b+L*at,S+$*at,O,N,b+k*at,S+H*at):l.push(b-L*j,S-$*j,B,G,b-k*j,S-H*j,B,G),c+=2;break}case Qs.ROUND:{Et?(l.push(O,N,b+L*at,S+$*at),c+=cf(b,S,b+L*at,S+$*at,b+k*at,S+H*at,l,!0)+4,l.push(O,N,b+k*at,S+H*at)):(l.push(b-L*j,S-$*j,B,G),c+=cf(b,S,b-L*j,S-$*j,b-k*j,S-H*j,l,!1)+4,l.push(b-k*j,S-H*j,B,G));break}}else{switch(l.push(b-L*j,S-$*j,b+L*at,S+$*at),ct){case Qs.MITER:{Et?l.push(B,G,B,G):l.push(O,N,O,N),c+=2;break}case Qs.ROUND:{Et?c+=cf(b,S,b+L*at,S+$*at,b+k*at,S+H*at,l,!0)+2:c+=cf(b,S,b-L*j,S-$*j,b-k*j,S-H*j,l,!1)+2;break}}l.push(b-k*j,S-H*j,b+k*at,S+H*at),c+=2}}g=i[(f-2)*2],T=i[(f-2)*2+1],b=i[(f-1)*2],S=i[(f-1)*2+1],L=-(T-S),$=g-b,it=Math.sqrt(L*L+$*$),L/=it,$/=it,L*=v,$*=v,l.push(b-L*j,S-$*j,b+L*at,S+$*at),h||(s.cap===Xu.ROUND?c+=cf(b-L*(j-at)*.5,S-$*(j-at)*.5,b-L*j,S-$*j,b+L*at,S+$*at,l,!1)+2:s.cap===Xu.SQUARE&&(c+=w4(b,S,L,$,j,at,!1,l)));const K=t.indices,et=yy.epsilon*yy.epsilon;for(let st=d;st<c+d-2;++st)g=l[st*2],T=l[st*2+1],b=l[(st+1)*2],S=l[(st+1)*2+1],R=l[(st+2)*2],U=l[(st+2)*2+1],!(Math.abs(g*(S-U)+b*(U-T)+R*(T-S))<et)&&K.push(st,st+1,st+2)}function bot(r,t){let e=0;const i=r.shape,n=r.points||i.points,s=i.type!==Zi.POLY||i.closeStroke;if(n.length===0)return;const a=t.points,o=t.indices,h=n.length/2,u=a.length/2;let l=u;for(a.push(n[0],n[1]),e=1;e<h;e++)a.push(n[e*2],n[e*2+1]),o.push(l,l+1),l++;s&&o.push(l,u)}function I4(r,t){r.lineStyle.native?bot(r,t):xot(r,t)}let Tot=class QW{static curveLength(t,e,i,n,s,a){const o=t-2*i+s,h=e-2*n+a,u=2*i-2*t,l=2*n-2*e,f=4*(o*o+h*h),c=4*(o*u+h*l),d=u*u+l*l,v=2*Math.sqrt(f+c+d),_=Math.sqrt(f),m=2*f*_,g=2*Math.sqrt(d),T=c/_;return(m*v+_*c*(v-g)+(4*d*f-c*c)*Math.log((2*_+T+v)/(T+g)))/(4*m)}static curveTo(t,e,i,n,s){const a=s[s.length-2],o=s[s.length-1],h=yy._segmentsCount(QW.curveLength(a,o,t,e,i,n));let u=0,l=0;for(let f=1;f<=h;++f){const c=f/h;u=a+(t-a)*c,l=o+(e-o)*c,s.push(u+(t+(i-t)*c-u)*c,l+(e+(n-e)*c-l)*c)}}};const zC={[Zi.POLY]:KW,[Zi.CIRC]:bw,[Zi.ELIP]:bw,[Zi.RECT]:yot,[Zi.RREC]:mot},R4=[],Wx=[];let C4=class JW{constructor(t,e=null,i=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new JW(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};const rp=new Xe,t9=class e9 extends Xz{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new mw,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Wx.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),R4.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,n=null){const s=new C4(t,e,i,n);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new C4(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const n=e[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,rp):rp.copyFrom(t),n.shape.contains(rp.x,rp.y))){let s=!1;if(n.holes){for(let a=0;a<n.holes.length;a++)if(n.holes[a].shape.contains(rp.x,rp.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let h=this.shapeIndex;h<e.length;h++){this.shapeIndex++;const u=e[h],l=u.fillStyle,f=u.lineStyle;zC[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(l.visible||f.visible)&&this.processHoles(u.holes);for(let c=0;c<2;c++){const d=c===0?l:f;if(!d.visible)continue;const v=d.texture.baseTexture,_=this.indices.length,m=this.points.length/2;v.wrapMode=Ch.REPEAT,c===0?this.processFill(u):this.processLine(u);const g=this.points.length/2-m;g!==0&&(i&&!this._compareStyles(n,d)&&(i.end(_,m),i=null),i||(i=R4.pop()||new _ot,i.begin(d,_,m),this.batches.push(i),n=d),this.addUvs(this.points,t,d.texture,m,g,d.matrix))}}const s=this.indices.length,a=this.points.length/2;if(i&&i.end(s,a),this.batches.length===0){this.batchable=!0;return}const o=a>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],n=i.fillStyle,s=i.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const n=t[e];for(let s=0;s<n.size;s++){const a=n.start+s;this.indicesUint16[a]=this.indicesUint16[a]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<e9.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Re._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),Wx.push(this.drawCalls[f]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let n=Wx.pop();n||(n=new UP,n.texArray=new DP),n.texArray.count=0,n.start=0,n.size=0,n.type=Ga.TRIANGLES;let s=0,a=null,o=0,h=!1,u=Ga.TRIANGLES,l=0;this.drawCalls.push(n);for(let f=0;f<this.batches.length;f++){const c=this.batches[f],d=8,v=c.style,_=v.texture.baseTexture;h!==!!v.native&&(h=!!v.native,u=h?Ga.LINES:Ga.TRIANGLES,a=null,s=d,t++),a!==_&&(a=_,_._batchEnabled!==t&&(s===d&&(t++,s=0,n.size>0&&(n=Wx.pop(),n||(n=new UP,n.texArray=new DP),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=u),_.touched=1,_._batchEnabled=t,_._batchLocation=s,_.wrapMode=Ch.REPEAT,n.texArray.elements[n.texArray.count++]=_,s++)),n.size+=c.size,l+=c.size,o=_._batchLocation,this.addColors(e,v.color,v.alpha,c.attribSize,c.attribStart),this.addTextureIds(i,o,c.attribSize,c.attribStart)}Re._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),a=new Float32Array(s),o=new Uint32Array(s);let h=0;for(let u=0;u<t.length/2;u++)a[h++]=t[u*2],a[h++]=t[u*2+1],a[h++]=e[u*2],a[h++]=e[u*2+1],o[h++]=i[u],a[h++]=n[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?KW.triangulate(t,this):zC[t.type].triangulate(t,this)}processLine(t){I4(t,this);for(let e=0;e<t.holes.length;e++)I4(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];zC[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const n=t[i*2],s=t[i*2+1];t[i*2]=e.a*n+e.c*s+e.tx,t[i*2+1]=e.b*n+e.d*s+e.ty}}addColors(t,e,i,n,s=0){const a=Yr.shared.setValue(e).toLittleEndianNumber(),o=Yr.shared.setValue(a).toPremultiplied(i);t.length=Math.max(t.length,s+n);for(let h=0;h<n;h++)t[s+h]=o}addTextureIds(t,e,i,n=0){t.length=Math.max(t.length,n+i);for(let s=0;s<i;s++)t[n+s]=e}addUvs(t,e,i,n,s,a=null){let o=0;const h=e.length,u=i.frame;for(;o<s;){let f=t[(n+o)*2],c=t[(n+o)*2+1];if(a){const d=a.a*f+a.c*c+a.tx;c=a.b*f+a.d*c+a.ty,f=d}o++,e.push(f/u.width,c/u.height)}const l=i.baseTexture;(u.width<l.width||u.height<l.height)&&this.adjustUvs(e,i,h,s)}adjustUvs(t,e,i,n){const s=e.baseTexture,a=1e-6,o=i+n*2,h=e.frame,u=h.width/s.width,l=h.height/s.height;let f=h.x/h.width,c=h.y/h.height,d=Math.floor(t[i]+a),v=Math.floor(t[i+1]+a);for(let _=i+2;_<o;_+=2)d=Math.min(d,Math.floor(t[_]+a)),v=Math.min(v,Math.floor(t[_+1]+a));f-=d,c-=v;for(let _=i;_<o;_+=2)t[_]=(t[_]+f)*u,t[_+1]=(t[_+1]+c)*l}};t9.BATCHABLE_SIZE=100;let Eot=t9,r9=class i9{constructor(){this.color=16777215,this.alpha=1,this.texture=ue.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new i9;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ue.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}},wot=class n9 extends r9{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Xu.BUTT,this.join=Qs.MITER,this.miterLimit=10}clone(){const t=new n9;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Xu.BUTT,this.join=Qs.MITER,this.miterLimit=10}};const WC={},tO=class OE extends Ls{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new r9,this._lineStyle=new wot,this._matrix=null,this._holeMode=!1,this.state=ql.for2d(),this._geometry=t||new Eot,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Yr(16777215),this.blendMode=Wt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new OE(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,n=.5,s=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:n,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:ue.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Xu.BUTT,join:Qs.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new O_,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new O_,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],s=i[i.length-1];return(n!==t||s!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,n){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Tot.curveTo(t,e,i,n,s),this}bezierCurveTo(t,e,i,n,s,a){return this._initCurve(),got.curveTo(t,e,i,n,s,a,this.currentPath.points),this}arcTo(t,e,i,n,s){this._initCurve(t,e);const a=this.currentPath.points,o=E4.curveTo(t,e,i,n,s,a);if(o){const{cx:h,cy:u,radius:l,startAngle:f,endAngle:c,anticlockwise:d}=o;this.arc(h,u,l,f,c,d)}return this}arc(t,e,i,n,s,a=!1){if(n===s)return this;if(!a&&s<=n?s+=cw:a&&n<=s&&(n+=cw),s-n===0)return this;const o=t+Math.cos(n)*i,h=e+Math.sin(n)*i,u=this._geometry.closePointEps;let l=this.currentPath?this.currentPath.points:null;if(l){const f=Math.abs(l[l.length-2]-o),c=Math.abs(l[l.length-1]-h);f<u&&c<u||l.push(o,h)}else this.moveTo(o,h),l=this.currentPath.points;return E4.arc(o,h,t,e,i,n,s,a,l),this}beginFill(t=0,e){return this.beginTextureFill({texture:ue.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Yr.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:ue.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,n){return this.drawShape(new Ve(t,e,i,n))}drawRoundedRect(t,e,i,n,s){return this.drawShape(new Kz(t,e,i,n,s))}drawCircle(t,e,i){return this.drawShape(new jz(t,e,i))}drawEllipse(t,e,i,n){return this.drawShape(new Wz(t,e,i,n))}drawPolygon(...t){let e,i=!0;const n=t[0];n.points?(i=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const s=new O_(e);return s.closeStroke=i,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Zi.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let n=0;n<i;n++){const s=t.batches[n],a=s.style.color,o=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),h=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),l={vertexData:o,blendMode:e,indices:u,uvs:h,_batchRGB:Yr.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=l}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,n=this.worldAlpha,s=e.uniforms,a=i.drawCalls;s.translationMatrix=this.transform.worldTransform,Yr.shared.setValue(this._tintColor).premultiply(n).toArray(s.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let o=0,h=a.length;o<h;o++)this._renderDrawCallDirect(t,i.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:i,type:n,size:s,start:a}=e,o=i.count;for(let h=0;h<o;h++)t.texture.bind(i.elements[h],h);t.geometry.draw(n,s,a)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!WC[i]){const{maxTextures:n}=t.plugins[i],s=new Int32Array(n);for(let h=0;h<n;h++)s[h]=h;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new Mi,default:Yc.from({uSamplers:s},!0)},o=t.plugins[i]._shader.program;WC[i]=new dl(o,a)}e=WC[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:n,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,e,i,n,s)}containsPoint(t){return this.worldTransform.applyInverse(t,OE._TEMP_POINT),this._geometry.containsPoint(OE._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Yr.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,n=e.b,s=e.c,a=e.d,o=e.tx,h=e.ty,u=this._geometry.points,l=this.vertexData;let f=0;for(let c=0;c<u.length;c+=2){const d=u[c],v=u[c+1];l[f++]=i*d+s*v+o,l[f++]=a*v+n*d+h}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};tO.curves=yy,tO._TEMP_POINT=new Xe;let YC=tO,Iot=class extends J1{constructor(t=100,e=100,i=10,n=10){super(),this.segWidth=i,this.segHeight=n,this.width=t,this.height=e,this.build()}build(){const t=this.segWidth*this.segHeight,e=[],i=[],n=[],s=this.segWidth-1,a=this.segHeight-1,o=this.width/s,h=this.height/a;for(let l=0;l<t;l++){const f=l%this.segWidth,c=l/this.segWidth|0;e.push(f*o,c*h),i.push(f/s,c/a)}const u=s*a;for(let l=0;l<u;l++){const f=l%s,c=l/s|0,d=c*this.segWidth+f,v=c*this.segWidth+f+1,_=(c+1)*this.segWidth+f,m=(c+1)*this.segWidth+f+1;n.push(d,v,_,v,m,_)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}},Rot=class extends J1{constructor(t=200,e,i=0){super(new Float32Array(e.length*4),new Float32Array(e.length*4),new Uint16Array((e.length-1)*6)),this.points=e,this._width=t,this.textureScale=i,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(t.length<1)return;e.data.length/4!==t.length&&(e.data=new Float32Array(t.length*4),i.data=new Float32Array(t.length*4),n.data=new Uint16Array((t.length-1)*6));const s=i.data,a=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let o=0,h=t[0];const u=this._width*this.textureScale,l=t.length;for(let c=0;c<l;c++){const d=c*4;if(this.textureScale>0){const v=h.x-t[c].x,_=h.y-t[c].y,m=Math.sqrt(v*v+_*_);h=t[c],o+=m/u}else o=c/(l-1);s[d]=o,s[d+1]=0,s[d+2]=o,s[d+3]=1}let f=0;for(let c=0;c<l-1;c++){const d=c*2;a[f++]=d,a[f++]=d+1,a[f++]=d+2,a[f++]=d+2,a[f++]=d+1,a[f++]=d+3}i.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let e=t[0],i,n=0,s=0;const a=this.buffers[0].data,o=t.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let u=0;u<o;u++){const l=t[u],f=u*4;u<t.length-1?i=t[u+1]:i=l,s=-(i.x-e.x),n=i.y-e.y;const c=Math.sqrt(n*n+s*s);c<1e-6?(n=0,s=0):(n/=c,s/=c,n*=h,s*=h),a[f]=l.x+n,a[f+1]=l.y+s,a[f+2]=l.x-n,a[f+3]=l.y-s,e=l}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}},Cot=class extends sg{constructor(t,e,i){const n=new Iot(t.width,t.height,e,i),s=new ag(ue.WHITE);super(n,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:e,height:i}=this.shader.texture;this.autoResize&&(t.width!==e||t.height!==i)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}};const Yx=10;class Aot extends Cot{constructor(t,e,i,n,s){var a,o,h,u;super(ue.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=e??((a=t.defaultBorders)==null?void 0:a.left)??Yx,this._rightWidth=n??((o=t.defaultBorders)==null?void 0:o.right)??Yx,this._topHeight=i??((h=t.defaultBorders)==null?void 0:h.top)??Yx,this._bottomHeight=s??((u=t.defaultBorders)==null?void 0:u.bottom)??Yx,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,n=this._height>i?1:this._height/i;return Math.min(e,n)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const i=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class Sot extends sg{constructor(t=ue.EMPTY,e,i,n,s){const a=new J1(e,i,n);a.getBuffer("aVertexPosition").static=!1;const o=new ag(t);super(a,o,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class Not extends sg{constructor(t,e,i=0){const n=new Rot(t.height,e,i),s=new ag(t);i>0&&(t.baseTexture.wrapMode=Ch.REPEAT),super(n,s),this.autoUpdate=!0}_render(t){const e=this.geometry;(this.autoUpdate||e._width!==this.shader.texture.height)&&(e._width=this.shader.texture.height,e.update()),super._render(t)}}class Pot extends Ls{constructor(t=1500,e,i=16384,n=!1){super();const s=16384;i>s&&(i=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Wt.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tintColor=new Yr(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const e=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}let A4=class{constructor(t,e,i){this.geometry=new y0,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ie.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new Pi(Lnt(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let a=0;a<this.dynamicProperties.length;++a){const o=this.dynamicProperties[a];o.offset=e,e+=o.size,this.dynamicStride+=o.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Pi(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let a=0;a<this.staticProperties.length;++a){const o=this.staticProperties[a];o.offset=n,n+=o.size,this.staticStride+=o.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Pi(this.staticData,!0,!1);for(let a=0;a<this.dynamicProperties.length;++a){const o=this.dynamicProperties[a];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===ie.UNSIGNED_BYTE,o.type,this.dynamicStride*4,o.offset*4)}for(let a=0;a<this.staticProperties.length;++a){const o=this.staticProperties[a];t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===ie.UNSIGNED_BYTE,o.type,this.staticStride*4,o.offset*4)}}uploadDynamic(t,e,i){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===ie.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===ie.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}};var Oot=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Fot=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;let s9=class extends Z1{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Mi,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ie.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=dl.from(Fot,Oot,{}),this.state=ql.for2d()}render(t){const e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer;let a=e.length;if(a===0)return;a>i&&!t.autoResize&&(a=i);let o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));const h=e[0]._texture.baseTexture,u=h.alphaMode>0;this.state.blendMode=Lz(t.blendMode,u),s.state.set(this.state);const l=s.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Yr.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let c=!1;for(let d=0,v=0;d<a;d+=n,v+=1){let _=a-d;_>n&&(_=n),v>=o.length&&o.push(this._generateOneMoreBuffer(t));const m=o[v];m.uploadDynamic(e,d,_);const g=t._bufferUpdateIDs[v]||0;c=c||m._updateID<g,c&&(m._updateID=t._updateID,m.uploadStatic(e,d,_)),s.geometry.bind(m.geometry),l.drawElements(l.TRIANGLES,_*6,l.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,n=t._batchSize,s=t._properties;for(let a=0;a<i;a+=n)e.push(new A4(this.properties,s,n));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new A4(this.properties,i,e)}uploadVertices(t,e,i,n,s,a){let o=0,h=0,u=0,l=0;for(let f=0;f<i;++f){const c=t[e+f],d=c._texture,v=c.scale.x,_=c.scale.y,m=d.trim,g=d.orig;m?(h=m.x-c.anchor.x*g.width,o=h+m.width,l=m.y-c.anchor.y*g.height,u=l+m.height):(o=g.width*(1-c.anchor.x),h=g.width*-c.anchor.x,u=g.height*(1-c.anchor.y),l=g.height*-c.anchor.y),n[a]=h*v,n[a+1]=l*_,n[a+s]=o*v,n[a+s+1]=l*_,n[a+s*2]=o*v,n[a+s*2+1]=u*_,n[a+s*3]=h*v,n[a+s*3+1]=u*_,a+=s*4}}uploadPosition(t,e,i,n,s,a){for(let o=0;o<i;o++){const h=t[e+o].position;n[a]=h.x,n[a+1]=h.y,n[a+s]=h.x,n[a+s+1]=h.y,n[a+s*2]=h.x,n[a+s*2+1]=h.y,n[a+s*3]=h.x,n[a+s*3+1]=h.y,a+=s*4}}uploadRotation(t,e,i,n,s,a){for(let o=0;o<i;o++){const h=t[e+o].rotation;n[a]=h,n[a+s]=h,n[a+s*2]=h,n[a+s*3]=h,a+=s*4}}uploadUvs(t,e,i,n,s,a){for(let o=0;o<i;++o){const h=t[e+o]._texture._uvs;h?(n[a]=h.x0,n[a+1]=h.y0,n[a+s]=h.x1,n[a+s+1]=h.y1,n[a+s*2]=h.x2,n[a+s*2+1]=h.y2,n[a+s*3]=h.x3,n[a+s*3+1]=h.y3,a+=s*4):(n[a]=0,n[a+1]=0,n[a+s]=0,n[a+s+1]=0,n[a+s*2]=0,n[a+s*2+1]=0,n[a+s*3]=0,n[a+s*3+1]=0,a+=s*4)}}uploadTint(t,e,i,n,s,a){for(let o=0;o<i;++o){const h=t[e+o],u=Yr.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);n[a]=u,n[a+s]=u,n[a+s*2]=u,n[a+s*3]=u,a+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};s9.extension={name:"particle",type:jt.RendererPlugin};te.add(s9);class og extends m0{constructor(t,e=!0){super(t[0]instanceof ue?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=e,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Bn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Bn.shared.add(this.update,this,py.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const e=this.animationSpeed*t,i=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const e=[];for(let i=0;i<t.length;++i)e.push(ue.from(t[i]));return new og(e)}static fromImages(t){const e=[];for(let i=0;i<t.length;++i)e.push(ue.from(t[i]));return new og(e)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof ue)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Bn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Bn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const fm=new Xe;class AL extends m0{constructor(t,e=100,i=100){super(t),this.tileTransform=new K1,this._width=e,this._height=i,this.uvMatrix=this.texture.uvMatrix||new EL(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const e=this._texture;!e||!e.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ve),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,fm);const e=this._width,i=this._height,n=-e*this.anchor._x;if(fm.x>=n&&fm.x<n+e){const s=-i*this.anchor._y;if(fm.y>=s&&fm.y<s+i)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,e){const i=t instanceof ue?t:ue.from(t,e);return new AL(i,e.width,e.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var Uot=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Mot=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Lot=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,S4=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Bot=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const qx=new Mi;let a9=class extends Z1{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new fW,this.state=ql.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=dl.from(S4,Bot,e),this.shader=t.context.webGLVersion>1?dl.from(Mot,Uot,e):dl.from(S4,Lot,e)}render(t){const e=this.renderer,i=this.quad;let n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;n=i.uvs,n[0]=n[6]=-s,n[1]=n[3]=-a,n[2]=n[4]=1-s,n[5]=n[7]=1-a,i.invalidate();const o=t._texture,h=o.baseTexture,u=h.alphaMode>0,l=t.tileTransform.localTransform,f=t.uvMatrix;let c=h.isPowerOfTwo&&o.frame.width===h.width&&o.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==Ch.CLAMP:h.wrapMode===Ch.CLAMP&&(h.wrapMode=Ch.REPEAT));const d=c?this.simpleShader:this.shader,v=o.width,_=o.height,m=t._width,g=t._height;qx.set(l.a*v/m,l.b*v/g,l.c*_/m,l.d*_/g,l.tx/m,l.ty/g),qx.invert(),c?qx.prepend(f.mapCoord):(d.uniforms.uMapCoord=f.mapCoord.toArray(!0),d.uniforms.uClampFrame=f.uClampFrame,d.uniforms.uClampOffset=f.uClampOffset),d.uniforms.uTransform=qx.toArray(!0),d.uniforms.uColor=Yr.shared.setValue(t.tint).premultiply(t.worldAlpha,u).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=o,e.shader.bind(d),e.geometry.bind(i),this.state.blendMode=Lz(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};a9.extension={name:"tilingSprite",type:jt.RendererPlugin};te.add(a9);const o9=class eO{constructor(t){this.stage=new Ls,t=Object.assign({forceCanvas:!1},t),this.renderer=eat(t),eO._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=eO._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};o9._plugins=[];let eI=o9;te.handleByList(jt.Application,eI._plugins);let h9=class{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;e=n,i=s}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};h9.extension=jt.Application;te.add(h9);var u9={exports:{}},Got="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kot=Got,Dot=kot;function l9(){}function f9(){}f9.resetWarningCache=l9;var $ot=function(){function r(i,n,s,a,o,h){if(h!==Dot){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}r.isRequired=r;function t(){return r}var e={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:t,element:r,elementType:r,instanceOf:t,node:r,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:f9,resetWarningCache:l9};return e.PropTypes=e,e};u9.exports=$ot();var Hot=u9.exports;const gr=Sd(Hot);function Us(r){return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(r)}function c9(r){var t=function(e,i){if(Us(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,i||"default");if(Us(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}(r,"string");return Us(t)==="symbol"?t:String(t)}function ti(r,t,e){return(t=c9(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function qC(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}function Uh(r){return function(t){if(Array.isArray(t))return qC(t)}(r)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(r)||function(t,e){if(t){if(typeof t=="string")return qC(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qC(t,e):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zr(r,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),n=2;n<e;n++)i[n-2]=arguments[n]}var Xot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vot(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jot=function(r){return r==null};function d_(r){var t=[];if(r===void 0)return t;if(typeof r=="string")t=r.split(",");else if(typeof r=="number")t=[r];else if(Array.isArray(r))t=Uh(r);else{if(r===null||Us(r)!=="object")return t;t=[r&&(r==null?void 0:r.x)||0,r&&(r==null?void 0:r.y)||0]}return t.filter(function(e){return!jot(e)&&!isNaN(e)}).map(Number)}function N4(r,t){if(r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function KC(r){return r instanceof Xe||r instanceof Hu}var Tw=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function ZC(r,t,e){if(KC(r[t])&&KC(e))r[t].copyFrom(e);else if(KC(r[t])){var i=d_(e);Zr(i!==void 0&&i.length>0&&i.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(e),Us(e)),r[t].set(i.shift(),i.shift())}else r[t]=e}var ip,d9=function(r){var t,e=r;if(!Array.isArray(e)){if(t=r,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");e=Object.keys(r)}var i={};return e.forEach(function(n){i[n]=!0}),function(n){return i[n]!==void 0}},p9=function(r){return function(){return!r.apply(void 0,arguments)}},rO="children",zot=(ti(ip={},rO,!0),ti(ip,"parent",!0),ti(ip,"worldAlpha",!0),ti(ip,"worldTransform",!0),ti(ip,"worldVisible",!0),ip),iO={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},jo=function(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=function(o){return requestAnimationFrame(function(){var h,u;o==null||(h=o.__reactpixi)===null||h===void 0||(u=h.root)===null||u===void 0||u.emit("__REACT_PIXI_REQUEST_RENDER__")})},n=function(o,h){if(e.hasOwnProperty(o))return Zr(h.typeofs.some(function(u){return Us(e[o])===u})||h.instanceofs.some(function(u){return e[o]instanceof u}),"".concat(r," ").concat(o," prop is invalid")),e[o]};if(e.texture)return Zr(e.texture instanceof ue,"".concat(r," texture needs to be typeof `Texture`")),e.texture;var s=n("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||n("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||n("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,ue]});Zr(!!s,"".concat(r," could not get texture from props"));var a=ue.from(s);return a.__reactpixi={root:t},a.once("update",i),a.once("loaded",i),a.valid&&i(a),a},Wot=p9(d9([].concat(Uh(Object.keys(zot)),Uh(Tw))));function zo(r,t,e){var i=!1;if(Zr(vy.prototype.isPrototypeOf(r),"instance needs to be typeof `DisplayObject`, got `%s`",Us(r)),!e.ignoreEvents)for(var n=typeof r.removeListener=="function",s=typeof r.on=="function",a=0;a<Tw.length;a++){var o=Tw[a];t[o]!==e[o]&&(i=!0,typeof t[o]=="function"&&n&&r.removeListener(o,t[o]),typeof e[o]=="function"&&s&&r.on(o,e[o]))}var h=Object.keys(e||{});if(e.overwriteProps){for(var u=0;u<h.length;u++){var l=h[u];t[l]!==e[l]&&(i=!0,ZC(r,l,e[l]))}return i}for(var f=h.filter(Wot),c=0;c<f.length;c++){var d=f[c],v=e[d];e[d]!==t[d]&&(i=!0),v!==void 0?ZC(r,d,v):d in iO?(console.warn("setting default value: ".concat(d,", from: ").concat(r[d]," to: ").concat(v," for"),r),i=!0,ZC(r,d,iO[d])):console.warn("ignoring prop: ".concat(d,", from ").concat(r[d]," to ").concat(v," for"),r)}return i}var Yot=function(r,t){var e=t.text,i=t.style;return new Iat(e,i)},qot=function(){return new Ls};function Zl(r,t){if(r==null)return{};var e,i,n=function(a,o){if(a==null)return{};var h,u,l={},f=Object.keys(a);for(u=0;u<f.length;u++)h=f[u],o.indexOf(h)>=0||(l[h]=a[h]);return l}(r,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(i=0;i<s.length;i++)e=s[i],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(r,e)&&(n[e]=r[e])}return n}var Kot=["draw","geometry"],Zot=function(r,t){var e=t.geometry;Zr(!e||e instanceof YC,"Graphics geometry needs to be a `PIXI.Graphics`");var i=e?new YC(e.geometry):new YC;return i.applyProps=function(n,s,a){var o=a.draw;a.geometry;var h=zo(n,s,Zl(a,Kot));return s.draw!==o&&typeof o=="function"&&(h=!0,o.call(i,i)),h},i},Qot=["image","texture"],Jot=function(r,t){var e=t.leftWidth,i=e===void 0?10:e,n=t.topHeight,s=n===void 0?10:n,a=t.rightWidth,o=a===void 0?10:a,h=t.bottomHeight,u=h===void 0?10:h,l=jo("NineSlicePlane",r,t),f=new Aot(l,i,s,o,u);return f.applyProps=function(c,d,v){var _=v.image,m=v.texture,g=zo(c,d,Zl(v,Qot));return(_||m)&&(m!==d.texture&&(g=!0),c.texture=jo("NineSlicePlane",r,v)),g},f};function P4(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Kx(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(e),!0).forEach(function(i){ti(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):P4(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var tht=function(r,t){var e=t.maxSize,i=e===void 0?1500:e,n=t.batchSize,s=n===void 0?16384:n,a=t.autoResize,o=a!==void 0&&a,h=Kx(Kx({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),u=Kx(Kx({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),l=new Pot(i,h,s,o);return l.willUnmount=function(f,c,d){f.destroy(u)},l},eht=["image","texture"],rht=function(r,t){var e=new m0(jo("Sprite",r,t));return e.applyProps=function(i,n,s){var a=s.image,o=s.texture,h=zo(i,n,Zl(s,eht));return(o&&n.texture!==s.texture||a&&n.image!==s.image)&&(n.texture!==s.texture&&(h=!0),i.texture=jo("Sprite",r,s)),h},e},iht=["textures","isPlaying","initialFrame"],nht=function(r,t){var e=t.textures,i=t.images,n=t.isPlaying,s=n===void 0||n,a=t.initialFrame,o=function(u){return u.map(function(l){return Zr(l instanceof ue||(l==null?void 0:l.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),l})},h=i?og.fromImages(i):new og(o(e));return h[s?"gotoAndPlay":"gotoAndStop"](a||0),h.applyProps=function(u,l,f){var c=f.textures,d=f.isPlaying,v=f.initialFrame,_=zo(u,l,Zl(f,iht));if(c&&l.textures!==c&&(u.textures=o(c),_=!0),d!==l.isPlaying||v!==l.initialFrame){var m=typeof v=="number"?v:h.currentFrame||0;h[d?"gotoAndPlay":"gotoAndStop"](m),_=!0}return _},h},sht=function(r,t){var e=t.text,i=e===void 0?"":e,n=t.style,s=n===void 0?{}:n,a=t.isSprite,o=new vat(i,s);return a?(o.updateText(),new m0(o.texture)):o},aht=["tileScale","tilePosition","image","texture"],oht=function(r,t){var e=t.width,i=e===void 0?100:e,n=t.height,s=n===void 0?100:n,a=jo("TilingSprite",r,t),o=new AL(a,i,s);return o.applyProps=function(h,u,l){var f=l.tileScale,c=l.tilePosition,d=l.image,v=l.texture,_=zo(h,u,Zl(l,aht));if(c){var m,g=d_(c);(m=h.tilePosition).set.apply(m,Uh(g)),_=!N4(d_(u.tilePosition),g)||_}if(f){var T,b=d_(f);(T=h.tileScale).set.apply(T,Uh(b)),_=!N4(d_(u.tileScale),b)||_}return(d||v)&&(v!==u.texture&&(_=!0),h.texture=jo("Sprite",r,l)),_},o},hht=["image","texture"],uht=function(r,t){var e=jo("Mesh",r,t),i=t.vertices,n=t.uvs,s=t.indices,a=t.drawMode,o=a===void 0?Ga.TRIANGLES:a,h=new Sot(e,i,n,s,o);return h.applyProps=function(u,l,f){var c=f.image,d=f.texture,v=zo(u,l,Zl(f,hht));return(c||d)&&(d!==l.texture&&(v=!0),u.texture=jo("Mesh",r,f)),v},h},lht=["image","texture"],fht=function(r,t){var e=jo("SimpleRope",r,t),i=t.points,n=new Not(e,i);return n.applyProps=function(s,a,o){var h=o.image,u=o.texture,l=Zl(o,lht);Zr(Array.isArray(o.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var f=zo(s,a,l);return(h||u)&&(u!==a.texture&&(f=!0),s.texture=jo("SimpleRope",r,o)),f},n},cht=Object.freeze({__proto__:null,BitmapText:Yot,Container:qot,Graphics:Zot,NineSlicePlane:Jot,ParticleContainer:tht,Sprite:rht,Text:sht,TilingSprite:oht,SimpleMesh:uht,SimpleRope:fht,AnimatedSprite:nht});function O4(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function F4(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?O4(Object(e),!0).forEach(function(i){ti(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):O4(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Qn={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},dht=Object.keys(Qn).reduce(function(r,t){return F4(F4({},r),{},ti({},t,cht[t]))},{}),v9={};function pht(r,t){return Zr(!!r,"Expect type to be defined, got `%s`",r),Zr(!Qn[r],"Component `%s` could not be created, already exists in default components.",r),v9[r]=t,r}var U4,M4,L4,B4,nO={},sO={},vht={get exports(){return sO},set exports(r){sO=r}},G4={};function yht(){return M4||(M4=1,vht.exports=(U4||(U4=1,function(r){function t(V,Y){var z=V.length;V.push(Y);t:for(;0<z;){var Z=z-1>>>1,Q=V[Z];if(!(0<n(Q,Y)))break t;V[Z]=Y,V[z]=Q,z=Z}}function e(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var Y=V[0],z=V.pop();if(z!==Y){V[0]=z;t:for(var Z=0,Q=V.length,mt=Q>>>1;Z<mt;){var Et=2*(Z+1)-1,It=V[Et],wt=Et+1,ht=V[wt];if(0>n(It,z))wt<Q&&0>n(ht,It)?(V[Z]=ht,V[wt]=z,Z=wt):(V[Z]=It,V[Et]=z,Z=Et);else{if(!(wt<Q&&0>n(ht,z)))break t;V[Z]=ht,V[wt]=z,Z=wt}}}return Y}function n(V,Y){var z=V.sortIndex-Y.sortIndex;return z!==0?z:V.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var h=[],u=[],l=1,f=null,c=3,d=!1,v=!1,_=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function b(V){for(var Y=e(u);Y!==null;){if(Y.callback===null)i(u);else{if(!(Y.startTime<=V))break;i(u),Y.sortIndex=Y.expirationTime,t(h,Y)}Y=e(u)}}function S(V){if(_=!1,b(V),!v)if(e(h)!==null)v=!0,et(R);else{var Y=e(u);Y!==null&&st(S,Y.startTime-V)}}function R(V,Y){v=!1,_&&(_=!1,g(k),k=-1),d=!0;var z=c;try{for(b(Y),f=e(h);f!==null&&(!(f.expirationTime>Y)||V&&!tt());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,c=f.priorityLevel;var Q=Z(f.expirationTime<=Y);Y=r.unstable_now(),typeof Q=="function"?f.callback=Q:f===e(h)&&i(h),b(Y)}else i(h);f=e(h)}if(f!==null)var mt=!0;else{var Et=e(u);Et!==null&&st(S,Et.startTime-Y),mt=!1}return mt}finally{f=null,c=z,d=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var U,L=!1,$=null,k=-1,H=5,it=-1;function tt(){return!(r.unstable_now()-it<H)}function j(){if($!==null){var V=r.unstable_now();it=V;var Y=!0;try{Y=$(!0,V)}finally{Y?U():(L=!1,$=null)}}else L=!1}if(typeof T=="function")U=function(){T(j)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,K=at.port2;at.port1.onmessage=j,U=function(){K.postMessage(null)}}else U=function(){m(j,0)};function et(V){$=V,L||(L=!0,U())}function st(V,Y){k=m(function(){V(r.unstable_now())},Y)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(V){V.callback=null},r.unstable_continueExecution=function(){v||d||(v=!0,et(R))},r.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<V?Math.floor(1e3/V):5},r.unstable_getCurrentPriorityLevel=function(){return c},r.unstable_getFirstCallbackNode=function(){return e(h)},r.unstable_next=function(V){switch(c){case 1:case 2:case 3:var Y=3;break;default:Y=c}var z=c;c=Y;try{return V()}finally{c=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(V,Y){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=c;c=V;try{return Y()}finally{c=z}},r.unstable_scheduleCallback=function(V,Y,z){var Z=r.unstable_now();switch(z=typeof z=="object"&&z!==null&&typeof(z=z.delay)=="number"&&0<z?Z+z:Z,V){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return V={id:l++,callback:Y,priorityLevel:V,startTime:z,expirationTime:Q=z+Q,sortIndex:-1},z>Z?(V.sortIndex=z,t(u,V),e(h)===null&&V===e(u)&&(_?(g(k),k=-1):_=!0,st(S,z-Z))):(V.sortIndex=Q,t(h,V),v||d||(v=!0,et(R))),V},r.unstable_shouldYield=tt,r.unstable_wrapCallback=function(V){var Y=c;return function(){var z=c;c=Y;try{return V.apply(this,arguments)}finally{c=z}}}}(G4)),G4)),sO}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function mht(){return B4||(B4=1,L4=function(r){var t={},e=$a,i=yht(),n=Object.assign;function s(p){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+p,x=1;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,o=Symbol.for("react.element"),h=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),S=Symbol.iterator;function R(p){return p===null||typeof p!="object"?null:typeof(p=S&&p[S]||p["@@iterator"])=="function"?p:null}function U(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case u:return"Fragment";case h:return"Portal";case f:return"Profiler";case l:return"StrictMode";case _:return"Suspense";case m:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case d:return(p.displayName||"Context")+".Consumer";case c:return(p._context.displayName||"Context")+".Provider";case v:var y=p.render;return(p=p.displayName)||(p=(p=y.displayName||y.name||"")!==""?"ForwardRef("+p+")":"ForwardRef"),p;case g:return(y=p.displayName||null)!==null?y:U(p.type)||"Memo";case T:y=p._payload,p=p._init;try{return U(p(y))}catch{}}return null}function L(p){var y=p.type;switch(p.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=(p=y.render).displayName||p.name||"",y.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(y);case 8:return y===l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function $(p){var y=p,x=p;if(p.alternate)for(;y.return;)y=y.return;else{p=y;do 4098&(y=p).flags&&(x=y.return),p=y.return;while(p)}return y.tag===3?x:null}function k(p){if($(p)!==p)throw Error(s(188))}function H(p){var y=p.alternate;if(!y){if((y=$(p))===null)throw Error(s(188));return y!==p?null:p}for(var x=p,E=y;;){var w=x.return;if(w===null)break;var P=w.alternate;if(P===null){if((E=w.return)!==null){x=E;continue}break}if(w.child===P.child){for(P=w.child;P;){if(P===x)return k(w),p;if(P===E)return k(w),y;P=P.sibling}throw Error(s(188))}if(x.return!==E.return)x=w,E=P;else{for(var D=!1,q=w.child;q;){if(q===x){D=!0,x=w,E=P;break}if(q===E){D=!0,E=w,x=P;break}q=q.sibling}if(!D){for(q=P.child;q;){if(q===x){D=!0,x=P,E=w;break}if(q===E){D=!0,E=P,x=w;break}q=q.sibling}if(!D)throw Error(s(189))}}if(x.alternate!==E)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?p:y}function it(p){return(p=H(p))!==null?tt(p):null}function tt(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var y=tt(p);if(y!==null)return y;p=p.sibling}return null}function j(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var y=j(p);if(y!==null)return y}p=p.sibling}return null}var at,K=Array.isArray,et=r.getPublicInstance,st=r.getRootHostContext,V=r.getChildHostContext,Y=r.prepareForCommit,z=r.resetAfterCommit,Z=r.createInstance,Q=r.appendInitialChild,mt=r.finalizeInitialChildren,Et=r.prepareUpdate,It=r.shouldSetTextContent,wt=r.createTextInstance,ht=r.scheduleTimeout,I=r.cancelTimeout,M=r.noTimeout,O=r.isPrimaryRenderer,N=r.supportsMutation,B=r.supportsPersistence,G=r.supportsHydration,W=r.getInstanceFromNode,X=r.preparePortalMount,ut=r.getCurrentEventPriority,ft=r.detachDeletedInstance,ct=r.supportsMicrotasks,bt=r.scheduleMicrotask,Ye=r.supportsTestSelectors,iu=r.findFiberRoot,Ny=r.getBoundingRect,Py=r.getTextContent,qo=r.isHiddenSubtree,Jl=r.matchAccessibilityRole,Oy=r.setFocusIfFocusable,x0=r.setupIntersectionObserver,EI=r.appendChild,b0=r.appendChildToContainer,T0=r.commitTextUpdate,tf=r.commitMount,E0=r.commitUpdate,MK=r.insertBefore,LK=r.insertInContainerBefore,BK=r.removeChild,GK=r.removeChildFromContainer,KB=r.resetTextContent,kK=r.hideInstance,DK=r.hideTextInstance,$K=r.unhideInstance,HK=r.unhideTextInstance,XK=r.clearContainer,VK=r.cloneInstance,ZB=r.createContainerChildSet,QB=r.appendChildToContainerChildSet,jK=r.finalizeContainerChildren,wI=r.replaceContainerChildren,JB=r.cloneHiddenInstance,tG=r.cloneHiddenTextInstance,zK=r.canHydrateInstance,WK=r.canHydrateTextInstance,YK=r.canHydrateSuspenseInstance,eG=r.isSuspenseInstancePending,II=r.isSuspenseInstanceFallback,qK=r.getSuspenseInstanceFallbackErrorDetails,KK=r.registerSuspenseInstanceRetry,w0=r.getNextHydratableSibling,ZK=r.getFirstHydratableChild,QK=r.getFirstHydratableChildWithinContainer,JK=r.getFirstHydratableChildWithinSuspenseInstance,tZ=r.hydrateInstance,eZ=r.hydrateTextInstance,rZ=r.hydrateSuspenseInstance,iZ=r.getNextHydratableInstanceAfterSuspenseInstance,nZ=r.commitHydratedContainer,sZ=r.commitHydratedSuspenseInstance,aZ=r.clearSuspenseBoundary,oZ=r.clearSuspenseBoundaryFromContainer,hZ=r.shouldDeleteUnhydratedTailInstances,uZ=r.didNotMatchHydratedContainerTextInstance,lZ=r.didNotMatchHydratedTextInstance;function Fy(p){if(at===void 0)try{throw Error()}catch(x){var y=x.stack.trim().match(/\n( *(at )?)/);at=y&&y[1]||""}return`
`+at+p}var RI=!1;function CI(p,y){if(!p||RI)return"";RI=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(lt){var E=lt}Reflect.construct(p,[],y)}else{try{y.call()}catch(lt){E=lt}p.call(y.prototype)}else{try{throw Error()}catch(lt){E=lt}p()}}catch(lt){if(lt&&E&&typeof lt.stack=="string"){for(var w=lt.stack.split(`
`),P=E.stack.split(`
`),D=w.length-1,q=P.length-1;1<=D&&0<=q&&w[D]!==P[q];)q--;for(;1<=D&&0<=q;D--,q--)if(w[D]!==P[q]){if(D!==1||q!==1)do if(D--,0>--q||w[D]!==P[q]){var nt=`
`+w[D].replace(" at new "," at ");return p.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",p.displayName)),nt}while(1<=D&&0<=q);break}}}finally{RI=!1,Error.prepareStackTrace=x}return(p=p?p.displayName||p.name:"")?Fy(p):""}var fZ=Object.prototype.hasOwnProperty,AI=[],Ld=-1;function nu(p){return{current:p}}function br(p){0>Ld||(p.current=AI[Ld],AI[Ld]=null,Ld--)}function Qe(p,y){Ld++,AI[Ld]=p.current,p.current=y}var su={},nn=nu(su),Hn=nu(!1),ef=su;function Bd(p,y){var x=p.type.contextTypes;if(!x)return su;var E=p.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===y)return E.__reactInternalMemoizedMaskedChildContext;var w,P={};for(w in x)P[w]=y[w];return E&&((p=p.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,p.__reactInternalMemoizedMaskedChildContext=P),P}function ts(p){return(p=p.childContextTypes)!=null}function SI(){br(Hn),br(nn)}function rG(p,y,x){if(nn.current!==su)throw Error(s(168));Qe(nn,y),Qe(Hn,x)}function iG(p,y,x){var E=p.stateNode;if(y=y.childContextTypes,typeof E.getChildContext!="function")return x;for(var w in E=E.getChildContext())if(!(w in y))throw Error(s(108,L(p)||"Unknown",w));return n({},x,E)}function I0(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||su,ef=nn.current,Qe(nn,p),Qe(Hn,Hn.current),!0}function nG(p,y,x){var E=p.stateNode;if(!E)throw Error(s(169));x?(p=iG(p,y,ef),E.__reactInternalMemoizedMergedChildContext=p,br(Hn),br(nn),Qe(nn,p)):br(Hn),Qe(Hn,x)}var Ta=Math.clz32?Math.clz32:function(p){return(p>>>=0)===0?32:31-(cZ(p)/dZ|0)|0},cZ=Math.log,dZ=Math.LN2,NI=64,PI=4194304;function Uy(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&p;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&p;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function R0(p,y){var x=p.pendingLanes;if(x===0)return 0;var E=0,w=p.suspendedLanes,P=p.pingedLanes,D=268435455&x;if(D!==0){var q=D&~w;q!==0?E=Uy(q):(P&=D)!==0&&(E=Uy(P))}else(D=x&~w)!==0?E=Uy(D):P!==0&&(E=Uy(P));if(E===0)return 0;if(y!==0&&y!==E&&!(y&w)&&((w=E&-E)>=(P=y&-y)||w===16&&4194240&P))return y;if(4&E&&(E|=16&x),(y=p.entangledLanes)!==0)for(p=p.entanglements,y&=E;0<y;)w=1<<(x=31-Ta(y)),E|=p[x],y&=~w;return E}function pZ(p,y){switch(p){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;default:return-1}}function OI(p){return(p=-1073741825&p.pendingLanes)!==0?p:1073741824&p?1073741824:0}function sG(){var p=NI;return!(4194240&(NI<<=1))&&(NI=64),p}function FI(p){for(var y=[],x=0;31>x;x++)y.push(p);return y}function My(p,y,x){p.pendingLanes|=y,y!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),(p=p.eventTimes)[y=31-Ta(y)]=x}function UI(p,y){var x=p.entangledLanes|=y;for(p=p.entanglements;x;){var E=31-Ta(x),w=1<<E;w&y|p[E]&y&&(p[E]|=y),x&=~w}}var De=0;function aG(p){return 1<(p&=-p)?4<p?268435455&p?16:536870912:4:1}var MI=i.unstable_scheduleCallback,oG=i.unstable_cancelCallback,vZ=i.unstable_shouldYield,yZ=i.unstable_requestPaint,Li=i.unstable_now,LI=i.unstable_ImmediatePriority,mZ=i.unstable_UserBlockingPriority,hG=i.unstable_NormalPriority,_Z=i.unstable_IdlePriority,C0=null,qa=null,Ea=typeof Object.is=="function"?Object.is:function(p,y){return p===y&&(p!==0||1/p==1/y)||p!=p&&y!=y},Ko=null,A0=!1,BI=!1;function uG(p){Ko===null?Ko=[p]:Ko.push(p)}function Ka(){if(!BI&&Ko!==null){BI=!0;var p=0,y=De;try{var x=Ko;for(De=1;p<x.length;p++){var E=x[p];do E=E(!0);while(E!==null)}Ko=null,A0=!1}catch(w){throw Ko!==null&&(Ko=Ko.slice(p+1)),MI(LI,Ka),w}finally{De=y,BI=!1}}return null}var Gd=[],kd=0,S0=null,N0=0,Vs=[],js=0,rf=null,Za=1,Zo="";function nf(p,y){Gd[kd++]=N0,Gd[kd++]=S0,S0=p,N0=y}function lG(p,y,x){Vs[js++]=Za,Vs[js++]=Zo,Vs[js++]=rf,rf=p;var E=Za;p=Zo;var w=32-Ta(E)-1;E&=~(1<<w),x+=1;var P=32-Ta(y)+w;if(30<P){var D=w-w%5;P=(E&(1<<D)-1).toString(32),E>>=D,w-=D,Za=1<<32-Ta(y)+w|x<<w|E,Zo=P+p}else Za=1<<P|x<<w|E,Zo=p}function GI(p){p.return!==null&&(nf(p,1),lG(p,1,0))}function kI(p){for(;p===S0;)S0=Gd[--kd],Gd[kd]=null,N0=Gd[--kd],Gd[kd]=null;for(;p===rf;)rf=Vs[--js],Vs[js]=null,Zo=Vs[--js],Vs[js]=null,Za=Vs[--js],Vs[js]=null}var es=null,zs=null,Tr=!1,Ly=!1,wa=null;function fG(p,y){var x=Zs(5,null,null,0);x.elementType="DELETED",x.stateNode=y,x.return=p,(y=p.deletions)===null?(p.deletions=[x],p.flags|=16):y.push(x)}function cG(p,y){switch(p.tag){case 5:return(y=zK(y,p.type,p.pendingProps))!==null&&(p.stateNode=y,es=p,zs=ZK(y),!0);case 6:return(y=WK(y,p.pendingProps))!==null&&(p.stateNode=y,es=p,zs=null,!0);case 13:if((y=YK(y))!==null){var x=rf!==null?{id:Za,overflow:Zo}:null;return p.memoizedState={dehydrated:y,treeContext:x,retryLane:1073741824},(x=Zs(18,null,null,0)).stateNode=y,x.return=p,p.child=x,es=p,zs=null,!0}return!1;default:return!1}}function DI(p){return(1&p.mode)!=0&&(128&p.flags)==0}function $I(p){if(Tr){var y=zs;if(y){var x=y;if(!cG(p,y)){if(DI(p))throw Error(s(418));y=w0(x);var E=es;y&&cG(p,y)?fG(E,x):(p.flags=-4097&p.flags|2,Tr=!1,es=p)}}else{if(DI(p))throw Error(s(418));p.flags=-4097&p.flags|2,Tr=!1,es=p}}}function dG(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;es=p}function P0(p){if(!G||p!==es)return!1;if(!Tr)return dG(p),Tr=!0,!1;if(p.tag!==3&&(p.tag!==5||hZ(p.type)&&!It(p.type,p.memoizedProps))){var y=zs;if(y){if(DI(p))throw pG(),Error(s(418));for(;y;)fG(p,y),y=w0(y)}}if(dG(p),p.tag===13){if(!G)throw Error(s(316));if(!(p=(p=p.memoizedState)!==null?p.dehydrated:null))throw Error(s(317));zs=iZ(p)}else zs=es?w0(p.stateNode):null;return!0}function pG(){for(var p=zs;p;)p=w0(p)}function Dd(){G&&(zs=es=null,Ly=Tr=!1)}function HI(p){wa===null?wa=[p]:wa.push(p)}var gZ=a.ReactCurrentBatchConfig;function O0(p,y){if(Ea(p,y))return!0;if(typeof p!="object"||p===null||typeof y!="object"||y===null)return!1;var x=Object.keys(p),E=Object.keys(y);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var w=x[E];if(!fZ.call(y,w)||!Ea(p[w],y[w]))return!1}return!0}function xZ(p){switch(p.tag){case 5:return Fy(p.type);case 16:return Fy("Lazy");case 13:return Fy("Suspense");case 19:return Fy("SuspenseList");case 0:case 2:case 15:return p=CI(p.type,!1);case 11:return p=CI(p.type.render,!1);case 1:return p=CI(p.type,!0);default:return""}}function Ia(p,y){if(p&&p.defaultProps){for(var x in y=n({},y),p=p.defaultProps)y[x]===void 0&&(y[x]=p[x]);return y}return y}var F0=nu(null),U0=null,$d=null,XI=null;function VI(){XI=$d=U0=null}function vG(p,y,x){O?(Qe(F0,y._currentValue),y._currentValue=x):(Qe(F0,y._currentValue2),y._currentValue2=x)}function jI(p){var y=F0.current;br(F0),O?p._currentValue=y:p._currentValue2=y}function zI(p,y,x){for(;p!==null;){var E=p.alternate;if((p.childLanes&y)!==y?(p.childLanes|=y,E!==null&&(E.childLanes|=y)):E!==null&&(E.childLanes&y)!==y&&(E.childLanes|=y),p===x)break;p=p.return}}function Hd(p,y){U0=p,XI=$d=null,(p=p.dependencies)!==null&&p.firstContext!==null&&(p.lanes&y&&(Xn=!0),p.firstContext=null)}function Ws(p){var y=O?p._currentValue:p._currentValue2;if(XI!==p)if(p={context:p,memoizedValue:y,next:null},$d===null){if(U0===null)throw Error(s(308));$d=p,U0.dependencies={lanes:0,firstContext:p}}else $d=$d.next=p;return y}var sf=null;function WI(p){sf===null?sf=[p]:sf.push(p)}function yG(p,y,x,E){var w=y.interleaved;return w===null?(x.next=x,WI(y)):(x.next=w.next,w.next=x),y.interleaved=x,Qa(p,E)}function Qa(p,y){p.lanes|=y;var x=p.alternate;for(x!==null&&(x.lanes|=y),x=p,p=p.return;p!==null;)p.childLanes|=y,(x=p.alternate)!==null&&(x.childLanes|=y),x=p,p=p.return;return x.tag===3?x.stateNode:null}var au=!1;function YI(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mG(p,y){p=p.updateQueue,y.updateQueue===p&&(y.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Qo(p,y){return{eventTime:p,lane:y,tag:0,payload:null,callback:null,next:null}}function ou(p,y,x){var E=p.updateQueue;if(E===null)return null;if(E=E.shared,(2&de)!=0){var w=E.pending;return w===null?y.next=y:(y.next=w.next,w.next=y),E.pending=y,Qa(p,x)}return(w=E.interleaved)===null?(y.next=y,WI(E)):(y.next=w.next,w.next=y),E.interleaved=y,Qa(p,x)}function M0(p,y,x){if((y=y.updateQueue)!==null&&(y=y.shared,(4194240&x)!=0)){var E=y.lanes;x|=E&=p.pendingLanes,y.lanes=x,UI(p,x)}}function _G(p,y){var x=p.updateQueue,E=p.alternate;if(E!==null&&x===(E=E.updateQueue)){var w=null,P=null;if((x=x.firstBaseUpdate)!==null){do{var D={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};P===null?w=P=D:P=P.next=D,x=x.next}while(x!==null);P===null?w=P=y:P=P.next=y}else w=P=y;return x={baseState:E.baseState,firstBaseUpdate:w,lastBaseUpdate:P,shared:E.shared,effects:E.effects},void(p.updateQueue=x)}(p=x.lastBaseUpdate)===null?x.firstBaseUpdate=y:p.next=y,x.lastBaseUpdate=y}function L0(p,y,x,E){var w=p.updateQueue;au=!1;var P=w.firstBaseUpdate,D=w.lastBaseUpdate,q=w.shared.pending;if(q!==null){w.shared.pending=null;var nt=q,lt=nt.next;nt.next=null,D===null?P=lt:D.next=lt,D=nt;var vt=p.alternate;vt!==null&&(q=(vt=vt.updateQueue).lastBaseUpdate)!==D&&(q===null?vt.firstBaseUpdate=lt:q.next=lt,vt.lastBaseUpdate=nt)}if(P!==null){var Ct=w.baseState;for(D=0,vt=lt=nt=null,q=P;;){var pt=q.lane,Tt=q.eventTime;if((E&pt)===pt){vt!==null&&(vt=vt.next={eventTime:Tt,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});t:{var Yt=p,se=q;switch(pt=y,Tt=x,se.tag){case 1:if(typeof(Yt=se.payload)=="function"){Ct=Yt.call(Tt,Ct,pt);break t}Ct=Yt;break t;case 3:Yt.flags=-65537&Yt.flags|128;case 0:if((pt=typeof(Yt=se.payload)=="function"?Yt.call(Tt,Ct,pt):Yt)==null)break t;Ct=n({},Ct,pt);break t;case 2:au=!0}}q.callback!==null&&q.lane!==0&&(p.flags|=64,(pt=w.effects)===null?w.effects=[q]:pt.push(q))}else Tt={eventTime:Tt,lane:pt,tag:q.tag,payload:q.payload,callback:q.callback,next:null},vt===null?(lt=vt=Tt,nt=Ct):vt=vt.next=Tt,D|=pt;if((q=q.next)===null){if((q=w.shared.pending)===null)break;q=(pt=q).next,pt.next=null,w.lastBaseUpdate=pt,w.shared.pending=null}}if(vt===null&&(nt=Ct),w.baseState=nt,w.firstBaseUpdate=lt,w.lastBaseUpdate=vt,(y=w.shared.interleaved)!==null){w=y;do D|=w.lane,w=w.next;while(w!==y)}else P===null&&(w.shared.lanes=0);of|=D,p.lanes=D,p.memoizedState=Ct}}function gG(p,y,x){if(p=y.effects,y.effects=null,p!==null)for(y=0;y<p.length;y++){var E=p[y],w=E.callback;if(w!==null){if(E.callback=null,E=x,typeof w!="function")throw Error(s(191,w));w.call(E)}}}var xG=new e.Component().refs;function qI(p,y,x,E){x=(x=x(E,y=p.memoizedState))==null?y:n({},y,x),p.memoizedState=x,p.lanes===0&&(p.updateQueue.baseState=x)}var B0={isMounted:function(p){return!!(p=p._reactInternals)&&$(p)===p},enqueueSetState:function(p,y,x){p=p._reactInternals;var E=on(),w=fu(p),P=Qo(E,w);P.payload=y,x!=null&&(P.callback=x),(y=ou(p,P,w))!==null&&(Ks(y,p,w,E),M0(y,p,w))},enqueueReplaceState:function(p,y,x){p=p._reactInternals;var E=on(),w=fu(p),P=Qo(E,w);P.tag=1,P.payload=y,x!=null&&(P.callback=x),(y=ou(p,P,w))!==null&&(Ks(y,p,w,E),M0(y,p,w))},enqueueForceUpdate:function(p,y){p=p._reactInternals;var x=on(),E=fu(p),w=Qo(x,E);w.tag=2,y!=null&&(w.callback=y),(y=ou(p,w,E))!==null&&(Ks(y,p,E,x),M0(y,p,E))}};function bG(p,y,x,E,w,P,D){return typeof(p=p.stateNode).shouldComponentUpdate=="function"?p.shouldComponentUpdate(E,P,D):!y.prototype||!y.prototype.isPureReactComponent||!O0(x,E)||!O0(w,P)}function TG(p,y,x){var E=!1,w=su,P=y.contextType;return typeof P=="object"&&P!==null?P=Ws(P):(w=ts(y)?ef:nn.current,P=(E=(E=y.contextTypes)!=null)?Bd(p,w):su),y=new y(x,P),p.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=B0,p.stateNode=y,y._reactInternals=p,E&&((p=p.stateNode).__reactInternalMemoizedUnmaskedChildContext=w,p.__reactInternalMemoizedMaskedChildContext=P),y}function EG(p,y,x,E){p=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(x,E),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(x,E),y.state!==p&&B0.enqueueReplaceState(y,y.state,null)}function KI(p,y,x,E){var w=p.stateNode;w.props=x,w.state=p.memoizedState,w.refs=xG,YI(p);var P=y.contextType;typeof P=="object"&&P!==null?w.context=Ws(P):(P=ts(y)?ef:nn.current,w.context=Bd(p,P)),w.state=p.memoizedState,typeof(P=y.getDerivedStateFromProps)=="function"&&(qI(p,y,P,x),w.state=p.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(y=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),y!==w.state&&B0.enqueueReplaceState(w,w.state,null),L0(p,x,w,E),w.state=p.memoizedState),typeof w.componentDidMount=="function"&&(p.flags|=4194308)}function By(p,y,x){if((p=x.ref)!==null&&typeof p!="function"&&typeof p!="object"){if(x._owner){if(x=x._owner){if(x.tag!==1)throw Error(s(309));var E=x.stateNode}if(!E)throw Error(s(147,p));var w=E,P=""+p;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===P?y.ref:(y=function(D){var q=w.refs;q===xG&&(q=w.refs={}),D===null?delete q[P]:q[P]=D},y._stringRef=P,y)}if(typeof p!="string")throw Error(s(284));if(!x._owner)throw Error(s(290,p))}return p}function G0(p,y){throw p=Object.prototype.toString.call(y),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":p))}function wG(p){return(0,p._init)(p._payload)}function IG(p){function y(yt,rt){if(p){var ot=yt.deletions;ot===null?(yt.deletions=[rt],yt.flags|=16):ot.push(rt)}}function x(yt,rt){if(!p)return null;for(;rt!==null;)y(yt,rt),rt=rt.sibling;return null}function E(yt,rt){for(yt=new Map;rt!==null;)rt.key!==null?yt.set(rt.key,rt):yt.set(rt.index,rt),rt=rt.sibling;return yt}function w(yt,rt){return(yt=du(yt,rt)).index=0,yt.sibling=null,yt}function P(yt,rt,ot){return yt.index=ot,p?(ot=yt.alternate)!==null?(ot=ot.index)<rt?(yt.flags|=2,rt):ot:(yt.flags|=2,rt):(yt.flags|=1048576,rt)}function D(yt){return p&&yt.alternate===null&&(yt.flags|=2),yt}function q(yt,rt,ot,_t){return rt===null||rt.tag!==6?((rt=LR(ot,yt.mode,_t)).return=yt,rt):((rt=w(rt,ot)).return=yt,rt)}function nt(yt,rt,ot,_t){var Qt=ot.type;return Qt===u?vt(yt,rt,ot.props.children,_t,ot.key):rt!==null&&(rt.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===T&&wG(Qt)===rt.type)?((_t=w(rt,ot.props)).ref=By(yt,rt,ot),_t.return=yt,_t):((_t=lx(ot.type,ot.key,ot.props,null,yt.mode,_t)).ref=By(yt,rt,ot),_t.return=yt,_t)}function lt(yt,rt,ot,_t){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==ot.containerInfo||rt.stateNode.implementation!==ot.implementation?((rt=BR(ot,yt.mode,_t)).return=yt,rt):((rt=w(rt,ot.children||[])).return=yt,rt)}function vt(yt,rt,ot,_t,Qt){return rt===null||rt.tag!==7?((rt=lf(ot,yt.mode,_t,Qt)).return=yt,rt):((rt=w(rt,ot)).return=yt,rt)}function Ct(yt,rt,ot){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return(rt=LR(""+rt,yt.mode,ot)).return=yt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case o:return(ot=lx(rt.type,rt.key,rt.props,null,yt.mode,ot)).ref=By(yt,null,rt),ot.return=yt,ot;case h:return(rt=BR(rt,yt.mode,ot)).return=yt,rt;case T:return Ct(yt,(0,rt._init)(rt._payload),ot)}if(K(rt)||R(rt))return(rt=lf(rt,yt.mode,ot,null)).return=yt,rt;G0(yt,rt)}return null}function pt(yt,rt,ot,_t){var Qt=rt!==null?rt.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Qt!==null?null:q(yt,rt,""+ot,_t);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case o:return ot.key===Qt?nt(yt,rt,ot,_t):null;case h:return ot.key===Qt?lt(yt,rt,ot,_t):null;case T:return pt(yt,rt,(Qt=ot._init)(ot._payload),_t)}if(K(ot)||R(ot))return Qt!==null?null:vt(yt,rt,ot,_t,null);G0(yt,ot)}return null}function Tt(yt,rt,ot,_t,Qt){if(typeof _t=="string"&&_t!==""||typeof _t=="number")return q(rt,yt=yt.get(ot)||null,""+_t,Qt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case o:return nt(rt,yt=yt.get(_t.key===null?ot:_t.key)||null,_t,Qt);case h:return lt(rt,yt=yt.get(_t.key===null?ot:_t.key)||null,_t,Qt);case T:return Tt(yt,rt,ot,(0,_t._init)(_t._payload),Qt)}if(K(_t)||R(_t))return vt(rt,yt=yt.get(ot)||null,_t,Qt,null);G0(rt,_t)}return null}function Yt(yt,rt,ot,_t){for(var Qt=null,je=null,qt=rt,$e=rt=0,qi=null;qt!==null&&$e<ot.length;$e++){qt.index>$e?(qi=qt,qt=null):qi=qt.sibling;var ze=pt(yt,qt,ot[$e],_t);if(ze===null){qt===null&&(qt=qi);break}p&&qt&&ze.alternate===null&&y(yt,qt),rt=P(ze,rt,$e),je===null?Qt=ze:je.sibling=ze,je=ze,qt=qi}if($e===ot.length)return x(yt,qt),Tr&&nf(yt,$e),Qt;if(qt===null){for(;$e<ot.length;$e++)(qt=Ct(yt,ot[$e],_t))!==null&&(rt=P(qt,rt,$e),je===null?Qt=qt:je.sibling=qt,je=qt);return Tr&&nf(yt,$e),Qt}for(qt=E(yt,qt);$e<ot.length;$e++)(qi=Tt(qt,yt,$e,ot[$e],_t))!==null&&(p&&qi.alternate!==null&&qt.delete(qi.key===null?$e:qi.key),rt=P(qi,rt,$e),je===null?Qt=qi:je.sibling=qi,je=qi);return p&&qt.forEach(function(pu){return y(yt,pu)}),Tr&&nf(yt,$e),Qt}function se(yt,rt,ot,_t){var Qt=R(ot);if(typeof Qt!="function")throw Error(s(150));if((ot=Qt.call(ot))==null)throw Error(s(151));for(var je=Qt=null,qt=rt,$e=rt=0,qi=null,ze=ot.next();qt!==null&&!ze.done;$e++,ze=ot.next()){qt.index>$e?(qi=qt,qt=null):qi=qt.sibling;var pu=pt(yt,qt,ze.value,_t);if(pu===null){qt===null&&(qt=qi);break}p&&qt&&pu.alternate===null&&y(yt,qt),rt=P(pu,rt,$e),je===null?Qt=pu:je.sibling=pu,je=pu,qt=qi}if(ze.done)return x(yt,qt),Tr&&nf(yt,$e),Qt;if(qt===null){for(;!ze.done;$e++,ze=ot.next())(ze=Ct(yt,ze.value,_t))!==null&&(rt=P(ze,rt,$e),je===null?Qt=ze:je.sibling=ze,je=ze);return Tr&&nf(yt,$e),Qt}for(qt=E(yt,qt);!ze.done;$e++,ze=ot.next())(ze=Tt(qt,yt,$e,ze.value,_t))!==null&&(p&&ze.alternate!==null&&qt.delete(ze.key===null?$e:ze.key),rt=P(ze,rt,$e),je===null?Qt=ze:je.sibling=ze,je=ze);return p&&qt.forEach(function(VZ){return y(yt,VZ)}),Tr&&nf(yt,$e),Qt}return function yt(rt,ot,_t,Qt){if(typeof _t=="object"&&_t!==null&&_t.type===u&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case o:t:{for(var je=_t.key,qt=ot;qt!==null;){if(qt.key===je){if((je=_t.type)===u){if(qt.tag===7){x(rt,qt.sibling),(ot=w(qt,_t.props.children)).return=rt,rt=ot;break t}}else if(qt.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===T&&wG(je)===qt.type){x(rt,qt.sibling),(ot=w(qt,_t.props)).ref=By(rt,qt,_t),ot.return=rt,rt=ot;break t}x(rt,qt);break}y(rt,qt),qt=qt.sibling}_t.type===u?((ot=lf(_t.props.children,rt.mode,Qt,_t.key)).return=rt,rt=ot):((Qt=lx(_t.type,_t.key,_t.props,null,rt.mode,Qt)).ref=By(rt,ot,_t),Qt.return=rt,rt=Qt)}return D(rt);case h:t:{for(qt=_t.key;ot!==null;){if(ot.key===qt){if(ot.tag===4&&ot.stateNode.containerInfo===_t.containerInfo&&ot.stateNode.implementation===_t.implementation){x(rt,ot.sibling),(ot=w(ot,_t.children||[])).return=rt,rt=ot;break t}x(rt,ot);break}y(rt,ot),ot=ot.sibling}(ot=BR(_t,rt.mode,Qt)).return=rt,rt=ot}return D(rt);case T:return yt(rt,ot,(qt=_t._init)(_t._payload),Qt)}if(K(_t))return Yt(rt,ot,_t,Qt);if(R(_t))return se(rt,ot,_t,Qt);G0(rt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"?(_t=""+_t,ot!==null&&ot.tag===6?(x(rt,ot.sibling),(ot=w(ot,_t)).return=rt,rt=ot):(x(rt,ot),(ot=LR(_t,rt.mode,Qt)).return=rt,rt=ot),D(rt)):x(rt,ot)}}var Xd=IG(!0),RG=IG(!1),Gy={},Ys=nu(Gy),ky=nu(Gy),Vd=nu(Gy);function Ja(p){if(p===Gy)throw Error(s(174));return p}function ZI(p,y){Qe(Vd,y),Qe(ky,p),Qe(Ys,Gy),p=st(y),br(Ys),Qe(Ys,p)}function jd(){br(Ys),br(ky),br(Vd)}function CG(p){var y=Ja(Vd.current),x=Ja(Ys.current);x!==(y=V(x,p.type,y))&&(Qe(ky,p),Qe(Ys,y))}function QI(p){ky.current===p&&(br(Ys),br(ky))}var zr=nu(0);function k0(p){for(var y=p;y!==null;){if(y.tag===13){var x=y.memoizedState;if(x!==null&&((x=x.dehydrated)===null||eG(x)||II(x)))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(128&y.flags)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break;for(;y.sibling===null;){if(y.return===null||y.return===p)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var JI=[];function tR(){for(var p=0;p<JI.length;p++){var y=JI[p];O?y._workInProgressVersionPrimary=null:y._workInProgressVersionSecondary=null}JI.length=0}var D0=a.ReactCurrentDispatcher,eR=a.ReactCurrentBatchConfig,af=0,Rr=null,Bi=null,Gi=null,$0=!1,Dy=!1,$y=0,bZ=0;function sn(){throw Error(s(321))}function rR(p,y){if(y===null)return!1;for(var x=0;x<y.length&&x<p.length;x++)if(!Ea(p[x],y[x]))return!1;return!0}function iR(p,y,x,E,w,P){if(af=P,Rr=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,D0.current=p===null||p.memoizedState===null?IZ:RZ,p=x(E,w),Dy){P=0;do{if(Dy=!1,$y=0,25<=P)throw Error(s(301));P+=1,Gi=Bi=null,y.updateQueue=null,D0.current=CZ,p=x(E,w)}while(Dy)}if(D0.current=V0,y=Bi!==null&&Bi.next!==null,af=0,Gi=Bi=Rr=null,$0=!1,y)throw Error(s(300));return p}function nR(){var p=$y!==0;return $y=0,p}function to(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gi===null?Rr.memoizedState=Gi=p:Gi=Gi.next=p,Gi}function qs(){if(Bi===null){var p=Rr.alternate;p=p!==null?p.memoizedState:null}else p=Bi.next;var y=Gi===null?Rr.memoizedState:Gi.next;if(y!==null)Gi=y,Bi=p;else{if(p===null)throw Error(s(310));p={memoizedState:(Bi=p).memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},Gi===null?Rr.memoizedState=Gi=p:Gi=Gi.next=p}return Gi}function Hy(p,y){return typeof y=="function"?y(p):y}function sR(p){var y=qs(),x=y.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=p;var E=Bi,w=E.baseQueue,P=x.pending;if(P!==null){if(w!==null){var D=w.next;w.next=P.next,P.next=D}E.baseQueue=w=P,x.pending=null}if(w!==null){P=w.next,E=E.baseState;var q=D=null,nt=null,lt=P;do{var vt=lt.lane;if((af&vt)===vt)nt!==null&&(nt=nt.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),E=lt.hasEagerState?lt.eagerState:p(E,lt.action);else{var Ct={lane:vt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};nt===null?(q=nt=Ct,D=E):nt=nt.next=Ct,Rr.lanes|=vt,of|=vt}lt=lt.next}while(lt!==null&&lt!==P);nt===null?D=E:nt.next=q,Ea(E,y.memoizedState)||(Xn=!0),y.memoizedState=E,y.baseState=D,y.baseQueue=nt,x.lastRenderedState=E}if((p=x.interleaved)!==null){w=p;do P=w.lane,Rr.lanes|=P,of|=P,w=w.next;while(w!==p)}else w===null&&(x.lanes=0);return[y.memoizedState,x.dispatch]}function aR(p){var y=qs(),x=y.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=p;var E=x.dispatch,w=x.pending,P=y.memoizedState;if(w!==null){x.pending=null;var D=w=w.next;do P=p(P,D.action),D=D.next;while(D!==w);Ea(P,y.memoizedState)||(Xn=!0),y.memoizedState=P,y.baseQueue===null&&(y.baseState=P),x.lastRenderedState=P}return[P,E]}function AG(){}function SG(p,y){var x=Rr,E=qs(),w=y(),P=!Ea(E.memoizedState,w);if(P&&(E.memoizedState=w,Xn=!0),E=E.queue,oR(OG.bind(null,x,E,p),[p]),E.getSnapshot!==y||P||Gi!==null&&1&Gi.memoizedState.tag){if(x.flags|=2048,Xy(9,PG.bind(null,x,E,w,y),void 0,null),ki===null)throw Error(s(349));30&af||NG(x,y,w)}return w}function NG(p,y,x){p.flags|=16384,p={getSnapshot:y,value:x},(y=Rr.updateQueue)===null?(y={lastEffect:null,stores:null},Rr.updateQueue=y,y.stores=[p]):(x=y.stores)===null?y.stores=[p]:x.push(p)}function PG(p,y,x,E){y.value=x,y.getSnapshot=E,FG(y)&&UG(p)}function OG(p,y,x){return x(function(){FG(y)&&UG(p)})}function FG(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!Ea(p,x)}catch{return!0}}function UG(p){var y=Qa(p,1);y!==null&&Ks(y,p,1,-1)}function MG(p){var y=to();return typeof p=="function"&&(p=p()),y.memoizedState=y.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:p},y.queue=p,p=p.dispatch=wZ.bind(null,Rr,p),[y.memoizedState,p]}function Xy(p,y,x,E){return p={tag:p,create:y,destroy:x,deps:E,next:null},(y=Rr.updateQueue)===null?(y={lastEffect:null,stores:null},Rr.updateQueue=y,y.lastEffect=p.next=p):(x=y.lastEffect)===null?y.lastEffect=p.next=p:(E=x.next,x.next=p,p.next=E,y.lastEffect=p),p}function LG(){return qs().memoizedState}function H0(p,y,x,E){var w=to();Rr.flags|=p,w.memoizedState=Xy(1|y,x,void 0,E===void 0?null:E)}function X0(p,y,x,E){var w=qs();E=E===void 0?null:E;var P=void 0;if(Bi!==null){var D=Bi.memoizedState;if(P=D.destroy,E!==null&&rR(E,D.deps))return void(w.memoizedState=Xy(y,x,P,E))}Rr.flags|=p,w.memoizedState=Xy(1|y,x,P,E)}function BG(p,y){return H0(8390656,8,p,y)}function oR(p,y){return X0(2048,8,p,y)}function GG(p,y){return X0(4,2,p,y)}function kG(p,y){return X0(4,4,p,y)}function DG(p,y){return typeof y=="function"?(p=p(),y(p),function(){y(null)}):y!=null?(p=p(),y.current=p,function(){y.current=null}):void 0}function $G(p,y,x){return x=x!=null?x.concat([p]):null,X0(4,4,DG.bind(null,y,p),x)}function hR(){}function HG(p,y){var x=qs();y=y===void 0?null:y;var E=x.memoizedState;return E!==null&&y!==null&&rR(y,E[1])?E[0]:(x.memoizedState=[p,y],p)}function XG(p,y){var x=qs();y=y===void 0?null:y;var E=x.memoizedState;return E!==null&&y!==null&&rR(y,E[1])?E[0]:(p=p(),x.memoizedState=[p,y],p)}function VG(p,y,x){return 21&af?(Ea(x,y)||(x=sG(),Rr.lanes|=x,of|=x,p.baseState=!0),y):(p.baseState&&(p.baseState=!1,Xn=!0),p.memoizedState=x)}function TZ(p,y){var x=De;De=x!==0&&4>x?x:4,p(!0);var E=eR.transition;eR.transition={};try{p(!1),y()}finally{De=x,eR.transition=E}}function jG(){return qs().memoizedState}function EZ(p,y,x){var E=fu(p);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},zG(p)?WG(y,x):(x=yG(p,y,x,E))!==null&&(Ks(x,p,E,on()),YG(x,y,E))}function wZ(p,y,x){var E=fu(p),w={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(zG(p))WG(y,w);else{var P=p.alternate;if(p.lanes===0&&(P===null||P.lanes===0)&&(P=y.lastRenderedReducer)!==null)try{var D=y.lastRenderedState,q=P(D,x);if(w.hasEagerState=!0,w.eagerState=q,Ea(q,D)){var nt=y.interleaved;return nt===null?(w.next=w,WI(y)):(w.next=nt.next,nt.next=w),void(y.interleaved=w)}}catch{}(x=yG(p,y,w,E))!==null&&(Ks(x,p,E,w=on()),YG(x,y,E))}}function zG(p){var y=p.alternate;return p===Rr||y!==null&&y===Rr}function WG(p,y){Dy=$0=!0;var x=p.pending;x===null?y.next=y:(y.next=x.next,x.next=y),p.pending=y}function YG(p,y,x){if(4194240&x){var E=y.lanes;x|=E&=p.pendingLanes,y.lanes=x,UI(p,x)}}var V0={readContext:Ws,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},IZ={readContext:Ws,useCallback:function(p,y){return to().memoizedState=[p,y===void 0?null:y],p},useContext:Ws,useEffect:BG,useImperativeHandle:function(p,y,x){return x=x!=null?x.concat([p]):null,H0(4194308,4,DG.bind(null,y,p),x)},useLayoutEffect:function(p,y){return H0(4194308,4,p,y)},useInsertionEffect:function(p,y){return H0(4,2,p,y)},useMemo:function(p,y){var x=to();return y=y===void 0?null:y,p=p(),x.memoizedState=[p,y],p},useReducer:function(p,y,x){var E=to();return y=x!==void 0?x(y):y,E.memoizedState=E.baseState=y,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:y},E.queue=p,p=p.dispatch=EZ.bind(null,Rr,p),[E.memoizedState,p]},useRef:function(p){return p={current:p},to().memoizedState=p},useState:MG,useDebugValue:hR,useDeferredValue:function(p){return to().memoizedState=p},useTransition:function(){var p=MG(!1),y=p[0];return p=TZ.bind(null,p[1]),to().memoizedState=p,[y,p]},useMutableSource:function(){},useSyncExternalStore:function(p,y,x){var E=Rr,w=to();if(Tr){if(x===void 0)throw Error(s(407));x=x()}else{if(x=y(),ki===null)throw Error(s(349));30&af||NG(E,y,x)}w.memoizedState=x;var P={value:x,getSnapshot:y};return w.queue=P,BG(OG.bind(null,E,P,p),[p]),E.flags|=2048,Xy(9,PG.bind(null,E,P,x,y),void 0,null),x},useId:function(){var p=to(),y=ki.identifierPrefix;if(Tr){var x=Zo;y=":"+y+"R"+(x=(Za&~(1<<32-Ta(Za)-1)).toString(32)+x),0<(x=$y++)&&(y+="H"+x.toString(32)),y+=":"}else y=":"+y+"r"+(x=bZ++).toString(32)+":";return p.memoizedState=y},unstable_isNewReconciler:!1},RZ={readContext:Ws,useCallback:HG,useContext:Ws,useEffect:oR,useImperativeHandle:$G,useInsertionEffect:GG,useLayoutEffect:kG,useMemo:XG,useReducer:sR,useRef:LG,useState:function(){return sR(Hy)},useDebugValue:hR,useDeferredValue:function(p){return VG(qs(),Bi.memoizedState,p)},useTransition:function(){return[sR(Hy)[0],qs().memoizedState]},useMutableSource:AG,useSyncExternalStore:SG,useId:jG,unstable_isNewReconciler:!1},CZ={readContext:Ws,useCallback:HG,useContext:Ws,useEffect:oR,useImperativeHandle:$G,useInsertionEffect:GG,useLayoutEffect:kG,useMemo:XG,useReducer:aR,useRef:LG,useState:function(){return aR(Hy)},useDebugValue:hR,useDeferredValue:function(p){var y=qs();return Bi===null?y.memoizedState=p:VG(y,Bi.memoizedState,p)},useTransition:function(){return[aR(Hy)[0],qs().memoizedState]},useMutableSource:AG,useSyncExternalStore:SG,useId:jG,unstable_isNewReconciler:!1};function zd(p,y){try{var x="",E=y;do x+=xZ(E),E=E.return;while(E);var w=x}catch(P){w=`
Error generating stack: `+P.message+`
`+P.stack}return{value:p,source:y,stack:w,digest:null}}function uR(p,y,x){return{value:p,source:null,stack:x??null,digest:y??null}}function lR(p,y){try{console.error(y.value)}catch(x){setTimeout(function(){throw x})}}var AZ=typeof WeakMap=="function"?WeakMap:Map;function qG(p,y,x){(x=Qo(-1,x)).tag=3,x.payload={element:null};var E=y.value;return x.callback=function(){nx||(nx=!0,SR=E),lR(0,y)},x}function KG(p,y,x){(x=Qo(-1,x)).tag=3;var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var w=y.value;x.payload=function(){return E(w)},x.callback=function(){lR(0,y)}}var P=p.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(x.callback=function(){lR(0,y),typeof E!="function"&&(uu===null?uu=new Set([this]):uu.add(this));var D=y.stack;this.componentDidCatch(y.value,{componentStack:D!==null?D:""})}),x}function ZG(p,y,x){var E=p.pingCache;if(E===null){E=p.pingCache=new AZ;var w=new Set;E.set(y,w)}else(w=E.get(y))===void 0&&(w=new Set,E.set(y,w));w.has(x)||(w.add(x),p=BZ.bind(null,p,y,x),y.then(p,p))}function QG(p){do{var y;if((y=p.tag===13)&&(y=(y=p.memoizedState)===null||y.dehydrated!==null),y)return p;p=p.return}while(p!==null);return null}function JG(p,y,x,E,w){return 1&p.mode?(p.flags|=65536,p.lanes=w,p):(p===y?p.flags|=65536:(p.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:((y=Qo(-1,1)).tag=2,ou(x,y,1))),x.lanes|=1),p)}var SZ=a.ReactCurrentOwner,Xn=!1;function Vn(p,y,x,E){y.child=p===null?RG(y,null,x,E):Xd(y,p.child,x,E)}function t3(p,y,x,E,w){x=x.render;var P=y.ref;return Hd(y,w),E=iR(p,y,x,E,P,w),x=nR(),p===null||Xn?(Tr&&x&&GI(y),y.flags|=1,Vn(p,y,E,w),y.child):(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~w,Jo(p,y,w))}function e3(p,y,x,E,w){if(p===null){var P=x.type;return typeof P!="function"||MR(P)||P.defaultProps!==void 0||x.compare!==null||x.defaultProps!==void 0?((p=lx(x.type,null,E,y,y.mode,w)).ref=y.ref,p.return=y,y.child=p):(y.tag=15,y.type=P,r3(p,y,P,E,w))}if(P=p.child,(p.lanes&w)==0){var D=P.memoizedProps;if((x=(x=x.compare)!==null?x:O0)(D,E)&&p.ref===y.ref)return Jo(p,y,w)}return y.flags|=1,(p=du(P,E)).ref=y.ref,p.return=y,y.child=p}function r3(p,y,x,E,w){if(p!==null){var P=p.memoizedProps;if(O0(P,E)&&p.ref===y.ref){if(Xn=!1,y.pendingProps=E=P,(p.lanes&w)==0)return y.lanes=p.lanes,Jo(p,y,w);131072&p.flags&&(Xn=!0)}}return fR(p,y,x,E,w)}function i3(p,y,x){var E=y.pendingProps,w=E.children,P=p!==null?p.memoizedState:null;if(E.mode==="hidden")if(!(1&y.mode))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Yd,rs),rs|=x;else{if(!(1073741824&x))return p=P!==null?P.baseLanes|x:x,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:p,cachePool:null,transitions:null},y.updateQueue=null,Qe(Yd,rs),rs|=p,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=P!==null?P.baseLanes:x,Qe(Yd,rs),rs|=E}else P!==null?(E=P.baseLanes|x,y.memoizedState=null):E=x,Qe(Yd,rs),rs|=E;return Vn(p,y,w,x),y.child}function n3(p,y){var x=y.ref;(p===null&&x!==null||p!==null&&p.ref!==x)&&(y.flags|=512,y.flags|=2097152)}function fR(p,y,x,E,w){var P=ts(x)?ef:nn.current;return P=Bd(y,P),Hd(y,w),x=iR(p,y,x,E,P,w),E=nR(),p===null||Xn?(Tr&&E&&GI(y),y.flags|=1,Vn(p,y,x,w),y.child):(y.updateQueue=p.updateQueue,y.flags&=-2053,p.lanes&=~w,Jo(p,y,w))}function s3(p,y,x,E,w){if(ts(x)){var P=!0;I0(y)}else P=!1;if(Hd(y,w),y.stateNode===null)Y0(p,y),TG(y,x,E),KI(y,x,E,w),E=!0;else if(p===null){var D=y.stateNode,q=y.memoizedProps;D.props=q;var nt=D.context,lt=x.contextType;typeof lt=="object"&&lt!==null?lt=Ws(lt):lt=Bd(y,lt=ts(x)?ef:nn.current);var vt=x.getDerivedStateFromProps,Ct=typeof vt=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ct||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==E||nt!==lt)&&EG(y,D,E,lt),au=!1;var pt=y.memoizedState;D.state=pt,L0(y,E,D,w),nt=y.memoizedState,q!==E||pt!==nt||Hn.current||au?(typeof vt=="function"&&(qI(y,x,vt,E),nt=y.memoizedState),(q=au||bG(y,x,q,E,pt,nt,lt))?(Ct||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(y.flags|=4194308)):(typeof D.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=E,y.memoizedState=nt),D.props=E,D.state=nt,D.context=lt,E=q):(typeof D.componentDidMount=="function"&&(y.flags|=4194308),E=!1)}else{D=y.stateNode,mG(p,y),q=y.memoizedProps,lt=y.type===y.elementType?q:Ia(y.type,q),D.props=lt,Ct=y.pendingProps,pt=D.context,typeof(nt=x.contextType)=="object"&&nt!==null?nt=Ws(nt):nt=Bd(y,nt=ts(x)?ef:nn.current);var Tt=x.getDerivedStateFromProps;(vt=typeof Tt=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q!==Ct||pt!==nt)&&EG(y,D,E,nt),au=!1,pt=y.memoizedState,D.state=pt,L0(y,E,D,w);var Yt=y.memoizedState;q!==Ct||pt!==Yt||Hn.current||au?(typeof Tt=="function"&&(qI(y,x,Tt,E),Yt=y.memoizedState),(lt=au||bG(y,x,lt,E,pt,Yt,nt)||!1)?(vt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(E,Yt,nt),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(E,Yt,nt)),typeof D.componentDidUpdate=="function"&&(y.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof D.componentDidUpdate!="function"||q===p.memoizedProps&&pt===p.memoizedState||(y.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===p.memoizedProps&&pt===p.memoizedState||(y.flags|=1024),y.memoizedProps=E,y.memoizedState=Yt),D.props=E,D.state=Yt,D.context=nt,E=lt):(typeof D.componentDidUpdate!="function"||q===p.memoizedProps&&pt===p.memoizedState||(y.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||q===p.memoizedProps&&pt===p.memoizedState||(y.flags|=1024),E=!1)}return cR(p,y,x,E,P,w)}function cR(p,y,x,E,w,P){n3(p,y);var D=(128&y.flags)!=0;if(!E&&!D)return w&&nG(y,x,!1),Jo(p,y,P);E=y.stateNode,SZ.current=y;var q=D&&typeof x.getDerivedStateFromError!="function"?null:E.render();return y.flags|=1,p!==null&&D?(y.child=Xd(y,p.child,null,P),y.child=Xd(y,null,q,P)):Vn(p,y,q,P),y.memoizedState=E.state,w&&nG(y,x,!0),y.child}function a3(p){var y=p.stateNode;y.pendingContext?rG(0,y.pendingContext,y.pendingContext!==y.context):y.context&&rG(0,y.context,!1),ZI(p,y.containerInfo)}function o3(p,y,x,E,w){return Dd(),HI(w),y.flags|=256,Vn(p,y,x,E),y.child}var Vy,jy,j0,z0,dR={dehydrated:null,treeContext:null,retryLane:0};function pR(p){return{baseLanes:p,cachePool:null,transitions:null}}function h3(p,y,x){var E,w=y.pendingProps,P=zr.current,D=!1,q=(128&y.flags)!=0;if((E=q)||(E=(p===null||p.memoizedState!==null)&&(2&P)!=0),E?(D=!0,y.flags&=-129):p!==null&&p.memoizedState===null||(P|=1),Qe(zr,1&P),p===null)return $I(y),(p=y.memoizedState)!==null&&(p=p.dehydrated)!==null?(1&y.mode?II(p)?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(q=w.children,p=w.fallback,D?(w=y.mode,D=y.child,q={mode:"hidden",children:q},!(1&w)&&D!==null?(D.childLanes=0,D.pendingProps=q):D=fx(q,w,0,null),p=lf(p,w,x,null),D.return=y,p.return=y,D.sibling=p,y.child=D,y.child.memoizedState=pR(x),y.memoizedState=dR,p):vR(y,q));if((P=p.memoizedState)!==null&&(E=P.dehydrated)!==null)return function(lt,vt,Ct,pt,Tt,Yt,se){if(Ct)return 256&vt.flags?(vt.flags&=-257,W0(lt,vt,se,pt=uR(Error(s(422))))):vt.memoizedState!==null?(vt.child=lt.child,vt.flags|=128,null):(Yt=pt.fallback,Tt=vt.mode,pt=fx({mode:"visible",children:pt.children},Tt,0,null),(Yt=lf(Yt,Tt,se,null)).flags|=2,pt.return=vt,Yt.return=vt,pt.sibling=Yt,vt.child=pt,1&vt.mode&&Xd(vt,lt.child,null,se),vt.child.memoizedState=pR(se),vt.memoizedState=dR,Yt);if(!(1&vt.mode))return W0(lt,vt,se,null);if(II(Tt))return pt=qK(Tt).digest,Yt=Error(s(419)),pt=uR(Yt,pt,void 0),W0(lt,vt,se,pt);if(Ct=(se&lt.childLanes)!=0,Xn||Ct){if((pt=ki)!==null){switch(se&-se){case 4:Tt=2;break;case 16:Tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Tt=32;break;case 536870912:Tt=268435456;break;default:Tt=0}(Tt=Tt&(pt.suspendedLanes|se)?0:Tt)!==0&&Tt!==Yt.retryLane&&(Yt.retryLane=Tt,Qa(lt,Tt),Ks(pt,lt,Tt,-1))}return UR(),W0(lt,vt,se,pt=uR(Error(s(421))))}return eG(Tt)?(vt.flags|=128,vt.child=lt.child,vt=GZ.bind(null,lt),KK(Tt,vt),null):(lt=Yt.treeContext,G&&(zs=JK(Tt),es=vt,Tr=!0,wa=null,Ly=!1,lt!==null&&(Vs[js++]=Za,Vs[js++]=Zo,Vs[js++]=rf,Za=lt.id,Zo=lt.overflow,rf=vt)),vt=vR(vt,pt.children),vt.flags|=4096,vt)}(p,y,q,w,E,P,x);if(D){D=w.fallback,q=y.mode,E=(P=p.child).sibling;var nt={mode:"hidden",children:w.children};return!(1&q)&&y.child!==P?((w=y.child).childLanes=0,w.pendingProps=nt,y.deletions=null):(w=du(P,nt)).subtreeFlags=14680064&P.subtreeFlags,E!==null?D=du(E,D):(D=lf(D,q,x,null)).flags|=2,D.return=y,w.return=y,w.sibling=D,y.child=w,w=D,D=y.child,q=(q=p.child.memoizedState)===null?pR(x):{baseLanes:q.baseLanes|x,cachePool:null,transitions:q.transitions},D.memoizedState=q,D.childLanes=p.childLanes&~x,y.memoizedState=dR,w}return p=(D=p.child).sibling,w=du(D,{mode:"visible",children:w.children}),!(1&y.mode)&&(w.lanes=x),w.return=y,w.sibling=null,p!==null&&((x=y.deletions)===null?(y.deletions=[p],y.flags|=16):x.push(p)),y.child=w,y.memoizedState=null,w}function vR(p,y){return(y=fx({mode:"visible",children:y},p.mode,0,null)).return=p,p.child=y}function W0(p,y,x,E){return E!==null&&HI(E),Xd(y,p.child,null,x),(p=vR(y,y.pendingProps.children)).flags|=2,y.memoizedState=null,p}function u3(p,y,x){p.lanes|=y;var E=p.alternate;E!==null&&(E.lanes|=y),zI(p.return,y,x)}function yR(p,y,x,E,w){var P=p.memoizedState;P===null?p.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:w}:(P.isBackwards=y,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=x,P.tailMode=w)}function l3(p,y,x){var E=y.pendingProps,w=E.revealOrder,P=E.tail;if(Vn(p,y,E.children,x),(2&(E=zr.current))!=0)E=1&E|2,y.flags|=128;else{if(p!==null&&128&p.flags)t:for(p=y.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&u3(p,x,y);else if(p.tag===19)u3(p,x,y);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===y)break t;for(;p.sibling===null;){if(p.return===null||p.return===y)break t;p=p.return}p.sibling.return=p.return,p=p.sibling}E&=1}if(Qe(zr,E),(1&y.mode)==0)y.memoizedState=null;else switch(w){case"forwards":for(x=y.child,w=null;x!==null;)(p=x.alternate)!==null&&k0(p)===null&&(w=x),x=x.sibling;(x=w)===null?(w=y.child,y.child=null):(w=x.sibling,x.sibling=null),yR(y,!1,w,x,P);break;case"backwards":for(x=null,w=y.child,y.child=null;w!==null;){if((p=w.alternate)!==null&&k0(p)===null){y.child=w;break}p=w.sibling,w.sibling=x,x=w,w=p}yR(y,!0,x,null,P);break;case"together":yR(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function Y0(p,y){!(1&y.mode)&&p!==null&&(p.alternate=null,y.alternate=null,y.flags|=2)}function Jo(p,y,x){if(p!==null&&(y.dependencies=p.dependencies),of|=y.lanes,(x&y.childLanes)==0)return null;if(p!==null&&y.child!==p.child)throw Error(s(153));if(y.child!==null){for(x=du(p=y.child,p.pendingProps),y.child=x,x.return=y;p.sibling!==null;)p=p.sibling,(x=x.sibling=du(p,p.pendingProps)).return=y;x.sibling=null}return y.child}function eo(p){p.flags|=4}function f3(p,y){if(p!==null&&p.child===y.child)return!0;if(16&y.flags)return!1;for(p=y.child;p!==null;){if(12854&p.flags||12854&p.subtreeFlags)return!1;p=p.sibling}return!0}if(N)Vy=function(p,y){for(var x=y.child;x!==null;){if(x.tag===5||x.tag===6)Q(p,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},jy=function(){},j0=function(p,y,x,E,w){if((p=p.memoizedProps)!==E){var P=y.stateNode,D=Ja(Ys.current);x=Et(P,x,p,E,w,D),(y.updateQueue=x)&&eo(y)}},z0=function(p,y,x,E){x!==E&&eo(y)};else if(B){Vy=function(p,y,x,E){for(var w=y.child;w!==null;){if(w.tag===5){var P=w.stateNode;x&&E&&(P=JB(P,w.type,w.memoizedProps,w)),Q(p,P)}else if(w.tag===6)P=w.stateNode,x&&E&&(P=tG(P,w.memoizedProps,w)),Q(p,P);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)(P=w.child)!==null&&(P.return=w),Vy(p,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var c3=function(p,y,x,E){for(var w=y.child;w!==null;){if(w.tag===5){var P=w.stateNode;x&&E&&(P=JB(P,w.type,w.memoizedProps,w)),QB(p,P)}else if(w.tag===6)P=w.stateNode,x&&E&&(P=tG(P,w.memoizedProps,w)),QB(p,P);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)(P=w.child)!==null&&(P.return=w),c3(p,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};jy=function(p,y){var x=y.stateNode;if(!f3(p,y)){p=x.containerInfo;var E=ZB(p);c3(E,y,!1,!1),x.pendingChildren=E,eo(y),jK(p,E)}},j0=function(p,y,x,E,w){var P=p.stateNode,D=p.memoizedProps;if((p=f3(p,y))&&D===E)y.stateNode=P;else{var q=y.stateNode,nt=Ja(Ys.current),lt=null;D!==E&&(lt=Et(q,x,D,E,w,nt)),p&&lt===null?y.stateNode=P:(P=VK(P,lt,x,D,E,y,p,q),mt(P,x,E,w,nt)&&eo(y),y.stateNode=P,p?eo(y):Vy(P,y,!1,!1))}},z0=function(p,y,x,E){x!==E?(p=Ja(Vd.current),x=Ja(Ys.current),y.stateNode=wt(E,p,x,y),eo(y)):y.stateNode=p.stateNode}}else jy=function(){},j0=function(){},z0=function(){};function zy(p,y){if(!Tr)switch(p.tailMode){case"hidden":y=p.tail;for(var x=null;y!==null;)y.alternate!==null&&(x=y),y=y.sibling;x===null?p.tail=null:x.sibling=null;break;case"collapsed":x=p.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?y||p.tail===null?p.tail=null:p.tail.sibling=null:E.sibling=null}}function Rn(p){var y=p.alternate!==null&&p.alternate.child===p.child,x=0,E=0;if(y)for(var w=p.child;w!==null;)x|=w.lanes|w.childLanes,E|=14680064&w.subtreeFlags,E|=14680064&w.flags,w.return=p,w=w.sibling;else for(w=p.child;w!==null;)x|=w.lanes|w.childLanes,E|=w.subtreeFlags,E|=w.flags,w.return=p,w=w.sibling;return p.subtreeFlags|=E,p.childLanes=x,y}function NZ(p,y,x){var E=y.pendingProps;switch(kI(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(y),null;case 1:case 17:return ts(y.type)&&SI(),Rn(y),null;case 3:return x=y.stateNode,jd(),br(Hn),br(nn),tR(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),p!==null&&p.child!==null||(P0(y)?eo(y):p===null||p.memoizedState.isDehydrated&&!(256&y.flags)||(y.flags|=1024,wa!==null&&(OR(wa),wa=null))),jy(p,y),Rn(y),null;case 5:QI(y),x=Ja(Vd.current);var w=y.type;if(p!==null&&y.stateNode!=null)j0(p,y,w,E,x),p.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!E){if(y.stateNode===null)throw Error(s(166));return Rn(y),null}if(p=Ja(Ys.current),P0(y)){if(!G)throw Error(s(175));p=tZ(y.stateNode,y.type,y.memoizedProps,x,p,y,!Ly),y.updateQueue=p,p!==null&&eo(y)}else{var P=Z(w,E,x,p,y);Vy(P,y,!1,!1),y.stateNode=P,mt(P,w,E,x,p)&&eo(y)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Rn(y),null;case 6:if(p&&y.stateNode!=null)z0(p,y,p.memoizedProps,E);else{if(typeof E!="string"&&y.stateNode===null)throw Error(s(166));if(p=Ja(Vd.current),x=Ja(Ys.current),P0(y)){if(!G)throw Error(s(176));if(p=y.stateNode,x=y.memoizedProps,(E=eZ(p,x,y,!Ly))&&(w=es)!==null)switch(w.tag){case 3:uZ(w.stateNode.containerInfo,p,x,(1&w.mode)!=0);break;case 5:lZ(w.type,w.memoizedProps,w.stateNode,p,x,(1&w.mode)!=0)}E&&eo(y)}else y.stateNode=wt(E,p,x,y)}return Rn(y),null;case 13:if(br(zr),E=y.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Tr&&zs!==null&&1&y.mode&&!(128&y.flags))pG(),Dd(),y.flags|=98560,w=!1;else if(w=P0(y),E!==null&&E.dehydrated!==null){if(p===null){if(!w)throw Error(s(318));if(!G)throw Error(s(344));if(!(w=(w=y.memoizedState)!==null?w.dehydrated:null))throw Error(s(317));rZ(w,y)}else Dd(),!(128&y.flags)&&(y.memoizedState=null),y.flags|=4;Rn(y),w=!1}else wa!==null&&(OR(wa),wa=null),w=!0;if(!w)return 65536&y.flags?y:null}return 128&y.flags?(y.lanes=x,y):((x=E!==null)!=(p!==null&&p.memoizedState!==null)&&x&&(y.child.flags|=8192,1&y.mode&&(p===null||1&zr.current?Ci===0&&(Ci=3):UR())),y.updateQueue!==null&&(y.flags|=4),Rn(y),null);case 4:return jd(),jy(p,y),p===null&&X(y.stateNode.containerInfo),Rn(y),null;case 10:return jI(y.type._context),Rn(y),null;case 19:if(br(zr),(w=y.memoizedState)===null)return Rn(y),null;if(E=(128&y.flags)!=0,(P=w.rendering)===null)if(E)zy(w,!1);else{if(Ci!==0||p!==null&&128&p.flags)for(p=y.child;p!==null;){if((P=k0(p))!==null){for(y.flags|=128,zy(w,!1),(p=P.updateQueue)!==null&&(y.updateQueue=p,y.flags|=4),y.subtreeFlags=0,p=x,x=y.child;x!==null;)w=p,(E=x).flags&=14680066,(P=E.alternate)===null?(E.childLanes=0,E.lanes=w,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=P.childLanes,E.lanes=P.lanes,E.child=P.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=P.memoizedProps,E.memoizedState=P.memoizedState,E.updateQueue=P.updateQueue,E.type=P.type,w=P.dependencies,E.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),x=x.sibling;return Qe(zr,1&zr.current|2),y.child}p=p.sibling}w.tail!==null&&Li()>AR&&(y.flags|=128,E=!0,zy(w,!1),y.lanes=4194304)}else{if(!E)if((p=k0(P))!==null){if(y.flags|=128,E=!0,(p=p.updateQueue)!==null&&(y.updateQueue=p,y.flags|=4),zy(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!Tr)return Rn(y),null}else 2*Li()-w.renderingStartTime>AR&&x!==1073741824&&(y.flags|=128,E=!0,zy(w,!1),y.lanes=4194304);w.isBackwards?(P.sibling=y.child,y.child=P):((p=w.last)!==null?p.sibling=P:y.child=P,w.last=P)}return w.tail!==null?(y=w.tail,w.rendering=y,w.tail=y.sibling,w.renderingStartTime=Li(),y.sibling=null,p=zr.current,Qe(zr,E?1&p|2:1&p),y):(Rn(y),null);case 22:case 23:return FR(),x=y.memoizedState!==null,p!==null&&p.memoizedState!==null!==x&&(y.flags|=8192),x&&1&y.mode?1073741824&rs&&(Rn(y),N&&6&y.subtreeFlags&&(y.flags|=8192)):Rn(y),null;case 24:case 25:return null}throw Error(s(156,y.tag))}function PZ(p,y){switch(kI(y),y.tag){case 1:return ts(y.type)&&SI(),65536&(p=y.flags)?(y.flags=-65537&p|128,y):null;case 3:return jd(),br(Hn),br(nn),tR(),65536&(p=y.flags)&&!(128&p)?(y.flags=-65537&p|128,y):null;case 5:return QI(y),null;case 13:if(br(zr),(p=y.memoizedState)!==null&&p.dehydrated!==null){if(y.alternate===null)throw Error(s(340));Dd()}return 65536&(p=y.flags)?(y.flags=-65537&p|128,y):null;case 19:return br(zr),null;case 4:return jd(),null;case 10:return jI(y.type._context),null;case 22:case 23:return FR(),null;default:return null}}var q0=!1,an=!1,OZ=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Wd(p,y){var x=p.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){Er(p,y,E)}else x.current=null}function d3(p,y,x){try{x()}catch(E){Er(p,y,E)}}var p3=!1;function Wy(p,y,x){var E=y.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var w=E=E.next;do{if((w.tag&p)===p){var P=w.destroy;w.destroy=void 0,P!==void 0&&d3(y,x,P)}w=w.next}while(w!==E)}}function K0(p,y){if((y=(y=y.updateQueue)!==null?y.lastEffect:null)!==null){var x=y=y.next;do{if((x.tag&p)===p){var E=x.create;x.destroy=E()}x=x.next}while(x!==y)}}function mR(p){var y=p.ref;if(y!==null){var x=p.stateNode;p.tag===5?p=et(x):p=x,typeof y=="function"?y(p):y.current=p}}function v3(p){var y=p.alternate;y!==null&&(p.alternate=null,v3(y)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(y=p.stateNode)!==null&&ft(y),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function y3(p){return p.tag===5||p.tag===3||p.tag===4}function m3(p){t:for(;;){for(;p.sibling===null;){if(p.return===null||y3(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(2&p.flags||p.child===null||p.tag===4)continue t;p.child.return=p,p=p.child}if(!(2&p.flags))return p.stateNode}}function _R(p,y,x){var E=p.tag;if(E===5||E===6)p=p.stateNode,y?LK(x,p,y):b0(x,p);else if(E!==4&&(p=p.child)!==null)for(_R(p,y,x),p=p.sibling;p!==null;)_R(p,y,x),p=p.sibling}function gR(p,y,x){var E=p.tag;if(E===5||E===6)p=p.stateNode,y?MK(x,p,y):EI(x,p);else if(E!==4&&(p=p.child)!==null)for(gR(p,y,x),p=p.sibling;p!==null;)gR(p,y,x),p=p.sibling}var Cn=null,ro=!1;function io(p,y,x){for(x=x.child;x!==null;)xR(p,y,x),x=x.sibling}function xR(p,y,x){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(C0,x)}catch{}switch(x.tag){case 5:an||Wd(x,y);case 6:if(N){var E=Cn,w=ro;Cn=null,io(p,y,x),ro=w,(Cn=E)!==null&&(ro?GK(Cn,x.stateNode):BK(Cn,x.stateNode))}else io(p,y,x);break;case 18:N&&Cn!==null&&(ro?oZ(Cn,x.stateNode):aZ(Cn,x.stateNode));break;case 4:N?(E=Cn,w=ro,Cn=x.stateNode.containerInfo,ro=!0,io(p,y,x),Cn=E,ro=w):(B&&(E=x.stateNode.containerInfo,w=ZB(E),wI(E,w)),io(p,y,x));break;case 0:case 11:case 14:case 15:if(!an&&(E=x.updateQueue)!==null&&(E=E.lastEffect)!==null){w=E=E.next;do{var P=w,D=P.destroy;P=P.tag,D!==void 0&&(2&P||4&P)&&d3(x,y,D),w=w.next}while(w!==E)}io(p,y,x);break;case 1:if(!an&&(Wd(x,y),typeof(E=x.stateNode).componentWillUnmount=="function"))try{E.props=x.memoizedProps,E.state=x.memoizedState,E.componentWillUnmount()}catch(q){Er(x,y,q)}io(p,y,x);break;case 21:io(p,y,x);break;case 22:1&x.mode?(an=(E=an)||x.memoizedState!==null,io(p,y,x),an=E):io(p,y,x);break;default:io(p,y,x)}}function _3(p){var y=p.updateQueue;if(y!==null){p.updateQueue=null;var x=p.stateNode;x===null&&(x=p.stateNode=new OZ),y.forEach(function(E){var w=kZ.bind(null,p,E);x.has(E)||(x.add(E),E.then(w,w))})}}function Ra(p,y){var x=y.deletions;if(x!==null)for(var E=0;E<x.length;E++){var w=x[E];try{var P=p,D=y;if(N){var q=D;t:for(;q!==null;){switch(q.tag){case 5:Cn=q.stateNode,ro=!1;break t;case 3:case 4:Cn=q.stateNode.containerInfo,ro=!0;break t}q=q.return}if(Cn===null)throw Error(s(160));xR(P,D,w),Cn=null,ro=!1}else xR(P,D,w);var nt=w.alternate;nt!==null&&(nt.return=null),w.return=null}catch(lt){Er(w,y,lt)}}if(12854&y.subtreeFlags)for(y=y.child;y!==null;)g3(y,p),y=y.sibling}function g3(p,y){var x=p.alternate,E=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(Ra(y,p),no(p),4&E){try{Wy(3,p,p.return),K0(3,p)}catch(pt){Er(p,p.return,pt)}try{Wy(5,p,p.return)}catch(pt){Er(p,p.return,pt)}}break;case 1:Ra(y,p),no(p),512&E&&x!==null&&Wd(x,x.return);break;case 5:if(Ra(y,p),no(p),512&E&&x!==null&&Wd(x,x.return),N){if(32&p.flags){var w=p.stateNode;try{KB(w)}catch(pt){Er(p,p.return,pt)}}if(4&E&&(w=p.stateNode)!=null){var P=p.memoizedProps;if(x=x!==null?x.memoizedProps:P,E=p.type,y=p.updateQueue,p.updateQueue=null,y!==null)try{E0(w,y,E,x,P,p)}catch(pt){Er(p,p.return,pt)}}}break;case 6:if(Ra(y,p),no(p),4&E&&N){if(p.stateNode===null)throw Error(s(162));w=p.stateNode,P=p.memoizedProps,x=x!==null?x.memoizedProps:P;try{T0(w,x,P)}catch(pt){Er(p,p.return,pt)}}break;case 3:if(Ra(y,p),no(p),4&E){if(N&&G&&x!==null&&x.memoizedState.isDehydrated)try{nZ(y.containerInfo)}catch(pt){Er(p,p.return,pt)}if(B){w=y.containerInfo,P=y.pendingChildren;try{wI(w,P)}catch(pt){Er(p,p.return,pt)}}}break;case 4:if(Ra(y,p),no(p),4&E&&B){w=(P=p.stateNode).containerInfo,P=P.pendingChildren;try{wI(w,P)}catch(pt){Er(p,p.return,pt)}}break;case 13:Ra(y,p),no(p),8192&(w=p.child).flags&&(P=w.memoizedState!==null,w.stateNode.isHidden=P,!P||w.alternate!==null&&w.alternate.memoizedState!==null||(CR=Li())),4&E&&_3(p);break;case 22:var D=x!==null&&x.memoizedState!==null;if(1&p.mode?(an=(x=an)||D,Ra(y,p),an=x):Ra(y,p),no(p),8192&E){if(x=p.memoizedState!==null,(p.stateNode.isHidden=x)&&!D&&(1&p.mode)!=0)for(Xt=p,E=p.child;E!==null;){for(y=Xt=E;Xt!==null;){var q=(D=Xt).child;switch(D.tag){case 0:case 11:case 14:case 15:Wy(4,D,D.return);break;case 1:Wd(D,D.return);var nt=D.stateNode;if(typeof nt.componentWillUnmount=="function"){var lt=D,vt=D.return;try{var Ct=lt;nt.props=Ct.memoizedProps,nt.state=Ct.memoizedState,nt.componentWillUnmount()}catch(pt){Er(lt,vt,pt)}}break;case 5:Wd(D,D.return);break;case 22:if(D.memoizedState!==null){T3(y);continue}}q!==null?(q.return=D,Xt=q):T3(y)}E=E.sibling}if(N){t:if(E=null,N)for(y=p;;){if(y.tag===5){if(E===null){E=y;try{w=y.stateNode,x?kK(w):$K(y.stateNode,y.memoizedProps)}catch(pt){Er(p,p.return,pt)}}}else if(y.tag===6){if(E===null)try{P=y.stateNode,x?DK(P):HK(P,y.memoizedProps)}catch(pt){Er(p,p.return,pt)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===p)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===p)break t;for(;y.sibling===null;){if(y.return===null||y.return===p)break t;E===y&&(E=null),y=y.return}E===y&&(E=null),y.sibling.return=y.return,y=y.sibling}}}break;case 19:Ra(y,p),no(p),4&E&&_3(p);break;case 21:break;default:Ra(y,p),no(p)}}function no(p){var y=p.flags;if(2&y){try{if(N){t:{for(var x=p.return;x!==null;){if(y3(x)){var E=x;break t}x=x.return}throw Error(s(160))}switch(E.tag){case 5:var w=E.stateNode;32&E.flags&&(KB(w),E.flags&=-33),gR(p,m3(p),w);break;case 3:case 4:var P=E.stateNode.containerInfo;_R(p,m3(p),P);break;default:throw Error(s(161))}}}catch(D){Er(p,p.return,D)}p.flags&=-3}4096&y&&(p.flags&=-4097)}function FZ(p,y,x){Xt=p,x3(p)}function x3(p,y,x){for(var E=(1&p.mode)!=0;Xt!==null;){var w=Xt,P=w.child;if(w.tag===22&&E){var D=w.memoizedState!==null||q0;if(!D){var q=w.alternate,nt=q!==null&&q.memoizedState!==null||an;q=q0;var lt=an;if(q0=D,(an=nt)&&!lt)for(Xt=w;Xt!==null;)nt=(D=Xt).child,D.tag===22&&D.memoizedState!==null?E3(w):nt!==null?(nt.return=D,Xt=nt):E3(w);for(;P!==null;)Xt=P,x3(P),P=P.sibling;Xt=w,q0=q,an=lt}b3(p)}else 8772&w.subtreeFlags&&P!==null?(P.return=w,Xt=P):b3(p)}}function b3(p){for(;Xt!==null;){var y=Xt;if(8772&y.flags){var x=y.alternate;try{if(8772&y.flags)switch(y.tag){case 0:case 11:case 15:an||K0(5,y);break;case 1:var E=y.stateNode;if(4&y.flags&&!an)if(x===null)E.componentDidMount();else{var w=y.elementType===y.type?x.memoizedProps:Ia(y.type,x.memoizedProps);E.componentDidUpdate(w,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var P=y.updateQueue;P!==null&&gG(y,P,E);break;case 3:var D=y.updateQueue;if(D!==null){if(x=null,y.child!==null)switch(y.child.tag){case 5:x=et(y.child.stateNode);break;case 1:x=y.child.stateNode}gG(y,D,x)}break;case 5:var q=y.stateNode;x===null&&4&y.flags&&tf(q,y.type,y.memoizedProps,y);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(G&&y.memoizedState===null){var nt=y.alternate;if(nt!==null){var lt=nt.memoizedState;if(lt!==null){var vt=lt.dehydrated;vt!==null&&sZ(vt)}}}break;default:throw Error(s(163))}an||512&y.flags&&mR(y)}catch(Ct){Er(y,y.return,Ct)}}if(y===p){Xt=null;break}if((x=y.sibling)!==null){x.return=y.return,Xt=x;break}Xt=y.return}}function T3(p){for(;Xt!==null;){var y=Xt;if(y===p){Xt=null;break}var x=y.sibling;if(x!==null){x.return=y.return,Xt=x;break}Xt=y.return}}function E3(p){for(;Xt!==null;){var y=Xt;try{switch(y.tag){case 0:case 11:case 15:var x=y.return;try{K0(4,y)}catch(nt){Er(y,x,nt)}break;case 1:var E=y.stateNode;if(typeof E.componentDidMount=="function"){var w=y.return;try{E.componentDidMount()}catch(nt){Er(y,w,nt)}}var P=y.return;try{mR(y)}catch(nt){Er(y,P,nt)}break;case 5:var D=y.return;try{mR(y)}catch(nt){Er(y,D,nt)}}}catch(nt){Er(y,y.return,nt)}if(y===p){Xt=null;break}var q=y.sibling;if(q!==null){q.return=y.return,Xt=q;break}Xt=y.return}}var Z0=0,Q0=1,J0=2,tx=3,ex=4;if(typeof Symbol=="function"&&Symbol.for){var Yy=Symbol.for;Z0=Yy("selector.component"),Q0=Yy("selector.has_pseudo_class"),J0=Yy("selector.role"),tx=Yy("selector.test_id"),ex=Yy("selector.text")}function bR(p){var y=W(p);if(y!=null){if(typeof y.memoizedProps["data-testname"]!="string")throw Error(s(364));return y}if((p=iu(p))===null)throw Error(s(362));return p.stateNode.current}function TR(p,y){switch(y.$$typeof){case Z0:if(p.type===y.value)return!0;break;case Q0:t:{y=y.value,p=[p,0];for(var x=0;x<p.length;){var E=p[x++],w=p[x++],P=y[w];if(E.tag!==5||!qo(E)){for(;P!=null&&TR(E,P);)P=y[++w];if(w===y.length){y=!0;break t}for(E=E.child;E!==null;)p.push(E,w),E=E.sibling}}y=!1}return y;case J0:if(p.tag===5&&Jl(p.stateNode,y.value))return!0;break;case ex:if((p.tag===5||p.tag===6)&&(p=Py(p))!==null&&0<=p.indexOf(y.value))return!0;break;case tx:if(p.tag===5&&typeof(p=p.memoizedProps["data-testname"])=="string"&&p.toLowerCase()===y.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function ER(p){switch(p.$$typeof){case Z0:return"<"+(U(p.value)||"Unknown")+">";case Q0:return":has("+(ER(p)||"")+")";case J0:return'[role="'+p.value+'"]';case ex:return'"'+p.value+'"';case tx:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function w3(p,y){var x=[];p=[p,0];for(var E=0;E<p.length;){var w=p[E++],P=p[E++],D=y[P];if(w.tag!==5||!qo(w)){for(;D!=null&&TR(w,D);)D=y[++P];if(P===y.length)x.push(w);else for(w=w.child;w!==null;)p.push(w,P),w=w.sibling}}return x}function wR(p,y){if(!Ye)throw Error(s(363));p=w3(p=bR(p),y),y=[],p=Array.from(p);for(var x=0;x<p.length;){var E=p[x++];if(E.tag===5)qo(E)||y.push(E.stateNode);else for(E=E.child;E!==null;)p.push(E),E=E.sibling}return y}var UZ=Math.ceil,rx=a.ReactCurrentDispatcher,IR=a.ReactCurrentOwner,Qr=a.ReactCurrentBatchConfig,de=0,ki=null,hi=null,Yi=0,rs=0,Yd=nu(0),Ci=0,qy=null,of=0,ix=0,RR=0,Ky=null,is=null,CR=0,AR=1/0,hu=null;function qd(){AR=Li()+500}var I3,nx=!1,SR=null,uu=null,sx=!1,lu=null,ax=0,Zy=0,NR=null,ox=-1,hx=0;function on(){return 6&de?Li():ox!==-1?ox:ox=Li()}function fu(p){return 1&p.mode?2&de&&Yi!==0?Yi&-Yi:gZ.transition!==null?(hx===0&&(hx=sG()),hx):(p=De)!==0?p:ut():1}function Ks(p,y,x,E){if(50<Zy)throw Zy=0,NR=null,Error(s(185));My(p,x,E),2&de&&p===ki||(p===ki&&(!(2&de)&&(ix|=x),Ci===4&&cu(p,Yi)),jn(p,E),x===1&&de===0&&!(1&y.mode)&&(qd(),A0&&Ka()))}function jn(p,y){var x=p.callbackNode;(function(w,P){for(var D=w.suspendedLanes,q=w.pingedLanes,nt=w.expirationTimes,lt=w.pendingLanes;0<lt;){var vt=31-Ta(lt),Ct=1<<vt,pt=nt[vt];pt===-1?Ct&D&&!(Ct&q)||(nt[vt]=pZ(Ct,P)):pt<=P&&(w.expiredLanes|=Ct),lt&=~Ct}})(p,y);var E=R0(p,p===ki?Yi:0);if(E===0)x!==null&&oG(x),p.callbackNode=null,p.callbackPriority=0;else if(y=E&-E,p.callbackPriority!==y){if(x!=null&&oG(x),y===1)p.tag===0?function(w){A0=!0,uG(w)}(C3.bind(null,p)):uG(C3.bind(null,p)),ct?bt(function(){!(6&de)&&Ka()}):MI(LI,Ka),x=null;else{switch(aG(E)){case 1:x=LI;break;case 4:x=mZ;break;case 16:default:x=hG;break;case 536870912:x=_Z}x=M3(x,R3.bind(null,p))}p.callbackPriority=y,p.callbackNode=x}}function R3(p,y){if(ox=-1,hx=0,(6&de)!=0)throw Error(s(327));var x=p.callbackNode;if(uf()&&p.callbackNode!==x)return null;var E=R0(p,p===ki?Yi:0);if(E===0)return null;if(30&E||E&p.expiredLanes||y)y=ux(p,E);else{y=E;var w=de;de|=2;var P=N3();for(ki===p&&Yi===y||(hu=null,qd(),hf(p,y));;)try{LZ();break}catch(q){S3(p,q)}VI(),rx.current=P,de=w,hi!==null?y=0:(ki=null,Yi=0,y=Ci)}if(y!==0){if(y===2&&(w=OI(p))!==0&&(E=w,y=PR(p,w)),y===1)throw x=qy,hf(p,0),cu(p,E),jn(p,Li()),x;if(y===6)cu(p,E);else{if(w=p.current.alternate,(30&E)==0&&!function(q){for(var nt=q;;){if(16384&nt.flags){var lt=nt.updateQueue;if(lt!==null&&(lt=lt.stores)!==null)for(var vt=0;vt<lt.length;vt++){var Ct=lt[vt],pt=Ct.getSnapshot;Ct=Ct.value;try{if(!Ea(pt(),Ct))return!1}catch{return!1}}}if(lt=nt.child,16384&nt.subtreeFlags&&lt!==null)lt.return=nt,nt=lt;else{if(nt===q)break;for(;nt.sibling===null;){if(nt.return===null||nt.return===q)return!0;nt=nt.return}nt.sibling.return=nt.return,nt=nt.sibling}}return!0}(w)&&((y=ux(p,E))===2&&(P=OI(p))!==0&&(E=P,y=PR(p,P)),y===1))throw x=qy,hf(p,0),cu(p,E),jn(p,Li()),x;switch(p.finishedWork=w,p.finishedLanes=E,y){case 0:case 1:throw Error(s(345));case 2:case 5:Kd(p,is,hu);break;case 3:if(cu(p,E),(130023424&E)===E&&10<(y=CR+500-Li())){if(R0(p,0)!==0)break;if(((w=p.suspendedLanes)&E)!==E){on(),p.pingedLanes|=p.suspendedLanes&w;break}p.timeoutHandle=ht(Kd.bind(null,p,is,hu),y);break}Kd(p,is,hu);break;case 4:if(cu(p,E),(4194240&E)===E)break;for(y=p.eventTimes,w=-1;0<E;){var D=31-Ta(E);P=1<<D,(D=y[D])>w&&(w=D),E&=~P}if(E=w,10<(E=(120>(E=Li()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*UZ(E/1960))-E)){p.timeoutHandle=ht(Kd.bind(null,p,is,hu),E);break}Kd(p,is,hu);break;default:throw Error(s(329))}}}return jn(p,Li()),p.callbackNode===x?R3.bind(null,p):null}function PR(p,y){var x=Ky;return p.current.memoizedState.isDehydrated&&(hf(p,y).flags|=256),(p=ux(p,y))!==2&&(y=is,is=x,y!==null&&OR(y)),p}function OR(p){is===null?is=p:is.push.apply(is,p)}function cu(p,y){for(y&=~RR,y&=~ix,p.suspendedLanes|=y,p.pingedLanes&=~y,p=p.expirationTimes;0<y;){var x=31-Ta(y),E=1<<x;p[x]=-1,y&=~E}}function C3(p){if(6&de)throw Error(s(327));uf();var y=R0(p,0);if(!(1&y))return jn(p,Li()),null;var x=ux(p,y);if(p.tag!==0&&x===2){var E=OI(p);E!==0&&(y=E,x=PR(p,E))}if(x===1)throw x=qy,hf(p,0),cu(p,y),jn(p,Li()),x;if(x===6)throw Error(s(345));return p.finishedWork=p.current.alternate,p.finishedLanes=y,Kd(p,is,hu),jn(p,Li()),null}function A3(p){lu!==null&&lu.tag===0&&!(6&de)&&uf();var y=de;de|=1;var x=Qr.transition,E=De;try{if(Qr.transition=null,De=1,p)return p()}finally{De=E,Qr.transition=x,!(6&(de=y))&&Ka()}}function FR(){rs=Yd.current,br(Yd)}function hf(p,y){p.finishedWork=null,p.finishedLanes=0;var x=p.timeoutHandle;if(x!==M&&(p.timeoutHandle=M,I(x)),hi!==null)for(x=hi.return;x!==null;){var E=x;switch(kI(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&SI();break;case 3:jd(),br(Hn),br(nn),tR();break;case 5:QI(E);break;case 4:jd();break;case 13:case 19:br(zr);break;case 10:jI(E.type._context);break;case 22:case 23:FR()}x=x.return}if(ki=p,hi=p=du(p.current,null),Yi=rs=y,Ci=0,qy=null,RR=ix=of=0,is=Ky=null,sf!==null){for(y=0;y<sf.length;y++)if((E=(x=sf[y]).interleaved)!==null){x.interleaved=null;var w=E.next,P=x.pending;if(P!==null){var D=P.next;P.next=w,E.next=D}x.pending=E}sf=null}return p}function S3(p,y){for(;;){var x=hi;try{if(VI(),D0.current=V0,$0){for(var E=Rr.memoizedState;E!==null;){var w=E.queue;w!==null&&(w.pending=null),E=E.next}$0=!1}if(af=0,Gi=Bi=Rr=null,Dy=!1,$y=0,IR.current=null,x===null||x.return===null){Ci=1,qy=y,hi=null;break}t:{var P=p,D=x.return,q=x,nt=y;if(y=Yi,q.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var lt=nt,vt=q,Ct=vt.tag;if(!(1&vt.mode)&&(Ct===0||Ct===11||Ct===15)){var pt=vt.alternate;pt?(vt.updateQueue=pt.updateQueue,vt.memoizedState=pt.memoizedState,vt.lanes=pt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Tt=QG(D);if(Tt!==null){Tt.flags&=-257,JG(Tt,D,q,0,y),1&Tt.mode&&ZG(P,lt,y),nt=lt;var Yt=(y=Tt).updateQueue;if(Yt===null){var se=new Set;se.add(nt),y.updateQueue=se}else Yt.add(nt);break t}if(!(1&y)){ZG(P,lt,y),UR();break t}nt=Error(s(426))}else if(Tr&&1&q.mode){var yt=QG(D);if(yt!==null){!(65536&yt.flags)&&(yt.flags|=256),JG(yt,D,q,0,y),HI(zd(nt,q));break t}}P=nt=zd(nt,q),Ci!==4&&(Ci=2),Ky===null?Ky=[P]:Ky.push(P),P=D;do{switch(P.tag){case 3:P.flags|=65536,y&=-y,P.lanes|=y,_G(P,qG(0,nt,y));break t;case 1:q=nt;var rt=P.type,ot=P.stateNode;if(!(128&P.flags)&&(typeof rt.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(uu===null||!uu.has(ot)))){P.flags|=65536,y&=-y,P.lanes|=y,_G(P,KG(P,q,y));break t}}P=P.return}while(P!==null)}O3(x)}catch(_t){y=_t,hi===x&&x!==null&&(hi=x=x.return);continue}break}}function N3(){var p=rx.current;return rx.current=V0,p===null?V0:p}function UR(){Ci!==0&&Ci!==3&&Ci!==2||(Ci=4),ki===null||!(268435455&of)&&!(268435455&ix)||cu(ki,Yi)}function ux(p,y){var x=de;de|=2;var E=N3();for(ki===p&&Yi===y||(hu=null,hf(p,y));;)try{MZ();break}catch(w){S3(p,w)}if(VI(),de=x,rx.current=E,hi!==null)throw Error(s(261));return ki=null,Yi=0,Ci}function MZ(){for(;hi!==null;)P3(hi)}function LZ(){for(;hi!==null&&!vZ();)P3(hi)}function P3(p){var y=I3(p.alternate,p,rs);p.memoizedProps=p.pendingProps,y===null?O3(p):hi=y,IR.current=null}function O3(p){var y=p;do{var x=y.alternate;if(p=y.return,(32768&y.flags)==0){if((x=NZ(x,y,rs))!==null)return void(hi=x)}else{if((x=PZ(x,y))!==null)return x.flags&=32767,void(hi=x);if(p===null)return Ci=6,void(hi=null);p.flags|=32768,p.subtreeFlags=0,p.deletions=null}if((y=y.sibling)!==null)return void(hi=y);hi=y=p}while(y!==null);Ci===0&&(Ci=5)}function Kd(p,y,x){var E=De,w=Qr.transition;try{Qr.transition=null,De=1,function(P,D,q,nt){do uf();while(lu!==null);if(6&de)throw Error(s(327));q=P.finishedWork;var lt=P.finishedLanes;if(q===null)return null;if(P.finishedWork=null,P.finishedLanes=0,q===P.current)throw Error(s(177));P.callbackNode=null,P.callbackPriority=0;var vt=q.lanes|q.childLanes;if(function(Tt,Yt){var se=Tt.pendingLanes&~Yt;Tt.pendingLanes=Yt,Tt.suspendedLanes=0,Tt.pingedLanes=0,Tt.expiredLanes&=Yt,Tt.mutableReadLanes&=Yt,Tt.entangledLanes&=Yt,Yt=Tt.entanglements;var yt=Tt.eventTimes;for(Tt=Tt.expirationTimes;0<se;){var rt=31-Ta(se),ot=1<<rt;Yt[rt]=0,yt[rt]=-1,Tt[rt]=-1,se&=~ot}}(P,vt),P===ki&&(hi=ki=null,Yi=0),!(2064&q.subtreeFlags)&&!(2064&q.flags)||sx||(sx=!0,M3(hG,function(){return uf(),null})),vt=(15990&q.flags)!=0,(15990&q.subtreeFlags)!=0||vt){vt=Qr.transition,Qr.transition=null;var Ct=De;De=1;var pt=de;de|=4,IR.current=null,function(Tt,Yt){for(Y(Tt.containerInfo),Xt=Yt;Xt!==null;)if(Yt=(Tt=Xt).child,(1028&Tt.subtreeFlags)!=0&&Yt!==null)Yt.return=Tt,Xt=Yt;else for(;Xt!==null;){Tt=Xt;try{var se=Tt.alternate;if(1024&Tt.flags)switch(Tt.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(se!==null){var yt=se.memoizedProps,rt=se.memoizedState,ot=Tt.stateNode,_t=ot.getSnapshotBeforeUpdate(Tt.elementType===Tt.type?yt:Ia(Tt.type,yt),rt);ot.__reactInternalSnapshotBeforeUpdate=_t}break;case 3:N&&XK(Tt.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Qt){Er(Tt,Tt.return,Qt)}if((Yt=Tt.sibling)!==null){Yt.return=Tt.return,Xt=Yt;break}Xt=Tt.return}se=p3,p3=!1}(P,q),g3(q,P),z(P.containerInfo),P.current=q,FZ(q),yZ(),de=pt,De=Ct,Qr.transition=vt}else P.current=q;if(sx&&(sx=!1,lu=P,ax=lt),vt=P.pendingLanes,vt===0&&(uu=null),function(Tt){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(C0,Tt,void 0,(128&Tt.current.flags)==128)}catch{}}(q.stateNode),jn(P,Li()),D!==null)for(nt=P.onRecoverableError,q=0;q<D.length;q++)lt=D[q],nt(lt.value,{componentStack:lt.stack,digest:lt.digest});if(nx)throw nx=!1,P=SR,SR=null,P;1&ax&&P.tag!==0&&uf(),vt=P.pendingLanes,1&vt?P===NR?Zy++:(Zy=0,NR=P):Zy=0,Ka()}(p,y,x,E)}finally{Qr.transition=w,De=E}return null}function uf(){if(lu!==null){var p=aG(ax),y=Qr.transition,x=De;try{if(Qr.transition=null,De=16>p?16:p,lu===null)var E=!1;else{if(p=lu,lu=null,ax=0,(6&de)!=0)throw Error(s(331));var w=de;for(de|=4,Xt=p.current;Xt!==null;){var P=Xt,D=P.child;if(16&Xt.flags){var q=P.deletions;if(q!==null){for(var nt=0;nt<q.length;nt++){var lt=q[nt];for(Xt=lt;Xt!==null;){var vt=Xt;switch(vt.tag){case 0:case 11:case 15:Wy(8,vt,P)}var Ct=vt.child;if(Ct!==null)Ct.return=vt,Xt=Ct;else for(;Xt!==null;){var pt=(vt=Xt).sibling,Tt=vt.return;if(v3(vt),vt===lt){Xt=null;break}if(pt!==null){pt.return=Tt,Xt=pt;break}Xt=Tt}}}var Yt=P.alternate;if(Yt!==null){var se=Yt.child;if(se!==null){Yt.child=null;do{var yt=se.sibling;se.sibling=null,se=yt}while(se!==null)}}Xt=P}}if(2064&P.subtreeFlags&&D!==null)D.return=P,Xt=D;else t:for(;Xt!==null;){if(2048&(P=Xt).flags)switch(P.tag){case 0:case 11:case 15:Wy(9,P,P.return)}var rt=P.sibling;if(rt!==null){rt.return=P.return,Xt=rt;break t}Xt=P.return}}var ot=p.current;for(Xt=ot;Xt!==null;){var _t=(D=Xt).child;if(2064&D.subtreeFlags&&_t!==null)_t.return=D,Xt=_t;else t:for(D=ot;Xt!==null;){if(2048&(q=Xt).flags)try{switch(q.tag){case 0:case 11:case 15:K0(9,q)}}catch(je){Er(q,q.return,je)}if(q===D){Xt=null;break t}var Qt=q.sibling;if(Qt!==null){Qt.return=q.return,Xt=Qt;break t}Xt=q.return}}if(de=w,Ka(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(C0,p)}catch{}E=!0}return E}finally{De=x,Qr.transition=y}}return!1}function F3(p,y,x){p=ou(p,y=qG(0,y=zd(x,y),1),1),y=on(),p!==null&&(My(p,1,y),jn(p,y))}function Er(p,y,x){if(p.tag===3)F3(p,p,x);else for(;y!==null;){if(y.tag===3){F3(y,p,x);break}if(y.tag===1){var E=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(uu===null||!uu.has(E))){y=ou(y,p=KG(y,p=zd(x,p),1),1),p=on(),y!==null&&(My(y,1,p),jn(y,p));break}}y=y.return}}function BZ(p,y,x){var E=p.pingCache;E!==null&&E.delete(y),y=on(),p.pingedLanes|=p.suspendedLanes&x,ki===p&&(Yi&x)===x&&(Ci===4||Ci===3&&(130023424&Yi)===Yi&&500>Li()-CR?hf(p,0):RR|=x),jn(p,y)}function U3(p,y){y===0&&(1&p.mode?(y=PI,!(130023424&(PI<<=1))&&(PI=4194304)):y=1);var x=on();(p=Qa(p,y))!==null&&(My(p,y,x),jn(p,x))}function GZ(p){var y=p.memoizedState,x=0;y!==null&&(x=y.retryLane),U3(p,x)}function kZ(p,y){var x=0;switch(p.tag){case 13:var E=p.stateNode,w=p.memoizedState;w!==null&&(x=w.retryLane);break;case 19:E=p.stateNode;break;default:throw Error(s(314))}E!==null&&E.delete(y),U3(p,x)}function M3(p,y){return MI(p,y)}function DZ(p,y,x,E){this.tag=p,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(p,y,x,E){return new DZ(p,y,x,E)}function MR(p){return!(!(p=p.prototype)||!p.isReactComponent)}function du(p,y){var x=p.alternate;return x===null?((x=Zs(p.tag,y,p.key,p.mode)).elementType=p.elementType,x.type=p.type,x.stateNode=p.stateNode,x.alternate=p,p.alternate=x):(x.pendingProps=y,x.type=p.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=14680064&p.flags,x.childLanes=p.childLanes,x.lanes=p.lanes,x.child=p.child,x.memoizedProps=p.memoizedProps,x.memoizedState=p.memoizedState,x.updateQueue=p.updateQueue,y=p.dependencies,x.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},x.sibling=p.sibling,x.index=p.index,x.ref=p.ref,x}function lx(p,y,x,E,w,P){var D=2;if(E=p,typeof p=="function")MR(p)&&(D=1);else if(typeof p=="string")D=5;else t:switch(p){case u:return lf(x.children,w,P,y);case l:D=8,w|=8;break;case f:return(p=Zs(12,x,y,2|w)).elementType=f,p.lanes=P,p;case _:return(p=Zs(13,x,y,w)).elementType=_,p.lanes=P,p;case m:return(p=Zs(19,x,y,w)).elementType=m,p.lanes=P,p;case b:return fx(x,w,P,y);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case c:D=10;break t;case d:D=9;break t;case v:D=11;break t;case g:D=14;break t;case T:D=16,E=null;break t}throw Error(s(130,p==null?p:typeof p,""))}return(y=Zs(D,x,y,w)).elementType=p,y.type=E,y.lanes=P,y}function lf(p,y,x,E){return(p=Zs(7,p,E,y)).lanes=x,p}function fx(p,y,x,E){return(p=Zs(22,p,E,y)).elementType=b,p.lanes=x,p.stateNode={isHidden:!1},p}function LR(p,y,x){return(p=Zs(6,p,null,y)).lanes=x,p}function BR(p,y,x){return(y=Zs(4,p.children!==null?p.children:[],p.key,y)).lanes=x,y.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},y}function $Z(p,y,x,E,w){this.tag=y,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=M,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FI(0),this.expirationTimes=FI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FI(0),this.identifierPrefix=E,this.onRecoverableError=w,G&&(this.mutableSourceEagerHydrationData=null)}function L3(p,y,x,E,w,P,D,q,nt){return p=new $Z(p,y,x,q,nt),y===1?(y=1,P===!0&&(y|=8)):y=0,P=Zs(3,null,null,y),p.current=P,P.stateNode=p,P.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},YI(P),p}function B3(p){if(!p)return su;t:{if($(p=p._reactInternals)!==p||p.tag!==1)throw Error(s(170));var y=p;do{switch(y.tag){case 3:y=y.stateNode.context;break t;case 1:if(ts(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break t}}y=y.return}while(y!==null);throw Error(s(171))}if(p.tag===1){var x=p.type;if(ts(x))return iG(p,x,y)}return y}function G3(p){var y=p._reactInternals;if(y===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return(p=it(y))===null?null:p.stateNode}function k3(p,y){if((p=p.memoizedState)!==null&&p.dehydrated!==null){var x=p.retryLane;p.retryLane=x!==0&&x<y?x:y}}function cx(p,y){k3(p,y),(p=p.alternate)&&k3(p,y)}function HZ(p){return(p=it(p))===null?null:p.stateNode}function XZ(){return null}return I3=function(p,y,x){if(p!==null)if(p.memoizedProps!==y.pendingProps||Hn.current)Xn=!0;else{if(!(p.lanes&x)&&!(128&y.flags))return Xn=!1,function(Ct,pt,Tt){switch(pt.tag){case 3:a3(pt),Dd();break;case 5:CG(pt);break;case 1:ts(pt.type)&&I0(pt);break;case 4:ZI(pt,pt.stateNode.containerInfo);break;case 10:vG(0,pt.type._context,pt.memoizedProps.value);break;case 13:var Yt=pt.memoizedState;if(Yt!==null)return Yt.dehydrated!==null?(Qe(zr,1&zr.current),pt.flags|=128,null):Tt&pt.child.childLanes?h3(Ct,pt,Tt):(Qe(zr,1&zr.current),(Ct=Jo(Ct,pt,Tt))!==null?Ct.sibling:null);Qe(zr,1&zr.current);break;case 19:if(Yt=(Tt&pt.childLanes)!=0,(128&Ct.flags)!=0){if(Yt)return l3(Ct,pt,Tt);pt.flags|=128}var se=pt.memoizedState;if(se!==null&&(se.rendering=null,se.tail=null,se.lastEffect=null),Qe(zr,zr.current),Yt)break;return null;case 22:case 23:return pt.lanes=0,i3(Ct,pt,Tt)}return Jo(Ct,pt,Tt)}(p,y,x);Xn=(131072&p.flags)!=0}else Xn=!1,Tr&&1048576&y.flags&&lG(y,N0,y.index);switch(y.lanes=0,y.tag){case 2:var E=y.type;Y0(p,y),p=y.pendingProps;var w=Bd(y,nn.current);Hd(y,x),w=iR(null,y,E,p,w,x);var P=nR();return y.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,ts(E)?(P=!0,I0(y)):P=!1,y.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,YI(y),w.updater=B0,y.stateNode=w,w._reactInternals=y,KI(y,E,p,x),y=cR(null,y,E,!0,P,x)):(y.tag=0,Tr&&P&&GI(y),Vn(null,y,w,x),y=y.child),y;case 16:E=y.elementType;t:{switch(Y0(p,y),p=y.pendingProps,E=(w=E._init)(E._payload),y.type=E,w=y.tag=function(Ct){if(typeof Ct=="function")return MR(Ct)?1:0;if(Ct!=null){if((Ct=Ct.$$typeof)===v)return 11;if(Ct===g)return 14}return 2}(E),p=Ia(E,p),w){case 0:y=fR(null,y,E,p,x);break t;case 1:y=s3(null,y,E,p,x);break t;case 11:y=t3(null,y,E,p,x);break t;case 14:y=e3(null,y,E,Ia(E.type,p),x);break t}throw Error(s(306,E,""))}return y;case 0:return E=y.type,w=y.pendingProps,fR(p,y,E,w=y.elementType===E?w:Ia(E,w),x);case 1:return E=y.type,w=y.pendingProps,s3(p,y,E,w=y.elementType===E?w:Ia(E,w),x);case 3:t:{if(a3(y),p===null)throw Error(s(387));E=y.pendingProps,w=(P=y.memoizedState).element,mG(p,y),L0(y,E,null,x);var D=y.memoizedState;if(E=D.element,G&&P.isDehydrated){if(P={element:E,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},y.updateQueue.baseState=P,y.memoizedState=P,256&y.flags){y=o3(p,y,E,x,w=zd(Error(s(423)),y));break t}if(E!==w){y=o3(p,y,E,x,w=zd(Error(s(424)),y));break t}for(G&&(zs=QK(y.stateNode.containerInfo),es=y,Tr=!0,wa=null,Ly=!1),x=RG(y,null,E,x),y.child=x;x;)x.flags=-3&x.flags|4096,x=x.sibling}else{if(Dd(),E===w){y=Jo(p,y,x);break t}Vn(p,y,E,x)}y=y.child}return y;case 5:return CG(y),p===null&&$I(y),E=y.type,w=y.pendingProps,P=p!==null?p.memoizedProps:null,D=w.children,It(E,w)?D=null:P!==null&&It(E,P)&&(y.flags|=32),n3(p,y),Vn(p,y,D,x),y.child;case 6:return p===null&&$I(y),null;case 13:return h3(p,y,x);case 4:return ZI(y,y.stateNode.containerInfo),E=y.pendingProps,p===null?y.child=Xd(y,null,E,x):Vn(p,y,E,x),y.child;case 11:return E=y.type,w=y.pendingProps,t3(p,y,E,w=y.elementType===E?w:Ia(E,w),x);case 7:return Vn(p,y,y.pendingProps,x),y.child;case 8:case 12:return Vn(p,y,y.pendingProps.children,x),y.child;case 10:t:{if(E=y.type._context,w=y.pendingProps,P=y.memoizedProps,vG(0,E,D=w.value),P!==null)if(Ea(P.value,D)){if(P.children===w.children&&!Hn.current){y=Jo(p,y,x);break t}}else for((P=y.child)!==null&&(P.return=y);P!==null;){var q=P.dependencies;if(q!==null){D=P.child;for(var nt=q.firstContext;nt!==null;){if(nt.context===E){if(P.tag===1){(nt=Qo(-1,x&-x)).tag=2;var lt=P.updateQueue;if(lt!==null){var vt=(lt=lt.shared).pending;vt===null?nt.next=nt:(nt.next=vt.next,vt.next=nt),lt.pending=nt}}P.lanes|=x,(nt=P.alternate)!==null&&(nt.lanes|=x),zI(P.return,x,y),q.lanes|=x;break}nt=nt.next}}else if(P.tag===10)D=P.type===y.type?null:P.child;else if(P.tag===18){if((D=P.return)===null)throw Error(s(341));D.lanes|=x,(q=D.alternate)!==null&&(q.lanes|=x),zI(D,x,y),D=P.sibling}else D=P.child;if(D!==null)D.return=P;else for(D=P;D!==null;){if(D===y){D=null;break}if((P=D.sibling)!==null){P.return=D.return,D=P;break}D=D.return}P=D}Vn(p,y,w.children,x),y=y.child}return y;case 9:return w=y.type,E=y.pendingProps.children,Hd(y,x),E=E(w=Ws(w)),y.flags|=1,Vn(p,y,E,x),y.child;case 14:return w=Ia(E=y.type,y.pendingProps),e3(p,y,E,w=Ia(E.type,w),x);case 15:return r3(p,y,y.type,y.pendingProps,x);case 17:return E=y.type,w=y.pendingProps,w=y.elementType===E?w:Ia(E,w),Y0(p,y),y.tag=1,ts(E)?(p=!0,I0(y)):p=!1,Hd(y,x),TG(y,E,w),KI(y,E,w,x),cR(null,y,E,!0,p,x);case 19:return l3(p,y,x);case 22:return i3(p,y,x)}throw Error(s(156,y.tag))},t.attemptContinuousHydration=function(p){if(p.tag===13){var y=Qa(p,134217728);y!==null&&Ks(y,p,134217728,on()),cx(p,134217728)}},t.attemptDiscreteHydration=function(p){if(p.tag===13){var y=Qa(p,1);y!==null&&Ks(y,p,1,on()),cx(p,1)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var y=fu(p),x=Qa(p,y);x!==null&&Ks(x,p,y,on()),cx(p,y)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var y=p.stateNode;if(y.current.memoizedState.isDehydrated){var x=Uy(y.pendingLanes);x!==0&&(UI(y,1|x),jn(y,Li()),!(6&de)&&(qd(),Ka()))}break;case 13:A3(function(){var E=Qa(p,1);if(E!==null){var w=on();Ks(E,p,1,w)}}),cx(p,1)}},t.batchedUpdates=function(p,y){var x=de;de|=1;try{return p(y)}finally{(de=x)===0&&(qd(),A0&&Ka())}},t.createComponentSelector=function(p){return{$$typeof:Z0,value:p}},t.createContainer=function(p,y,x,E,w,P,D){return L3(p,y,!1,null,0,E,0,P,D)},t.createHasPseudoClassSelector=function(p){return{$$typeof:Q0,value:p}},t.createHydrationContainer=function(p,y,x,E,w,P,D,q,nt){return(p=L3(x,E,!0,p,0,P,0,q,nt)).context=B3(null),x=p.current,(P=Qo(E=on(),w=fu(x))).callback=y??null,ou(x,P,w),p.current.lanes=w,My(p,w,E),jn(p,E),p},t.createPortal=function(p,y,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:E==null?null:""+E,children:p,containerInfo:y,implementation:x}},t.createRoleSelector=function(p){return{$$typeof:J0,value:p}},t.createTestNameSelector=function(p){return{$$typeof:tx,value:p}},t.createTextSelector=function(p){return{$$typeof:ex,value:p}},t.deferredUpdates=function(p){var y=De,x=Qr.transition;try{return Qr.transition=null,De=16,p()}finally{De=y,Qr.transition=x}},t.discreteUpdates=function(p,y,x,E,w){var P=De,D=Qr.transition;try{return Qr.transition=null,De=1,p(y,x,E,w)}finally{De=P,Qr.transition=D,de===0&&qd()}},t.findAllNodes=wR,t.findBoundingRects=function(p,y){if(!Ye)throw Error(s(363));y=wR(p,y),p=[];for(var x=0;x<y.length;x++)p.push(Ny(y[x]));for(y=p.length-1;0<y;y--)for(var E=(x=p[y]).x,w=E+x.width,P=x.y,D=P+x.height,q=y-1;0<=q;q--)if(y!==q){var nt=p[q],lt=nt.x,vt=lt+nt.width,Ct=nt.y,pt=Ct+nt.height;if(E>=lt&&P>=Ct&&w<=vt&&D<=pt){p.splice(y,1);break}if(!(E!==lt||x.width!==nt.width||pt<P||Ct>D)){Ct>P&&(nt.height+=Ct-P,nt.y=P),pt<D&&(nt.height=D-Ct),p.splice(y,1);break}if(!(P!==Ct||x.height!==nt.height||vt<E||lt>w)){lt>E&&(nt.width+=lt-E,nt.x=E),vt<w&&(nt.width=w-lt),p.splice(y,1);break}}return p},t.findHostInstance=G3,t.findHostInstanceWithNoPortals=function(p){return(p=(p=H(p))!==null?j(p):null)===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return G3(p)},t.flushControlled=function(p){var y=de;de|=1;var x=Qr.transition,E=De;try{Qr.transition=null,De=1,p()}finally{De=E,Qr.transition=x,(de=y)===0&&(qd(),Ka())}},t.flushPassiveEffects=uf,t.flushSync=A3,t.focusWithin=function(p,y){if(!Ye)throw Error(s(363));for(y=w3(p=bR(p),y),y=Array.from(y),p=0;p<y.length;){var x=y[p++];if(!qo(x)){if(x.tag===5&&Oy(x.stateNode))return!0;for(x=x.child;x!==null;)y.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return De},t.getFindAllNodesFailureDescription=function(p,y){if(!Ye)throw Error(s(363));var x=0,E=[];p=[bR(p),0];for(var w=0;w<p.length;){var P=p[w++],D=p[w++],q=y[D];if((P.tag!==5||!qo(P))&&(TR(P,q)&&(E.push(ER(q)),++D>x&&(x=D)),D<y.length))for(P=P.child;P!==null;)p.push(P,D),P=P.sibling}if(x<y.length){for(p=[];x<y.length;x++)p.push(ER(y[x]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+p.join(" > ")}return null},t.getPublicRootInstance=function(p){return(p=p.current).child?p.child.tag===5?et(p.child.stateNode):p.child.stateNode:null},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:HZ,findFiberByHostInstance:p.findFiberByHostInstance||XZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(y.isDisabled||!y.supportsFiber)p=!0;else{try{C0=y.inject(p),qa=y}catch{}p=!!y.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,y,x,E){if(!Ye)throw Error(s(363));p=wR(p,y);var w=x0(p,x,E).disconnect;return{disconnect:function(){w()}}},t.registerMutableSourceForHydration=function(p,y){var x=y._getVersion;x=x(y._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[y,x]:p.mutableSourceEagerHydrationData.push(y,x)},t.runWithPriority=function(p,y){var x=De;try{return De=p,y()}finally{De=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,y,x,E){var w=y.current,P=on(),D=fu(w);return x=B3(x),y.context===null?y.context=x:y.pendingContext=x,(y=Qo(P,D)).payload={element:p},(E=E===void 0?null:E)!==null&&(y.callback=E),(p=ou(w,y,D))!==null&&(Ks(p,w,D,P),M0(p,w,D)),D},t}),L4}({get exports(){return nO},set exports(r){nO=r}}).exports=mht();var _ht=Vot(nO),y9={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},aO={},Zx={get exports(){return aO},set exports(r){aO=r}};(function(){var r,t,e,i,n,s;typeof performance<"u"&&performance!==null&&performance.now?Zx.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Zx.exports=function(){return(r()-n)/1e6},t=process.hrtime,i=(r=function(){var a;return 1e9*(a=t())[0]+a[1]})(),s=1e9*process.uptime(),n=i-s):Date.now?(Zx.exports=function(){return Date.now()-e},e=Date.now()):(Zx.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(Xot);var k4,yv={},df={};({get exports(){return yv},set exports(r){yv=r}}).exports=(k4||(k4=1,df.ConcurrentRoot=1,df.ContinuousEventPriority=4,df.DefaultEventPriority=16,df.DiscreteEventPriority=1,df.IdleEventPriority=536870912,df.LegacyRoot=0),df);var ght={};function QC(r,t){r.addChild&&(r.addChild(t),typeof t.didMount=="function"&&t.didMount(t,r))}function m9(r,t){var e,i,n;(e=r.willUnmount)===null||e===void 0||e.call(r,r,t),((i=r.config)===null||i===void 0?void 0:i.destroyChildren)!==!1&&(n=r.children)!==null&&n!==void 0&&n.length&&Uh(r.children).forEach(function(s){m9(s,r)})}function D4(r,t){var e;m9(t,r),r.removeChild(t);var i=(e=t.config)!==null&&e!==void 0?e:{},n=i.destroy,s=n===void 0||n,a=i.destroyChildren,o=a===void 0||a,h=i.destroyTexture,u=h!==void 0&&h,l=i.destroyBaseTexture,f=l!==void 0&&l;s&&t.destroy({children:o,texture:u,baseTexture:f})}function $4(r,t,e){Zr(t!==e,"pixi-react: PixiFiber cannot insert node before itself"),r.children.indexOf(t)!==-1&&r.removeChild(t);var i=r.getChildIndex(e);r.addChildAt(t,i)}var H4=null,ka=_ht({getRootHostContext:function(){return ght},getChildHostContext:function(r){return r},getChildHostContextForEventComponent:function(r){return r},getPublicInstance:function(r){return r},getCurrentEventPriority:function(){return function(){var r,t;if(typeof window>"u")return yv.DefaultEventPriority;switch((r=window)===null||r===void 0||(t=r.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return yv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return yv.ContinuousEventPriority;default:return yv.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(r){var t,e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=dht[r];if(typeof s=="function"&&(t=s(n,i)),!t){var a=v9[r];a&&((t=a.create(i,{root:n})).didMount=a.didMount?a.didMount.bind(t):void 0,t.willUnmount=a.willUnmount?a.willUnmount.bind(t):void 0,t.applyProps=a.applyProps?a.applyProps.bind(t):void 0,t.config=a.config)}return t&&(t.__reactpixi={root:n},(typeof((e=t)===null||e===void 0?void 0:e.applyProps)=="function"?t.applyProps:zo)(t,{},i)),t},hideInstance:function(r){r.visible=!1},unhideInstance:function(r,t){var e=t==null||!t.hasOwnProperty("visible")||t.visible;r.visible=e},finalizeInitialChildren:function(r,t,e){return!1},prepareUpdate:function(r,t,e,i,n,s){return H4=function(a,o,h,u){var l=null;for(var f in h)!u.hasOwnProperty(f)&&h.hasOwnProperty(f)&&h[f]!==null&&(f===rO||(l||(l=[]),l.push(f,null)));for(var c in u){var d=u[c],v=h!==null?h[c]:void 0;!u.hasOwnProperty(c)||d===v||d===null&&v===null||c===rO||(l||(l=[]),l.push(c,d))}return l}(0,0,e,i)},shouldSetTextContent:function(r,t){return!1},shouldDeprioritizeSubtree:function(r,t){var e=t.alpha===void 0||t.alpha>0,i=t.renderable===void 0||t.renderable===!0,n=t.visible===void 0||t.visible===!0;return!(e&&i&&n)},createTextInstance:function(r,t,e){Zr(!1,'pixi-react: Error trying to add text node "'.concat(r,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(r,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:aO,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=QC.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=QC.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=QC.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=D4.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=D4.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:$4,insertInContainerBefore:function(){for(var r,t,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];var s=$4.apply(null,i);return(r=i[0].__reactpixi)===null||r===void 0||(t=r.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(r,t,e,i,n){var s,a,o=r&&r.applyProps;typeof o!="function"&&(o=zo),(o(r,i,n)||H4)&&((s=r.__reactpixi)===null||s===void 0||(a=s.root)===null||a===void 0||a.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(r,t,e,i,n){},commitTextUpdate:function(r,t,e){},resetTextContent:function(r){},clearContainer:function(r){},getFundamentalComponentInstance:function(r){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(r){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},getInstanceFromNode:function(r){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(r){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(r){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(r){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(r){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(r){}}),xht=y9.dependencies["react-dom"].replace(/[^0-9.]/g,""),bht=y9.name;ka.injectIntoDevTools({bundleType:0,version:xht,rendererPackageName:bht,findHostInstanceByFiber:ka.findHostInstance});var pl=new Map;function _9(r){if(Zr(Ls.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `PIXI.Container`."),pl.has(r)){var t=pl.get(r).pixiFiberContainer;ka.updateContainer(null,t,void 0,function(){pl.delete(r)})}}function g9(r){Zr(Ls.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=pl.get(r);if(Zr(!t,"Pixi React: createRoot should only be called once"),!t){var e=ka.createContainer(r);t={pixiFiberContainer:e,reactRoot:{render:function(i){return ka.updateContainer(i,e,void 0),ka.getPublicRootInstance(e)},unmount:function(){_9(r),pl.delete(r)}}},pl.set(r,t)}return t.reactRoot}function Tht(r,t,e){var i;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),e!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),pl.has(t)?i=pl.get(t).reactRoot:i=g9(t),i.render(r)}function Eht(r){_9(r)}function hg(){return hg=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},hg.apply(this,arguments)}function wht(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Iht(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,c9(i.key),i)}}function rh(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Ew(r,t){return Ew=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Ew(r,t)}function Rht(r,t){if(t&&(Us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rh(r)}function ww(r){return ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ww(r)}var rI=$a.createContext(null),x9=rI.Provider,b9=rI.Consumer,Cht=function(r){var t=$a.forwardRef(function(e,i){return $a.createElement(b9,null,function(n){return $a.createElement(r,hg({},e,{ref:i,app:n}))})});return t.displayName="withPIXIApp(".concat(r.displayName||r.name,")"),t};function Aht(r){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var e,i=ww(r);if(t){var n=ww(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return Rht(this,e)}}function X4(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Qx(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(e),!0).forEach(function(i){ti(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):X4(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var V4=function(){},T9={width:gr.number,height:gr.number,onMount:gr.func,onUnmount:gr.func,raf:gr.bool,renderOnComponentChange:gr.bool,children:gr.node,options:gr.shape({autoStart:gr.bool,width:gr.number,height:gr.number,useContextAlpha:gr.bool,backgroundAlpha:gr.number,autoDensity:gr.bool,antialias:gr.bool,preserveDrawingBuffer:gr.bool,resolution:gr.number,forceCanvas:gr.bool,backgroundColor:gr.number,clearBeforeRender:gr.bool,powerPreference:gr.string,sharedTicker:gr.bool,sharedLoader:gr.bool,resizeTo:function(r,t){var e=r[t];e&&Zr(e===window||e instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Us(e),", expect `window` or an `HTMLElement`."))},view:function(r,t,e){var i=r[t];i&&Zr(i instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Us(i),", supplied to ").concat(e,", expected `<canvas> Element`"))}})},Sht={width:800,height:600,onMount:V4,onUnmount:V4,raf:!0,renderOnComponentChange:!0},oO=function(r){(function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&Ew(s,a)})(n,$a.Component);var t,e,i=Aht(n);function n(){var s;wht(this,n);for(var a=arguments.length,o=new Array(a),h=0;h<a;h++)o[h]=arguments[h];return ti(rh(s=i.call.apply(i,[this].concat(o))),"_canvas",null),ti(rh(s),"_mediaQuery",null),ti(rh(s),"_ticker",null),ti(rh(s),"_needsUpdate",!0),ti(rh(s),"app",null),ti(rh(s),"updateSize",function(){var u=s.props,l=u.width,f=u.height,c=u.options;c!=null&&c.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(l,f)}),ti(rh(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),ti(rh(s),"renderStage",function(){var u=s.props,l=u.renderOnComponentChange;!u.raf&&l&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=n,(e=[{key:"componentDidMount",value:function(){var s=this.props,a=s.onMount,o=s.width,h=s.height,u=s.options,l=s.raf,f=s.renderOnComponentChange;this.app=new eI(Qx(Qx({width:o,height:h,view:this._canvas},u),{},{autoDensity:(u==null?void 0:u.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[l?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=ka.createContainer(this.app.stage),ka.updateContainer(this.getChildren(),this.mountNode,this),a(this.app),u!=null&&u.autoDensity&&window.matchMedia&&(u==null?void 0:u.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),f&&!l&&(this._ticker=new Bn,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,a,o){var h,u=this.props,l=u.width,f=u.height,c=u.raf,d=u.renderOnComponentChange,v=u.options;(v==null?void 0:v.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(v==null?void 0:v.resolution)&&(this.app.renderer.resolution=v.resolution,this.resetInteractionManager()),s.height===f&&s.width===l&&((h=s.options)===null||h===void 0?void 0:h.resolution)===(v==null?void 0:v.resolution)||this.updateSize(),s.raf!==c&&this.app.ticker[c?"start":"stop"](),ka.updateContainer(this.getChildren(),this.mountNode,this),s.width===l&&s.height===f&&s.raf===c&&s.renderOnComponentChange===d&&s.options===v||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return $a.createElement(x9,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,a){console.error("Error occurred in `Stage`."),console.error(s),console.error(a)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),ka.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,a,o=this,h=this.props.options;return h&&h.view?(Zr(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):$a.createElement("canvas",hg({},(s=this.props,a=[].concat(Uh(Object.keys(T9)),Uh(Object.keys(iO))),Object.keys(s).filter(function(u){return!a.includes(u)}).reduce(function(u,l){return Qx(Qx({},u),{},ti({},l,s[l]))},{})),{ref:function(u){return o._canvas=u}}))}}])&&Iht(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),n}();oO.propTypes=T9,oO.defaultProps=Sht;var Nht=oO;function E9(){var r=F.useContext(rI);return Zr(r instanceof eI,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),r}function Pht(r){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],e=E9();Zr(typeof r=="function","`useTick` needs a callback function."),Zr(e instanceof eI,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var i=F.useRef(null);F.useEffect(function(){i.current=r},[r]),F.useEffect(function(){if(t){var n=function(s){return i.current.apply(e.ticker,[s,e.ticker])};return e.ticker.add(n),function(){e.ticker&&e.ticker.remove(n)}}},[t])}function Oht(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hO(r,t,e){return hO=Oht()?Reflect.construct.bind():function(i,n,s){var a=[null];a.push.apply(a,n);var o=new(Function.bind.apply(i,a));return s&&Ew(o,s.prototype),o},hO.apply(null,arguments)}var Fht=["children","apply"];function j4(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Jx(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(e),!0).forEach(function(i){ti(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):j4(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}var Uht=function(r,t){Zr(Us(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var e=Object.keys(t),i=function(n){var s=n.children,a=n.apply,o=Zl(n,Fht),h=F.useRef(F.useMemo(function(){return e.map(function(f){var c,d=(o==null||(c=o[f])===null||c===void 0?void 0:c.construct)||[];return hO(t[f],Uh(d))})},[e])),u=F.useMemo(function(){return e.reduce(function(f,c,d){return Jx(Jx({},f),{},ti({},c,h.current[d]))},{})},[e]),l=F.useMemo(function(){return Object.keys(o).filter(p9(d9(e))).reduce(function(f,c){return Jx(Jx({},f),{},ti({},c,o[c]))},{})},[o,e]);return e.forEach(function(f,c){return Object.assign(h.current[c],o[f])}),a&&function(){for(var f=arguments.length,c=new Array(f),d=0;d<f;d++)c[d]=arguments[d];return c.every(function(v){return typeof v=="function"})}(a)&&a.call(r,u),$a.createElement(r,hg({},l,{filters:h.current}),s)};return i.displayName="FilterWrapper",i.propTypes={children:gr.node,apply:gr.func},i},Mht=Qn.BitmapText,Lht=Qn.Container,Bht=Qn.Graphics,Ght=Qn.NineSlicePlane,kht=Qn.ParticleContainer,Dht=Qn.Sprite,$ht=Qn.AnimatedSprite,Hht=Qn.Text,Xht=Qn.TilingSprite,Vht=Qn.SimpleMesh,jht=Qn.SimpleRope;const zht=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:$ht,AppConsumer:b9,AppContext:rI,AppProvider:x9,BitmapText:Mht,Container:Lht,Graphics:Bht,NineSlicePlane:Ght,ParticleContainer:kht,PixiComponent:pht,PixiFiber:ka,SimpleMesh:Vht,SimpleRope:jht,Sprite:Dht,Stage:Nht,TYPES:Qn,Text:Hht,TilingSprite:Xht,applyDefaultProps:zo,createRoot:g9,eventHandlers:Tw,render:Tht,unmountComponentAtNode:Eht,useApp:E9,useTick:Pht,withFilters:Uht,withPixiApp:Cht},Symbol.toStringTag,{value:"Module"})),Wht=Bj(zht);z1.exports=Wht;var Rt=z1.exports;class Yht{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Bn.system.add(this.tickerUpdate,this,py.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Bn.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Bu=new Yht;class iI{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=iI.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Xe,this.page=new Xe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Iw extends iI{constructor(){super(...arguments),this.client=new Xe,this.movement=new Xe,this.offset=new Xe,this.global=new Xe,this.screen=new Xe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,n,s,a,o,h,u,l,f,c,d,v,_){throw new Error("Method not implemented.")}}class Oa extends Iw{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ov extends Iw{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ov.DOM_DELTA_PIXEL=0,Ov.DOM_DELTA_LINE=1,Ov.DOM_DELTA_PAGE=2;const qht=2048,Kht=new Xe,JC=new Xe;class Zht{constructor(t){this.dispatch=new c0,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,n)=>i.priority-n.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,n=e.length;i<n;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Bu.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",n=this[i](this.rootTarget,this.rootTarget.eventMode,Kht.set(t,e),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(t.currentTarget=i[n],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(e)?e:[e];for(let s=i.length-1;s>=0;s--)n.forEach(a=>{t.currentTarget=i[s],this.notifyTarget(t,a)})}propagationPath(t){const e=[t];for(let i=0;i<qht&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,n,s,a=!1){let o=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Bu.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let f=l.length-1;f>=0;f--){const c=l[f],d=this.hitTestMoveRecursive(c,this._isInteractive(e)?e:c.eventMode,i,n,s,a||s(t,i));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const v=t.isInteractive();(d.length>0||v)&&(v&&this._allInteractiveElements.push(t),d.push(t)),this._hitElements.length===0&&(this._hitElements=d),o=!0}}}const h=this._isInteractive(e),u=t.isInteractive();return h&&u&&this._allInteractiveElements.push(t),a||this._hitElements.length>0?null:o?this._hitElements:h&&!s(t,i)&&n(t,i)?u?[t]:[]:null}hitTestRecursive(t,e,i,n,s){if(this._interactivePrune(t)||s(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Bu.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let u=h.length-1;u>=0;u--){const l=h[u],f=this.hitTestRecursive(l,this._isInteractive(e)?e:l.eventMode,i,n,s);if(f){if(f.length>0&&!f[f.length-1].parent)continue;const c=t.isInteractive();return(f.length>0||c)&&f.push(t),f}}}const a=this._isInteractive(e),o=t.isInteractive();return a&&n(t,i)?o?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,JC),!t.hitArea.contains(JC.x,JC.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((i=n.containsPoint)!=null&&i.call(n,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var s,a;e=e??t.type;const i=`on${e}`;(a=(s=t.currentTarget)[i])==null||a.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const n=e.button===2;this.dispatchEvent(e,n?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var h,u;if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((h=n.overTargets)==null?void 0:h.length)>0&&s!==e.target){const l=t.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(t,l,s);if(this.dispatchEvent(f,"pointerout"),i&&this.dispatchEvent(f,"mouseout"),!e.composedPath().includes(s)){const c=this.createPointerEvent(t,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!e.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),i&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(f)}if(s!==e.target){const l=t.type==="mousemove"?"mouseover":"pointerover",f=this.clonePointerEvent(e,l);this.dispatchEvent(f,"pointerover"),i&&this.dispatchEvent(f,"mouseover");let c=s==null?void 0:s.parent;for(;c&&c!==this.rootTarget.parent&&c!==e.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const d=this.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==s&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),i&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(f)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(e,"pointermove"),o&&a.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),o&&a.push("globaltouchmove")),i&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),o&&a.push("globalmousemove"),this.cursor=(u=e.target)==null?void 0:u.cursor),a.length>0&&this.all(e,a),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var a;if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(a=i.target)==null?void 0:a.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(e.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const a=this.createPointerEvent(t,"pointerleave",n);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;e.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const o=i.button===2;this.dispatchEvent(i,o?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let a=s;if(s&&!i.composedPath().includes(s)){let o=s;for(;o&&!i.composedPath().includes(o);){if(i.currentTarget=o,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const h=i.button===2;this.notifyTarget(i,h?"rightupoutside":"mouseupoutside")}o=o.parent}delete n.pressTargetsByButton[t.button],a=o}if(a){const o=this.clonePointerEvent(i,"click");o.target=a,o.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:o.target,timeStamp:e});const h=n.clicksByButton[t.button];if(h.target===o.target&&e-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=o.target,h.timeStamp=e,o.detail=h.clickCount,o.pointerType==="mouse"){const u=o.button===2;this.dispatchEvent(o,u?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Oa)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Ov)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const n=this.allocateEvent(Oa);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof e=="string"&&(n.type=e),n}createWheelEvent(t){const e=this.allocateEvent(Ov);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(Oa);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Oa&&e instanceof Oa&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof Iw&&e instanceof Iw&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let n=0,s=i.length;n<s&&!t.propagationImmediatelyStopped;n++)i[n].once&&t.currentTarget.removeListener(e,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,t)}}const Qht=1,Jht={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},uO=class lO{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Zht(null),Bu.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Oa(null),this.rootWheelEvent=new Ov(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...lO.defaultEventFeatures},{set:(e,i,n)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),e[i]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,lO._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,n=e.length;i<n;i++){const s=e[i],a=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Bu.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let s=0,a=n.length;s<a;s++){const o=this.bootstrapEvent(this.rootPointerEvent,n[s]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,n=e.length;i<n;i++){const s=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Bu.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Bu.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Bu.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*s,t.y=(i-n.top)*(this.domElement.height/n.height)*s}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,n=t.changedTouches.length;i<n;i++){const s=t.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,e.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=Qht),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Jht[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};uO.extension={name:"events",type:[jt.RendererSystem,jt.CanvasRendererSystem]},uO.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let fO=uO;te.add(fO);function z4(r){return r==="dynamic"||r==="static"}const tut={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??z4(fO.defaultEventMode)},set interactive(r){He("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??fO.defaultEventMode},set eventMode(r){this._internalInteractive=z4(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof e=="object"?e.signal:void 0,s=typeof e=="object"?e.once===!0:!1,a=typeof t=="function"?void 0:t;r=i?`${r}capture`:r;const o=typeof t=="function"?t:t.handleEvent,h=this;n&&n.addEventListener("abort",()=>{h.off(r,o,a)}),s?h.once(r,o,a):h.on(r,o,a)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,n=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,n)},dispatchEvent(r){if(!(r instanceof iI))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};vy.mixin(tut);function eut(r){var t=this.constructor;return this.then(function(e){return t.resolve(r()).then(function(){return e})},function(e){return t.resolve(r()).then(function(){return t.reject(e)})})}function rut(r){var t=this;return new t(function(e,i){if(!(r&&typeof r.length<"u"))return i(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(r);if(n.length===0)return e([]);var s=n.length;function a(h,u){if(u&&(typeof u=="object"||typeof u=="function")){var l=u.then;if(typeof l=="function"){l.call(u,function(f){a(h,f)},function(f){n[h]={status:"rejected",reason:f},--s===0&&e(n)});return}}n[h]={status:"fulfilled",value:u},--s===0&&e(n)}for(var o=0;o<n.length;o++)a(o,n[o])})}function w9(r,t){this.name="AggregateError",this.errors=r,this.message=t||""}w9.prototype=Error.prototype;function iut(r){var t=this;return new t(function(e,i){if(!(r&&typeof r.length<"u"))return i(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(r);if(n.length===0)return i();for(var s=[],a=0;a<n.length;a++)try{t.resolve(n[a]).then(e).catch(function(o){s.push(o),s.length===n.length&&i(new w9(s,"All promises were rejected"))})}catch(o){i(o)}})}var nut=setTimeout;function I9(r){return!!(r&&typeof r.length<"u")}function sut(){}function aut(r,t){return function(){r.apply(t,arguments)}}function Vr(r){if(!(this instanceof Vr))throw new TypeError("Promises must be constructed via new");if(typeof r!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],C9(r,this)}function R9(r,t){for(;r._state===3;)r=r._value;if(r._state===0){r._deferreds.push(t);return}r._handled=!0,Vr._immediateFn(function(){var e=r._state===1?t.onFulfilled:t.onRejected;if(e===null){(r._state===1?cO:ug)(t.promise,r._value);return}var i;try{i=e(r._value)}catch(n){ug(t.promise,n);return}cO(t.promise,i)})}function cO(r,t){try{if(t===r)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var e=t.then;if(t instanceof Vr){r._state=3,r._value=t,dO(r);return}else if(typeof e=="function"){C9(aut(e,t),r);return}}r._state=1,r._value=t,dO(r)}catch(i){ug(r,i)}}function ug(r,t){r._state=2,r._value=t,dO(r)}function dO(r){r._state===2&&r._deferreds.length===0&&Vr._immediateFn(function(){r._handled||Vr._unhandledRejectionFn(r._value)});for(var t=0,e=r._deferreds.length;t<e;t++)R9(r,r._deferreds[t]);r._deferreds=null}function out(r,t,e){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof t=="function"?t:null,this.promise=e}function C9(r,t){var e=!1;try{r(function(i){e||(e=!0,cO(t,i))},function(i){e||(e=!0,ug(t,i))})}catch(i){if(e)return;e=!0,ug(t,i)}}Vr.prototype.catch=function(r){return this.then(null,r)};Vr.prototype.then=function(r,t){var e=new this.constructor(sut);return R9(this,new out(r,t,e)),e};Vr.prototype.finally=eut;Vr.all=function(r){return new Vr(function(t,e){if(!I9(r))return e(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(r);if(i.length===0)return t([]);var n=i.length;function s(o,h){try{if(h&&(typeof h=="object"||typeof h=="function")){var u=h.then;if(typeof u=="function"){u.call(h,function(l){s(o,l)},e);return}}i[o]=h,--n===0&&t(i)}catch(l){e(l)}}for(var a=0;a<i.length;a++)s(a,i[a])})};Vr.any=iut;Vr.allSettled=rut;Vr.resolve=function(r){return r&&typeof r=="object"&&r.constructor===Vr?r:new Vr(function(t){t(r)})};Vr.reject=function(r){return new Vr(function(t,e){e(r)})};Vr.race=function(r){return new Vr(function(t,e){if(!I9(r))return e(new TypeError("Promise.race accepts an array"));for(var i=0,n=r.length;i<n;i++)Vr.resolve(r[i]).then(t,e)})};Vr._immediateFn=typeof setImmediate=="function"&&function(r){setImmediate(r)}||function(r){nut(r,0)};Vr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var W4=Object.getOwnPropertySymbols,hut=Object.prototype.hasOwnProperty,uut=Object.prototype.propertyIsEnumerable;function lut(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function fut(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;var i=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(s){n[s]=s}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var cut=fut()?Object.assign:function(r,t){for(var e,i=lut(r),n,s=1;s<arguments.length;s++){e=Object(arguments[s]);for(var a in e)hut.call(e,a)&&(i[a]=e[a]);if(W4){n=W4(e);for(var o=0;o<n.length;o++)uut.call(e,n[o])&&(i[n[o]]=e[n[o]])}}return i};const dut=Sd(cut);/*!
 * @pixi/polyfill - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */self.Promise||(self.Promise=Vr);Object.assign||(Object.assign=dut);var put=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(self.performance&&self.performance.now)){var vut=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-vut}}var tA=Date.now(),Y4=["ms","moz","webkit","o"];for(var eA=0;eA<Y4.length&&!self.requestAnimationFrame;++eA){var rA=Y4[eA];self.requestAnimationFrame=self[rA+"RequestAnimationFrame"],self.cancelAnimationFrame=self[rA+"CancelAnimationFrame"]||self[rA+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(r){if(typeof r!="function")throw new TypeError(r+"is not a function");var t=Date.now(),e=put+tA-t;return e<0&&(e=0),tA=t,self.setTimeout(function(){tA=Date.now(),r(performance.now())},e)});self.cancelAnimationFrame||(self.cancelAnimationFrame=function(r){return clearTimeout(r)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});self.ArrayBuffer||(self.ArrayBuffer=Array);self.Float32Array||(self.Float32Array=Array);self.Uint32Array||(self.Uint32Array=Array);self.Uint16Array||(self.Uint16Array=Array);self.Uint8Array||(self.Uint8Array=Array);self.Int32Array||(self.Int32Array=Array);/*!
 * @pixi/settings - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Kr=J_(self.navigator);function yut(r){var t=!0;if(Kr.tablet||Kr.phone){if(Kr.apple.device){var e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){var i=parseInt(e[1],10);i<11&&(t=!1)}}if(Kr.android.device){var e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){var i=parseInt(e[1],10);i<7&&(t=!1)}}}return t?r:4}function mut(){return!Kr.apple.device}/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var q4;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(q4||(q4={}));var K4;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(K4||(K4={}));var Z4;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Z4||(Z4={}));var Q4;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(Q4||(Q4={}));var J4;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(J4||(J4={}));var t$;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(t$||(t$={}));var e$;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(e$||(e$={}));var r$;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(r$||(r$={}));var i$;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(i$||(i$={}));var pO;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(pO||(pO={}));var vO;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(vO||(vO={}));var yO;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(yO||(yO={}));var n$;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(n$||(n$={}));var s$;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(s$||(s$={}));var mO;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(mO||(mO={}));var F_;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(F_||(F_={}));var a$;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(a$||(a$={}));var _O;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(_O||(_O={}));var o$;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(o$||(o$={}));var A={MIPMAP_TEXTURES:yO.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:_O.NONE,SPRITE_MAX_TEXTURES:yut(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:mO.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:vO.CLAMP,SCALE_MODE:pO.LINEAR,PRECISION_VERTEX:F_.HIGH,PRECISION_FRAGMENT:Kr.apple.device?F_.HIGH:F_.MEDIUM,CAN_UPLOAD_SAME_BUFFER:mut(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},A9={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(h,u,l){this.fn=h,this.context=u,this.once=l||!1}function s(h,u,l,f,c){if(typeof l!="function")throw new TypeError("The listener must be a function");var d=new n(l,f||h,c),v=e?e+u:u;return h._events[v]?h._events[v].fn?h._events[v]=[h._events[v],d]:h._events[v].push(d):(h._events[v]=d,h._eventsCount++),h}function a(h,u){--h._eventsCount===0?h._events=new i:delete h._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],l,f;if(this._eventsCount===0)return u;for(f in l=this._events)t.call(l,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},o.prototype.listeners=function(u){var l=e?e+u:u,f=this._events[l];if(!f)return[];if(f.fn)return[f.fn];for(var c=0,d=f.length,v=new Array(d);c<d;c++)v[c]=f[c].fn;return v},o.prototype.listenerCount=function(u){var l=e?e+u:u,f=this._events[l];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,l,f,c,d,v){var _=e?e+u:u;if(!this._events[_])return!1;var m=this._events[_],g=arguments.length,T,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,l),!0;case 3:return m.fn.call(m.context,l,f),!0;case 4:return m.fn.call(m.context,l,f,c),!0;case 5:return m.fn.call(m.context,l,f,c,d),!0;case 6:return m.fn.call(m.context,l,f,c,d,v),!0}for(b=1,T=new Array(g-1);b<g;b++)T[b-1]=arguments[b];m.fn.apply(m.context,T)}else{var S=m.length,R;for(b=0;b<S;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,l);break;case 3:m[b].fn.call(m[b].context,l,f);break;case 4:m[b].fn.call(m[b].context,l,f,c);break;default:if(!T)for(R=1,T=new Array(g-1);R<g;R++)T[R-1]=arguments[R];m[b].fn.apply(m[b].context,T)}}return!0},o.prototype.on=function(u,l,f){return s(this,u,l,f,!1)},o.prototype.once=function(u,l,f){return s(this,u,l,f,!0)},o.prototype.removeListener=function(u,l,f,c){var d=e?e+u:u;if(!this._events[d])return this;if(!l)return a(this,d),this;var v=this._events[d];if(v.fn)v.fn===l&&(!c||v.once)&&(!f||v.context===f)&&a(this,d);else{for(var _=0,m=[],g=v.length;_<g;_++)(v[_].fn!==l||c&&!v[_].once||f&&v[_].context!==f)&&m.push(v[_]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var l;return u?(l=e?e+u:u,this._events[l]&&a(this,l)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(A9);var _ut=A9.exports;const re=Sd(_ut);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var h$;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(h$||(h$={}));var u$;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(u$||(u$={}));var l$;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(l$||(l$={}));var zn;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(zn||(zn={}));var f$;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(f$||(f$={}));var c$;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(c$||(c$={}));var d$;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(d$||(d$={}));var p$;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(p$||(p$={}));var v$;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(v$||(v$={}));var y$;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(y$||(y$={}));var m$;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(m$||(m$={}));var _$;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(_$||(_$={}));var g$;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(g$||(g$={}));var x$;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(x$||(x$={}));var b$;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(b$||(b$={}));var T$;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(T$||(T$={}));var E$;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(E$||(E$={}));var w$;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(w$||(w$={}));var I$;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(I$||(I$={}));/*!
 * @pixi/utils - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var mv={parse:_nt,format:xnt,resolve:gnt};A.RETINA_PREFIX=/@([0-9\.]+)x/;A.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var R$=!1,C$="6.1.2";function $s(r){var t;if(!R$){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=[`
 %c %c %c PixiJS `+C$+" - ✰ "+r+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(t=self.console).log.apply(t,e)}else self.console&&self.console.log("PixiJS "+C$+" - "+r+" - http://www.pixijs.com/");R$=!0}}var iA;function Hs(){return typeof iA>"u"&&(iA=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:A.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!!(i&&i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch{return!1}}()),iA}var gut="#f0f8ff",xut="#faebd7",but="#00ffff",Tut="#7fffd4",Eut="#f0ffff",wut="#f5f5dc",Iut="#ffe4c4",Rut="#000000",Cut="#ffebcd",Aut="#0000ff",Sut="#8a2be2",Nut="#a52a2a",Put="#deb887",Out="#5f9ea0",Fut="#7fff00",Uut="#d2691e",Mut="#ff7f50",Lut="#6495ed",But="#fff8dc",Gut="#dc143c",kut="#00ffff",Dut="#00008b",$ut="#008b8b",Hut="#b8860b",Xut="#a9a9a9",Vut="#006400",jut="#a9a9a9",zut="#bdb76b",Wut="#8b008b",Yut="#556b2f",qut="#ff8c00",Kut="#9932cc",Zut="#8b0000",Qut="#e9967a",Jut="#8fbc8f",tlt="#483d8b",elt="#2f4f4f",rlt="#2f4f4f",ilt="#00ced1",nlt="#9400d3",slt="#ff1493",alt="#00bfff",olt="#696969",hlt="#696969",ult="#1e90ff",llt="#b22222",flt="#fffaf0",clt="#228b22",dlt="#ff00ff",plt="#dcdcdc",vlt="#f8f8ff",ylt="#daa520",mlt="#ffd700",_lt="#808080",glt="#008000",xlt="#adff2f",blt="#808080",Tlt="#f0fff0",Elt="#ff69b4",wlt="#cd5c5c",Ilt="#4b0082",Rlt="#fffff0",Clt="#f0e68c",Alt="#fff0f5",Slt="#e6e6fa",Nlt="#7cfc00",Plt="#fffacd",Olt="#add8e6",Flt="#f08080",Ult="#e0ffff",Mlt="#fafad2",Llt="#d3d3d3",Blt="#90ee90",Glt="#d3d3d3",klt="#ffb6c1",Dlt="#ffa07a",$lt="#20b2aa",Hlt="#87cefa",Xlt="#778899",Vlt="#778899",jlt="#b0c4de",zlt="#ffffe0",Wlt="#00ff00",Ylt="#32cd32",qlt="#faf0e6",Klt="#ff00ff",Zlt="#800000",Qlt="#66cdaa",Jlt="#0000cd",tft="#ba55d3",eft="#9370db",rft="#3cb371",ift="#7b68ee",nft="#00fa9a",sft="#48d1cc",aft="#c71585",oft="#191970",hft="#f5fffa",uft="#ffe4e1",lft="#ffe4b5",fft="#ffdead",cft="#000080",dft="#fdf5e6",pft="#808000",vft="#6b8e23",yft="#ffa500",mft="#ff4500",_ft="#da70d6",gft="#eee8aa",xft="#98fb98",bft="#afeeee",Tft="#db7093",Eft="#ffefd5",wft="#ffdab9",Ift="#cd853f",Rft="#ffc0cb",Cft="#dda0dd",Aft="#b0e0e6",Sft="#800080",Nft="#663399",Pft="#ff0000",Oft="#bc8f8f",Fft="#4169e1",Uft="#8b4513",Mft="#fa8072",Lft="#f4a460",Bft="#2e8b57",Gft="#fff5ee",kft="#a0522d",Dft="#c0c0c0",$ft="#87ceeb",Hft="#6a5acd",Xft="#708090",Vft="#708090",jft="#fffafa",zft="#00ff7f",Wft="#4682b4",Yft="#d2b48c",qft="#008080",Kft="#d8bfd8",Zft="#ff6347",Qft="#40e0d0",Jft="#ee82ee",tct="#f5deb3",ect="#ffffff",rct="#f5f5f5",ict="#ffff00",nct="#9acd32",sct={aliceblue:gut,antiquewhite:xut,aqua:but,aquamarine:Tut,azure:Eut,beige:wut,bisque:Iut,black:Rut,blanchedalmond:Cut,blue:Aut,blueviolet:Sut,brown:Nut,burlywood:Put,cadetblue:Out,chartreuse:Fut,chocolate:Uut,coral:Mut,cornflowerblue:Lut,cornsilk:But,crimson:Gut,cyan:kut,darkblue:Dut,darkcyan:$ut,darkgoldenrod:Hut,darkgray:Xut,darkgreen:Vut,darkgrey:jut,darkkhaki:zut,darkmagenta:Wut,darkolivegreen:Yut,darkorange:qut,darkorchid:Kut,darkred:Zut,darksalmon:Qut,darkseagreen:Jut,darkslateblue:tlt,darkslategray:elt,darkslategrey:rlt,darkturquoise:ilt,darkviolet:nlt,deeppink:slt,deepskyblue:alt,dimgray:olt,dimgrey:hlt,dodgerblue:ult,firebrick:llt,floralwhite:flt,forestgreen:clt,fuchsia:dlt,gainsboro:plt,ghostwhite:vlt,goldenrod:ylt,gold:mlt,gray:_lt,green:glt,greenyellow:xlt,grey:blt,honeydew:Tlt,hotpink:Elt,indianred:wlt,indigo:Ilt,ivory:Rlt,khaki:Clt,lavenderblush:Alt,lavender:Slt,lawngreen:Nlt,lemonchiffon:Plt,lightblue:Olt,lightcoral:Flt,lightcyan:Ult,lightgoldenrodyellow:Mlt,lightgray:Llt,lightgreen:Blt,lightgrey:Glt,lightpink:klt,lightsalmon:Dlt,lightseagreen:$lt,lightskyblue:Hlt,lightslategray:Xlt,lightslategrey:Vlt,lightsteelblue:jlt,lightyellow:zlt,lime:Wlt,limegreen:Ylt,linen:qlt,magenta:Klt,maroon:Zlt,mediumaquamarine:Qlt,mediumblue:Jlt,mediumorchid:tft,mediumpurple:eft,mediumseagreen:rft,mediumslateblue:ift,mediumspringgreen:nft,mediumturquoise:sft,mediumvioletred:aft,midnightblue:oft,mintcream:hft,mistyrose:uft,moccasin:lft,navajowhite:fft,navy:cft,oldlace:dft,olive:pft,olivedrab:vft,orange:yft,orangered:mft,orchid:_ft,palegoldenrod:gft,palegreen:xft,paleturquoise:bft,palevioletred:Tft,papayawhip:Eft,peachpuff:wft,peru:Ift,pink:Rft,plum:Cft,powderblue:Aft,purple:Sft,rebeccapurple:Nft,red:Pft,rosybrown:Oft,royalblue:Fft,saddlebrown:Uft,salmon:Mft,sandybrown:Lft,seagreen:Bft,seashell:Gft,sienna:kft,silver:Dft,skyblue:$ft,slateblue:Hft,slategray:Xft,slategrey:Vft,snow:jft,springgreen:zft,steelblue:Wft,tan:Yft,teal:qft,thistle:Kft,tomato:Zft,turquoise:Qft,violet:Jft,wheat:tct,white:ect,whitesmoke:rct,yellow:ict,yellowgreen:nct};function ai(r,t){return t===void 0&&(t=[]),t[0]=(r>>16&255)/255,t[1]=(r>>8&255)/255,t[2]=(r&255)/255,t}function $n(r){var t=r.toString(16);return t="000000".substr(0,6-t.length)+t,"#"+t}function SL(r){return typeof r=="string"&&(r=sct[r.toLowerCase()]||r,r[0]==="#"&&(r=r.substr(1))),parseInt(r,16)}function act(){for(var r=[],t=[],e=0;e<32;e++)r[e]=e,t[e]=e;r[zn.NORMAL_NPM]=zn.NORMAL,r[zn.ADD_NPM]=zn.ADD,r[zn.SCREEN_NPM]=zn.SCREEN,t[zn.NORMAL]=zn.NORMAL_NPM,t[zn.ADD]=zn.ADD_NPM,t[zn.SCREEN]=zn.SCREEN_NPM;var i=[];return i.push(t),i.push(r),i}var Jn=act();function S9(r,t){return Jn[t?1:0][r]}function oct(r,t,e,i){return e=e||new Float32Array(4),i||i===void 0?(e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t):(e[0]=r[0],e[1]=r[1],e[2]=r[2]),e[3]=t,e}function In(r,t){if(t===1)return(t*255<<24)+r;if(t===0)return 0;var e=r>>16&255,i=r>>8&255,n=r&255;return e=e*t+.5|0,i=i*t+.5|0,n=n*t+.5|0,(t*255<<24)+(e<<16)+(i<<8)+n}function N9(r,t,e,i){return e=e||new Float32Array(4),e[0]=(r>>16&255)/255,e[1]=(r>>8&255)/255,e[2]=(r&255)/255,(i||i===void 0)&&(e[0]*=t,e[1]*=t,e[2]*=t),e[3]=t,e}function hct(r,t){t===void 0&&(t=null);var e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error("Out buffer length is incorrect, got "+t.length+" and expected "+e);for(var i=0,n=0;i<e;i+=6,n+=4)t[i+0]=n+0,t[i+1]=n+1,t[i+2]=n+2,t[i+3]=n+0,t[i+4]=n+2,t[i+5]=n+3;return t}function nr(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ee(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function er(r){return!(r&r-1)&&!!r}function rr(r){var t=(r>65535?1:0)<<4;r>>>=t;var e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function ce(r,t,e){var i=r.length,n;if(!(t>=i||e===0)){e=t+e>i?i-t:e;var s=i-e;for(n=t;n<s;++n)r[n]=r[n+e];r.length=s}}function cn(r){return r===0?0:r<0?-1:1}var uct=0;function Jt(){return++uct}var A$={};function zt(r,t,e){if(e===void 0&&(e=3),!A$[t]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t+`
Deprecated since v`+r),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",t+`
Deprecated since v`+r),console.warn(i))),A$[t]=!0}}var ir={},dt=Object.create(null),xt=Object.create(null),S$=function(){function r(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||A.RESOLUTION,this.resize(t,e)}return r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},r.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),r}();function P9(r){var t=r.width,e=r.height,i=r.getContext("2d"),n=i.getImageData(0,0,t,e),s=n.data,a=s.length,o={top:null,left:null,right:null,bottom:null},h=null,u,l,f;for(u=0;u<a;u+=4)s[u+3]!==0&&(l=u/4%t,f=~~(u/4/t),o.top===null&&(o.top=f),(o.left===null||l<o.left)&&(o.left=l),(o.right===null||o.right<l)&&(o.right=l+1),(o.bottom===null||o.bottom<f)&&(o.bottom=f));return o.top!==null&&(t=o.right-o.left,e=o.bottom-o.top+1,h=i.getImageData(o.left,o.top,t,e)),{height:e,width:t,data:h}}var tb;function Xs(r,t){if(t===void 0&&(t=self.location),r.indexOf("data:")===0)return"";t=t||self.location,tb||(tb=document.createElement("a")),tb.href=r;var e=mv.parse(tb.href),i=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!i||e.protocol!==t.protocol?"anonymous":""}function Ze(r,t){var e=A.RETINA_PREFIX.exec(r);return e?parseFloat(e[1]):t!==void 0?t:1}/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var lct=Math.PI*2,fct=180/Math.PI,cct=Math.PI/180,gO;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(gO||(gO={}));var Rw=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=gO.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),N$=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),eb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),xO=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new N$;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new N$;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(lct-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),np=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],sp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ap=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],op=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rb=Math.sign;function dct(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=rb(np[r]*np[e]+ap[r]*sp[e]),n=rb(sp[r]*np[e]+op[r]*sp[e]),s=rb(np[r]*ap[e]+ap[r]*op[e]),a=rb(sp[r]*ap[e]+op[r]*op[e]),o=0;o<16;o++)if(np[o]===i&&sp[o]===n&&ap[o]===s&&op[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new xO;h.set(np[r],sp[r],ap[r],op[r],0,0)}}dct();var pct=function(){function r(){this.worldTransform=new xO,this.localTransform=new xO,this.position=new eb(this.onChange,this,0,0),this.scale=new eb(this.onChange,this,1,1),this.pivot=new eb(this.onChange,this,0,0),this.skew=new eb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var P$=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Rw.EMPTY:(t=t||new Rw(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var bO=function(r,t){return bO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},bO(r,t)};function NL(r,t){bO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var lg=function(r){NL(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new pct,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new P$,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Rw),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new Rw),e=this._localBoundsRect),this._localBounds||(this._localBounds=new P$);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new vct),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*fct},set:function(e){this.transform.rotation=e*cct},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),vct=function(r){NL(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(lg);lg.prototype.displayObjectUpdateTransform=lg.prototype.updateTransform;function yct(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var O$=function(r){NL(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(yct),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(lg);O$.prototype.containerUpdateTransform=O$.prototype.updateTransform;/*!
 * @pixi/accessibility - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var mct={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};lg.mixin(mct);var _ct=9,ib=100,gct=0,xct=0,F$=2,U$=1,bct=-1e3,Tct=-1e3,Ect=2,wct=function(){function r(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Kr.tablet||Kr.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=ib+"px",e.style.height=ib+"px",e.style.position="absolute",e.style.top=gct+"px",e.style.left=xct+"px",e.style.zIndex=F$.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(r.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),r.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=U$+"px",e.style.height=U$+"px",e.style.position="absolute",e.style.top=bct+"px",e.style.left=Tct+"px",e.style.zIndex=Ect.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},r.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},r.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)===null||t===void 0||t.appendChild(this.div))},r.prototype.deactivate=function(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)===null||t===void 0||t.removeChild(this.div))},r.prototype.updateAccessibleObjects=function(t){if(!(!t.visible||!t.accessibleChildren)){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},r.prototype.update=function(){var t=performance.now();if(!(Kr.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,n=e.top,s=e.width,a=e.height,o=this.renderer,h=o.width,u=o.height,l=o.resolution,f=s/h*l,c=a/u*l,d=this.div;d.style.left=i+"px",d.style.top=n+"px",d.style.width=h+"px",d.style.height=u+"px";for(var v=0;v<this.children.length;v++){var _=this.children[v];if(_.renderId!==this.renderId)_._accessibleActive=!1,ce(this.children,v,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,v--;else{d=_._accessibleDiv;var m=_.hitArea,g=_.worldTransform;_.hitArea?(d.style.left=(g.tx+m.x*g.a)*f+"px",d.style.top=(g.ty+m.y*g.d)*c+"px",d.style.width=m.width*g.a*f+"px",d.style.height=m.height*g.d*c+"px"):(m=_.getBounds(),this.capHitArea(m),d.style.left=m.x*f+"px",d.style.top=m.y*c+"px",d.style.width=m.width*f+"px",d.style.height=m.height*c+"px",d.title!==_.accessibleTitle&&_.accessibleTitle!==null&&(d.title=_.accessibleTitle),d.getAttribute("aria-label")!==_.accessibleHint&&_.accessibleHint!==null&&d.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==d.title||_.tabIndex!==d.tabIndex)&&(d.title=_.accessibleTitle,d.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},r.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},r.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,n=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)},r.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=ib+"px",e.style.height=ib+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=F$.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title="displayObject "+t.tabIndex),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},r.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"click",n),e.dispatchEvent(i,"pointertap",n),e.dispatchEvent(i,"tap",n)},r.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseover",n)},r.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,n=e.eventData;e.dispatchEvent(i,"mouseout",n)},r.prototype._onKeyDown=function(t){t.keyCode===_ct&&this.activate()},r.prototype._onMouseMove=function(t){t.movementX===0&&t.movementY===0||this.deactivate()},r.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ict=Math.PI*2,Rct=180/Math.PI,Cct=Math.PI/180,TO;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(TO||(TO={}));var Cw=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=TO.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Aw=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),nb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),EO=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Aw;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Aw;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(Ict-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),hp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],up=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],lp=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fp=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],sb=Math.sign;function Act(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=sb(hp[r]*hp[e]+lp[r]*up[e]),n=sb(up[r]*hp[e]+fp[r]*up[e]),s=sb(hp[r]*lp[e]+lp[r]*fp[e]),a=sb(up[r]*lp[e]+fp[r]*fp[e]),o=0;o<16;o++)if(hp[o]===i&&up[o]===n&&lp[o]===s&&fp[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new EO;h.set(hp[r],up[r],lp[r],fp[r],0,0)}}Act();var Sct=function(){function r(){this.worldTransform=new EO,this.localTransform=new EO,this.position=new nb(this.onChange,this,0,0),this.scale=new nb(this.onChange,this,1,1),this.pivot=new nb(this.onChange,this,0,0),this.skew=new nb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var fg;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(fg||(fg={}));var nA=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),M$=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new nA(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=fg.NORMAL),this._addListener(new nA(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=fg.NORMAL),this._addListener(new nA(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var L$=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Cw.EMPTY:(t=t||new Cw(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wO=function(r,t){return wO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},wO(r,t)};function PL(r,t){wO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var cg=function(r){PL(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Sct,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new L$,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Cw),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new Cw),e=this._localBoundsRect),this._localBounds||(this._localBounds=new L$);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new O9),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*Rct},set:function(e){this.transform.rotation=e*Cct},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),O9=function(r){PL(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(cg);cg.prototype.displayObjectUpdateTransform=cg.prototype.updateTransform;function Nct(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var B$=function(r){PL(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Nct),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(cg);B$.prototype.containerUpdateTransform=B$.prototype.updateTransform;/*!
 * @pixi/interaction - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var G$=function(){function r(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Aw,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(r.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),r.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},r.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},r.prototype.reset=function(){this.isPrimary=!1},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var IO=function(r,t){return IO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},IO(r,t)};function Pct(r,t){IO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Oct=function(){function r(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return r.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},r.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},r}(),sA=function(){function r(t){this._pointerId=t,this._flags=r.FLAGS.NONE}return r.prototype._doSet=function(t,e){e?this._flags=this._flags|t:this._flags=this._flags&~t},Object.defineProperty(r.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"none",{get:function(){return this._flags===r.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return(this._flags&r.FLAGS.OVER)!==0},set:function(t){this._doSet(r.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightDown",{get:function(){return(this._flags&r.FLAGS.RIGHT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftDown",{get:function(){return(this._flags&r.FLAGS.LEFT_DOWN)!==0},set:function(t){this._doSet(r.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),r}(),Fct=function(){function r(){this._tempPoint=new Aw}return r.prototype.recursiveFindHit=function(t,e,i,n,s){if(!e||!e.visible)return!1;var a=t.data.global;s=e.interactive||s;var o=!1,h=s,u=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,u=!1)),h=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(n=!1)),u&&e.interactiveChildren&&e.children)for(var l=e.children,f=l.length-1;f>=0;f--){var c=l[f],d=this.recursiveFindHit(t,c,i,n,h);if(d){if(!c.parent)continue;h=!1,d&&(t.target&&(n=!1),o=!0)}}return s&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},r.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)},r}(),Uct={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(r){r?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};cg.mixin(Uct);var ab=1,ob={target:null,data:{global:null}},Mct=function(r){Pct(t,r);function t(e,i){var n=r.call(this)||this;return i=i||{},n.renderer=e,n.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,n.interactionFrequency=i.interactionFrequency||10,n.mouse=new G$,n.mouse.identifier=ab,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[ab]=n.mouse,n.interactionDataPool=[],n.eventData=new Oct,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in self),n.supportsTouchEvents="ontouchstart"in self,n.supportsPointerEvents=!!self.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new Fct,n._tempDisplayObject=new O9,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return Object.defineProperty(t.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),t.prototype.hitTest=function(e,i){return ob.target=null,ob.data.global=e,i||(i=this.lastObjectRendered),this.processInteractive(ob,i,null,!0),ob.target},t.prototype.setTargetElement=function(e,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=i,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(M$.system.add(this.tickerUpdate,this,fg.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(M$.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},t.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var e=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},t.prototype.tickerUpdate=function(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&i.pointerType!=="touch"){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){e=e||"default";var i=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==e){this.currentCursorMode=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":i&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(e);break;case"object":i&&Object.assign(this.interactionDOMElement.style,n);break}else i&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,i,n){(!n.stopPropagationHint||e===n.stopsPropagatingAt)&&(n.currentTarget=e,n.type=i,e.emit(i,n),e[i]&&e[i](n))},t.prototype.delayDispatchEvent=function(e,i,n){this.delayedEvents.push({displayObject:e,eventString:i,eventData:n})},t.prototype.mapPositionToPoint=function(e,i,n){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var a=1/this.resolution;e.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*a,e.y=(n-s.top)*(this.interactionDOMElement.height/s.height)*a},t.prototype.processInteractive=function(e,i,n,s){var a=this.search.findHit(e,i,n,s),o=this.delayedEvents;if(!o.length)return a;e.stopPropagationHint=!1;var h=o.length;this.delayedEvents=[];for(var u=0;u<h;u++){var l=o[u],f=l.displayObject,c=l.eventString,d=l.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return a},t.prototype.onPointerDown=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);if(this.autoPreventDefault&&i[0].isNormalized){var n=e.cancelable||!("cancelable"in e);n&&e.preventDefault()}for(var s=i.length,a=0;a<s;a++){var o=i[a],h=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),o.pointerType==="touch")this.emit("touchstart",u);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var l=o.button===2;this.emit(l?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,i,n){var s=e.data,a=e.data.identifier;if(n){if(i.trackedPointers[a]||(i.trackedPointers[a]=new sA(a)),this.dispatchEvent(i,"pointerdown",e),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",e);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var o=s.button===2;o?i.trackedPointers[a].rightDown=!0:i.trackedPointers[a].leftDown=!0,this.dispatchEvent(i,o?"rightdown":"mousedown",e)}}},t.prototype.onPointerComplete=function(e,i,n){for(var s=this.normalizeToPointerData(e),a=s.length,o=e.target!==this.interactionDOMElement?"outside":"",h=0;h<a;h++){var u=s[h],l=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,l);if(f.data.originalEvent=e,this.processInteractive(f,this.lastObjectRendered,n,i||!o),this.emit(i?"pointercancel":"pointerup"+o,f),u.pointerType==="mouse"||u.pointerType==="pen"){var c=u.button===2;this.emit(c?"rightup"+o:"mouseup"+o,f)}else u.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+o,f),this.releaseInteractionDataForPointerId(u.pointerId))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,i){var n=e.data,s=e.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",e),n.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&e.pointerType==="touch"||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,i,n){var s=e.data,a=e.data.identifier,o=i.trackedPointers[a],h=s.pointerType==="touch",u=s.pointerType==="mouse"||s.pointerType==="pen",l=!1;if(u){var f=s.button===2,c=sA.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,v=o!==void 0&&o.flags&d;n?(this.dispatchEvent(i,f?"rightup":"mouseup",e),v&&(this.dispatchEvent(i,f?"rightclick":"click",e),l=!0)):v&&this.dispatchEvent(i,f?"rightupoutside":"mouseupoutside",e),o&&(f?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(i,"pointerup",e),h&&this.dispatchEvent(i,"touchend",e),o&&((!u||l)&&this.dispatchEvent(i,"pointertap",e),h&&(this.dispatchEvent(i,"tap",e),o.over=!1))):o&&(this.dispatchEvent(i,"pointerupoutside",e),h&&this.dispatchEvent(i,"touchendoutside",e)),o&&o.none&&delete i.trackedPointers[a]},t.prototype.onPointerMove=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var n=i.length,s=0;s<n;s++){var a=i[s],o=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,o);h.data.originalEvent=e,this.processInteractive(h,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",h),a.pointerType==="touch"&&this.emit("touchmove",h),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mousemove",h)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,i,n){var s=e.data,a=s.pointerType==="touch",o=s.pointerType==="mouse"||s.pointerType==="pen";o&&this.processPointerOverOut(e,i,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(i,"pointermove",e),a&&this.dispatchEvent(i,"touchmove",e),o&&this.dispatchEvent(i,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!(this.supportsTouchEvents&&e.pointerType==="touch")){var i=this.normalizeToPointerData(e),n=i[0];n.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);a.data.originalEvent=n,this.processInteractive(a,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",a),n.pointerType==="mouse"||n.pointerType==="pen"?this.emit("mouseout",a):this.releaseInteractionDataForPointerId(s.identifier)}},t.prototype.processPointerOverOut=function(e,i,n){var s=e.data,a=e.data.identifier,o=s.pointerType==="mouse"||s.pointerType==="pen",h=i.trackedPointers[a];n&&!h&&(h=i.trackedPointers[a]=new sA(a)),h!==void 0&&(n&&this.mouseOverRenderer?(h.over||(h.over=!0,this.delayDispatchEvent(i,"pointerover",e),o&&this.delayDispatchEvent(i,"mouseover",e)),o&&this.cursor===null&&(this.cursor=i.cursor)):h.over&&(h.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),o&&this.dispatchEvent(i,"mouseout",e),h.none&&delete i.trackedPointers[a]))},t.prototype.onPointerOver=function(e){var i=this.normalizeToPointerData(e),n=i[0],s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);a.data.originalEvent=n,n.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",a),(n.pointerType==="mouse"||n.pointerType==="pen")&&this.emit("mouseover",a)},t.prototype.getInteractionDataForPointerId=function(e){var i=e.pointerId,n;return i===ab||e.pointerType==="mouse"?n=this.mouse:this.activeInteractionData[i]?n=this.activeInteractionData[i]:(n=this.interactionDataPool.pop()||new G$,n.identifier=i,this.activeInteractionData[i]=n),n.copyEvent(e),n},t.prototype.releaseInteractionDataForPointerId=function(e){var i=this.activeInteractionData[e];i&&(delete this.activeInteractionData[e],i.reset(),this.interactionDataPool.push(i))},t.prototype.configureInteractionEventForDOMEvent=function(e,i,n){return e.data=n,this.mapPositionToPoint(n.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=n.global.x,i.globalY=n.global.y),n.originalEvent=i,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var i=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,s=e.changedTouches.length;n<s;n++){var a=e.changedTouches[n];typeof a.button>"u"&&(a.button=e.touches.length?1:0),typeof a.buttons>"u"&&(a.buttons=e.touches.length?1:0),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,i.push(a)}else if(!self.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof self.PointerEvent))){var o=e;typeof o.isPrimary>"u"&&(o.isPrimary=!0),typeof o.width>"u"&&(o.width=1),typeof o.height>"u"&&(o.height=1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="mouse"),typeof o.pointerId>"u"&&(o.pointerId=ab),typeof o.pressure>"u"&&(o.pressure=.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),o.isNormalized=!0,i.push(o)}else i.push(e);return i},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},t}(re);/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Sw=Math.PI*2,Lct=180/Math.PI,Bct=Math.PI/180,ri;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(ri||(ri={}));var Ke=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=ri.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Gct=function(){function r(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=ri.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i},r.prototype.getBounds=function(){return new Ke(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},r}(),kct=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=ri.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},r.prototype.getBounds=function(){return new Ke(this.x-this.width,this.y-this.height,this.width,this.height)},r.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),FE=function(){function r(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var s=[],a=0,o=n.length;a<o;a++)s.push(n[a].x,n[a].y);n=s}this.points=n,this.type=ri.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e},r.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,s=0,a=n-1;s<n;a=s++){var o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],l=this.points[a*2+1],f=h>e!=l>e&&t<(u-o)*((e-h)/(l-h))+o;f&&(i=!i)}return i},r.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]")},r}(),Dct=function(){function r(t,e,i,n,s){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=ri.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s||(i=t-(this.x+this.width-this.radius),i*i+n*n<=s)||(n=e-(this.y+this.height-this.radius),i*i+n*n<=s)||(i=t-(this.x+this.radius),i*i+n*n<=s))return!0}return!1},r.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},r}(),Qi=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),_v=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Wi=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Qi;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Qi;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(Sw-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),$f=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Hf=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xf=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],RO=[],F9=[],hb=Math.sign;function $ct(){for(var r=0;r<16;r++){var t=[];RO.push(t);for(var e=0;e<16;e++)for(var i=hb($f[r]*$f[e]+Xf[r]*Hf[e]),n=hb(Hf[r]*$f[e]+Vf[r]*Hf[e]),s=hb($f[r]*Xf[e]+Xf[r]*Vf[e]),a=hb(Hf[r]*Xf[e]+Vf[r]*Vf[e]),o=0;o<16;o++)if($f[o]===i&&Hf[o]===n&&Xf[o]===s&&Vf[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new Wi;h.set($f[r],Hf[r],Xf[r],Vf[r],0,0),F9.push(h)}}$ct();var Ar={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return $f[r]},uY:function(r){return Hf[r]},vX:function(r){return Xf[r]},vY:function(r){return Vf[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return RO[r][t]},sub:function(r,t){return RO[r][Ar.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Ar.S:Ar.N:Math.abs(t)*2<=Math.abs(r)?r>0?Ar.E:Ar.W:t>0?r>0?Ar.SE:Ar.SW:r>0?Ar.NE:Ar.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=F9[Ar.inv(t)];n.tx=e,n.ty=i,r.append(n)}},U9=function(){function r(){this.worldTransform=new Wi,this.localTransform=new Wi,this.position=new _v(this.onChange,this,0,0),this.scale=new _v(this.onChange,this,1,1),this.pivot=new _v(this.onChange,this,0,0),this.skew=new _v(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var Nw=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Ke.EMPTY:(t=t||new Ke(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var CO=function(r,t){return CO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},CO(r,t)};function OL(r,t){CO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Pw=function(r){OL(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new U9,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Nw,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ke),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ke),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Nw);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Hct),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*Lct},set:function(e){this.transform.rotation=e*Bct},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),Hct=function(r){OL(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(Pw);Pw.prototype.displayObjectUpdateTransform=Pw.prototype.updateTransform;function Xct(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var _l=function(r){OL(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(Xct),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(Pw);_l.prototype.containerUpdateTransform=_l.prototype.updateTransform;/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Mh||(Mh={}));var dg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(dg||(dg={}));var Ow;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Ow||(Ow={}));var he;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(he||(he={}));var Da;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Da||(Da={}));var Pt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Pt||(Pt={}));var qc;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(qc||(qc={}));var ne;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(ne||(ne={}));var Fw;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(Fw||(Fw={}));var fh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(fh||(fh={}));var Ah;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ah||(Ah={}));var yd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(yd||(yd={}));var gl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(gl||(gl={}));var Tu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Tu||(Tu={}));var AO;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(AO||(AO={}));var yo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(yo||(yo={}));var as;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(as||(as={}));var li;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(li||(li={}));var Oo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Oo||(Oo={}));/*!
 * @pixi/runner - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var J=function(){function r(t){this.items=[],this._name=t,this._aliasCount=0}return r.prototype.emit=function(t,e,i,n,s,a,o,h){if(arguments.length>8)throw new Error("max arguments reached");var u=this,l=u.name,f=u.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][l](t,e,i,n,s,a,o,h);return f===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){var e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},r.prototype.contains=function(t){return this.items.indexOf(t)!==-1},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),r}();Object.defineProperties(J.prototype,{dispatch:{value:J.prototype.emit},run:{value:J.prototype.emit}});/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var my;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(my||(my={}));var aA=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),ea=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new aA(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=my.NORMAL),this._addListener(new aA(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=my.NORMAL),this._addListener(new aA(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}(),Vct=function(){function r(){}return r.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,my.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ea.shared:new ea,t.autoStart&&this.start()},r.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},r}();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Mh.WEBGL:Mh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var SO=[];function M9(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=SO.length-1;n>=0;--n){var s=SO[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var NO=function(r,t){return NO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},NO(r,t)};function sr(r,t){NO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var PO=function(){return PO=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},PO.apply(this,arguments)};function jct(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var pg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),FL=function(r){sr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===gl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(pg),zct={scaleMode:fh.NEAREST,format:Pt.RGBA,alphaMode:gl.NPM},Xi=function(r){sr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof pg)&&(e=M9(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Pt.RGBA,n.type=d||ne.UNSIGNED_BYTE,n.target=v||qc.TEXTURE_2D,n.alphaMode=s!==void 0?s:gl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new FL(e,{width:i,height:n}),o=e instanceof Float32Array?ne.FLOAT:ne.UNSIGNED_BYTE;return new t(a,Object.assign(zct,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),L9=function(r){sr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Xi;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof pg?this.addResourceAt(e[n],n):this.addResourceAt(M9(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(pg),Wct=function(r){sr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=qc.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(L9),xl=function(r){sr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===gl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(pg),B9=function(r){sr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(xl),Yct=function(r){sr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=qc.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=qc.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=qc.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(L9),G9=function(r){sr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;xl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===gl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(xl),qct=function(r){sr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;xl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(xl),Kct=function(r){sr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];xl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=ea.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(ea.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(ea.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(ea.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ea.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(ea.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(xl),Zct=function(r){sr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(xl);SO.push(G9,Zct,B9,Kct,qct,FL,Yct,Wct);var Qct=function(r){sr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===gl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(FL),OO=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=li.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Xi(null,{scaleMode:fh.NEAREST,resolution:1,mipmap:yd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Xi(new Qct(null,{width:this.width,height:this.height}),{scaleMode:fh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:yd.OFF,format:Pt.DEPTH_COMPONENT,type:ne.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),k9=function(r){sr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:li.NONE,i=r.call(this,null,e)||this,i.mipmap=yd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new OO(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Xi),D9=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Ar.add(i,Ar.NW),this.x0=h+a*Ar.uX(i),this.y0=u+o*Ar.uY(i),i=Ar.add(i,2),this.x1=h+a*Ar.uX(i),this.y1=u+o*Ar.uY(i),i=Ar.add(i,2),this.x2=h+a*Ar.uX(i),this.y2=u+o*Ar.uY(i),i=Ar.add(i,2),this.x3=h+a*Ar.uX(i),this.y3=u+o*Ar.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),k$=new D9,Ce=function(r){sr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new Ke(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=k$,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Qi(o.x,o.y):new Qi(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===k$&&(this._uvs=new D9),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Xi(e,i)),h.baseTexture.cacheId=a,Xi.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Xi.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Xi(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof G9&&(o.url=i);var h=new t(a);return n||(n=i),Xi.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Xi.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function Jct(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Ce(new Xi(new B9(r)))}function nI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Ce.EMPTY=new Ce(new Xi);nI(Ce.EMPTY);nI(Ce.EMPTY.baseTexture);Ce.WHITE=Jct();nI(Ce.WHITE);nI(Ce.WHITE.baseTexture);var UL=function(r){sr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new k9(e))},t}(Ce),tdt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=li.NONE);var n=new k9(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new UL(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=li.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||li.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),D$=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=ne.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),edt=0,Oi=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=edt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Oo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Oo.ELEMENT_ARRAY_BUFFER:Oo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),rdt={Float32Array,Uint32Array,Int32Array,Uint8Array};function idt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new rdt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var $$={5126:4,5123:2,5121:1},ndt=0,sdt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},_0=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=ndt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Oi||(e instanceof Array&&(e=new Float32Array(e)),e=new Oi(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new D$(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Oi||(t instanceof Array&&(t=new Uint16Array(t)),t=new Oi(t)),t.type=Oo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Oi,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*$$[s.type]/4),s.buffer=0}for(i.data=idt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Oi(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new D$(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Oo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new sdt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Oi(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Oo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*$$[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),adt=function(r){sr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(_0),$9=function(r){sr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Oi(e.vertices),e.uvBuffer=new Oi(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(_0),odt=0,Kc=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=odt++,this.static=!!e,this.ubo=!!i,t instanceof Oi?(this.buffer=t,this.buffer.type=Oo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Oi(new Float32Array(1)),this.buffer.type=Oo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),hdt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=li.NONE,this.sourceFrame=new Ke,this.destinationFrame=new Ke,this.bindingSourceFrame=new Ke,this.bindingDestinationFrame=new Ke,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),ub=[new Qi,new Qi,new Qi,new Qi],oA=new Wi,udt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new tdt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new adt,this.quadUv=new $9,this.tempRect=new Ke,this.activeState={},this.globalUniforms=new Kc({outputFrame:new Ke,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new hdt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(oA.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Tu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Tu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Tu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Tu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Tu.CLEAR||e===Tu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Da.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Da.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(Wi.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=li.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||li.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=ub[0],n=ub[1],s=ub[2],a=ub[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?oA.copyFrom(s):oA.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),sI=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),ldt=function(){function r(t){this.renderer=t,this.emptyRenderer=new sI(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),H$=0,fdt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=H$++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=H$++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Mh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),cdt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=li.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),ddt=new Ke,pdt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new OO(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ke,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Mh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=Ow.COLOR|Ow.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new cdt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=li.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=li.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new OO(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=ddt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ke},r.prototype.destroy=function(){this.renderer=null},r}(),hA={5126:4,5123:2,5121:1},vdt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Mh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*hA[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*hA[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*hA[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),ydt=function(){function r(t){t===void 0&&(t=null),this.type=as.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=as.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function X$(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function V$(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function mdt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||V$(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||V$(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function uA(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function H9(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return uA(2*t);case"bvec3":return uA(3*t);case"bvec4":return uA(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var X9={},cm=X9;function _dt(){if(cm===X9||cm&&cm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Mh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),cm=t}return cm}var lb;function gdt(){if(!lb){lb=yo.MEDIUM;var r=_dt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);lb=t.precision?yo.HIGH:yo.MEDIUM}}return lb}function j$(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===yo.HIGH&&e!==yo.HIGH&&(i=yo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==yo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var xdt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function V9(r){return xdt[r]}var fb=null,z$={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function j9(r,t){if(!fb){var e=Object.keys(z$);fb={};for(var i=0;i<e.length;++i){var n=e[i];fb[r[n]]=z$[n]}}return fb[t]}var Fv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],bdt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Tdt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Edt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Fv.length;o++)if(Fv[o].test(n,s)){e.push(Fv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?bdt:Tdt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var wdt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Idt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function Rdt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=wdt.replace(/%forloop%/gi,Idt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var dm;function Cdt(){if(typeof dm=="boolean")return dm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");dm=r({a:"b"},"a","b")===!0}catch{dm=!1}return dm}var Adt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Sdt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Ndt=0,cb={},aI=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=Ndt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),cb[i]?(cb[i]++,i+="-"+cb[i]):cb[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=j$(this.vertexSrc,A.PRECISION_VERTEX,yo.HIGH),this.fragmentSrc=j$(this.fragmentSrc,A.PRECISION_FRAGMENT,gdt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Sdt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return Adt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),md=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Kc?this.uniformGroup=e:this.uniformGroup=new Kc(e):this.uniformGroup=new Kc({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=aI.from(t,e);return new r(n,i)},r}(),lA=0,fA=1,cA=2,dA=3,pA=4,vA=5,Md=function(){function r(){this.data=0,this.blendMode=he.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<lA)},set:function(t){!!(this.data&1<<lA)!==t&&(this.data^=1<<lA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<fA)},set:function(t){!!(this.data&1<<fA)!==t&&(this.data^=1<<fA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<cA)},set:function(t){!!(this.data&1<<cA)!==t&&(this.data^=1<<cA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<dA)},set:function(t){!!(this.data&1<<dA)!==t&&(this.data^=1<<dA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<vA)},set:function(t){!!(this.data&1<<vA)!==t&&(this.data^=1<<vA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<pA)},set:function(t){!!(this.data&1<<pA)!==t&&(this.data^=1<<pA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==he.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),Pdt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Odt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Fdt=function(r){sr(t,r);function t(e,i,n){var s=this,a=aI.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Md,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Pdt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Odt},enumerable:!1,configurable:!0}),t}(md),Udt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Mdt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,W$=new Wi,ML=function(){function r(t,e){this._texture=t,this.mapCoord=new Wi,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(W$.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(W$));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),Ldt=function(r){sr(t,r);function t(e){var i=this,n=new Wi;return i=r.call(this,Udt,Mdt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ML(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(Fdt),Bdt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new ydt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case as.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case as.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case as.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case as.SCISSOR:this.renderer.scissor.pop();break;case as.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case as.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=as.SPRITE;return}if(t.type=as.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=as.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Ldt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),z9=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),Gdt=function(r){sr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(z9),kdt=function(r){sr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(z9),Ddt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Wi,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),pf=new Ke,pm=new Ke,$dt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ke,this.destinationFrame=new Ke,this.viewportFrame=new Ke}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(pf.width=t.frame.width,pf.height=t.frame.height,e=pf),i||(pm.x=t.frame.x,pm.y=t.frame.y,pm.width=e.width,pm.height=e.height,i=pm),a=s.framebuffer):(o=n.resolution,e||(pf.width=n.screen.width,pf.height=n.screen.height,e=pf),i||(i=pf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function Hdt(r,t,e,i,n){e.buffer.update(n)}var Xdt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},W9={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Vdt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=W9[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function jdt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function zdt(r,t){if(!r.autoManage)return{size:0,syncFunc:Hdt};for(var e=jdt(r.uniforms,t),i=Vdt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Fv.length;c++){var d=Fv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Fv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=V9(h.data.type),_=Math.max(W9[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=Xdt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Wdt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function Ydt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=j9(t,s.type),o={type:a,name:s.name,size:V9(a),location:n};e[s.name]=o}}return e}function qdt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=j9(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:H9(h,s.size)}}return e}function Kdt(r,t){var e=X$(r,r.VERTEX_SHADER,t.vertexSrc),i=X$(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||mdt(r,n,e,i),t.attributeData=Ydt(n,r),t.uniformData=qdt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:H9(h.type,h.size)}}var u=new Wdt(n,o);return u}var Zdt=0,db={textureCount:0,uboCount:0},Qdt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Zdt++}return r.prototype.systemCheck=function(){if(!Cdt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(db.textureCount=0,db.uboCount=0,this.syncUniformGroup(t.uniformGroup,db)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Edt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,db,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=zdt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=Kdt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function Jdt(r,t){return t===void 0&&(t=[]),t[he.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.ADD]=[r.ONE,r.ONE],t[he.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.NONE]=[0,0],t[he.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[he.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[he.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[he.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[he.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[he.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[he.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[he.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[he.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[he.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[he.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var tpt=0,ept=1,rpt=2,ipt=3,npt=4,spt=5,apt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=he.NONE,this._blendEq=!1,this.map=[],this.map[tpt]=this.setBlend,this.map[ept]=this.setOffset,this.map[rpt]=this.setCullFace,this.map[ipt]=this.setDepthTest,this.map[npt]=this.setFrontFace,this.map[spt]=this.setDepthMask,this.checks=[],this.defaultState=new Md,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=Jdt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),opt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==AO.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function hpt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[ne.UNSIGNED_BYTE]=(e={},e[Pt.RGBA]=r.RGBA8,e[Pt.RGB]=r.RGB8,e[Pt.RG]=r.RG8,e[Pt.RED]=r.R8,e[Pt.RGBA_INTEGER]=r.RGBA8UI,e[Pt.RGB_INTEGER]=r.RGB8UI,e[Pt.RG_INTEGER]=r.RG8UI,e[Pt.RED_INTEGER]=r.R8UI,e[Pt.ALPHA]=r.ALPHA,e[Pt.LUMINANCE]=r.LUMINANCE,e[Pt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[ne.BYTE]=(i={},i[Pt.RGBA]=r.RGBA8_SNORM,i[Pt.RGB]=r.RGB8_SNORM,i[Pt.RG]=r.RG8_SNORM,i[Pt.RED]=r.R8_SNORM,i[Pt.RGBA_INTEGER]=r.RGBA8I,i[Pt.RGB_INTEGER]=r.RGB8I,i[Pt.RG_INTEGER]=r.RG8I,i[Pt.RED_INTEGER]=r.R8I,i),t[ne.UNSIGNED_SHORT]=(n={},n[Pt.RGBA_INTEGER]=r.RGBA16UI,n[Pt.RGB_INTEGER]=r.RGB16UI,n[Pt.RG_INTEGER]=r.RG16UI,n[Pt.RED_INTEGER]=r.R16UI,n[Pt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[ne.SHORT]=(s={},s[Pt.RGBA_INTEGER]=r.RGBA16I,s[Pt.RGB_INTEGER]=r.RGB16I,s[Pt.RG_INTEGER]=r.RG16I,s[Pt.RED_INTEGER]=r.R16I,s),t[ne.UNSIGNED_INT]=(a={},a[Pt.RGBA_INTEGER]=r.RGBA32UI,a[Pt.RGB_INTEGER]=r.RGB32UI,a[Pt.RG_INTEGER]=r.RG32UI,a[Pt.RED_INTEGER]=r.R32UI,a[Pt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[ne.INT]=(o={},o[Pt.RGBA_INTEGER]=r.RGBA32I,o[Pt.RGB_INTEGER]=r.RGB32I,o[Pt.RG_INTEGER]=r.RG32I,o[Pt.RED_INTEGER]=r.R32I,o),t[ne.FLOAT]=(h={},h[Pt.RGBA]=r.RGBA32F,h[Pt.RGB]=r.RGB32F,h[Pt.RG]=r.RG32F,h[Pt.RED]=r.R32F,h[Pt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[ne.HALF_FLOAT]=(u={},u[Pt.RGBA]=r.RGBA16F,u[Pt.RGB]=r.RGB16F,u[Pt.RG]=r.RG16F,u[Pt.RED]=r.R16F,u),t[ne.UNSIGNED_SHORT_5_6_5]=(l={},l[Pt.RGB]=r.RGB565,l),t[ne.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Pt.RGBA]=r.RGBA4,f),t[ne.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Pt.RGBA]=r.RGB5_A1,c),t[ne.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Pt.RGBA]=r.RGB10_A2,d[Pt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[ne.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Pt.RGB]=r.R11F_G11F_B10F,v),t[ne.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Pt.RGB]=r.RGB9_E5,_),t[ne.UNSIGNED_INT_24_8]=(m={},m[Pt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[ne.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Pt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[ne.UNSIGNED_BYTE]=(b={},b[Pt.RGBA]=r.RGBA,b[Pt.RGB]=r.RGB,b[Pt.ALPHA]=r.ALPHA,b[Pt.LUMINANCE]=r.LUMINANCE,b[Pt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[ne.UNSIGNED_SHORT_5_6_5]=(S={},S[Pt.RGB]=r.RGB,S),T[ne.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Pt.RGBA]=r.RGBA,R),T[ne.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Pt.RGBA]=r.RGBA,U),T),L}var yA=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ne.UNSIGNED_BYTE,this.internalFormat=Pt.RGBA,this.samplerType=0}return r}(),upt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Xi,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=hpt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new yA(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new yA(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==Fw.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new yA(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===ne.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==Fw.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===yd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=Ah.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==yd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===fh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===fh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===fh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===fh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),mA=new Wi,lpt=function(r){sr(t,r);function t(e,i){e===void 0&&(e=dg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new Ke(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=jct(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=UL.create(PO({width:s.width,height:s.height},o));return mA.tx=-s.x,mA.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:mA,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=dg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),fpt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),cpt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new fpt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}(),Ql=function(r){sr(t,r);function t(e){var i=r.call(this,dg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Kc({projectionMatrix:new Wi},!0),i.addSystem(Bdt,"mask").addSystem(fdt,"context").addSystem(apt,"state").addSystem(Qdt,"shader").addSystem(upt,"texture").addSystem(cpt,"buffer").addSystem(vdt,"geometry").addSystem(pdt,"framebuffer").addSystem(Gdt,"scissor").addSystem(kdt,"stencil").addSystem(Ddt,"projection").addSystem(opt,"textureGC").addSystem(udt,"filter").addSystem($dt,"renderTexture").addSystem(ldt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=li.HIGH?this.multisample=li.HIGH:i>=li.MEDIUM?this.multisample=li.MEDIUM:i>=li.LOW?this.multisample=li.LOW:this.multisample=li.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof UL?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t}(lpt);function dpt(r){return Ql.create(r)}var FO=function(){function r(){this.texArray=null,this.blend=0,this.type=Da.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),UO=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),ppt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),vpt=function(r){sr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Md.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Mh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Rdt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new FO);for(;i.length<s;)i.push(new UO);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Xi._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Xi._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new ppt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(sI),ypt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Kc.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new aI(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Wi,default:this.defaultGroupCache[t]};return new md(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Y9=function(r){sr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Oi(null,e,!1),i._indexBuffer=new Oi(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,ne.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,ne.FLOAT).addAttribute("aColor",i._buffer,4,!0,ne.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,ne.FLOAT).addIndex(i._indexBuffer),i}return t}(_0),Y$=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,q$=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,mpt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:Y$,fragment:q$,geometryClass:Y9,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){sr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new ypt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(vpt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Y$},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return q$},enumerable:!1,configurable:!0}),r}(),_pt=mpt.create();/*!
 * @pixi/app - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var LL=function(){function r(t){var e=this;this.stage=new _l,t=Object.assign({forceCanvas:!1},t),this.renderer=dpt(t),r._plugins.forEach(function(i){i.init.call(e,t)})}return r.registerPlugin=function(t){r._plugins.push(t)},r.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(r.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),r.prototype.destroy=function(t,e){var i=this,n=r._plugins.slice(0);n.reverse(),n.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},r._plugins=[],r}(),gpt=function(){function r(){}return r.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(i){self.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){e.cancelResize();var i,n;if(e._resizeTo===self)i=self.innerWidth,n=self.innerHeight;else{var s=e._resizeTo,a=s.clientWidth,o=s.clientHeight;i=a,n=o}e.renderer.resize(i,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},r.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},r}();LL.registerPlugin(gpt);/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xpt=Math.PI*2,MO;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(MO||(MO={}));var Ji=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=MO.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Vu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),pb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ca=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Vu;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Vu;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(xpt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),jf=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],zf=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wf=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Yf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],LO=[],q9=[],vb=Math.sign;function bpt(){for(var r=0;r<16;r++){var t=[];LO.push(t);for(var e=0;e<16;e++)for(var i=vb(jf[r]*jf[e]+Wf[r]*zf[e]),n=vb(zf[r]*jf[e]+Yf[r]*zf[e]),s=vb(jf[r]*Wf[e]+Wf[r]*Yf[e]),a=vb(zf[r]*Wf[e]+Yf[r]*Yf[e]),o=0;o<16;o++)if(jf[o]===i&&zf[o]===n&&Wf[o]===s&&Yf[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new ca;h.set(jf[r],zf[r],Wf[r],Yf[r],0,0),q9.push(h)}}bpt();var Sr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return jf[r]},uY:function(r){return zf[r]},vX:function(r){return Wf[r]},vY:function(r){return Yf[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return LO[r][t]},sub:function(r,t){return LO[r][Sr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Sr.S:Sr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Sr.E:Sr.W:t>0?r>0?Sr.SE:Sr.SW:r>0?Sr.NE:Sr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=q9[Sr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new ca,this.localTransform=new ca,this.position=new pb(this.onChange,this,0,0),this.scale=new pb(this.onChange,this,1,1),this.pivot=new pb(this.onChange,this,0,0),this.skew=new pb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Lh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Lh||(Lh={}));var vg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(vg||(vg={}));var Uw;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Uw||(Uw={}));var pe;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(pe||(pe={}));var yg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(yg||(yg={}));var Ot;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ot||(Ot={}));var Zc;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Zc||(Zc={}));var Ae;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Ae||(Ae={}));var Mw;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(Mw||(Mw={}));var ch;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(ch||(ch={}));var BO;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(BO||(BO={}));var _d;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(_d||(_d={}));var bl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(bl||(bl={}));var Eu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Eu||(Eu={}));var GO;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(GO||(GO={}));var mo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(mo||(mo={}));var os;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(os||(os={}));var fi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(fi||(fi={}));var Fo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Fo||(Fo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var Lw;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(Lw||(Lw={}));var _A=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),cp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new _A(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=Lw.NORMAL),this._addListener(new _A(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=Lw.NORMAL),this._addListener(new _A(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Lh.WEBGL:Lh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var kO=[];function K9(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=kO.length-1;n>=0;--n){var s=kO[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var DO=function(r,t){return DO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},DO(r,t)};function ar(r,t){DO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var $O=function(){return $O=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},$O.apply(this,arguments)};function Tpt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var mg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),BL=function(r){ar(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===bl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(mg),Ept={scaleMode:ch.NEAREST,format:Ot.RGBA,alphaMode:bl.NPM},Sn=function(r){ar(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof mg)&&(e=K9(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Ot.RGBA,n.type=d||Ae.UNSIGNED_BYTE,n.target=v||Zc.TEXTURE_2D,n.alphaMode=s!==void 0?s:bl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new BL(e,{width:i,height:n}),o=e instanceof Float32Array?Ae.FLOAT:Ae.UNSIGNED_BYTE;return new t(a,Object.assign(Ept,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),Z9=function(r){ar(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Sn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof mg?this.addResourceAt(e[n],n):this.addResourceAt(K9(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(mg),wpt=function(r){ar(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Zc.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(Z9),Tl=function(r){ar(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===bl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(mg),Q9=function(r){ar(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Tl),Ipt=function(r){ar(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=Zc.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Zc.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Zc.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Z9),J9=function(r){ar(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Tl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===bl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Tl),Rpt=function(r){ar(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Tl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Tl),Cpt=function(r){ar(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Tl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=cp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(cp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(cp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(cp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(cp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(cp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Tl),Apt=function(r){ar(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Tl);kO.push(J9,Apt,Q9,Cpt,Rpt,BL,Ipt,wpt);var Spt=function(r){ar(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===bl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(BL),HO=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=fi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Sn(null,{scaleMode:ch.NEAREST,resolution:1,mipmap:_d.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Sn(new Spt(null,{width:this.width,height:this.height}),{scaleMode:ch.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_d.OFF,format:Ot.DEPTH_COMPONENT,type:Ae.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),t7=function(r){ar(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:fi.NONE,i=r.call(this,null,e)||this,i.mipmap=_d.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new HO(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Sn),e7=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Sr.add(i,Sr.NW),this.x0=h+a*Sr.uX(i),this.y0=u+o*Sr.uY(i),i=Sr.add(i,2),this.x1=h+a*Sr.uX(i),this.y1=u+o*Sr.uY(i),i=Sr.add(i,2),this.x2=h+a*Sr.uX(i),this.y2=u+o*Sr.uY(i),i=Sr.add(i,2),this.x3=h+a*Sr.uX(i),this.y3=u+o*Sr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),K$=new e7,Bh=function(r){ar(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new Ji(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=K$,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Vu(o.x,o.y):new Vu(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===K$&&(this._uvs=new e7),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Sn(e,i)),h.baseTexture.cacheId=a,Sn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Sn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Sn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof J9&&(o.url=i);var h=new t(a);return n||(n=i),Sn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Sn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function Npt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Bh(new Sn(new Q9(r)))}function oI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Bh.EMPTY=new Bh(new Sn);oI(Bh.EMPTY);oI(Bh.EMPTY.baseTexture);Bh.WHITE=Npt();oI(Bh.WHITE);oI(Bh.WHITE.baseTexture);var _g=function(r){ar(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new t7(e))},t}(Bh),Ppt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=fi.NONE);var n=new t7(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new _g(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=fi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||fi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),Z$=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Ae.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),Opt=0,xs=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Opt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Fo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Fo.ELEMENT_ARRAY_BUFFER:Fo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),Fpt={Float32Array,Uint32Array,Int32Array,Uint8Array};function Upt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new Fpt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var Q$={5126:4,5123:2,5121:1},Mpt=0,Lpt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},GL=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Mpt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof xs||(e instanceof Array&&(e=new Float32Array(e)),e=new xs(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new Z$(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof xs||(t instanceof Array&&(t=new Uint16Array(t)),t=new xs(t)),t.type=Fo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new xs,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*Q$[s.type]/4),s.buffer=0}for(i.data=Upt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new xs(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new Z$(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Fo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new Lpt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new xs(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Fo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*Q$[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),Bpt=function(r){ar(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(GL),Gpt=function(r){ar(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new xs(e.vertices),e.uvBuffer=new xs(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(GL),kpt=0,Uv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=kpt++,this.static=!!e,this.ubo=!!i,t instanceof xs?(this.buffer=t,this.buffer.type=Fo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new xs(new Float32Array(1)),this.buffer.type=Fo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),Dpt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=fi.NONE,this.sourceFrame=new Ji,this.destinationFrame=new Ji,this.bindingSourceFrame=new Ji,this.bindingDestinationFrame=new Ji,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),yb=[new Vu,new Vu,new Vu,new Vu],gA=new ca,$pt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Ppt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Bpt,this.quadUv=new Gpt,this.tempRect=new Ji,this.activeState={},this.globalUniforms=new Uv({outputFrame:new Ji,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new Dpt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(gA.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Eu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Eu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Eu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Eu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Eu.CLEAR||e===Eu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(ca.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=fi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||fi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=yb[0],n=yb[1],s=yb[2],a=yb[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?gA.copyFrom(s):gA.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),r7=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),Hpt=function(){function r(t){this.renderer=t,this.emptyRenderer=new r7(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),J$=0,Xpt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=J$++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=J$++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Lh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),Vpt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=fi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),jpt=new Ji,zpt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new HO(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ji,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Lh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=Uw.COLOR|Uw.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new Vpt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=fi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=fi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new HO(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=jpt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Ji},r.prototype.destroy=function(){this.renderer=null},r}(),xA={5126:4,5123:2,5121:1},Wpt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Lh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*xA[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*xA[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*xA[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),Ypt=function(){function r(t){t===void 0&&(t=null),this.type=os.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=os.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function tH(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function eH(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function qpt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||eH(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||eH(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function bA(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function i7(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return bA(2*t);case"bvec3":return bA(3*t);case"bvec4":return bA(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var n7={},vm=n7;function Kpt(){if(vm===n7||vm&&vm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Lh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),vm=t}return vm}var mb;function Zpt(){if(!mb){mb=mo.MEDIUM;var r=Kpt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);mb=t.precision?mo.HIGH:mo.MEDIUM}}return mb}function rH(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===mo.HIGH&&e!==mo.HIGH&&(i=mo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==mo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var Qpt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function s7(r){return Qpt[r]}var _b=null,iH={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function a7(r,t){if(!_b){var e=Object.keys(iH);_b={};for(var i=0;i<e.length;++i){var n=e[i];_b[r[n]]=iH[n]}}return _b[t]}var Mv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Jpt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},tvt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function evt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Mv.length;o++)if(Mv[o].test(n,s)){e.push(Mv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?Jpt:tvt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var rvt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function ivt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function nvt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=rvt.replace(/%forloop%/gi,ivt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var ym;function svt(){if(typeof ym=="boolean")return ym;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");ym=r({a:"b"},"a","b")===!0}catch{ym=!1}return ym}var avt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ovt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,hvt=0,gb={},kL=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=hvt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),gb[i]?(gb[i]++,i+="-"+gb[i]):gb[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=rH(this.vertexSrc,A.PRECISION_VERTEX,mo.HIGH),this.fragmentSrc=rH(this.fragmentSrc,A.PRECISION_FRAGMENT,Zpt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return ovt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return avt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),o7=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Uv?this.uniformGroup=e:this.uniformGroup=new Uv(e):this.uniformGroup=new Uv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=kL.from(t,e);return new r(n,i)},r}(),TA=0,EA=1,wA=2,IA=3,RA=4,CA=5,DL=function(){function r(){this.data=0,this.blendMode=pe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<TA)},set:function(t){!!(this.data&1<<TA)!==t&&(this.data^=1<<TA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<EA)},set:function(t){!!(this.data&1<<EA)!==t&&(this.data^=1<<EA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<wA)},set:function(t){!!(this.data&1<<wA)!==t&&(this.data^=1<<wA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<IA)},set:function(t){!!(this.data&1<<IA)!==t&&(this.data^=1<<IA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<CA)},set:function(t){!!(this.data&1<<CA)!==t&&(this.data^=1<<CA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<RA)},set:function(t){!!(this.data&1<<RA)!==t&&(this.data^=1<<RA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==pe.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),uvt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,lvt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,fvt=function(r){ar(t,r);function t(e,i,n){var s=this,a=kL.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new DL,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return uvt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return lvt},enumerable:!1,configurable:!0}),t}(o7),cvt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,dvt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,nH=new ca,pvt=function(){function r(t,e){this._texture=t,this.mapCoord=new ca,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(nH.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(nH));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),vvt=function(r){ar(t,r);function t(e){var i=this,n=new ca;return i=r.call(this,cvt,dvt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new pvt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(fvt),yvt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Ypt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case os.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case os.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case os.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case os.SCISSOR:this.renderer.scissor.pop();break;case os.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case os.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=os.SPRITE;return}if(t.type=os.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=os.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new vvt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),h7=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),mvt=function(r){ar(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(h7),_vt=function(r){ar(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(h7),gvt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ca,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),vf=new Ji,mm=new Ji,xvt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ji,this.destinationFrame=new Ji,this.viewportFrame=new Ji}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(vf.width=t.frame.width,vf.height=t.frame.height,e=vf),i||(mm.x=t.frame.x,mm.y=t.frame.y,mm.width=e.width,mm.height=e.height,i=mm),a=s.framebuffer):(o=n.resolution,e||(vf.width=n.screen.width,vf.height=n.screen.height,e=vf),i||(i=vf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function bvt(r,t,e,i,n){e.buffer.update(n)}var Tvt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},u7={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Evt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=u7[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function wvt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function Ivt(r,t){if(!r.autoManage)return{size:0,syncFunc:bvt};for(var e=wvt(r.uniforms,t),i=Evt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Mv.length;c++){var d=Mv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Mv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=s7(h.data.type),_=Math.max(u7[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=Tvt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Rvt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function Cvt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=a7(t,s.type),o={type:a,name:s.name,size:s7(a),location:n};e[s.name]=o}}return e}function Avt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=a7(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:i7(h,s.size)}}return e}function Svt(r,t){var e=tH(r,r.VERTEX_SHADER,t.vertexSrc),i=tH(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||qpt(r,n,e,i),t.attributeData=Cvt(n,r),t.uniformData=Avt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:i7(h.type,h.size)}}var u=new Rvt(n,o);return u}var Nvt=0,xb={textureCount:0,uboCount:0},Pvt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Nvt++}return r.prototype.systemCheck=function(){if(!svt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(xb.textureCount=0,xb.uboCount=0,this.syncUniformGroup(t.uniformGroup,xb)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=evt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,xb,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=Ivt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=Svt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function Ovt(r,t){return t===void 0&&(t=[]),t[pe.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.ADD]=[r.ONE,r.ONE],t[pe.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.NONE]=[0,0],t[pe.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[pe.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[pe.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[pe.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[pe.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[pe.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[pe.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[pe.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[pe.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[pe.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[pe.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var Fvt=0,Uvt=1,Mvt=2,Lvt=3,Bvt=4,Gvt=5,kvt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=pe.NONE,this._blendEq=!1,this.map=[],this.map[Fvt]=this.setBlend,this.map[Uvt]=this.setOffset,this.map[Mvt]=this.setCullFace,this.map[Lvt]=this.setDepthTest,this.map[Bvt]=this.setFrontFace,this.map[Gvt]=this.setDepthMask,this.checks=[],this.defaultState=new DL,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=Ovt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),Dvt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==GO.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function $vt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Ae.UNSIGNED_BYTE]=(e={},e[Ot.RGBA]=r.RGBA8,e[Ot.RGB]=r.RGB8,e[Ot.RG]=r.RG8,e[Ot.RED]=r.R8,e[Ot.RGBA_INTEGER]=r.RGBA8UI,e[Ot.RGB_INTEGER]=r.RGB8UI,e[Ot.RG_INTEGER]=r.RG8UI,e[Ot.RED_INTEGER]=r.R8UI,e[Ot.ALPHA]=r.ALPHA,e[Ot.LUMINANCE]=r.LUMINANCE,e[Ot.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Ae.BYTE]=(i={},i[Ot.RGBA]=r.RGBA8_SNORM,i[Ot.RGB]=r.RGB8_SNORM,i[Ot.RG]=r.RG8_SNORM,i[Ot.RED]=r.R8_SNORM,i[Ot.RGBA_INTEGER]=r.RGBA8I,i[Ot.RGB_INTEGER]=r.RGB8I,i[Ot.RG_INTEGER]=r.RG8I,i[Ot.RED_INTEGER]=r.R8I,i),t[Ae.UNSIGNED_SHORT]=(n={},n[Ot.RGBA_INTEGER]=r.RGBA16UI,n[Ot.RGB_INTEGER]=r.RGB16UI,n[Ot.RG_INTEGER]=r.RG16UI,n[Ot.RED_INTEGER]=r.R16UI,n[Ot.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Ae.SHORT]=(s={},s[Ot.RGBA_INTEGER]=r.RGBA16I,s[Ot.RGB_INTEGER]=r.RGB16I,s[Ot.RG_INTEGER]=r.RG16I,s[Ot.RED_INTEGER]=r.R16I,s),t[Ae.UNSIGNED_INT]=(a={},a[Ot.RGBA_INTEGER]=r.RGBA32UI,a[Ot.RGB_INTEGER]=r.RGB32UI,a[Ot.RG_INTEGER]=r.RG32UI,a[Ot.RED_INTEGER]=r.R32UI,a[Ot.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Ae.INT]=(o={},o[Ot.RGBA_INTEGER]=r.RGBA32I,o[Ot.RGB_INTEGER]=r.RGB32I,o[Ot.RG_INTEGER]=r.RG32I,o[Ot.RED_INTEGER]=r.R32I,o),t[Ae.FLOAT]=(h={},h[Ot.RGBA]=r.RGBA32F,h[Ot.RGB]=r.RGB32F,h[Ot.RG]=r.RG32F,h[Ot.RED]=r.R32F,h[Ot.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Ae.HALF_FLOAT]=(u={},u[Ot.RGBA]=r.RGBA16F,u[Ot.RGB]=r.RGB16F,u[Ot.RG]=r.RG16F,u[Ot.RED]=r.R16F,u),t[Ae.UNSIGNED_SHORT_5_6_5]=(l={},l[Ot.RGB]=r.RGB565,l),t[Ae.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Ot.RGBA]=r.RGBA4,f),t[Ae.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Ot.RGBA]=r.RGB5_A1,c),t[Ae.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Ot.RGBA]=r.RGB10_A2,d[Ot.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Ae.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Ot.RGB]=r.R11F_G11F_B10F,v),t[Ae.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Ot.RGB]=r.RGB9_E5,_),t[Ae.UNSIGNED_INT_24_8]=(m={},m[Ot.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Ae.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Ot.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Ae.UNSIGNED_BYTE]=(b={},b[Ot.RGBA]=r.RGBA,b[Ot.RGB]=r.RGB,b[Ot.ALPHA]=r.ALPHA,b[Ot.LUMINANCE]=r.LUMINANCE,b[Ot.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Ae.UNSIGNED_SHORT_5_6_5]=(S={},S[Ot.RGB]=r.RGB,S),T[Ae.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Ot.RGBA]=r.RGBA,R),T[Ae.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Ot.RGBA]=r.RGBA,U),T),L}var AA=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ae.UNSIGNED_BYTE,this.internalFormat=Ot.RGBA,this.samplerType=0}return r}(),Hvt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Sn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=$vt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new AA(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new AA(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==Mw.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new AA(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Ae.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==Mw.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===_d.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=BO.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==_d.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ch.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===ch.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ch.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ch.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),SA=new ca,Xvt=function(r){ar(t,r);function t(e,i){e===void 0&&(e=vg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new Ji(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=Tpt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=_g.create($O({width:s.width,height:s.height},o));return SA.tx=-s.x,SA.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:SA,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=vg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),Vvt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),jvt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new Vvt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){ar(t,r);function t(e){var i=r.call(this,vg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Uv({projectionMatrix:new ca},!0),i.addSystem(yvt,"mask").addSystem(Xpt,"context").addSystem(kvt,"state").addSystem(Pvt,"shader").addSystem(Hvt,"texture").addSystem(jvt,"buffer").addSystem(Wpt,"geometry").addSystem(zpt,"framebuffer").addSystem(mvt,"scissor").addSystem(_vt,"stencil").addSystem(gvt,"projection").addSystem(Dvt,"textureGC").addSystem($pt,"filter").addSystem(xvt,"renderTexture").addSystem(Hpt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=fi.HIGH?this.multisample=fi.HIGH:i>=fi.MEDIUM?this.multisample=fi.MEDIUM:i>=fi.LOW?this.multisample=fi.LOW:this.multisample=fi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof _g?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(Xvt);var zvt=function(){function r(){this.texArray=null,this.blend=0,this.type=yg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Wvt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),Yvt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),qvt=function(r){ar(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=DL.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Lh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=nvt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new zvt);for(;i.length<s;)i.push(new Wvt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Sn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Sn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new Yvt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(r7),Kvt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Uv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new kL(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ca,default:this.defaultGroupCache[t]};return new o7(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Zvt=function(r){ar(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new xs(null,e,!1),i._indexBuffer=new xs(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Ae.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Ae.FLOAT).addAttribute("aColor",i._buffer,4,!0,Ae.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Ae.FLOAT).addIndex(i._indexBuffer),i}return t}(GL),sH=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,aH=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Qvt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:sH,fragment:aH,geometryClass:Zvt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){ar(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new Kvt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(qvt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return sH},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return aH},enumerable:!1,configurable:!0}),r}();Qvt.create();/*!
 * @pixi/extract - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var oH=new Ji,hH=4,Jvt=function(){function r(t){this.renderer=t}return r.prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},r.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},r.prototype.canvas=function(t){var e=this.renderer,i,n,s=!1,a,o=!1;t&&(t instanceof _g?a=t:(a=this.renderer.generateTexture(t),o=!0)),a?(i=a.baseTexture.resolution,n=a.frame,s=!1,e.renderTexture.bind(a)):(i=this.renderer.resolution,s=!0,n=oH,n.width=this.renderer.width,n.height=this.renderer.height,e.renderTexture.bind(null));var h=Math.floor(n.width*i+1e-4),u=Math.floor(n.height*i+1e-4),l=new S$(h,u,1),f=new Uint8Array(hH*h*u),c=e.gl;c.readPixels(n.x*i,n.y*i,h,u,c.RGBA,c.UNSIGNED_BYTE,f);var d=l.context.getImageData(0,0,h,u);if(r.arrayPostDivide(f,d.data),l.context.putImageData(d,0,0),s){var v=new S$(l.width,l.height,1);v.context.scale(1,-1),v.context.drawImage(l.canvas,0,-u),l.destroy(),l=v}return o&&a.destroy(!0),l.canvas},r.prototype.pixels=function(t){var e=this.renderer,i,n,s,a=!1;t&&(t instanceof _g?s=t:(s=this.renderer.generateTexture(t),a=!0)),s?(i=s.baseTexture.resolution,n=s.frame,e.renderTexture.bind(s)):(i=e.resolution,n=oH,n.width=e.width,n.height=e.height,e.renderTexture.bind(null));var o=n.width*i,h=n.height*i,u=new Uint8Array(hH*o*h),l=e.gl;return l.readPixels(n.x*i,n.y*i,o,h,l.RGBA,l.UNSIGNED_BYTE,u),a&&s.destroy(!0),r.arrayPostDivide(u,u),u},r.prototype.destroy=function(){this.renderer=null},r.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];n!==0?(e[i]=Math.round(Math.min(t[i]*255/n,255)),e[i+1]=Math.round(Math.min(t[i+1]*255/n,255)),e[i+2]=Math.round(Math.min(t[i+2]*255/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},r}();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Gh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Gh||(Gh={}));var gg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(gg||(gg={}));var Bw;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Bw||(Bw={}));var ve;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ve||(ve={}));var xg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(xg||(xg={}));var Ft;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ft||(Ft={}));var Qc;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Qc||(Qc={}));var Se;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Se||(Se={}));var Gw;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(Gw||(Gw={}));var dh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(dh||(dh={}));var XO;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(XO||(XO={}));var gd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(gd||(gd={}));var El;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(El||(El={}));var wu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(wu||(wu={}));var VO;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(VO||(VO={}));var _o;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(_o||(_o={}));var hs;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(hs||(hs={}));var ci;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(ci||(ci={}));var Uo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Uo||(Uo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var kw;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(kw||(kw={}));var NA=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),dp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new NA(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=kw.NORMAL),this._addListener(new NA(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=kw.NORMAL),this._addListener(new NA(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var tyt=Math.PI*2,jO;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(jO||(jO={}));var dn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=jO.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),ju=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),bb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),da=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new ju;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new ju;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(tyt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),qf=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Kf=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Zf=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Qf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],zO=[],l7=[],Tb=Math.sign;function eyt(){for(var r=0;r<16;r++){var t=[];zO.push(t);for(var e=0;e<16;e++)for(var i=Tb(qf[r]*qf[e]+Zf[r]*Kf[e]),n=Tb(Kf[r]*qf[e]+Qf[r]*Kf[e]),s=Tb(qf[r]*Zf[e]+Zf[r]*Qf[e]),a=Tb(Kf[r]*Zf[e]+Qf[r]*Qf[e]),o=0;o<16;o++)if(qf[o]===i&&Kf[o]===n&&Zf[o]===s&&Qf[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new da;h.set(qf[r],Kf[r],Zf[r],Qf[r],0,0),l7.push(h)}}eyt();var Nr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return qf[r]},uY:function(r){return Kf[r]},vX:function(r){return Zf[r]},vY:function(r){return Qf[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return zO[r][t]},sub:function(r,t){return zO[r][Nr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Nr.S:Nr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Nr.E:Nr.W:t>0?r>0?Nr.SE:Nr.SW:r>0?Nr.NE:Nr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=l7[Nr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new da,this.localTransform=new da,this.position=new bb(this.onChange,this,0,0),this.scale=new bb(this.onChange,this,1,1),this.pivot=new bb(this.onChange,this,0,0),this.skew=new bb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Gh.WEBGL:Gh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var WO=[];function f7(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=WO.length-1;n>=0;--n){var s=WO[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var YO=function(r,t){return YO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},YO(r,t)};function or(r,t){YO(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var qO=function(){return qO=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},qO.apply(this,arguments)};function ryt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var bg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),$L=function(r){or(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===El.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(bg),iyt={scaleMode:dh.NEAREST,format:Ft.RGBA,alphaMode:El.NPM},Nn=function(r){or(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof bg)&&(e=f7(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Ft.RGBA,n.type=d||Se.UNSIGNED_BYTE,n.target=v||Qc.TEXTURE_2D,n.alphaMode=s!==void 0?s:El.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new $L(e,{width:i,height:n}),o=e instanceof Float32Array?Se.FLOAT:Se.UNSIGNED_BYTE;return new t(a,Object.assign(iyt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),c7=function(r){or(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Nn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof bg?this.addResourceAt(e[n],n):this.addResourceAt(f7(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(bg),nyt=function(r){or(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Qc.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(c7),wl=function(r){or(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===El.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(bg),d7=function(r){or(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(wl),syt=function(r){or(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=Qc.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Qc.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Qc.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(c7),p7=function(r){or(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;wl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===El.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(wl),ayt=function(r){or(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;wl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(wl),oyt=function(r){or(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];wl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=dp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(dp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(dp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(dp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(dp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(dp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(wl),hyt=function(r){or(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(wl);WO.push(p7,hyt,d7,oyt,ayt,$L,syt,nyt);var uyt=function(r){or(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===El.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}($L),KO=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=ci.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Nn(null,{scaleMode:dh.NEAREST,resolution:1,mipmap:gd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Nn(new uyt(null,{width:this.width,height:this.height}),{scaleMode:dh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:gd.OFF,format:Ft.DEPTH_COMPONENT,type:Se.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),v7=function(r){or(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:ci.NONE,i=r.call(this,null,e)||this,i.mipmap=gd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new KO(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Nn),y7=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Nr.add(i,Nr.NW),this.x0=h+a*Nr.uX(i),this.y0=u+o*Nr.uY(i),i=Nr.add(i,2),this.x1=h+a*Nr.uX(i),this.y1=u+o*Nr.uY(i),i=Nr.add(i,2),this.x2=h+a*Nr.uX(i),this.y2=u+o*Nr.uY(i),i=Nr.add(i,2),this.x3=h+a*Nr.uX(i),this.y3=u+o*Nr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),uH=new y7,Wo=function(r){or(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new dn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=uH,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new ju(o.x,o.y):new ju(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===uH&&(this._uvs=new y7),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Nn(e,i)),h.baseTexture.cacheId=a,Nn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Nn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Nn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof p7&&(o.url=i);var h=new t(a);return n||(n=i),Nn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Nn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function lyt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Wo(new Nn(new d7(r)))}function hI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Wo.EMPTY=new Wo(new Nn);hI(Wo.EMPTY);hI(Wo.EMPTY.baseTexture);Wo.WHITE=lyt();hI(Wo.WHITE);hI(Wo.WHITE.baseTexture);var HL=function(r){or(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new v7(e))},t}(Wo),fyt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=ci.NONE);var n=new v7(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new HL(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=ci.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||ci.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),lH=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Se.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),cyt=0,bs=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=cyt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Uo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Uo.ELEMENT_ARRAY_BUFFER:Uo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),dyt={Float32Array,Uint32Array,Int32Array,Uint8Array};function pyt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new dyt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var fH={5126:4,5123:2,5121:1},vyt=0,yyt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},XL=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=vyt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof bs||(e instanceof Array&&(e=new Float32Array(e)),e=new bs(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new lH(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof bs||(t instanceof Array&&(t=new Uint16Array(t)),t=new bs(t)),t.type=Uo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new bs,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*fH[s.type]/4),s.buffer=0}for(i.data=pyt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new bs(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new lH(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Uo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new yyt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new bs(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Uo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*fH[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),myt=function(r){or(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(XL),_yt=function(r){or(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new bs(e.vertices),e.uvBuffer=new bs(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(XL),gyt=0,Lv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=gyt++,this.static=!!e,this.ubo=!!i,t instanceof bs?(this.buffer=t,this.buffer.type=Uo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new bs(new Float32Array(1)),this.buffer.type=Uo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),xyt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ci.NONE,this.sourceFrame=new dn,this.destinationFrame=new dn,this.bindingSourceFrame=new dn,this.bindingDestinationFrame=new dn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Eb=[new ju,new ju,new ju,new ju],PA=new da,byt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new fyt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new myt,this.quadUv=new _yt,this.tempRect=new dn,this.activeState={},this.globalUniforms=new Lv({outputFrame:new dn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new xyt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(PA.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,wu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,wu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,wu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=wu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===wu.CLEAR||e===wu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(xg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(xg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(da.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=ci.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||ci.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=Eb[0],n=Eb[1],s=Eb[2],a=Eb[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?PA.copyFrom(s):PA.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),m7=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),Tyt=function(){function r(t){this.renderer=t,this.emptyRenderer=new m7(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),cH=0,Eyt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=cH++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=cH++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Gh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),wyt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ci.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),Iyt=new dn,Ryt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new KO(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new dn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Gh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=Bw.COLOR|Bw.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new wyt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=ci.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=ci.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new KO(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=Iyt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new dn},r.prototype.destroy=function(){this.renderer=null},r}(),OA={5126:4,5123:2,5121:1},Cyt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Gh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*OA[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*OA[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*OA[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),Ayt=function(){function r(t){t===void 0&&(t=null),this.type=hs.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=hs.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function dH(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function pH(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function Syt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||pH(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||pH(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function FA(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function _7(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return FA(2*t);case"bvec3":return FA(3*t);case"bvec4":return FA(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var g7={},_m=g7;function Nyt(){if(_m===g7||_m&&_m.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Gh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),_m=t}return _m}var wb;function Pyt(){if(!wb){wb=_o.MEDIUM;var r=Nyt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);wb=t.precision?_o.HIGH:_o.MEDIUM}}return wb}function vH(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===_o.HIGH&&e!==_o.HIGH&&(i=_o.MEDIUM),"precision "+i+` float;
`+r}else if(e!==_o.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var Oyt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function x7(r){return Oyt[r]}var Ib=null,yH={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function b7(r,t){if(!Ib){var e=Object.keys(yH);Ib={};for(var i=0;i<e.length;++i){var n=e[i];Ib[r[n]]=yH[n]}}return Ib[t]}var Bv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Fyt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Uyt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Myt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Bv.length;o++)if(Bv[o].test(n,s)){e.push(Bv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?Fyt:Uyt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var Lyt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Byt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function Gyt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=Lyt.replace(/%forloop%/gi,Byt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var gm;function kyt(){if(typeof gm=="boolean")return gm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");gm=r({a:"b"},"a","b")===!0}catch{gm=!1}return gm}var Dyt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,$yt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,Hyt=0,Rb={},VL=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=Hyt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Rb[i]?(Rb[i]++,i+="-"+Rb[i]):Rb[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=vH(this.vertexSrc,A.PRECISION_VERTEX,_o.HIGH),this.fragmentSrc=vH(this.fragmentSrc,A.PRECISION_FRAGMENT,Pyt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return $yt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return Dyt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),T7=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Lv?this.uniformGroup=e:this.uniformGroup=new Lv(e):this.uniformGroup=new Lv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=VL.from(t,e);return new r(n,i)},r}(),UA=0,MA=1,LA=2,BA=3,GA=4,kA=5,jL=function(){function r(){this.data=0,this.blendMode=ve.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<UA)},set:function(t){!!(this.data&1<<UA)!==t&&(this.data^=1<<UA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<MA)},set:function(t){!!(this.data&1<<MA)!==t&&(this.data^=1<<MA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<LA)},set:function(t){!!(this.data&1<<LA)!==t&&(this.data^=1<<LA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<BA)},set:function(t){!!(this.data&1<<BA)!==t&&(this.data^=1<<BA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<kA)},set:function(t){!!(this.data&1<<kA)!==t&&(this.data^=1<<kA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<GA)},set:function(t){!!(this.data&1<<GA)!==t&&(this.data^=1<<GA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ve.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),Xyt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Vyt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,jyt=function(r){or(t,r);function t(e,i,n){var s=this,a=VL.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new jL,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Xyt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return Vyt},enumerable:!1,configurable:!0}),t}(T7),zyt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Wyt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,mH=new da,Yyt=function(){function r(t,e){this._texture=t,this.mapCoord=new da,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(mH.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(mH));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),qyt=function(r){or(t,r);function t(e){var i=this,n=new da;return i=r.call(this,zyt,Wyt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Yyt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(jyt),Kyt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Ayt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case hs.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case hs.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case hs.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case hs.SCISSOR:this.renderer.scissor.pop();break;case hs.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case hs.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=hs.SPRITE;return}if(t.type=hs.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=hs.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new qyt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),E7=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),Zyt=function(r){or(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(E7),Qyt=function(r){or(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(E7),Jyt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new da,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),yf=new dn,xm=new dn,tmt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new dn,this.destinationFrame=new dn,this.viewportFrame=new dn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(yf.width=t.frame.width,yf.height=t.frame.height,e=yf),i||(xm.x=t.frame.x,xm.y=t.frame.y,xm.width=e.width,xm.height=e.height,i=xm),a=s.framebuffer):(o=n.resolution,e||(yf.width=n.screen.width,yf.height=n.screen.height,e=yf),i||(i=yf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function emt(r,t,e,i,n){e.buffer.update(n)}var rmt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},w7={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function imt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=w7[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function nmt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function smt(r,t){if(!r.autoManage)return{size:0,syncFunc:emt};for(var e=nmt(r.uniforms,t),i=imt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Bv.length;c++){var d=Bv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Bv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=x7(h.data.type),_=Math.max(w7[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=rmt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var amt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function omt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=b7(t,s.type),o={type:a,name:s.name,size:x7(a),location:n};e[s.name]=o}}return e}function hmt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=b7(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:_7(h,s.size)}}return e}function umt(r,t){var e=dH(r,r.VERTEX_SHADER,t.vertexSrc),i=dH(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||Syt(r,n,e,i),t.attributeData=omt(n,r),t.uniformData=hmt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:_7(h.type,h.size)}}var u=new amt(n,o);return u}var lmt=0,Cb={textureCount:0,uboCount:0},fmt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=lmt++}return r.prototype.systemCheck=function(){if(!kyt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Cb.textureCount=0,Cb.uboCount=0,this.syncUniformGroup(t.uniformGroup,Cb)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Myt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,Cb,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=smt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=umt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function cmt(r,t){return t===void 0&&(t=[]),t[ve.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.ADD]=[r.ONE,r.ONE],t[ve.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.NONE]=[0,0],t[ve.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ve.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ve.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ve.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ve.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ve.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ve.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ve.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ve.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ve.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ve.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var dmt=0,pmt=1,vmt=2,ymt=3,mmt=4,_mt=5,gmt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ve.NONE,this._blendEq=!1,this.map=[],this.map[dmt]=this.setBlend,this.map[pmt]=this.setOffset,this.map[vmt]=this.setCullFace,this.map[ymt]=this.setDepthTest,this.map[mmt]=this.setFrontFace,this.map[_mt]=this.setDepthMask,this.checks=[],this.defaultState=new jL,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=cmt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),xmt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==VO.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function bmt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Se.UNSIGNED_BYTE]=(e={},e[Ft.RGBA]=r.RGBA8,e[Ft.RGB]=r.RGB8,e[Ft.RG]=r.RG8,e[Ft.RED]=r.R8,e[Ft.RGBA_INTEGER]=r.RGBA8UI,e[Ft.RGB_INTEGER]=r.RGB8UI,e[Ft.RG_INTEGER]=r.RG8UI,e[Ft.RED_INTEGER]=r.R8UI,e[Ft.ALPHA]=r.ALPHA,e[Ft.LUMINANCE]=r.LUMINANCE,e[Ft.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Se.BYTE]=(i={},i[Ft.RGBA]=r.RGBA8_SNORM,i[Ft.RGB]=r.RGB8_SNORM,i[Ft.RG]=r.RG8_SNORM,i[Ft.RED]=r.R8_SNORM,i[Ft.RGBA_INTEGER]=r.RGBA8I,i[Ft.RGB_INTEGER]=r.RGB8I,i[Ft.RG_INTEGER]=r.RG8I,i[Ft.RED_INTEGER]=r.R8I,i),t[Se.UNSIGNED_SHORT]=(n={},n[Ft.RGBA_INTEGER]=r.RGBA16UI,n[Ft.RGB_INTEGER]=r.RGB16UI,n[Ft.RG_INTEGER]=r.RG16UI,n[Ft.RED_INTEGER]=r.R16UI,n[Ft.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Se.SHORT]=(s={},s[Ft.RGBA_INTEGER]=r.RGBA16I,s[Ft.RGB_INTEGER]=r.RGB16I,s[Ft.RG_INTEGER]=r.RG16I,s[Ft.RED_INTEGER]=r.R16I,s),t[Se.UNSIGNED_INT]=(a={},a[Ft.RGBA_INTEGER]=r.RGBA32UI,a[Ft.RGB_INTEGER]=r.RGB32UI,a[Ft.RG_INTEGER]=r.RG32UI,a[Ft.RED_INTEGER]=r.R32UI,a[Ft.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Se.INT]=(o={},o[Ft.RGBA_INTEGER]=r.RGBA32I,o[Ft.RGB_INTEGER]=r.RGB32I,o[Ft.RG_INTEGER]=r.RG32I,o[Ft.RED_INTEGER]=r.R32I,o),t[Se.FLOAT]=(h={},h[Ft.RGBA]=r.RGBA32F,h[Ft.RGB]=r.RGB32F,h[Ft.RG]=r.RG32F,h[Ft.RED]=r.R32F,h[Ft.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Se.HALF_FLOAT]=(u={},u[Ft.RGBA]=r.RGBA16F,u[Ft.RGB]=r.RGB16F,u[Ft.RG]=r.RG16F,u[Ft.RED]=r.R16F,u),t[Se.UNSIGNED_SHORT_5_6_5]=(l={},l[Ft.RGB]=r.RGB565,l),t[Se.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Ft.RGBA]=r.RGBA4,f),t[Se.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Ft.RGBA]=r.RGB5_A1,c),t[Se.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Ft.RGBA]=r.RGB10_A2,d[Ft.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Se.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Ft.RGB]=r.R11F_G11F_B10F,v),t[Se.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Ft.RGB]=r.RGB9_E5,_),t[Se.UNSIGNED_INT_24_8]=(m={},m[Ft.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Se.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Ft.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Se.UNSIGNED_BYTE]=(b={},b[Ft.RGBA]=r.RGBA,b[Ft.RGB]=r.RGB,b[Ft.ALPHA]=r.ALPHA,b[Ft.LUMINANCE]=r.LUMINANCE,b[Ft.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Se.UNSIGNED_SHORT_5_6_5]=(S={},S[Ft.RGB]=r.RGB,S),T[Se.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Ft.RGBA]=r.RGBA,R),T[Se.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Ft.RGBA]=r.RGBA,U),T),L}var DA=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Se.UNSIGNED_BYTE,this.internalFormat=Ft.RGBA,this.samplerType=0}return r}(),Tmt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Nn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=bmt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new DA(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new DA(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==Gw.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new DA(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Se.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==Gw.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===gd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=XO.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==gd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===dh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===dh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===dh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===dh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),$A=new da,Emt=function(r){or(t,r);function t(e,i){e===void 0&&(e=gg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new dn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=ryt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=HL.create(qO({width:s.width,height:s.height},o));return $A.tx=-s.x,$A.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:$A,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=gg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),wmt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),Imt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new wmt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){or(t,r);function t(e){var i=r.call(this,gg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Lv({projectionMatrix:new da},!0),i.addSystem(Kyt,"mask").addSystem(Eyt,"context").addSystem(gmt,"state").addSystem(fmt,"shader").addSystem(Tmt,"texture").addSystem(Imt,"buffer").addSystem(Cyt,"geometry").addSystem(Ryt,"framebuffer").addSystem(Zyt,"scissor").addSystem(Qyt,"stencil").addSystem(Jyt,"projection").addSystem(xmt,"textureGC").addSystem(byt,"filter").addSystem(tmt,"renderTexture").addSystem(Tyt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=ci.HIGH?this.multisample=ci.HIGH:i>=ci.MEDIUM?this.multisample=ci.MEDIUM:i>=ci.LOW?this.multisample=ci.LOW:this.multisample=ci.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof HL?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(Emt);var Rmt=function(){function r(){this.texArray=null,this.blend=0,this.type=xg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Cmt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),Amt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),Smt=function(r){or(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=jL.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Gh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Gyt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new Rmt);for(;i.length<s;)i.push(new Cmt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Nn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Nn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new Amt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(m7),Nmt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Lv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new VL(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new da,default:this.defaultGroupCache[t]};return new T7(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Pmt=function(r){or(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new bs(null,e,!1),i._indexBuffer=new bs(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Se.FLOAT).addAttribute("aColor",i._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Se.FLOAT).addIndex(i._indexBuffer),i}return t}(XL),_H=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,gH=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Omt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:_H,fragment:gH,geometryClass:Pmt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){or(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new Nmt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(Smt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return _H},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return gH},enumerable:!1,configurable:!0}),r}();Omt.create();/*!
 * @pixi/loaders - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ab=function(){function r(t,e,i){e===void 0&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return r.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},r}();function xH(r,t){return r._head?(r._tail._next=t,t._prev=r._tail,r._tail=t):(r._head=t,r._tail=t),t._owner=r,t}var ah=function(){function r(){this._head=this._tail=void 0}return r.prototype.handlers=function(t){t===void 0&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},r.prototype.has=function(t){if(!(t instanceof Ab))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},r.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,e),n=n._next;return!0},r.prototype.add=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return xH(this,new Ab(t,!1,e))},r.prototype.once=function(t,e){if(e===void 0&&(e=null),typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return xH(this,new Ab(t,!0,e))},r.prototype.detach=function(t){if(!(t instanceof Ab))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)},r.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},r}();function I7(r,t){t=t||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=e.parser[t.strictMode?"strict":"loose"].exec(r),n={},s=14;s--;)n[e.key[s]]=i[s]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(a,o,h){o&&(n[e.q.name][o]=h)}),n}var Fmt=!!(self.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),Sb=null,Umt=0,bH=200,Mmt=204,Lmt=1223,Bmt=2;function TH(){}function EH(r,t,e){t&&t.indexOf(".")===0&&(t=t.substring(1)),t&&(r[t]=e)}function HA(r){return r.toString().replace("object ","")}var qr=function(){function r(t,e,i){if(this._dequeue=TH,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof t!="string"||typeof e!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,e.indexOf("data:")===0),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=TH,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new ah,this.onProgress=new ah,this.onComplete=new ah,this.onAfterMiddleware=new ah}return r.setExtensionLoadType=function(t,e){EH(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){EH(r._xhrTypeMap,t,e)},Object.defineProperty(r.prototype,"isDataUrl",{get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isComplete",{get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isLoading",{get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),r.prototype.complete=function(){this._clearEvents(),this._finish()},r.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},r.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete){t&&setTimeout(function(){return t(e)},1);return}else t&&this.onComplete.once(t);switch(this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:Fmt&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},r.prototype._hasFlag=function(t){return(this._flags&t)!==0},r.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},r.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},r.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:t==="image"&&typeof self.Image<"u"?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:t==="audio"&&typeof self.Audio<"u"?this.data=new Audio:this.data=document.createElement(t),this.data===null){this.abort("Unsupported element: "+t);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},r.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},r.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var t=this.xhr=new self.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},r.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},r.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},r.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},r.prototype._onTimeout=function(){this.abort("Load timed out.")},r.prototype._xhrOnError=function(){var t=this.xhr;this.abort(HA(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},r.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(HA(t)+" Request timed out.")},r.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(HA(t)+" Request was aborted by the user.")},r.prototype._xhrOnLoad=function(){var t=this.xhr,e="",i=typeof t.status>"u"?bH:t.status;(t.responseType===""||t.responseType==="text"||typeof t.responseType>"u")&&(e=t.responseText),i===Umt&&(e.length>0||t.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?i=bH:i===Lmt&&(i=Mmt);var n=i/100|0;if(n===Bmt)if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=r.TYPE.JSON}catch(o){this.abort("Error trying to parse loaded json: "+o);return}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var s=new DOMParser;this.data=s.parseFromString(e,"text/xml")}else{var a=document.createElement("div");a.innerHTML=e,this.data=a}this.type=r.TYPE.XML}catch(o){this.abort("Error trying to parse loaded xml: "+o);return}else this.data=t.response||e;else{this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);return}this.complete()},r.prototype._determineCrossOrigin=function(t,e){if(t.indexOf("data:")===0)return"";if(self.origin!==self.location.origin)return"anonymous";e=e||self.location,Sb||(Sb=document.createElement("a")),Sb.href=t;var i=I7(Sb.href,{strictMode:!0}),n=!i.port&&e.port===""||i.port===e.port,s=i.protocol?i.protocol+":":"";return i.host!==e.hostname||!n||s!==e.protocol?"anonymous":""},r.prototype._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},r.prototype._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},r.prototype._getExtension=function(t){t===void 0&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),s=t.indexOf("#"),a=Math.min(n>-1?n:t.length,s>-1?s:t.length);t=t.substring(0,a),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r}();(function(r){(function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"})(r.STATUS_FLAGS||(r.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(r.TYPE||(r.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(r.LOAD_TYPE||(r.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(r.XHR_RESPONSE_TYPE||(r.XHR_RESPONSE_TYPE={})),r._loadTypeMap={gif:r.LOAD_TYPE.IMAGE,png:r.LOAD_TYPE.IMAGE,bmp:r.LOAD_TYPE.IMAGE,jpg:r.LOAD_TYPE.IMAGE,jpeg:r.LOAD_TYPE.IMAGE,tif:r.LOAD_TYPE.IMAGE,tiff:r.LOAD_TYPE.IMAGE,webp:r.LOAD_TYPE.IMAGE,tga:r.LOAD_TYPE.IMAGE,svg:r.LOAD_TYPE.IMAGE,"svg+xml":r.LOAD_TYPE.IMAGE,mp3:r.LOAD_TYPE.AUDIO,ogg:r.LOAD_TYPE.AUDIO,wav:r.LOAD_TYPE.AUDIO,mp4:r.LOAD_TYPE.VIDEO,webm:r.LOAD_TYPE.VIDEO},r._xhrTypeMap={xhtml:r.XHR_RESPONSE_TYPE.DOCUMENT,html:r.XHR_RESPONSE_TYPE.DOCUMENT,htm:r.XHR_RESPONSE_TYPE.DOCUMENT,xml:r.XHR_RESPONSE_TYPE.DOCUMENT,tmx:r.XHR_RESPONSE_TYPE.DOCUMENT,svg:r.XHR_RESPONSE_TYPE.DOCUMENT,tsx:r.XHR_RESPONSE_TYPE.DOCUMENT,gif:r.XHR_RESPONSE_TYPE.BLOB,png:r.XHR_RESPONSE_TYPE.BLOB,bmp:r.XHR_RESPONSE_TYPE.BLOB,jpg:r.XHR_RESPONSE_TYPE.BLOB,jpeg:r.XHR_RESPONSE_TYPE.BLOB,tif:r.XHR_RESPONSE_TYPE.BLOB,tiff:r.XHR_RESPONSE_TYPE.BLOB,webp:r.XHR_RESPONSE_TYPE.BLOB,tga:r.XHR_RESPONSE_TYPE.BLOB,json:r.XHR_RESPONSE_TYPE.JSON,text:r.XHR_RESPONSE_TYPE.TEXT,txt:r.XHR_RESPONSE_TYPE.TEXT,ttf:r.XHR_RESPONSE_TYPE.BUFFER,otf:r.XHR_RESPONSE_TYPE.BUFFER},r.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(qr||(qr={}));function mf(){}function Gmt(r){return function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(r===null)throw new Error("Callback was already called.");var s=r;r=null,s.apply(this,i)}}var kmt=function(){function r(t,e){this.data=t,this.callback=e}return r}(),XA=function(){function r(t,e){var i=this;if(e===void 0&&(e=1),this.workers=0,this.saturated=mf,this.unsaturated=mf,this.empty=mf,this.drain=mf,this.error=mf,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(n,s,a){if(a&&typeof a!="function")throw new Error("task callback must be a function");if(i.started=!0,n==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var o=new kmt(n,typeof a=="function"?a:mf);s?i._tasks.unshift(o):i._tasks.push(o),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var n=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(n.data,Gmt(i._next(n)))}},this._worker=t,e===0)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return r.prototype._next=function(t){var e=this;return function(){for(var i=arguments,n=[],s=0;s<arguments.length;s++)n[s]=i[s];e.workers-=1,t.callback.apply(t,n),n[0]!=null&&e.error(n[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},r.prototype.push=function(t,e){this._insert(t,!1,e)},r.prototype.kill=function(){this.workers=0,this.drain=mf,this.started=!1,this._tasks=[]},r.prototype.unshift=function(t,e){this._insert(t,!0,e)},r.prototype.length=function(){return this._tasks.length},r.prototype.running=function(){return this.workers},r.prototype.idle=function(){return this._tasks.length+this.workers===0},r.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},r.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},r.eachSeries=function(t,e,i,n){var s=0,a=t.length;function o(h){if(h||s===a){i&&i(h);return}n?setTimeout(function(){e(t[s++],o)},1):e(t[s++],o)}o()},r.queue=function(t,e){return new r(t,e)},r}(),VA=100,Dmt=/(#[\w-]+)?$/,Yo=function(){function r(t,e){var i=this;t===void 0&&(t=""),e===void 0&&(e=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this.resources={},this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,u){return i._loadResource(h,u)},this._queue=XA.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new ah,this.onError=new ah,this.onLoad=new ah,this.onStart=new ah,this.onComplete=new ah;for(var n=0;n<r._plugins.length;++n){var s=r._plugins[n],a=s.pre,o=s.use;a&&this.pre(a),o&&this.use(o)}this._protected=!1}return r.prototype._add=function(t,e,i,n){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new qr(t,e,i),typeof n=="function"&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],o=0;o<s.children.length;++o)s.children[o].isComplete||a.push(s.children[o]);var h=s.progressChunk*(a.length+1),u=h/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=u;for(var o=0;o<a.length;++o)a[o].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},r.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=VA/e,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(r.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),r.prototype._prepareUrl=function(t){var e=I7(t,{strictMode:!0}),i;if(e.protocol||!e.path||t.indexOf("//")===0?i=t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&t.charAt(0)!=="/"?i=this.baseUrl+"/"+t:i=this.baseUrl+t,this.defaultQueryString){var n=Dmt.exec(i)[0];i=i.substr(0,i.length-n.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},r.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,XA.eachSeries(this._beforeMiddleware,function(n,s){n.call(i,t,function(){s(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},r.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},r.prototype._onComplete=function(){this.progress=VA,this.loading=!1,this.onComplete.dispatch(this,this.resources)},r.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),XA.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(VA,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&e._resourcesParsing.length===0&&e._onComplete()},!0)},r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var t=r._shared;return t||(t=new r,t._protected=!0,r._shared=t),t},enumerable:!1,configurable:!0}),r.registerPlugin=function(t){return r._plugins.push(t),t.add&&t.add(),r},r._plugins=[],r}();Yo.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if(typeof t=="object"&&(i=t,n=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),typeof e!="string"&&(n=i,i=e,e=t),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof i=="function"&&(n=i,i=null),this._add(t,e,i,n)};var $mt=function(){function r(){}return r.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Yo.shared:new Yo},r.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},r}(),Hmt=function(){function r(){}return r.add=function(){qr.setExtensionLoadType("svg",qr.LOAD_TYPE.XHR),qr.setExtensionXhrType("svg",qr.XHR_RESPONSE_TYPE.TEXT)},r.use=function(t,e){if(t.data&&(t.type===qr.TYPE.IMAGE||t.extension==="svg")){var i=t.data,n=t.url,s=t.name,a=t.metadata;Wo.fromLoader(i,n,s,a).then(function(o){t.texture=o,e()}).catch(e)}else e()},r}(),Xmt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Vmt(r){for(var t="",e=0;e<r.length;){for(var i=[0,0,0],n=[0,0,0,0],s=0;s<i.length;++s)e<r.length?i[s]=r.charCodeAt(e++)&255:i[s]=0;n[0]=i[0]>>2,n[1]=(i[0]&3)<<4|i[1]>>4,n[2]=(i[1]&15)<<2|i[2]>>6,n[3]=i[2]&63;var a=e-(r.length-1);switch(a){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64;break}for(var s=0;s<n.length;++s)t+=Xmt.charAt(n[s])}return t}var wH=self.URL||self.webkitURL;function jmt(r,t){if(!r.data){t();return}if(r.xhr&&r.xhrType===qr.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof r.data=="string"){var e=r.xhr.getResponseHeader("content-type");if(e&&e.indexOf("image")===0){r.data=new Image,r.data.src="data:"+e+";base64,"+Vmt(r.xhr.responseText),r.type=qr.TYPE.IMAGE,r.data.onload=function(){r.data.onload=null,t()};return}}else if(r.data.type.indexOf("image")===0){var i=wH.createObjectURL(r.data);r.blob=r.data,r.data=new Image,r.data.src=i,r.type=qr.TYPE.IMAGE,r.data.onload=function(){wH.revokeObjectURL(i),r.data.onload=null,t()};return}}t()}Yo.registerPlugin({use:jmt});Yo.registerPlugin(Hmt);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(kh||(kh={}));var Tg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Tg||(Tg={}));var Dw;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Dw||(Dw={}));var ye;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ye||(ye={}));var Eg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Eg||(Eg={}));var St;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(St||(St={}));var Jc;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Jc||(Jc={}));var oe;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(oe||(oe={}));var $w;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})($w||($w={}));var ph;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(ph||(ph={}));var ZO;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ZO||(ZO={}));var Il;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Il||(Il={}));var Dh;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Dh||(Dh={}));var Iu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Iu||(Iu={}));var QO;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(QO||(QO={}));var go;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(go||(go={}));var us;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(us||(us={}));var di;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(di||(di={}));var Mo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Mo||(Mo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var Hw;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(Hw||(Hw={}));var jA=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),pp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jA(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=Hw.NORMAL),this._addListener(new jA(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=Hw.NORMAL),this._addListener(new jA(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zmt=Math.PI*2,JO;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(JO||(JO={}));var pn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=JO.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),zu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Nb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),pa=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new zu;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new zu;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(zmt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Jf=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],tc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ec=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],rc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tF=[],R7=[],Pb=Math.sign;function Wmt(){for(var r=0;r<16;r++){var t=[];tF.push(t);for(var e=0;e<16;e++)for(var i=Pb(Jf[r]*Jf[e]+ec[r]*tc[e]),n=Pb(tc[r]*Jf[e]+rc[r]*tc[e]),s=Pb(Jf[r]*ec[e]+ec[r]*rc[e]),a=Pb(tc[r]*ec[e]+rc[r]*rc[e]),o=0;o<16;o++)if(Jf[o]===i&&tc[o]===n&&ec[o]===s&&rc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new pa;h.set(Jf[r],tc[r],ec[r],rc[r],0,0),R7.push(h)}}Wmt();var Pr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Jf[r]},uY:function(r){return tc[r]},vX:function(r){return ec[r]},vY:function(r){return rc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return tF[r][t]},sub:function(r,t){return tF[r][Pr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Pr.S:Pr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Pr.E:Pr.W:t>0?r>0?Pr.SE:Pr.SW:r>0?Pr.NE:Pr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=R7[Pr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new pa,this.localTransform=new pa,this.position=new Nb(this.onChange,this,0,0),this.scale=new Nb(this.onChange,this,1,1),this.pivot=new Nb(this.onChange,this,0,0),this.skew=new Nb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?kh.WEBGL:kh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var eF=[];function C7(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=eF.length-1;n>=0;--n){var s=eF[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rF=function(r,t){return rF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},rF(r,t)};function hr(r,t){rF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var iF=function(){return iF=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},iF.apply(this,arguments)};function Ymt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var wg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),uI=function(r){hr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Dh.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(wg),qmt={scaleMode:ph.NEAREST,format:St.RGBA,alphaMode:Dh.NPM},Vi=function(r){hr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof wg)&&(e=C7(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||St.RGBA,n.type=d||oe.UNSIGNED_BYTE,n.target=v||Jc.TEXTURE_2D,n.alphaMode=s!==void 0?s:Dh.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new uI(e,{width:i,height:n}),o=e instanceof Float32Array?oe.FLOAT:oe.UNSIGNED_BYTE;return new t(a,Object.assign(qmt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),A7=function(r){hr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Vi;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof wg?this.addResourceAt(e[n],n):this.addResourceAt(C7(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(wg),Kmt=function(r){hr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Jc.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(A7),Rl=function(r){hr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Dh.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(wg),S7=function(r){hr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Rl),Zmt=function(r){hr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=Jc.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=Jc.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Jc.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(A7),N7=function(r){hr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Rl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Dh.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Rl),Qmt=function(r){hr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Rl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Rl),Jmt=function(r){hr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Rl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=pp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(pp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(pp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(pp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(pp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(pp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Rl),t_t=function(r){hr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Rl);eF.push(N7,t_t,S7,Jmt,Qmt,uI,Zmt,Kmt);var e_t=function(r){hr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Dh.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(uI),nF=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=di.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Vi(null,{scaleMode:ph.NEAREST,resolution:1,mipmap:Il.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Vi(new e_t(null,{width:this.width,height:this.height}),{scaleMode:ph.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Il.OFF,format:St.DEPTH_COMPONENT,type:oe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),P7=function(r){hr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:di.NONE,i=r.call(this,null,e)||this,i.mipmap=Il.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new nF(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Vi),O7=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Pr.add(i,Pr.NW),this.x0=h+a*Pr.uX(i),this.y0=u+o*Pr.uY(i),i=Pr.add(i,2),this.x1=h+a*Pr.uX(i),this.y1=u+o*Pr.uY(i),i=Pr.add(i,2),this.x2=h+a*Pr.uX(i),this.y2=u+o*Pr.uY(i),i=Pr.add(i,2),this.x3=h+a*Pr.uX(i),this.y3=u+o*Pr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),IH=new O7,ha=function(r){hr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new pn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=IH,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new zu(o.x,o.y):new zu(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===IH&&(this._uvs=new O7),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Vi(e,i)),h.baseTexture.cacheId=a,Vi.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Vi.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Vi(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof N7&&(o.url=i);var h=new t(a);return n||(n=i),Vi.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Vi.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function r_t(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new ha(new Vi(new S7(r)))}function lI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}ha.EMPTY=new ha(new Vi);lI(ha.EMPTY);lI(ha.EMPTY.baseTexture);ha.WHITE=r_t();lI(ha.WHITE);lI(ha.WHITE.baseTexture);var zL=function(r){hr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new P7(e))},t}(ha),i_t=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=di.NONE);var n=new P7(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new zL(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=di.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||di.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),RH=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=oe.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),n_t=0,Ts=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=n_t++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Mo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Mo.ELEMENT_ARRAY_BUFFER:Mo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),s_t={Float32Array,Uint32Array,Int32Array,Uint8Array};function a_t(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new s_t[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var CH={5126:4,5123:2,5121:1},o_t=0,h_t={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},WL=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=o_t++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ts||(e instanceof Array&&(e=new Float32Array(e)),e=new Ts(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new RH(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Ts||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ts(t)),t.type=Mo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Ts,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*CH[s.type]/4),s.buffer=0}for(i.data=a_t(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ts(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new RH(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Mo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new h_t[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Ts(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Mo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*CH[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),u_t=function(r){hr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(WL),l_t=function(r){hr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ts(e.vertices),e.uvBuffer=new Ts(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(WL),f_t=0,Gv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=f_t++,this.static=!!e,this.ubo=!!i,t instanceof Ts?(this.buffer=t,this.buffer.type=Mo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ts(new Float32Array(1)),this.buffer.type=Mo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),c_t=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=di.NONE,this.sourceFrame=new pn,this.destinationFrame=new pn,this.bindingSourceFrame=new pn,this.bindingDestinationFrame=new pn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Ob=[new zu,new zu,new zu,new zu],zA=new pa,d_t=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new i_t,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new u_t,this.quadUv=new l_t,this.tempRect=new pn,this.activeState={},this.globalUniforms=new Gv({outputFrame:new pn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new c_t,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(zA.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Iu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Iu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Iu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Iu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Iu.CLEAR||e===Iu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Eg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Eg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(pa.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=di.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||di.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=Ob[0],n=Ob[1],s=Ob[2],a=Ob[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?zA.copyFrom(s):zA.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),F7=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),p_t=function(){function r(t){this.renderer=t,this.emptyRenderer=new F7(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),AH=0,v_t=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=AH++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=AH++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=kh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),y_t=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=di.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),m_t=new pn,__t=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new nF(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new pn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===kh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=Dw.COLOR|Dw.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new y_t(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=di.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=di.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new nF(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=m_t,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new pn},r.prototype.destroy=function(){this.renderer=null},r}(),WA={5126:4,5123:2,5121:1},g_t=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===kh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*WA[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*WA[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*WA[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),x_t=function(){function r(t){t===void 0&&(t=null),this.type=us.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=us.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function SH(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function NH(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function b_t(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||NH(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||NH(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function YA(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function U7(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return YA(2*t);case"bvec3":return YA(3*t);case"bvec4":return YA(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var M7={},bm=M7;function T_t(){if(bm===M7||bm&&bm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=kh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),bm=t}return bm}var Fb;function E_t(){if(!Fb){Fb=go.MEDIUM;var r=T_t();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Fb=t.precision?go.HIGH:go.MEDIUM}}return Fb}function PH(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===go.HIGH&&e!==go.HIGH&&(i=go.MEDIUM),"precision "+i+` float;
`+r}else if(e!==go.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var w_t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function L7(r){return w_t[r]}var Ub=null,OH={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function B7(r,t){if(!Ub){var e=Object.keys(OH);Ub={};for(var i=0;i<e.length;++i){var n=e[i];Ub[r[n]]=OH[n]}}return Ub[t]}var kv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],I_t={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},R_t={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function C_t(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<kv.length;o++)if(kv[o].test(n,s)){e.push(kv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?I_t:R_t,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var A_t=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function S_t(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function N_t(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=A_t.replace(/%forloop%/gi,S_t(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Tm;function P_t(){if(typeof Tm=="boolean")return Tm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Tm=r({a:"b"},"a","b")===!0}catch{Tm=!1}return Tm}var O_t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,F_t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,U_t=0,Mb={},YL=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=U_t++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Mb[i]?(Mb[i]++,i+="-"+Mb[i]):Mb[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=PH(this.vertexSrc,A.PRECISION_VERTEX,go.HIGH),this.fragmentSrc=PH(this.fragmentSrc,A.PRECISION_FRAGMENT,E_t())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return F_t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return O_t},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),G7=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Gv?this.uniformGroup=e:this.uniformGroup=new Gv(e):this.uniformGroup=new Gv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=YL.from(t,e);return new r(n,i)},r}(),qA=0,KA=1,ZA=2,QA=3,JA=4,tS=5,qL=function(){function r(){this.data=0,this.blendMode=ye.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<qA)},set:function(t){!!(this.data&1<<qA)!==t&&(this.data^=1<<qA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<KA)},set:function(t){!!(this.data&1<<KA)!==t&&(this.data^=1<<KA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<ZA)},set:function(t){!!(this.data&1<<ZA)!==t&&(this.data^=1<<ZA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<QA)},set:function(t){!!(this.data&1<<QA)!==t&&(this.data^=1<<QA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<tS)},set:function(t){!!(this.data&1<<tS)!==t&&(this.data^=1<<tS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<JA)},set:function(t){!!(this.data&1<<JA)!==t&&(this.data^=1<<JA)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ye.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),M_t=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,L_t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,B_t=function(r){hr(t,r);function t(e,i,n){var s=this,a=YL.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new qL,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return M_t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return L_t},enumerable:!1,configurable:!0}),t}(G7),G_t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,k_t=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,FH=new pa,D_t=function(){function r(t,e){this._texture=t,this.mapCoord=new pa,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(FH.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(FH));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),$_t=function(r){hr(t,r);function t(e){var i=this,n=new pa;return i=r.call(this,G_t,k_t)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new D_t(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(B_t),H_t=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new x_t;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case us.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case us.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case us.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case us.SCISSOR:this.renderer.scissor.pop();break;case us.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case us.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=us.SPRITE;return}if(t.type=us.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=us.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new $_t(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),k7=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),X_t=function(r){hr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(k7),V_t=function(r){hr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(k7),j_t=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new pa,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),_f=new pn,Em=new pn,z_t=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new pn,this.destinationFrame=new pn,this.viewportFrame=new pn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(_f.width=t.frame.width,_f.height=t.frame.height,e=_f),i||(Em.x=t.frame.x,Em.y=t.frame.y,Em.width=e.width,Em.height=e.height,i=Em),a=s.framebuffer):(o=n.resolution,e||(_f.width=n.screen.width,_f.height=n.screen.height,e=_f),i||(i=_f,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function W_t(r,t,e,i,n){e.buffer.update(n)}var Y_t={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},D7={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function q_t(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=D7[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function K_t(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function Z_t(r,t){if(!r.autoManage)return{size:0,syncFunc:W_t};for(var e=K_t(r.uniforms,t),i=q_t(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<kv.length;c++){var d=kv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",kv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=L7(h.data.type),_=Math.max(D7[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=Y_t[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Q_t=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function J_t(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=B7(t,s.type),o={type:a,name:s.name,size:L7(a),location:n};e[s.name]=o}}return e}function tgt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=B7(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:U7(h,s.size)}}return e}function egt(r,t){var e=SH(r,r.VERTEX_SHADER,t.vertexSrc),i=SH(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||b_t(r,n,e,i),t.attributeData=J_t(n,r),t.uniformData=tgt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:U7(h.type,h.size)}}var u=new Q_t(n,o);return u}var rgt=0,Lb={textureCount:0,uboCount:0},igt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=rgt++}return r.prototype.systemCheck=function(){if(!P_t())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Lb.textureCount=0,Lb.uboCount=0,this.syncUniformGroup(t.uniformGroup,Lb)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=C_t(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,Lb,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=Z_t(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=egt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function ngt(r,t){return t===void 0&&(t=[]),t[ye.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.ADD]=[r.ONE,r.ONE],t[ye.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.NONE]=[0,0],t[ye.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ye.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ye.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ye.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ye.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ye.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ye.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ye.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ye.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ye.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ye.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var sgt=0,agt=1,ogt=2,hgt=3,ugt=4,lgt=5,fgt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ye.NONE,this._blendEq=!1,this.map=[],this.map[sgt]=this.setBlend,this.map[agt]=this.setOffset,this.map[ogt]=this.setCullFace,this.map[hgt]=this.setDepthTest,this.map[ugt]=this.setFrontFace,this.map[lgt]=this.setDepthMask,this.checks=[],this.defaultState=new qL,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=ngt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),cgt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==QO.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function dgt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[oe.UNSIGNED_BYTE]=(e={},e[St.RGBA]=r.RGBA8,e[St.RGB]=r.RGB8,e[St.RG]=r.RG8,e[St.RED]=r.R8,e[St.RGBA_INTEGER]=r.RGBA8UI,e[St.RGB_INTEGER]=r.RGB8UI,e[St.RG_INTEGER]=r.RG8UI,e[St.RED_INTEGER]=r.R8UI,e[St.ALPHA]=r.ALPHA,e[St.LUMINANCE]=r.LUMINANCE,e[St.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[oe.BYTE]=(i={},i[St.RGBA]=r.RGBA8_SNORM,i[St.RGB]=r.RGB8_SNORM,i[St.RG]=r.RG8_SNORM,i[St.RED]=r.R8_SNORM,i[St.RGBA_INTEGER]=r.RGBA8I,i[St.RGB_INTEGER]=r.RGB8I,i[St.RG_INTEGER]=r.RG8I,i[St.RED_INTEGER]=r.R8I,i),t[oe.UNSIGNED_SHORT]=(n={},n[St.RGBA_INTEGER]=r.RGBA16UI,n[St.RGB_INTEGER]=r.RGB16UI,n[St.RG_INTEGER]=r.RG16UI,n[St.RED_INTEGER]=r.R16UI,n[St.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[oe.SHORT]=(s={},s[St.RGBA_INTEGER]=r.RGBA16I,s[St.RGB_INTEGER]=r.RGB16I,s[St.RG_INTEGER]=r.RG16I,s[St.RED_INTEGER]=r.R16I,s),t[oe.UNSIGNED_INT]=(a={},a[St.RGBA_INTEGER]=r.RGBA32UI,a[St.RGB_INTEGER]=r.RGB32UI,a[St.RG_INTEGER]=r.RG32UI,a[St.RED_INTEGER]=r.R32UI,a[St.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[oe.INT]=(o={},o[St.RGBA_INTEGER]=r.RGBA32I,o[St.RGB_INTEGER]=r.RGB32I,o[St.RG_INTEGER]=r.RG32I,o[St.RED_INTEGER]=r.R32I,o),t[oe.FLOAT]=(h={},h[St.RGBA]=r.RGBA32F,h[St.RGB]=r.RGB32F,h[St.RG]=r.RG32F,h[St.RED]=r.R32F,h[St.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[oe.HALF_FLOAT]=(u={},u[St.RGBA]=r.RGBA16F,u[St.RGB]=r.RGB16F,u[St.RG]=r.RG16F,u[St.RED]=r.R16F,u),t[oe.UNSIGNED_SHORT_5_6_5]=(l={},l[St.RGB]=r.RGB565,l),t[oe.UNSIGNED_SHORT_4_4_4_4]=(f={},f[St.RGBA]=r.RGBA4,f),t[oe.UNSIGNED_SHORT_5_5_5_1]=(c={},c[St.RGBA]=r.RGB5_A1,c),t[oe.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[St.RGBA]=r.RGB10_A2,d[St.RGBA_INTEGER]=r.RGB10_A2UI,d),t[oe.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[St.RGB]=r.R11F_G11F_B10F,v),t[oe.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[St.RGB]=r.RGB9_E5,_),t[oe.UNSIGNED_INT_24_8]=(m={},m[St.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[oe.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[St.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[oe.UNSIGNED_BYTE]=(b={},b[St.RGBA]=r.RGBA,b[St.RGB]=r.RGB,b[St.ALPHA]=r.ALPHA,b[St.LUMINANCE]=r.LUMINANCE,b[St.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[oe.UNSIGNED_SHORT_5_6_5]=(S={},S[St.RGB]=r.RGB,S),T[oe.UNSIGNED_SHORT_4_4_4_4]=(R={},R[St.RGBA]=r.RGBA,R),T[oe.UNSIGNED_SHORT_5_5_5_1]=(U={},U[St.RGBA]=r.RGBA,U),T),L}var eS=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=oe.UNSIGNED_BYTE,this.internalFormat=St.RGBA,this.samplerType=0}return r}(),pgt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Vi,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=dgt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new eS(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new eS(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==$w.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new eS(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===oe.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==$w.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Il.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=ZO.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Il.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ph.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===ph.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===ph.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===ph.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),rS=new pa,vgt=function(r){hr(t,r);function t(e,i){e===void 0&&(e=Tg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new pn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=Ymt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=zL.create(iF({width:s.width,height:s.height},o));return rS.tx=-s.x,rS.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:rS,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Tg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),ygt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),mgt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new ygt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){hr(t,r);function t(e){var i=r.call(this,Tg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Gv({projectionMatrix:new pa},!0),i.addSystem(H_t,"mask").addSystem(v_t,"context").addSystem(fgt,"state").addSystem(igt,"shader").addSystem(pgt,"texture").addSystem(mgt,"buffer").addSystem(g_t,"geometry").addSystem(__t,"framebuffer").addSystem(X_t,"scissor").addSystem(V_t,"stencil").addSystem(j_t,"projection").addSystem(cgt,"textureGC").addSystem(d_t,"filter").addSystem(z_t,"renderTexture").addSystem(p_t,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=di.HIGH?this.multisample=di.HIGH:i>=di.MEDIUM?this.multisample=di.MEDIUM:i>=di.LOW?this.multisample=di.LOW:this.multisample=di.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof zL?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(vgt);var _gt=function(){function r(){this.texArray=null,this.blend=0,this.type=Eg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),ggt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),sF=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),xgt=function(r){hr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=qL.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===kh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=N_t(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new _gt);for(;i.length<s;)i.push(new ggt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Vi._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Vi._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new sF(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(F7),bgt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Gv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new YL(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new pa,default:this.defaultGroupCache[t]};return new G7(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Tgt=function(r){hr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Ts(null,e,!1),i._indexBuffer=new Ts(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,oe.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,oe.FLOAT).addAttribute("aColor",i._buffer,4,!0,oe.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,oe.FLOAT).addIndex(i._indexBuffer),i}return t}(WL),UH=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,MH=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Egt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:UH,fragment:MH,geometryClass:Tgt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){hr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new bgt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(xgt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return UH},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return MH},enumerable:!1,configurable:!0}),r}();Egt.create();/*!
 * @pixi/compressed-textures - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qe,ae;(function(r){r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(ae||(ae={}));var Xw=(qe={},qe[ae.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,qe[ae.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,qe[ae.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,qe[ae.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,qe[ae.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,qe[ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,qe[ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,qe[ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,qe[ae.COMPRESSED_R11_EAC]=.5,qe[ae.COMPRESSED_SIGNED_R11_EAC]=.5,qe[ae.COMPRESSED_RG11_EAC]=1,qe[ae.COMPRESSED_SIGNED_RG11_EAC]=1,qe[ae.COMPRESSED_RGB8_ETC2]=.5,qe[ae.COMPRESSED_RGBA8_ETC2_EAC]=1,qe[ae.COMPRESSED_SRGB8_ETC2]=.5,qe[ae.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,qe[ae.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,qe[ae.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,qe[ae.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,qe[ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,qe[ae.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,qe[ae.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,qe[ae.COMPRESSED_RGB_ETC1_WEBGL]=.5,qe[ae.COMPRESSED_RGB_ATC_WEBGL]=.5,qe[ae.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,qe[ae.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,qe);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var aF=function(r,t){return aF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},aF(r,t)};function $7(r,t){aF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function wgt(r,t,e,i){return new(e||(e=Promise))(function(n,s){function a(u){try{h(i.next(u))}catch(l){s(l)}}function o(u){try{h(i.throw(u))}catch(l){s(l)}}function h(u){u.done?n(u.value):new e(function(l){l(u.value)}).then(a,o)}h((i=i.apply(r,[])).next())})}function Igt(r,t){var e={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(u){return function(l){return h([u,l])}}function h(u){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,n&&(s=u[0]&2?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,n=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(s=e.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){e.label=u[1];break}if(u[0]===6&&e.label<s[1]){e.label=s[1],s=u;break}if(s&&e.label<s[2]){e.label=s[2],e.ops.push(u);break}s[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(l){u=[6,l],n=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Rgt=function(r){$7(t,r);function t(e,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var n=this,s,a;return typeof e=="string"?(s=e,a=new Uint8Array):(s=null,a=e),n=r.call(this,a,i)||this,n.origin=s,n.buffer=a?new sF(a):null,n.origin&&i.autoLoad!==!1&&n.load(),a&&a.length&&(n.loaded=!0,n.onBlobLoaded(n.buffer.rawBinaryData)),n}return t.prototype.onBlobLoaded=function(e){},t.prototype.load=function(){return wgt(this,void 0,Promise,function(){var e,i,n;return Igt(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return e=s.sent(),[4,e.blob()];case 2:return i=s.sent(),[4,i.arrayBuffer()];case 3:return n=s.sent(),this.data=new Uint32Array(n),this.buffer=new sF(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),[2,this]}})})},t}(uI),oF=function(r){$7(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.format=i.format,n.levels=i.levels||1,n._width=i.width,n._height=i.height,n._extension=t._formatToExtension(n.format),(i.levelBuffers||n.buffer)&&(n._levelBuffers=i.levelBuffers||t._createLevelBuffers(e instanceof Uint8Array?e:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return t.prototype.upload=function(e,i,n){var s=e.gl,a=e.context.extensions[this._extension];if(!a)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var o=0,h=this.levels;o<h;o++){var u=this._levelBuffers[o],l=u.levelID,f=u.levelWidth,c=u.levelHeight,d=u.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,l,this.format,f,c,0,d)}return!0},t.prototype.onBlobLoaded=function(){this._levelBuffers=t._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},t._formatToExtension=function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},t._createLevelBuffers=function(e,i,n,s,a,o,h){for(var u=new Array(n),l=e.byteOffset,f=o,c=h,d=f+s-1&~(s-1),v=c+a-1&~(a-1),_=d*v*Xw[i],m=0;m<n;m++)u[m]={levelID:m,levelWidth:n>1?f:d,levelHeight:n>1?c:v,levelBuffer:new Uint8Array(e.buffer,l,_)},l+=_,f=f>>1||1,c=c>>1||1,d=f+s-1&~(s-1),v=c+a-1&~(a-1),_=d*v*Xw[i];return u},t}(Rgt),Cgt=function(){function r(){}return r.use=function(t,e){var i=t.data,n=this;if(t.type===qr.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var s=i.textures,a=void 0,o=void 0,h=0,u=s.length;h<u;h++){var l=s[h],f=l.src,c=l.format;if(c||(o=f),r.textureFormats[c]){a=f;break}}if(a=a||o,!a){e(new Error("Cannot load compressed-textures in "+t.url+", make sure you provide a fallback"));return}if(a===t.url){e(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},v=mv.resolve(t.url.replace(n.baseUrl,""),a),_=i.cacheID;n.add(_,v,d,function(m){if(m.error){e(m.error);return}var g=m.texture,T=g===void 0?null:g,b=m.textures,S=b===void 0?{}:b;Object.assign(t,{texture:T,textures:S}),e()})}else e()},r.add=function(){var t=document.createElement("canvas"),e=t.getContext("webgl");if(!e){console.warn("WebGL not available for compressed textures. Silently failing.");return}var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};r.textureExtensions=i,r.textureFormats={};for(var n in i){var s=i[n];s&&Object.assign(r.textureFormats,Object.getPrototypeOf(s))}},r}();function H7(r,t,e){var i={textures:{},texture:null};if(!t)return i;var n=t.map(function(s){return new ha(new Vi(s,Object.assign({mipmap:Il.OFF,alphaMode:Dh.NO_PREMULTIPLIED_ALPHA},e)))});return n.forEach(function(s,a){var o=s.baseTexture,h=r+"-"+(a+1);Vi.addToCache(o,h),ha.addToCache(s,h),a===0&&(Vi.addToCache(o,r),ha.addToCache(s,r),i.texture=s),i.textures[h]=s}),i}var wm,Sa;qr.setExtensionXhrType("dds",qr.XHR_RESPONSE_TYPE.BUFFER);var iS=4,Bb=124,Agt=32,LH=20,Sgt=542327876,Gb={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Ngt={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},kb={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Fa;(function(r){r[r.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",r[r.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",r[r.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",r[r.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",r[r.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",r[r.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",r[r.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",r[r.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",r[r.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",r[r.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",r[r.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",r[r.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",r[r.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",r[r.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",r[r.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",r[r.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",r[r.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",r[r.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",r[r.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",r[r.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",r[r.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",r[r.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",r[r.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",r[r.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",r[r.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",r[r.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",r[r.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",r[r.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",r[r.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",r[r.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",r[r.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",r[r.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",r[r.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",r[r.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",r[r.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",r[r.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",r[r.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",r[r.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",r[r.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",r[r.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",r[r.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",r[r.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",r[r.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",r[r.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",r[r.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",r[r.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",r[r.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",r[r.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",r[r.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",r[r.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",r[r.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",r[r.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",r[r.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",r[r.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",r[r.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",r[r.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",r[r.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",r[r.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",r[r.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",r[r.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",r[r.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",r[r.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",r[r.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",r[r.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",r[r.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",r[r.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",r[r.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",r[r.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",r[r.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",r[r.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",r[r.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",r[r.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",r[r.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",r[r.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",r[r.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",r[r.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",r[r.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",r[r.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",r[r.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",r[r.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",r[r.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",r[r.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",r[r.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",r[r.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",r[r.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",r[r.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",r[r.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",r[r.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",r[r.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",r[r.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",r[r.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",r[r.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",r[r.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",r[r.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",r[r.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",r[r.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",r[r.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",r[r.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",r[r.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",r[r.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",r[r.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",r[r.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",r[r.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",r[r.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",r[r.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",r[r.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",r[r.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",r[r.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",r[r.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",r[r.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",r[r.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",r[r.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",r[r.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",r[r.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",r[r.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",r[r.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",r[r.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Fa||(Fa={}));var hF;(function(r){r[r.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",r[r.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",r[r.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(hF||(hF={}));var Pgt=1,Ogt=2,Fgt=4,Ugt=64,Mgt=512,Lgt=131072,Bgt=827611204,Ggt=861165636,kgt=894720068,Dgt=808540228,$gt=4,Hgt=(wm={},wm[Bgt]=ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,wm[Ggt]=ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,wm[kgt]=ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,wm),Xgt=(Sa={},Sa[Fa.DXGI_FORMAT_BC1_TYPELESS]=ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,Sa[Fa.DXGI_FORMAT_BC1_UNORM]=ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,Sa[Fa.DXGI_FORMAT_BC2_TYPELESS]=ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,Sa[Fa.DXGI_FORMAT_BC2_UNORM]=ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,Sa[Fa.DXGI_FORMAT_BC3_TYPELESS]=ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,Sa[Fa.DXGI_FORMAT_BC3_UNORM]=ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,Sa[Fa.DXGI_FORMAT_BC1_UNORM_SRGB]=ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Sa[Fa.DXGI_FORMAT_BC2_UNORM_SRGB]=ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Sa[Fa.DXGI_FORMAT_BC3_UNORM_SRGB]=ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Sa),Vgt=function(){function r(){}return r.use=function(t,e){if(t.extension==="dds"&&t.data)try{Object.assign(t,H7(t.name||t.url,r.parse(t.data),t.metadata))}catch(i){e(i);return}e()},r.parse=function(t){var e=new Uint32Array(t),i=e[0];if(i!==Sgt)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,Bb/Uint32Array.BYTES_PER_ELEMENT),s=n[Gb.HEIGHT],a=n[Gb.WIDTH],o=n[Gb.MIPMAP_COUNT],h=new Uint32Array(t,Gb.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Agt/Uint32Array.BYTES_PER_ELEMENT),u=h[Pgt];if(u&Fgt){var l=h[Ngt.FOURCC];if(l!==Dgt){var f=Hgt[l],c=iS+Bb,d=new Uint8Array(t,c),v=new oF(d,{format:f,width:a,height:s,levels:o});return[v]}var _=iS+Bb,m=new Uint32Array(e.buffer,_,LH/Uint32Array.BYTES_PER_ELEMENT),g=m[kb.DXGI_FORMAT],T=m[kb.RESOURCE_DIMENSION],b=m[kb.MISC_FLAG],S=m[kb.ARRAY_SIZE],R=Xgt[g];if(R===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+g);if(b===$gt)throw new Error("DDSLoader does not support cubemap textures");if(T===hF.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var U=new Array,L=iS+Bb+LH;if(S===1)U.push(new Uint8Array(t,L));else{for(var $=Xw[R],k=0,H=a,it=s,tt=0;tt<o;tt++){var j=Math.max(1,H+3&-4),at=Math.max(1,it+3&-4),K=j*at*$;k+=K,H=H>>>1,it=it>>>1}for(var et=L,tt=0;tt<S;tt++)U.push(new Uint8Array(t,et,k)),et+=k}return U.map(function(st){return new oF(st,{format:R,width:a,height:s,levels:o})})}throw u&Ugt?new Error("DDSLoader does not support uncompressed texture data."):u&Mgt?new Error("DDSLoader does not supported YUV uncompressed texture data."):u&Lgt?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):u&Ogt?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},r}(),vp,gf,Im;qr.setExtensionXhrType("ktx",qr.XHR_RESPONSE_TYPE.BUFFER);var BH=[171,75,84,88,32,49,49,187,13,10,26,10],jgt=67305985,Na={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},zgt=64,GH=(vp={},vp[oe.UNSIGNED_BYTE]=1,vp[oe.UNSIGNED_SHORT]=2,vp[oe.FLOAT]=4,vp[oe.HALF_FLOAT]=8,vp),Wgt=(gf={},gf[St.RGBA]=4,gf[St.RGB]=3,gf[St.LUMINANCE]=1,gf[St.LUMINANCE_ALPHA]=2,gf[St.ALPHA]=1,gf),Ygt=(Im={},Im[oe.UNSIGNED_SHORT_4_4_4_4]=2,Im[oe.UNSIGNED_SHORT_5_5_5_1]=2,Im[oe.UNSIGNED_SHORT_5_6_5]=2,Im),qgt=function(){function r(){}return r.use=function(t,e){if(t.extension==="ktx"&&t.data)try{var i=t.name||t.url;Object.assign(t,H7(i,r.parse(i,t.data),t.metadata))}catch(n){e(n);return}e()},r.parse=function(t,e){var i=new DataView(e);if(!r.validate(t,i))return null;var n=i.getUint32(Na.ENDIANNESS,!0)===jgt,s=i.getUint32(Na.GL_TYPE,n),a=i.getUint32(Na.GL_FORMAT,n),o=i.getUint32(Na.GL_INTERNAL_FORMAT,n),h=i.getUint32(Na.PIXEL_WIDTH,n),u=i.getUint32(Na.PIXEL_HEIGHT,n)||1,l=i.getUint32(Na.PIXEL_DEPTH,n)||1,f=i.getUint32(Na.NUMBER_OF_ARRAY_ELEMENTS,n)||1,c=i.getUint32(Na.NUMBER_OF_FACES,n),d=i.getUint32(Na.NUMBER_OF_MIPMAP_LEVELS,n),v=i.getUint32(Na.BYTES_OF_KEY_VALUE_DATA,n);if(u===0||l!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var _=4,m=4,g=h+3&-4,T=u+3&-4,b=new Array(f),S=h*u;s===0&&(S=g*T);var R;if(s!==0?GH[s]?R=GH[s]*Wgt[a]:R=Ygt[s]:R=Xw[o],R===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var U=S*R,L=U,$=h,k=u,H=g,it=T,tt=zgt+v,j=0;j<d;j++){for(var at=i.getUint32(tt,n),K=tt+4,et=0;et<f;et++){var st=b[et];st||(st=b[et]=new Array(d)),st[j]={levelID:j,levelWidth:d>1?$:H,levelHeight:d>1?k:it,levelBuffer:new Uint8Array(e,K,L)},K+=L}tt+=at+4,tt=tt%4!==0?tt+4-tt%4:tt,$=$>>1||1,k=k>>1||1,H=$+_-1&~(_-1),it=k+m-1&~(m-1),L=H*it*R}if(s!==0)throw new Error("TODO: Uncompressed");return b.map(function(V){return new oF(null,{format:o,width:h,height:u,levels:d,levelBuffers:V})})},r.validate=function(t,e){for(var i=0;i<BH.length;i++)if(e.getUint8(i)!==BH[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},r}();/*!
 * @pixi/particle-container - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var uF=function(r,t){return uF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},uF(r,t)};function X7(r,t){uF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}(function(r){X7(t,r);function t(e,i,n,s){e===void 0&&(e=1500),n===void 0&&(n=16384),s===void 0&&(s=!1);var a=r.call(this)||this,o=16384;return n>o&&(n=o),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=n,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=he.NORMAL,a.autoResize=s,a.roundPixels=!0,a.baseTexture=null,a.setProperties(i),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,ai(e,this.tintRgb)},enumerable:!1,configurable:!0}),t.prototype.render=function(e){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var i=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},t})(_l);var kH=function(){function r(t,e,i){this.geometry=new _0,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||ne.FLOAT,offset:s.offset},e[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return r.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new Oi(hct(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new Oi(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];n.offset=a,a+=n.size,this.staticStride+=n.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Oi(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];t.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===ne.UNSIGNED_BYTE,n.type,this.dynamicStride*4,n.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var n=this.staticProperties[i];t.addAttribute(n.attributeName,this.staticBuffer,0,n.type===ne.UNSIGNED_BYTE,n.type,this.staticStride*4,n.offset*4)}},r.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,e,i,s.type===ne.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},r.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,e,i,s.type===ne.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},r.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},r}(),Kgt=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Zgt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Qgt=function(r){X7(t,r);function t(e){var i=r.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Wi,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ne.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=md.from(Zgt,Kgt,{}),i.state=Md.for2d(),i}return t.prototype.render=function(e){var i=e.children,n=e._maxSize,s=e._batchSize,a=this.renderer,o=i.length;if(o!==0){o>n&&!e.autoResize&&(o=n);var h=e._buffers;h||(h=e._buffers=this.generateBuffers(e));var u=i[0]._texture.baseTexture;this.state.blendMode=S9(e.blendMode,u.alphaMode),a.state.set(this.state);var l=a.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=oct(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,v=0;d<o;d+=s,v+=1){var _=o-d;_>s&&(_=s),v>=h.length&&h.push(this._generateOneMoreBuffer(e));var m=h[v];m.uploadDynamic(i,d,_);var g=e._bufferUpdateIDs[v]||0;c=c||m._updateID<g,c&&(m._updateID=e._updateID,m.uploadStatic(i,d,_)),a.geometry.bind(m.geometry),l.drawElements(l.TRIANGLES,_*6,l.UNSIGNED_SHORT,0)}}},t.prototype.generateBuffers=function(e){for(var i=[],n=e._maxSize,s=e._batchSize,a=e._properties,o=0;o<n;o+=s)i.push(new kH(this.properties,a,s));return i},t.prototype._generateOneMoreBuffer=function(e){var i=e._batchSize,n=e._properties;return new kH(this.properties,n,i)},t.prototype.uploadVertices=function(e,i,n,s,a,o){for(var h=0,u=0,l=0,f=0,c=0;c<n;++c){var d=e[i+c],v=d._texture,_=d.scale.x,m=d.scale.y,g=v.trim,T=v.orig;g?(u=g.x-d.anchor.x*T.width,h=u+g.width,f=g.y-d.anchor.y*T.height,l=f+g.height):(h=T.width*(1-d.anchor.x),u=T.width*-d.anchor.x,l=T.height*(1-d.anchor.y),f=T.height*-d.anchor.y),s[o]=u*_,s[o+1]=f*m,s[o+a]=h*_,s[o+a+1]=f*m,s[o+a*2]=h*_,s[o+a*2+1]=l*m,s[o+a*3]=u*_,s[o+a*3+1]=l*m,o+=a*4}},t.prototype.uploadPosition=function(e,i,n,s,a,o){for(var h=0;h<n;h++){var u=e[i+h].position;s[o]=u.x,s[o+1]=u.y,s[o+a]=u.x,s[o+a+1]=u.y,s[o+a*2]=u.x,s[o+a*2+1]=u.y,s[o+a*3]=u.x,s[o+a*3+1]=u.y,o+=a*4}},t.prototype.uploadRotation=function(e,i,n,s,a,o){for(var h=0;h<n;h++){var u=e[i+h].rotation;s[o]=u,s[o+a]=u,s[o+a*2]=u,s[o+a*3]=u,o+=a*4}},t.prototype.uploadUvs=function(e,i,n,s,a,o){for(var h=0;h<n;++h){var u=e[i+h]._texture._uvs;u?(s[o]=u.x0,s[o+1]=u.y0,s[o+a]=u.x1,s[o+a+1]=u.y1,s[o+a*2]=u.x2,s[o+a*2+1]=u.y2,s[o+a*3]=u.x3,s[o+a*3+1]=u.y3,o+=a*4):(s[o]=0,s[o+1]=0,s[o+a]=0,s[o+a+1]=0,s[o+a*2]=0,s[o+a*2+1]=0,s[o+a*3]=0,s[o+a*3+1]=0,o+=a*4)}},t.prototype.uploadTint=function(e,i,n,s,a,o){for(var h=0;h<n;++h){var u=e[i+h],l=u._texture.baseTexture.alphaMode>0,f=u.alpha,c=f<1&&l?In(u._tintRGB,f):u._tintRGB+(f*255<<24);s[o]=c,s[o+a]=c,s[o+a*2]=c,s[o+a*3]=c,o+=a*4}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},t}(sI);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var $h;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})($h||($h={}));var Ig;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Ig||(Ig={}));var Vw;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(Vw||(Vw={}));var me;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(me||(me={}));var Rg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Rg||(Rg={}));var Ut;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ut||(Ut={}));var td;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(td||(td={}));var Ne;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Ne||(Ne={}));var jw;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(jw||(jw={}));var vh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(vh||(vh={}));var lF;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(lF||(lF={}));var xd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(xd||(xd={}));var Cl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Cl||(Cl={}));var Ru;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Ru||(Ru={}));var fF;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(fF||(fF={}));var xo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(xo||(xo={}));var ls;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ls||(ls={}));var pi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(pi||(pi={}));var Lo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Lo||(Lo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var _y;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(_y||(_y={}));var nS=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),sh=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new nS(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=_y.NORMAL),this._addListener(new nS(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=_y.NORMAL),this._addListener(new nS(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Jgt=Math.PI*2,cF;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(cF||(cF={}));var vn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=cF.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Wu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Db=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),va=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Wu;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Wu;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(Jgt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),ic=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],nc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],sc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],ac=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],dF=[],V7=[],$b=Math.sign;function t0t(){for(var r=0;r<16;r++){var t=[];dF.push(t);for(var e=0;e<16;e++)for(var i=$b(ic[r]*ic[e]+sc[r]*nc[e]),n=$b(nc[r]*ic[e]+ac[r]*nc[e]),s=$b(ic[r]*sc[e]+sc[r]*ac[e]),a=$b(nc[r]*sc[e]+ac[r]*ac[e]),o=0;o<16;o++)if(ic[o]===i&&nc[o]===n&&sc[o]===s&&ac[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new va;h.set(ic[r],nc[r],sc[r],ac[r],0,0),V7.push(h)}}t0t();var Or={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return ic[r]},uY:function(r){return nc[r]},vX:function(r){return sc[r]},vY:function(r){return ac[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return dF[r][t]},sub:function(r,t){return dF[r][Or.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Or.S:Or.N:Math.abs(t)*2<=Math.abs(r)?r>0?Or.E:Or.W:t>0?r>0?Or.SE:Or.SW:r>0?Or.NE:Or.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=V7[Or.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new va,this.localTransform=new va,this.position=new Db(this.onChange,this,0,0),this.scale=new Db(this.onChange,this,1,1),this.pivot=new Db(this.onChange,this,0,0),this.skew=new Db(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?$h.WEBGL:$h.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var pF=[];function j7(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=pF.length-1;n>=0;--n){var s=pF[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var vF=function(r,t){return vF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},vF(r,t)};function ur(r,t){vF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var yF=function(){return yF=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},yF.apply(this,arguments)};function e0t(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Cg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),KL=function(r){ur(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Cl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Cg),r0t={scaleMode:vh.NEAREST,format:Ut.RGBA,alphaMode:Cl.NPM},Fi=function(r){ur(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Cg)&&(e=j7(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Ut.RGBA,n.type=d||Ne.UNSIGNED_BYTE,n.target=v||td.TEXTURE_2D,n.alphaMode=s!==void 0?s:Cl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new KL(e,{width:i,height:n}),o=e instanceof Float32Array?Ne.FLOAT:Ne.UNSIGNED_BYTE;return new t(a,Object.assign(r0t,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),z7=function(r){ur(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Fi;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Cg?this.addResourceAt(e[n],n):this.addResourceAt(j7(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Cg),i0t=function(r){ur(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=td.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(z7),Al=function(r){ur(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Cl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Cg),W7=function(r){ur(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Al),n0t=function(r){ur(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=td.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=td.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=td.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(z7),Y7=function(r){ur(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Al.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Cl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Al),s0t=function(r){ur(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Al.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Al),a0t=function(r){ur(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Al.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=sh.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(sh.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(sh.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(sh.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(sh.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(sh.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Al),o0t=function(r){ur(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Al);pF.push(Y7,o0t,W7,a0t,s0t,KL,n0t,i0t);var h0t=function(r){ur(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Cl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(KL),mF=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=pi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Fi(null,{scaleMode:vh.NEAREST,resolution:1,mipmap:xd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Fi(new h0t(null,{width:this.width,height:this.height}),{scaleMode:vh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:xd.OFF,format:Ut.DEPTH_COMPONENT,type:Ne.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),q7=function(r){ur(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:pi.NONE,i=r.call(this,null,e)||this,i.mipmap=xd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new mF(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Fi),K7=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Or.add(i,Or.NW),this.x0=h+a*Or.uX(i),this.y0=u+o*Or.uY(i),i=Or.add(i,2),this.x1=h+a*Or.uX(i),this.y1=u+o*Or.uY(i),i=Or.add(i,2),this.x2=h+a*Or.uX(i),this.y2=u+o*Or.uY(i),i=Or.add(i,2),this.x3=h+a*Or.uX(i),this.y3=u+o*Or.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),DH=new K7,ni=function(r){ur(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new vn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=DH,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Wu(o.x,o.y):new Wu(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===DH&&(this._uvs=new K7),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Fi(e,i)),h.baseTexture.cacheId=a,Fi.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Fi.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Fi(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof Y7&&(o.url=i);var h=new t(a);return n||(n=i),Fi.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Fi.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function u0t(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new ni(new Fi(new W7(r)))}function fI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}ni.EMPTY=new ni(new Fi);fI(ni.EMPTY);fI(ni.EMPTY.baseTexture);ni.WHITE=u0t();fI(ni.WHITE);fI(ni.WHITE.baseTexture);var ZL=function(r){ur(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new q7(e))},t}(ni),l0t=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=pi.NONE);var n=new q7(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new ZL(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=pi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||pi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),$H=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Ne.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),f0t=0,Es=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=f0t++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Lo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Lo.ELEMENT_ARRAY_BUFFER:Lo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),c0t={Float32Array,Uint32Array,Int32Array,Uint8Array};function d0t(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new c0t[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var HH={5126:4,5123:2,5121:1},p0t=0,v0t={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},QL=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=p0t++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Es||(e instanceof Array&&(e=new Float32Array(e)),e=new Es(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new $H(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Es||(t instanceof Array&&(t=new Uint16Array(t)),t=new Es(t)),t.type=Lo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Es,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*HH[s.type]/4),s.buffer=0}for(i.data=d0t(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Es(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new $H(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Lo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new v0t[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Es(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Lo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*HH[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),y0t=function(r){ur(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(QL),m0t=function(r){ur(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Es(e.vertices),e.uvBuffer=new Es(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(QL),_0t=0,ed=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=_0t++,this.static=!!e,this.ubo=!!i,t instanceof Es?(this.buffer=t,this.buffer.type=Lo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Es(new Float32Array(1)),this.buffer.type=Lo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),g0t=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=pi.NONE,this.sourceFrame=new vn,this.destinationFrame=new vn,this.bindingSourceFrame=new vn,this.bindingDestinationFrame=new vn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),Hb=[new Wu,new Wu,new Wu,new Wu],sS=new va,x0t=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new l0t,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new y0t,this.quadUv=new m0t,this.tempRect=new vn,this.activeState={},this.globalUniforms=new ed({outputFrame:new vn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new g0t,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(sS.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Ru.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Ru.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Ru.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Ru.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Ru.CLEAR||e===Ru.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Rg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Rg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(va.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=pi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||pi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=Hb[0],n=Hb[1],s=Hb[2],a=Hb[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?sS.copyFrom(s):sS.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),Z7=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),b0t=function(){function r(t){this.renderer=t,this.emptyRenderer=new Z7(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),XH=0,T0t=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=XH++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=XH++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=$h.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),E0t=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=pi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),w0t=new vn,I0t=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new mF(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new vn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===$h.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=Vw.COLOR|Vw.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new E0t(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=pi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=pi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new mF(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=w0t,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new vn},r.prototype.destroy=function(){this.renderer=null},r}(),aS={5126:4,5123:2,5121:1},R0t=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===$h.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*aS[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*aS[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*aS[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),C0t=function(){function r(t){t===void 0&&(t=null),this.type=ls.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ls.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function VH(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function jH(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function A0t(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||jH(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||jH(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function oS(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function Q7(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return oS(2*t);case"bvec3":return oS(3*t);case"bvec4":return oS(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var J7={},Rm=J7;function S0t(){if(Rm===J7||Rm&&Rm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=$h.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Rm=t}return Rm}var Xb;function N0t(){if(!Xb){Xb=xo.MEDIUM;var r=S0t();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);Xb=t.precision?xo.HIGH:xo.MEDIUM}}return Xb}function zH(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===xo.HIGH&&e!==xo.HIGH&&(i=xo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==xo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var P0t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function tY(r){return P0t[r]}var Vb=null,WH={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function eY(r,t){if(!Vb){var e=Object.keys(WH);Vb={};for(var i=0;i<e.length;++i){var n=e[i];Vb[r[n]]=WH[n]}}return Vb[t]}var Dv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],O0t={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},F0t={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function U0t(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Dv.length;o++)if(Dv[o].test(n,s)){e.push(Dv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?O0t:F0t,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var M0t=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function L0t(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function B0t(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=M0t.replace(/%forloop%/gi,L0t(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Cm;function G0t(){if(typeof Cm=="boolean")return Cm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Cm=r({a:"b"},"a","b")===!0}catch{Cm=!1}return Cm}var k0t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,D0t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,$0t=0,jb={},JL=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=$0t++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),jb[i]?(jb[i]++,i+="-"+jb[i]):jb[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=zH(this.vertexSrc,A.PRECISION_VERTEX,xo.HIGH),this.fragmentSrc=zH(this.fragmentSrc,A.PRECISION_FRAGMENT,N0t())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return D0t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return k0t},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),tB=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ed?this.uniformGroup=e:this.uniformGroup=new ed(e):this.uniformGroup=new ed({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=JL.from(t,e);return new r(n,i)},r}(),hS=0,uS=1,lS=2,fS=3,cS=4,dS=5,cI=function(){function r(){this.data=0,this.blendMode=me.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<hS)},set:function(t){!!(this.data&1<<hS)!==t&&(this.data^=1<<hS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<uS)},set:function(t){!!(this.data&1<<uS)!==t&&(this.data^=1<<uS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<lS)},set:function(t){!!(this.data&1<<lS)!==t&&(this.data^=1<<lS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<fS)},set:function(t){!!(this.data&1<<fS)!==t&&(this.data^=1<<fS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<dS)},set:function(t){!!(this.data&1<<dS)!==t&&(this.data^=1<<dS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<cS)},set:function(t){!!(this.data&1<<cS)!==t&&(this.data^=1<<cS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==me.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),H0t=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,X0t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,V0t=function(r){ur(t,r);function t(e,i,n){var s=this,a=JL.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new cI,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return H0t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return X0t},enumerable:!1,configurable:!0}),t}(tB),j0t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,z0t=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,YH=new va,W0t=function(){function r(t,e){this._texture=t,this.mapCoord=new va,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(YH.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(YH));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),Y0t=function(r){ur(t,r);function t(e){var i=this,n=new va;return i=r.call(this,j0t,z0t)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new W0t(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(V0t),q0t=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new C0t;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ls.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ls.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ls.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case ls.SCISSOR:this.renderer.scissor.pop();break;case ls.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ls.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=ls.SPRITE;return}if(t.type=ls.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=ls.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new Y0t(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),rY=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),K0t=function(r){ur(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(rY),Z0t=function(r){ur(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(rY),Q0t=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new va,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),xf=new vn,Am=new vn,J0t=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new vn,this.destinationFrame=new vn,this.viewportFrame=new vn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(xf.width=t.frame.width,xf.height=t.frame.height,e=xf),i||(Am.x=t.frame.x,Am.y=t.frame.y,Am.width=e.width,Am.height=e.height,i=Am),a=s.framebuffer):(o=n.resolution,e||(xf.width=n.screen.width,xf.height=n.screen.height,e=xf),i||(i=xf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function txt(r,t,e,i,n){e.buffer.update(n)}var ext={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},iY={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function rxt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=iY[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function ixt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function nxt(r,t){if(!r.autoManage)return{size:0,syncFunc:txt};for(var e=ixt(r.uniforms,t),i=rxt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Dv.length;c++){var d=Dv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Dv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=tY(h.data.type),_=Math.max(iY[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=ext[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var sxt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function axt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=eY(t,s.type),o={type:a,name:s.name,size:tY(a),location:n};e[s.name]=o}}return e}function oxt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=eY(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:Q7(h,s.size)}}return e}function hxt(r,t){var e=VH(r,r.VERTEX_SHADER,t.vertexSrc),i=VH(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||A0t(r,n,e,i),t.attributeData=axt(n,r),t.uniformData=oxt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:Q7(h.type,h.size)}}var u=new sxt(n,o);return u}var uxt=0,zb={textureCount:0,uboCount:0},lxt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=uxt++}return r.prototype.systemCheck=function(){if(!G0t())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(zb.textureCount=0,zb.uboCount=0,this.syncUniformGroup(t.uniformGroup,zb)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=U0t(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,zb,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=nxt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=hxt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function fxt(r,t){return t===void 0&&(t=[]),t[me.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.ADD]=[r.ONE,r.ONE],t[me.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.NONE]=[0,0],t[me.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[me.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[me.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[me.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[me.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[me.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[me.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[me.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[me.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[me.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[me.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var cxt=0,dxt=1,pxt=2,vxt=3,yxt=4,mxt=5,_xt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=me.NONE,this._blendEq=!1,this.map=[],this.map[cxt]=this.setBlend,this.map[dxt]=this.setOffset,this.map[pxt]=this.setCullFace,this.map[vxt]=this.setDepthTest,this.map[yxt]=this.setFrontFace,this.map[mxt]=this.setDepthMask,this.checks=[],this.defaultState=new cI,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=fxt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),gxt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==fF.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function xxt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Ne.UNSIGNED_BYTE]=(e={},e[Ut.RGBA]=r.RGBA8,e[Ut.RGB]=r.RGB8,e[Ut.RG]=r.RG8,e[Ut.RED]=r.R8,e[Ut.RGBA_INTEGER]=r.RGBA8UI,e[Ut.RGB_INTEGER]=r.RGB8UI,e[Ut.RG_INTEGER]=r.RG8UI,e[Ut.RED_INTEGER]=r.R8UI,e[Ut.ALPHA]=r.ALPHA,e[Ut.LUMINANCE]=r.LUMINANCE,e[Ut.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Ne.BYTE]=(i={},i[Ut.RGBA]=r.RGBA8_SNORM,i[Ut.RGB]=r.RGB8_SNORM,i[Ut.RG]=r.RG8_SNORM,i[Ut.RED]=r.R8_SNORM,i[Ut.RGBA_INTEGER]=r.RGBA8I,i[Ut.RGB_INTEGER]=r.RGB8I,i[Ut.RG_INTEGER]=r.RG8I,i[Ut.RED_INTEGER]=r.R8I,i),t[Ne.UNSIGNED_SHORT]=(n={},n[Ut.RGBA_INTEGER]=r.RGBA16UI,n[Ut.RGB_INTEGER]=r.RGB16UI,n[Ut.RG_INTEGER]=r.RG16UI,n[Ut.RED_INTEGER]=r.R16UI,n[Ut.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Ne.SHORT]=(s={},s[Ut.RGBA_INTEGER]=r.RGBA16I,s[Ut.RGB_INTEGER]=r.RGB16I,s[Ut.RG_INTEGER]=r.RG16I,s[Ut.RED_INTEGER]=r.R16I,s),t[Ne.UNSIGNED_INT]=(a={},a[Ut.RGBA_INTEGER]=r.RGBA32UI,a[Ut.RGB_INTEGER]=r.RGB32UI,a[Ut.RG_INTEGER]=r.RG32UI,a[Ut.RED_INTEGER]=r.R32UI,a[Ut.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Ne.INT]=(o={},o[Ut.RGBA_INTEGER]=r.RGBA32I,o[Ut.RGB_INTEGER]=r.RGB32I,o[Ut.RG_INTEGER]=r.RG32I,o[Ut.RED_INTEGER]=r.R32I,o),t[Ne.FLOAT]=(h={},h[Ut.RGBA]=r.RGBA32F,h[Ut.RGB]=r.RGB32F,h[Ut.RG]=r.RG32F,h[Ut.RED]=r.R32F,h[Ut.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Ne.HALF_FLOAT]=(u={},u[Ut.RGBA]=r.RGBA16F,u[Ut.RGB]=r.RGB16F,u[Ut.RG]=r.RG16F,u[Ut.RED]=r.R16F,u),t[Ne.UNSIGNED_SHORT_5_6_5]=(l={},l[Ut.RGB]=r.RGB565,l),t[Ne.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Ut.RGBA]=r.RGBA4,f),t[Ne.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Ut.RGBA]=r.RGB5_A1,c),t[Ne.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Ut.RGBA]=r.RGB10_A2,d[Ut.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Ne.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Ut.RGB]=r.R11F_G11F_B10F,v),t[Ne.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Ut.RGB]=r.RGB9_E5,_),t[Ne.UNSIGNED_INT_24_8]=(m={},m[Ut.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Ne.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Ut.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Ne.UNSIGNED_BYTE]=(b={},b[Ut.RGBA]=r.RGBA,b[Ut.RGB]=r.RGB,b[Ut.ALPHA]=r.ALPHA,b[Ut.LUMINANCE]=r.LUMINANCE,b[Ut.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Ne.UNSIGNED_SHORT_5_6_5]=(S={},S[Ut.RGB]=r.RGB,S),T[Ne.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Ut.RGBA]=r.RGBA,R),T[Ne.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Ut.RGBA]=r.RGBA,U),T),L}var pS=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ne.UNSIGNED_BYTE,this.internalFormat=Ut.RGBA,this.samplerType=0}return r}(),bxt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Fi,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=xxt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new pS(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new pS(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==jw.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new pS(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Ne.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==jw.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===xd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=lF.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==xd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===vh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===vh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===vh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),vS=new va,Txt=function(r){ur(t,r);function t(e,i){e===void 0&&(e=Ig.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new vn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=e0t(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=ZL.create(yF({width:s.width,height:s.height},o));return vS.tx=-s.x,vS.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:vS,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Ig.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),Ext=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),wxt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new Ext(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){ur(t,r);function t(e){var i=r.call(this,Ig.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new ed({projectionMatrix:new va},!0),i.addSystem(q0t,"mask").addSystem(T0t,"context").addSystem(_xt,"state").addSystem(lxt,"shader").addSystem(bxt,"texture").addSystem(wxt,"buffer").addSystem(R0t,"geometry").addSystem(I0t,"framebuffer").addSystem(K0t,"scissor").addSystem(Z0t,"stencil").addSystem(Q0t,"projection").addSystem(gxt,"textureGC").addSystem(x0t,"filter").addSystem(J0t,"renderTexture").addSystem(b0t,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=pi.HIGH?this.multisample=pi.HIGH:i>=pi.MEDIUM?this.multisample=pi.MEDIUM:i>=pi.LOW?this.multisample=pi.LOW:this.multisample=pi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof ZL?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(Txt);var _F=function(){function r(){this.texArray=null,this.blend=0,this.type=Rg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),gF=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),Ixt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),Rxt=function(r){ur(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=cI.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===$h.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=B0t(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new _F);for(;i.length<s;)i.push(new gF);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Fi._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Fi._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new Ixt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Z7),Cxt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=ed.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new JL(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new va,default:this.defaultGroupCache[t]};return new tB(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),nY=function(r){ur(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Es(null,e,!1),i._indexBuffer=new Es(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Ne.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Ne.FLOAT).addAttribute("aColor",i._buffer,4,!0,Ne.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Ne.FLOAT).addIndex(i._indexBuffer),i}return t}(QL),qH=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,KH=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Axt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:qH,fragment:KH,geometryClass:nY,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){ur(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new Cxt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(Rxt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return qH},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return KH},enumerable:!1,configurable:!0}),r}();Axt.create();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var zw=Math.PI*2,ii;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(ii||(ii={}));var eB=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=ii.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Sxt=function(){function r(t,e,i){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=ii.CIRC}return r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,s=this.y-e;return n*=n,s*=s,n+s<=i},r.prototype.getBounds=function(){return new eB(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},r.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},r}(),Nxt=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=ii.ELIP}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},r.prototype.getBounds=function(){return new eB(this.x-this.width,this.y-this.height,this.width,this.height)},r.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),yS=function(){function r(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){for(var s=[],a=0,o=n.length;a<o;a++)s.push(n[a].x,n[a].y);n=s}this.points=n,this.type=ii.POLY,this.closeStroke=!0}return r.prototype.clone=function(){var t=this.points.slice(),e=new r(t);return e.closeStroke=this.closeStroke,e},r.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,s=0,a=n-1;s<n;a=s++){var o=this.points[s*2],h=this.points[s*2+1],u=this.points[a*2],l=this.points[a*2+1],f=h>e!=l>e&&t<(u-o)*((e-h)/(l-h))+o;f&&(i=!i)}return i},r.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]")},r}(),Pxt=function(){function r(t,e,i,n,s){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=ii.RREC}return r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),s=this.radius*this.radius;if(i*i+n*n<=s||(i=t-(this.x+this.width-this.radius),i*i+n*n<=s)||(n=e-(this.y+this.height-this.radius),i*i+n*n<=s)||(i=t-(this.x+this.radius),i*i+n*n<=s))return!0}return!1},r.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},r}(),gy=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),Wb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),xy=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new gy;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new gy;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(zw-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),yp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],_p=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gp=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Yb=Math.sign;function Oxt(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=Yb(yp[r]*yp[e]+_p[r]*mp[e]),n=Yb(mp[r]*yp[e]+gp[r]*mp[e]),s=Yb(yp[r]*_p[e]+_p[r]*gp[e]),a=Yb(mp[r]*_p[e]+gp[r]*gp[e]),o=0;o<16;o++)if(yp[o]===i&&mp[o]===n&&_p[o]===s&&gp[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new xy;h.set(yp[r],mp[r],_p[r],gp[r],0,0)}}Oxt();(function(){function r(){this.worldTransform=new xy,this.localTransform=new xy,this.position=new Wb(this.onChange,this,0,0),this.scale=new Wb(this.onChange,this,1,1),this.pivot=new Wb(this.onChange,this,0,0),this.skew=new Wb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ZH;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(ZH||(ZH={}));var QH;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(QH||(QH={}));var JH;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(JH||(JH={}));var xF;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(xF||(xF={}));var gv;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(gv||(gv={}));var tX;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(tX||(tX={}));var eX;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(eX||(eX={}));var rX;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(rX||(rX={}));var iX;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(iX||(iX={}));var nX;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(nX||(nX={}));var Ww;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Ww||(Ww={}));var sX;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(sX||(sX={}));var aX;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(aX||(aX={}));var oX;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(oX||(oX={}));var hX;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(hX||(hX={}));var uX;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(uX||(uX={}));var lX;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(lX||(lX={}));var fX;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(fX||(fX={}));var cX;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(cX||(cX={}));/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Fxt=Math.PI*2,Uxt=180/Math.PI,Mxt=Math.PI/180,bF;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(bF||(bF={}));var Yw=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=bF.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),dX=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),qb=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),TF=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new dX;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new dX;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(Fxt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),xp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],bp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Tp=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ep=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Kb=Math.sign;function Lxt(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=Kb(xp[r]*xp[e]+Tp[r]*bp[e]),n=Kb(bp[r]*xp[e]+Ep[r]*bp[e]),s=Kb(xp[r]*Tp[e]+Tp[r]*Ep[e]),a=Kb(bp[r]*Tp[e]+Ep[r]*Ep[e]),o=0;o<16;o++)if(xp[o]===i&&bp[o]===n&&Tp[o]===s&&Ep[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new TF;h.set(xp[r],bp[r],Tp[r],Ep[r],0,0)}}Lxt();var Bxt=function(){function r(){this.worldTransform=new TF,this.localTransform=new TF,this.position=new qb(this.onChange,this,0,0),this.scale=new qb(this.onChange,this,1,1),this.pivot=new qb(this.onChange,this,0,0),this.skew=new qb(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var qw=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Yw.EMPTY:(t=t||new Yw(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var EF=function(r,t){return EF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},EF(r,t)};function rB(r,t){EF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Kw=function(r){rB(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Bxt,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new qw,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Yw),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new Yw),e=this._localBoundsRect),this._localBounds||(this._localBounds=new qw);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Gxt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*Uxt},set:function(e){this.transform.rotation=e*Mxt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),Gxt=function(r){rB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(Kw);Kw.prototype.displayObjectUpdateTransform=Kw.prototype.updateTransform;function kxt(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var Ag=function(r){rB(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(kxt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(Kw);Ag.prototype.containerUpdateTransform=Ag.prototype.updateTransform;/*!
 * @pixi/graphics - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Yu;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(Yu||(Yu={}));var qu;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(qu||(qu={}));var Sg={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,t){if(t===void 0&&(t=20),!this.adaptive||!r||isNaN(r))return t;var e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},sY=function(){function r(){this.color=16777215,this.alpha=1,this.texture=ni.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=ni.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var wF=function(r,t){return wF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},wF(r,t)};function iB(r,t){wF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var aY={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,t){var e=r.points,i=r.holes,n=t.points,s=t.indices;if(e.length>=6){for(var a=[],o=0;o<i.length;o++){var h=i[o];a.push(e.length/2),e=e.concat(h.points)}var u=d0(e,a,2);if(!u)return;for(var l=n.length/2,o=0;o<u.length;o+=3)s.push(u[o]+l),s.push(u[o+1]+l),s.push(u[o+2]+l);for(var o=0;o<e.length;o++)n.push(e[o])}}},pX={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s,a;if(e.length=0,r.type===ii.CIRC)s=t.radius,a=t.radius;else{var o=r.shape;s=o.width,a=o.height}if(!(s===0||a===0)){var h=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(s+a));h/=2.3;for(var u=Math.PI*2/h,l=0;l<h-.5;l++)e.push(i+Math.sin(-u*l)*s,n+Math.cos(-u*l)*a);e.push(e[0],e[1])}},triangulate:function(r,t){var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=s,o=r.shape,h=r.matrix,u=o.x,l=o.y;i.push(r.matrix?h.a*u+h.c*l+h.tx:u,r.matrix?h.b*u+h.d*l+h.ty:l);for(var f=0;f<e.length;f+=2)i.push(e[f],e[f+1]),n.push(s++,a,s)}},Dxt={build:function(r){var t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,a=r.points;a.length=0,a.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate:function(r,t){var e=r.points,i=t.points,n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function wp(r,t,e){var i=t-r;return r+i*e}function Zb(r,t,e,i,n,s,a){a===void 0&&(a=[]);for(var o=20,h=a,u=0,l=0,f=0,c=0,d=0,v=0,_=0,m=0;_<=o;++_)m=_/o,u=wp(r,e,m),l=wp(t,i,m),f=wp(e,n,m),c=wp(i,s,m),d=wp(u,f,m),v=wp(l,c,m),!(_===0&&h[h.length-2]===d&&h[h.length-1]===v)&&h.push(d,v);return h}var $xt={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s=t.width,a=t.height,o=Math.max(0,Math.min(t.radius,Math.min(s,a)/2));e.length=0,o?(Zb(i,n+o,i,n,i+o,n,e),Zb(i+s-o,n,i+s,n,i+s,n+o,e),Zb(i+s,n+a-o,i+s,n+a,i+s-o,n+a,e),Zb(i+o,n+a,i,n+a,i,n+a-o,e)):e.push(i,n,i+s,n,i+s,n+a,i,n+a)},triangulate:function(r,t){for(var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=d0(e,null,2),o=0,h=a.length;o<h;o+=3)n.push(a[o]+s),n.push(a[o+1]+s),n.push(a[o+2]+s);for(var o=0,h=e.length;o<h;o++)i.push(e[o],e[++o])}};function vX(r,t,e,i,n,s,a,o){var h=r-e*n,u=t-i*n,l=r+e*s,f=t+i*s,c,d;a?(c=i,d=-e):(c=-i,d=e);var v=h+c,_=u+d,m=l+c,g=f+d;return o.push(v,_),o.push(m,g),2}function Ip(r,t,e,i,n,s,a,o){var h=e-r,u=i-t,l=Math.atan2(h,u),f=Math.atan2(n-r,s-t);o&&l<f?l+=Math.PI*2:!o&&l>f&&(f+=Math.PI*2);var c=l,d=f-l,v=Math.abs(d),_=Math.sqrt(h*h+u*u),m=(15*v*Math.sqrt(_)/Math.PI>>0)+1,g=d/m;if(c+=g,o){a.push(r,t),a.push(e,i);for(var T=1,b=c;T<m;T++,b+=g)a.push(r,t),a.push(r+Math.sin(b)*_,t+Math.cos(b)*_);a.push(r,t),a.push(n,s)}else{a.push(e,i),a.push(r,t);for(var T=1,b=c;T<m;T++,b+=g)a.push(r+Math.sin(b)*_,t+Math.cos(b)*_),a.push(r,t);a.push(n,s),a.push(r,t)}return m*2}function Hxt(r,t){var e=r.shape,i=r.points||e.points.slice(),n=t.closePointEps;if(i.length!==0){var s=r.lineStyle,a=new gy(i[0],i[1]),o=new gy(i[i.length-2],i[i.length-1]),h=e.type!==ii.POLY||e.closeStroke,u=Math.abs(a.x-o.x)<n&&Math.abs(a.y-o.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));var l=(a.x+o.x)*.5,f=(o.y+a.y)*.5;i.unshift(l,f),i.push(l,f)}var c=t.points,d=i.length/2,v=i.length,_=c.length/2,m=s.width/2,g=m*m,T=s.miterLimit*s.miterLimit,b=i[0],S=i[1],R=i[2],U=i[3],L=0,$=0,k=-(S-U),H=b-R,it=0,tt=0,j=Math.sqrt(k*k+H*H);k/=j,H/=j,k*=m,H*=m;var at=s.alignment,K=(1-at)*2,et=at*2;h||(s.cap===qu.ROUND?v+=Ip(b-k*(K-et)*.5,S-H*(K-et)*.5,b-k*K,S-H*K,b+k*et,S+H*et,c,!0)+2:s.cap===qu.SQUARE&&(v+=vX(b,S,k,H,K,et,!0,c))),c.push(b-k*K,S-H*K),c.push(b+k*et,S+H*et);for(var st=1;st<d-1;++st){b=i[(st-1)*2],S=i[(st-1)*2+1],R=i[st*2],U=i[st*2+1],L=i[(st+1)*2],$=i[(st+1)*2+1],k=-(S-U),H=b-R,j=Math.sqrt(k*k+H*H),k/=j,H/=j,k*=m,H*=m,it=-(U-$),tt=R-L,j=Math.sqrt(it*it+tt*tt),it/=j,tt/=j,it*=m,tt*=m;var V=R-b,Y=S-U,z=R-L,Z=$-U,Q=Y*z-Z*V,mt=Q<0;if(Math.abs(Q)<.1){c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et);continue}var Et=(-k+b)*(-H+U)-(-k+R)*(-H+S),It=(-it+L)*(-tt+U)-(-it+R)*(-tt+$),wt=(V*It-z*Et)/Q,ht=(Z*Et-Y*It)/Q,I=(wt-R)*(wt-R)+(ht-U)*(ht-U),M=R+(wt-R)*K,O=U+(ht-U)*K,N=R-(wt-R)*et,B=U-(ht-U)*et,G=Math.min(V*V+Y*Y,z*z+Z*Z),W=mt?K:et,X=G+W*W*g,ut=I<=X;ut?s.join===Yu.BEVEL||I/g>T?(mt?(c.push(M,O),c.push(R+k*et,U+H*et),c.push(M,O),c.push(R+it*et,U+tt*et)):(c.push(R-k*K,U-H*K),c.push(N,B),c.push(R-it*K,U-tt*K),c.push(N,B)),v+=2):s.join===Yu.ROUND?mt?(c.push(M,O),c.push(R+k*et,U+H*et),v+=Ip(R,U,R+k*et,U+H*et,R+it*et,U+tt*et,c,!0)+4,c.push(M,O),c.push(R+it*et,U+tt*et)):(c.push(R-k*K,U-H*K),c.push(N,B),v+=Ip(R,U,R-k*K,U-H*K,R-it*K,U-tt*K,c,!1)+4,c.push(R-it*K,U-tt*K),c.push(N,B)):(c.push(M,O),c.push(N,B)):(c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et),s.join===Yu.BEVEL||I/g>T||(s.join===Yu.ROUND?mt?v+=Ip(R,U,R+k*et,U+H*et,R+it*et,U+tt*et,c,!0)+2:v+=Ip(R,U,R-k*K,U-H*K,R-it*K,U-tt*K,c,!1)+2:(mt?(c.push(N,B),c.push(N,B)):(c.push(M,O),c.push(M,O)),v+=2)),c.push(R-it*K,U-tt*K),c.push(R+it*et,U+tt*et),v+=2)}b=i[(d-2)*2],S=i[(d-2)*2+1],R=i[(d-1)*2],U=i[(d-1)*2+1],k=-(S-U),H=b-R,j=Math.sqrt(k*k+H*H),k/=j,H/=j,k*=m,H*=m,c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et),h||(s.cap===qu.ROUND?v+=Ip(R-k*(K-et)*.5,U-H*(K-et)*.5,R-k*K,U-H*K,R+k*et,U+H*et,c,!1)+2:s.cap===qu.SQUARE&&(v+=vX(R,U,k,H,K,et,!1,c)));for(var ft=t.indices,ct=Sg.epsilon*Sg.epsilon,st=_;st<v+_-2;++st)b=c[st*2],S=c[st*2+1],R=c[(st+1)*2],U=c[(st+1)*2+1],L=c[(st+2)*2],$=c[(st+2)*2+1],!(Math.abs(b*(U-$)+R*($-S)+L*(S-U))<ct)&&ft.push(st,st+1,st+2)}}function Xxt(r,t){var e=0,i=r.shape,n=r.points||i.points,s=i.type!==ii.POLY||i.closeStroke;if(n.length!==0){var a=t.points,o=t.indices,h=n.length/2,u=a.length/2,l=u;for(a.push(n[0],n[1]),e=1;e<h;e++)a.push(n[e*2],n[e*2+1]),o.push(l,l+1),l++;s&&o.push(l,u)}}function yX(r,t){r.lineStyle.native?Xxt(r,t):Hxt(r,t)}var mX=function(){function r(){}return r.curveTo=function(t,e,i,n,s,a){var o=a[a.length-2],h=a[a.length-1],u=h-e,l=o-t,f=n-e,c=i-t,d=Math.abs(u*c-l*f);if(d<1e-8||s===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;var v=u*u+l*l,_=f*f+c*c,m=u*f+l*c,g=s*Math.sqrt(v)/d,T=s*Math.sqrt(_)/d,b=g*m/v,S=T*m/_,R=g*c+T*l,U=g*f+T*u,L=l*(T+b),$=u*(T+b),k=c*(g+S),H=f*(g+S),it=Math.atan2($-U,L-R),tt=Math.atan2(H-U,k-R);return{cx:R+t,cy:U+e,radius:s,startAngle:it,endAngle:tt,anticlockwise:l*f>c*u}},r.arc=function(t,e,i,n,s,a,o,h,u){for(var l=o-a,f=Sg._segmentsCount(Math.abs(l)*s,Math.ceil(Math.abs(l)/zw)*40),c=l/(f*2),d=c*2,v=Math.cos(c),_=Math.sin(c),m=f-1,g=m%1/m,T=0;T<=m;++T){var b=T+g*T,S=c+a+d*b,R=Math.cos(S),U=-Math.sin(S);u.push((v*R+_*U)*s+i,(v*-U+_*R)*s+n)}},r}(),Vxt=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a,o,h){for(var u=10,l=0,f=0,c=0,d=0,v=0,_=0,m=0,g=0,T=0,b=0,S=0,R=t,U=e,L=1;L<=u;++L)f=L/u,c=f*f,d=c*f,v=1-f,_=v*v,m=_*v,g=m*t+3*_*f*i+3*v*c*s+d*o,T=m*e+3*_*f*n+3*v*c*a+d*h,b=R-g,S=U-T,R=g,U=T,l+=Math.sqrt(b*b+S*S);return l},r.curveTo=function(t,e,i,n,s,a,o){var h=o[o.length-2],u=o[o.length-1];o.length-=2;var l=Sg._segmentsCount(r.curveLength(h,u,t,e,i,n,s,a)),f=0,c=0,d=0,v=0,_=0;o.push(h,u);for(var m=1,g=0;m<=l;++m)g=m/l,f=1-g,c=f*f,d=c*f,v=g*g,_=v*g,o.push(d*h+3*c*g*t+3*f*v*i+_*s,d*u+3*c*g*e+3*f*v*n+_*a)},r}(),jxt=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a){var o=t-2*i+s,h=e-2*n+a,u=2*i-2*t,l=2*n-2*e,f=4*(o*o+h*h),c=4*(o*u+h*l),d=u*u+l*l,v=2*Math.sqrt(f+c+d),_=Math.sqrt(f),m=2*f*_,g=2*Math.sqrt(d),T=c/_;return(m*v+_*c*(v-g)+(4*d*f-c*c)*Math.log((2*_+T+v)/(T+g)))/(4*m)},r.curveTo=function(t,e,i,n,s){for(var a=s[s.length-2],o=s[s.length-1],h=Sg._segmentsCount(r.curveLength(a,o,t,e,i,n)),u=0,l=0,f=1;f<=h;++f){var c=f/h;u=a+(t-a)*c,l=o+(e-o)*c,s.push(u+(t+(i-t)*c-u)*c,l+(e+(n-e)*c-l)*c)}},r}(),zxt=function(){function r(){this.reset()}return r.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},r.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),bf,mS=(bf={},bf[ii.POLY]=aY,bf[ii.CIRC]=pX,bf[ii.ELIP]=pX,bf[ii.RECT]=Dxt,bf[ii.RREC]=$xt,bf),_X=[],Qb=[];function Wxt(r){for(var t=r.points,e=0,i=0;i<t.length-2;i+=2)e+=(t[i+2]-t[i])*(t[i+3]+t[i+1]);return e>0}var gX=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),Rp=new gy,Yxt=new qw,qxt=function(r){iB(t,r);function t(){var e=r.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new qw,e.boundsDirty=-1,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Qb.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),_X.push(i)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,i,n,s){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=null);var a=new gX(e,i,n,s);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(e,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new gX(e,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){r.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var i=this.graphicsData,n=0;n<i.length;++n){var s=i[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Rp):Rp.copyFrom(e),s.shape.contains(Rp.x,Rp.y))){var a=!1;if(s.holes)for(var o=0;o<s.holes.length;o++){var h=s.holes[o];if(h.shape.contains(Rp.x,Rp.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var h=n[o],u=h.fillStyle,l=h.lineStyle,f=mS[h.type];f.build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var c=0;c<2;c++){var d=c===0?u:l;if(d.visible){var v=d.texture.baseTexture,_=this.indices.length,m=this.points.length/2;v.wrapMode=Ww.REPEAT,c===0?this.processFill(h):this.processLine(h);var g=this.points.length/2-m;g!==0&&(s&&!this._compareStyles(a,d)&&(s.end(_,m),s=null),s||(s=_X.pop()||new zxt,s.begin(d,_,m),this.batches.push(s),a=d),this.addUvs(this.points,i,d.texture,m,g,d.matrix))}}}var T=this.indices.length,b=this.points.length/2;if(s&&s.end(T,b),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var S=b>65535&&e;this.indicesUint16=S?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var n=this.graphicsData[e],s=n.fillStyle,a=n.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,n=e.length;i<n;i++)for(var s=e[i],a=0;a<s.size;a++){var o=s.start+a;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++Fi._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),Qb.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,a=Qb.pop();a||(a=new _F,a.texArray=new gF),a.texArray.count=0,a.start=0,a.size=0,a.type=gv.TRIANGLES;var o=0,h=null,u=0,l=!1,f=gv.TRIANGLES,c=0;this.drawCalls.push(a);for(var i=0;i<this.batches.length;i++){var d=this.batches[i],v=8,_=d.style,m=_.texture.baseTexture;l!==!!_.native&&(l=!!_.native,f=l?gv.LINES:gv.TRIANGLES,h=null,o=v,e++),h!==m&&(h=m,m._batchEnabled!==e&&(o===v&&(e++,o=0,a.size>0&&(a=Qb.pop(),a||(a=new _F,a.texArray=new gF),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=f),m.touched=1,m._batchEnabled=e,m._batchLocation=o,m.wrapMode=Ww.REPEAT,a.texArray.elements[a.texArray.count++]=m,o++)),a.size+=d.size,c+=d.size,u=m._batchLocation,this.addColors(n,_.color,_.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,u,d.attribSize,d.attribStart)}Fi._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,n=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),o=new Float32Array(a),h=new Uint32Array(a),u=0,l=0;l<e.length/2;l++)o[u++]=e[l*2],o[u++]=e[l*2+1],o[u++]=i[l*2],o[u++]=i[l*2+1],h[u++]=n[l],o[u++]=s[l];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),aY.triangulate(e,this);else{var i=mS[e.type];i.triangulate(e,this)}},t.prototype.processLine=function(e){yX(e,this);for(var i=0;i<e.holes.length;i++)yX(e.holes[i],this)},t.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var n=e[i],s=mS[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,i=Yxt,n=xy.IDENTITY;this._bounds.clear(),i.clear();for(var s=0;s<this.graphicsData.length;s++){var a=this.graphicsData[s],o=a.shape,h=a.type,u=a.lineStyle,l=a.matrix||xy.IDENTITY,f=0;if(u&&u.visible){var c=u.alignment;f=u.width,h===ii.POLY?Wxt(o)?f=f*(1-c):f=f*c:f=f*Math.max(0,c)}if(n!==l&&(i.isEmpty()||(e.addBoundsMatrix(i,n),i.clear()),n=l),h===ii.RECT||h===ii.RREC){var d=o;i.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(h===ii.CIRC){var v=o;i.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(h===ii.ELIP){var _=o;i.addFramePad(_.x,_.y,_.x,_.y,_.width+f,_.height+f)}else{var m=o;e.addVerticesMatrix(n,m.points,0,m.points.length,f,f)}}i.isEmpty()||e.addBoundsMatrix(i,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,i){for(var n=0;n<e.length/2;n++){var s=e[n*2],a=e[n*2+1];e[n*2]=i.a*s+i.c*a+i.tx,e[n*2+1]=i.b*s+i.d*a+i.ty}},t.prototype.addColors=function(e,i,n,s,a){a===void 0&&(a=0);var o=(i>>16)+(i&65280)+((i&255)<<16),h=In(o,n);e.length=Math.max(e.length,a+s);for(var u=0;u<s;u++)e[a+u]=h},t.prototype.addTextureIds=function(e,i,n,s){s===void 0&&(s=0),e.length=Math.max(e.length,s+n);for(var a=0;a<n;a++)e[s+a]=i},t.prototype.addUvs=function(e,i,n,s,a,o){o===void 0&&(o=null);for(var h=0,u=i.length,l=n.frame;h<a;){var f=e[(s+h)*2],c=e[(s+h)*2+1];if(o){var d=o.a*f+o.c*c+o.tx;c=o.b*f+o.d*c+o.ty,f=d}h++,i.push(f/l.width,c/l.height)}var v=n.baseTexture;(l.width<v.width||l.height<v.height)&&this.adjustUvs(i,n,u,a)},t.prototype.adjustUvs=function(e,i,n,s){for(var a=i.baseTexture,o=1e-6,h=n+s*2,u=i.frame,l=u.width/a.width,f=u.height/a.height,c=u.x/u.width,d=u.y/u.height,v=Math.floor(e[n]+o),_=Math.floor(e[n+1]+o),m=n+2;m<h;m+=2)v=Math.min(v,Math.floor(e[m]+o)),_=Math.min(_,Math.floor(e[m+1]+o));c-=v,d-=_;for(var m=n;m<h;m+=2)e[m]=(e[m]+c)*l,e[m+1]=(e[m+1]+d)*f},t.BATCHABLE_SIZE=100,t}(nY),Kxt=function(r){iB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=qu.BUTT,e.join=Yu.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(sY),Zxt=new Float32Array(3),_S={},oY=function(r){iB(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new sY,i._lineStyle=new Kxt,i._matrix=null,i._holeMode=!1,i.state=cI.for2d(),i._geometry=e||new qxt,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=xF.NORMAL,i}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,i,n,s,a){return e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=.5),a===void 0&&(a=!1),typeof e=="number"&&(e={width:e,color:i,alpha:n,alignment:s,native:a}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:ni.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:qu.BUTT,join:Yu.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new yS,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new yS,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},t.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],a=n[n.length-1];return(s!==e||a!==i)&&n.push(e,i),this},t.prototype._initCurve=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},t.prototype.quadraticCurveTo=function(e,i,n,s){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),jxt.curveTo(e,i,n,s,a),this},t.prototype.bezierCurveTo=function(e,i,n,s,a,o){return this._initCurve(),Vxt.curveTo(e,i,n,s,a,o,this.currentPath.points),this},t.prototype.arcTo=function(e,i,n,s,a){this._initCurve(e,i);var o=this.currentPath.points,h=mX.curveTo(e,i,n,s,a,o);if(h){var u=h.cx,l=h.cy,f=h.radius,c=h.startAngle,d=h.endAngle,v=h.anticlockwise;this.arc(u,l,f,c,d,v)}return this},t.prototype.arc=function(e,i,n,s,a,o){if(o===void 0&&(o=!1),s===a)return this;!o&&a<=s?a+=zw:o&&s<=a&&(s+=zw);var h=a-s;if(h===0)return this;var u=e+Math.cos(s)*n,l=i+Math.sin(s)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-u),v=Math.abs(c[c.length-1]-l);d<f&&v<f||c.push(u,l)}else this.moveTo(u,l),c=this.currentPath.points;return mX.arc(u,l,e,i,n,s,a,o,c),this},t.prototype.beginFill=function(e,i){return e===void 0&&(e=0),i===void 0&&(i=1),this.beginTextureFill({texture:ni.WHITE,color:e,alpha:i})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:ni.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,i,n,s){return this.drawShape(new eB(e,i,n,s))},t.prototype.drawRoundedRect=function(e,i,n,s,a){return this.drawShape(new Pxt(e,i,n,s,a))},t.prototype.drawCircle=function(e,i,n){return this.drawShape(new Sxt(e,i,n))},t.prototype.drawEllipse=function(e,i,n,s){return this.drawShape(new Nxt(e,i,n,s))},t.prototype.drawPolygon=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var s,a=!0,o=i[0];o.points?(a=o.closeStroke,s=o.points):Array.isArray(i[0])?s=i[0]:s=i;var h=new yS(s);return h.closeStroke=a,this.drawShape(h),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===ii.RECT&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var i=this._geometry,n=e.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var s=0;s<n;s++){var a=e.batches[s],o=a.style.color,h=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),f={vertexData:h,blendMode:i,indices:l,uvs:u,_batchRGB:ai(o),_tintRGB:o,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=f}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}},t.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),n=this._geometry,s=this.tint,a=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(s>>16&255)/255*a,o.tint[1]=(s>>8&255)/255*a,o.tint[2]=(s&255)/255*a,o.tint[3]=a,e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(var u=0,l=h.length;u<l;u++)this._renderDrawCallDirect(e,n.drawCalls[u])},t.prototype._renderDrawCallDirect=function(e,i){for(var n=i.texArray,s=i.type,a=i.size,o=i.start,h=n.count,u=0;u<h;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(s,a,o)},t.prototype._resolveDirectShader=function(e){var i=this.shader,n=this.pluginName;if(!i){if(!_S[n]){for(var s=e.plugins.batch.MAX_TEXTURES,a=new Int32Array(s),o=0;o<s;o++)a[o]=o;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new xy,default:ed.from({uSamplers:a},!0)},u=e.plugins[n]._shader.program;_S[n]=new tB(u,h)}i=_S[n]}return i},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var i=e.bounds,n=i.minX,s=i.minY,a=i.maxX,o=i.maxY;this._bounds.addFrame(this.transform,n,s,a,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=ai(this.tint,Zxt),i=0;i<this.batches.length;i++){var n=this.batches[i],s=n._batchRGB,a=e[0]*s[0]*255,o=e[1]*s[1]*255,h=e[2]*s[2]*255,u=(a<<16)+(o<<8)+(h|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,l=this._geometry.points,f=this.vertexData,c=0,d=0;d<l.length;d+=2){var v=l[d],_=l[d+1];f[c++]=n*v+a*_+h,f[c++]=o*_+s*v+u}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,e)},t._TEMP_POINT=new gy,t}(Ag);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xX;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(xX||(xX={}));var bX;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(bX||(bX={}));var TX;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(TX||(TX={}));var IF;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(IF||(IF={}));var EX;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(EX||(EX={}));var wX;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(wX||(wX={}));var IX;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(IX||(IX={}));var RX;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(RX||(RX={}));var CX;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(CX||(CX={}));var AX;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(AX||(AX={}));var SX;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(SX||(SX={}));var NX;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(NX||(NX={}));var PX;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(PX||(PX={}));var OX;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(OX||(OX={}));var FX;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(FX||(FX={}));var UX;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(UX||(UX={}));var MX;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(MX||(MX={}));var LX;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(LX||(LX={}));var BX;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(BX||(BX={}));/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qxt=Math.PI*2,RF;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(RF||(RF={}));var CF=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=RF.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),AF=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),p_=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),SF=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new AF;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new AF;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(Qxt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Cp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ap=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Sp=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Np=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Jb=Math.sign;function Jxt(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=Jb(Cp[r]*Cp[e]+Sp[r]*Ap[e]),n=Jb(Ap[r]*Cp[e]+Np[r]*Ap[e]),s=Jb(Cp[r]*Sp[e]+Sp[r]*Np[e]),a=Jb(Ap[r]*Sp[e]+Np[r]*Np[e]),o=0;o<16;o++)if(Cp[o]===i&&Ap[o]===n&&Sp[o]===s&&Np[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new SF;h.set(Cp[r],Ap[r],Sp[r],Np[r],0,0)}}Jxt();(function(){function r(){this.worldTransform=new SF,this.localTransform=new SF,this.position=new p_(this.onChange,this,0,0),this.scale=new p_(this.onChange,this,1,1),this.pivot=new p_(this.onChange,this,0,0),this.skew=new p_(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/sprite - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var NF=function(r,t){return NF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},NF(r,t)};function tbt(r,t){NF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Sm=new AF,ebt=new Uint16Array([0,1,2,0,2,3]),rbt=function(r){tbt(t,r);function t(e){var i=r.call(this)||this;return i._anchor=new p_(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=IF.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||ni.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=ebt,i.pluginName="batch",i.isSprite=!0,i._roundPixels=A.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=cn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=cn(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,l=this.vertexData,f=e.trim,c=e.orig,d=this._anchor,v=0,_=0,m=0,g=0;if(f?(_=f.x-d._x*c.width,v=_+f.width,g=f.y-d._y*c.height,m=g+f.height):(_=-d._x*c.width,v=_+c.width,g=-d._y*c.height,m=g+c.height),l[0]=n*_+a*g+h,l[1]=o*g+s*_+u,l[2]=n*v+a*g+h,l[3]=o*g+s*v+u,l[4]=n*v+a*m+h,l[5]=o*m+s*v+u,l[6]=n*_+a*m+h,l[7]=o*m+s*_+u,this._roundPixels)for(var T=A.RESOLUTION,b=0;b<l.length;++b)l[b]=Math.round((l[b]*T|0)/T)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,l=a.d,f=a.tx,c=a.ty,d=-s._x*n.width,v=d+n.width,_=-s._y*n.height,m=_+n.height;i[0]=o*d+u*_+f,i[1]=l*_+h*d+c,i[2]=o*v+u*_+f,i[3]=l*_+h*v+c,i[4]=o*v+u*m+f,i[5]=l*m+h*v+c,i[6]=o*d+u*m+f,i[7]=l*m+h*d+c},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new CF),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Sm);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return Sm.x>=s&&Sm.x<s+i&&(a=-n*this.anchor.y,Sm.y>=a&&Sm.y<a+n)},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,i){var n=e instanceof ni?e:ni.from(e,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=cn(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=cn(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ni.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(Ag);/*!
 * @pixi/text - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var PF=function(r,t){return PF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},PF(r,t)};function ibt(r,t){PF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Zw;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Zw||(Zw={}));var gS={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Zw.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},nbt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Qw=function(){function r(t){this.styleID=0,this.reset(),bS(this,t,t)}return r.prototype.clone=function(){var t={};return bS(t,this,gS),new r(t)},r.prototype.reset=function(){bS(this,gS,gS)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=xS(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=xS(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){sbt(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=xS(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&nbt.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r}();function GX(r){return typeof r=="number"?$n(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function xS(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=GX(r[t]);return r}else return GX(r)}function sbt(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function bS(r,t,e){for(var i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}var Wa=function(){function r(t,e,i,n,s,a,o,h,u){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}return r.measureText=function(t,e,i,n){n===void 0&&(n=r._canvas),i=i??e.wordWrap;var s=e.toFontString(),a=r.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var o=n.getContext("2d");o.font=s;for(var h=i?r.wordWrap(t,e,n):t,u=h.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),f=0,c=0;c<u.length;c++){var d=o.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing;l[c]=d,f=Math.max(f,d)}var v=f+e.strokeThickness;e.dropShadow&&(v+=e.dropShadowDistance);var _=e.lineHeight||a.fontSize+e.strokeThickness,m=Math.max(_,a.fontSize+e.strokeThickness)+(u.length-1)*(_+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new r(t,e,v,m,u,l,_+e.leading,f,a)},r.wordWrap=function(t,e,i){i===void 0&&(i=r._canvas);for(var n=i.getContext("2d"),s=0,a="",o="",h=Object.create(null),u=e.letterSpacing,l=e.whiteSpace,f=r.collapseSpaces(l),c=r.collapseNewlines(l),d=!f,v=e.wordWrapWidth+u,_=r.tokenize(t),m=0;m<_.length;m++){var g=_[m];if(r.isNewline(g)){if(!c){o+=r.addLine(a),d=!f,a="",s=0;continue}g=" "}if(f){var T=r.isBreakingSpace(g),b=r.isBreakingSpace(a[a.length-1]);if(T&&b)continue}var S=r.getFromCache(g,u,h,n);if(S>v)if(a!==""&&(o+=r.addLine(a),a="",s=0),r.canBreakWords(g,e.breakWords))for(var R=r.wordWrapSplit(g),U=0;U<R.length;U++){for(var L=R[U],$=1;R[U+$];){var k=R[U+$],H=L[L.length-1];if(!r.canBreakChars(H,k,g,U,e.breakWords))L+=k;else break;$++}U+=L.length-1;var it=r.getFromCache(L,u,h,n);it+s>v&&(o+=r.addLine(a),d=!1,a="",s=0),a+=L,s+=it}else{a.length>0&&(o+=r.addLine(a),a="",s=0);var tt=m===_.length-1;o+=r.addLine(g,!tt),d=!1,a="",s=0}else S+s>v&&(d=!1,o+=r.addLine(a),a="",s=0),(a.length>0||!r.isBreakingSpace(g)||d)&&(a+=g,s+=S)}return o+=r.addLine(a,!1),o},r.addLine=function(t,e){return e===void 0&&(e=!0),t=r.trimRight(t),t=e?t+`
`:t,t},r.getFromCache=function(t,e,i,n){var s=i[t];if(typeof s!="number"){var a=t.length*e;s=n.measureText(t).width+a,i[t]=s}return s},r.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},r.collapseNewlines=function(t){return t==="normal"},r.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!r.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},r.isNewline=function(t){return typeof t!="string"?!1:r._newlines.indexOf(t.charCodeAt(0))>=0},r.isBreakingSpace=function(t,e){return typeof t!="string"?!1:r._breakingSpaces.indexOf(t.charCodeAt(0))>=0},r.tokenize=function(t){var e=[],i="";if(typeof t!="string")return e;for(var n=0;n<t.length;n++){var s=t[n],a=t[n+1];if(r.isBreakingSpace(s,a)||r.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e},r.canBreakWords=function(t,e){return e},r.canBreakChars=function(t,e,i,n,s){return!0},r.wordWrapSplit=function(t){return t.split("")},r.measureFont=function(t){if(r._fonts[t])return r._fonts[t];var e={ascent:0,descent:0,fontSize:0},i=r._canvas,n=r._context;n.font=t;var s=r.METRICS_STRING+r.BASELINE_SYMBOL,a=Math.ceil(n.measureText(s).width),o=Math.ceil(n.measureText(r.BASELINE_SYMBOL).width),h=Math.ceil(r.HEIGHT_MULTIPLIER*o);o=o*r.BASELINE_MULTIPLIER|0,i.width=a,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,o);var u=n.getImageData(0,0,a,h).data,l=u.length,f=a*4,c=0,d=0,v=!1;for(c=0;c<o;++c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d+=f;else break}for(e.ascent=o-c,d=l-f,v=!1,c=h;c>o;--c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d-=f;else break}return e.descent=c-o,e.fontSize=e.ascent+e.descent,r._fonts[t]=e,e},r.clearMetrics=function(t){t===void 0&&(t=""),t?delete r._fonts[t]:r._fonts={}},r}(),Jw=function(){try{var r=new OffscreenCanvas(0,0),t=r.getContext("2d");return t&&t.measureText?r:document.createElement("canvas")}catch{return document.createElement("canvas")}}();Jw.width=Jw.height=10;Wa._canvas=Jw;Wa._context=Jw.getContext("2d");Wa._fonts={};Wa.METRICS_STRING="|ÉqÅ";Wa.BASELINE_SYMBOL="M";Wa.BASELINE_MULTIPLIER=1.4;Wa.HEIGHT_MULTIPLIER=2;Wa._newlines=[10,13];Wa._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var abt={texture:!0,children:!1,baseTexture:!0},hY=function(r){ibt(t,r);function t(e,i,n){var s=this,a=!1;n||(n=document.createElement("canvas"),a=!0),n.width=3,n.height=3;var o=ni.from(n);return o.orig=new CF,o.trim=new CF,s=r.call(this,o)||this,s._ownCanvas=a,s.canvas=n,s.context=s.canvas.getContext("2d"),s._resolution=A.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=e,s.style=i,s.localStyleID=-1,s}return t.prototype.updateText=function(e){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,s=Wa.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,o=s.height,h=s.lines,u=s.lineHeight,l=s.lineWidths,f=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var d,v,_=i.dropShadow?2:1,m=0;m<_;++m){var g=i.dropShadow&&m===0,T=g?Math.ceil(Math.max(1,o)+i.padding*2):0,b=T*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";var S=i.dropShadowColor,R=ai(typeof S=="number"?S:SL(S));n.shadowColor="rgba("+R[0]*255+","+R[1]*255+","+R[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=i.dropShadowBlur,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+b}else n.fillStyle=this._generateFillStyle(i,h,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var U=(u-c.fontSize)/2;(!t.nextLineHeightBehavior||u-c.fontSize<0)&&(U=0);for(var L=0;L<h.length;L++)d=i.strokeThickness/2,v=i.strokeThickness/2+L*u+c.ascent+U,i.align==="right"?d+=f-l[L]:i.align==="center"&&(d+=(f-l[L])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(h[L],d+i.padding,v+i.padding-T,!0),i.fill&&this.drawLetterSpacing(h[L],d+i.padding,v+i.padding-T)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,i,n,s){s===void 0&&(s=!1);var a=this._style,o=a.letterSpacing;if(o===0){s?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}for(var h=i,u=Array.from?Array.from(e):e.split(""),l=this.context.measureText(e).width,f=0,c=0;c<u.length;++c){var d=u[c];s?this.context.strokeText(d,h,n):this.context.fillText(d,h,n),f=this.context.measureText(e.substring(c+1)).width,h+=l-f+o,l=f}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=P9(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,s=this._style,a=s.trim?0:s.padding,o=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-a*2,n.orig.height=n._frame.height-a*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),r.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,i,n){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,o=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,u=this.canvas.width/this._resolution-o-h*2,l=this.canvas.height/this._resolution-o-h*2,f=s.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(s[0]),c.unshift(0),f.push(s[s.length-1]),c.push(1),e.fillGradientType===Zw.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,h,u/2,l+h);for(var _=n.fontProperties.fontSize+e.strokeThickness,v=0;v<i.length;v++){var m=n.lineHeight*(v-1)+_,g=n.lineHeight*v,T=g;v>0&&m>g&&(T=(g+m)/2);var b=g+_,S=n.lineHeight*(v+1),R=b;v+1<i.length&&S<b&&(R=(b+S)/2);for(var U=(R-T)/l,L=0;L<f.length;L++){var $=0;typeof c[L]=="number"?$=c[L]:$=L/f.length;var k=Math.min(1,Math.max(0,T/l+$*U));k=Number(k.toFixed(5)),a.addColorStop(k,f[L])}}}else{a=this.context.createLinearGradient(h,l/2,u+h,l/2);for(var H=f.length+1,it=1,v=0;v<f.length;v++){var tt=void 0;typeof c[v]=="number"?tt=c[v]:tt=it/H,a.addColorStop(tt,f[v]),it++}}return a},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},abt,e),r.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=cn(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=cn(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof Qw?this._style=e:this._style=new Qw(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t}(rbt);/*!
 * @pixi/prepare - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var OF=function(r,t){return OF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},OF(r,t)};function obt(r,t){OF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var hbt=function(){function r(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return r.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},r.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},r}();function ubt(r,t){var e=!1;if(r&&r._textures&&r._textures.length){for(var i=0;i<r._textures.length;i++)if(r._textures[i]instanceof ni){var n=r._textures[i].baseTexture;t.indexOf(n)===-1&&(t.push(n),e=!0)}}return e}function lbt(r,t){if(r.baseTexture instanceof Fi){var e=r.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function fbt(r,t){if(r._texture&&r._texture instanceof ni){var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function cbt(r,t){return t instanceof hY?(t.updateText(!0),!0):!1}function dbt(r,t){if(t instanceof Qw){var e=t.toFontString();return Wa.measureFont(e),!0}return!1}function pbt(r,t){if(r instanceof hY){t.indexOf(r.style)===-1&&t.push(r.style),t.indexOf(r)===-1&&t.push(r);var e=r._texture.baseTexture;return t.indexOf(e)===-1&&t.push(e),!0}return!1}function vbt(r,t){return r instanceof Qw?(t.indexOf(r)===-1&&t.push(r),!0):!1}var ybt=function(){function r(t){var e=this;this.limiter=new hbt(A.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(pbt),this.registerFindHook(vbt),this.registerFindHook(ubt),this.registerFindHook(lbt),this.registerFindHook(fbt),this.registerUploadHook(cbt),this.registerUploadHook(dbt)}return r.prototype.upload=function(t,e){typeof t=="function"&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,sh.system.addOnce(this.tick,this,_y.UTILITY))):e&&e()},r.prototype.tick=function(){setTimeout(this.delayedTick,0)},r.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed){for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)sh.system.addOnce(this.tick,this,_y.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var i=0,n=s.length;i<n;i++)s[i]()}},r.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},r.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},r.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ag)for(var e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},r.prototype.destroy=function(){this.ticking&&sh.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},r}();function uY(r,t){return t instanceof Fi?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function mbt(r,t){if(!(t instanceof oY))return!1;var e=t.geometry;t.finishPoly(),e.updateBatches();for(var i=e.batches,n=0;n<i.length;n++){var s=i[n].style.texture;s&&uY(r,s.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function _bt(r,t){return r instanceof oY?(t.push(r),!0):!1}var gbt=function(r){obt(t,r);function t(e){var i=r.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(_bt),i.registerUploadHook(uY),i.registerUploadHook(mbt),i}return t}(ybt);/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xbt=Math.PI*2,FF;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(FF||(FF={}));var wi=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=FF.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Ku=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),tT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ya=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Ku;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Ku;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(xbt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),oc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],hc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],uc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],lc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],UF=[],lY=[],eT=Math.sign;function bbt(){for(var r=0;r<16;r++){var t=[];UF.push(t);for(var e=0;e<16;e++)for(var i=eT(oc[r]*oc[e]+uc[r]*hc[e]),n=eT(hc[r]*oc[e]+lc[r]*hc[e]),s=eT(oc[r]*uc[e]+uc[r]*lc[e]),a=eT(hc[r]*uc[e]+lc[r]*lc[e]),o=0;o<16;o++)if(oc[o]===i&&hc[o]===n&&uc[o]===s&&lc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new ya;h.set(oc[r],hc[r],uc[r],lc[r],0,0),lY.push(h)}}bbt();var Fr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return oc[r]},uY:function(r){return hc[r]},vX:function(r){return uc[r]},vY:function(r){return lc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return UF[r][t]},sub:function(r,t){return UF[r][Fr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Fr.S:Fr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Fr.E:Fr.W:t>0?r>0?Fr.SE:Fr.SW:r>0?Fr.NE:Fr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=lY[Fr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new ya,this.localTransform=new ya,this.position=new tT(this.onChange,this,0,0),this.scale=new tT(this.onChange,this,1,1),this.pivot=new tT(this.onChange,this,0,0),this.skew=new tT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Hh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Hh||(Hh={}));var Ng;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Ng||(Ng={}));var t1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(t1||(t1={}));var _e;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(_e||(_e={}));var Pg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Pg||(Pg={}));var Mt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Mt||(Mt={}));var rd;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(rd||(rd={}));var Pe;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Pe||(Pe={}));var e1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(e1||(e1={}));var yh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(yh||(yh={}));var MF;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(MF||(MF={}));var bd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(bd||(bd={}));var Sl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Sl||(Sl={}));var Cu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Cu||(Cu={}));var LF;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(LF||(LF={}));var bo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(bo||(bo={}));var fs;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(fs||(fs={}));var vi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(vi||(vi={}));var Bo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Bo||(Bo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var r1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(r1||(r1={}));var TS=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Pp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TS(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=r1.NORMAL),this._addListener(new TS(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=r1.NORMAL),this._addListener(new TS(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Hh.WEBGL:Hh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var BF=[];function fY(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=BF.length-1;n>=0;--n){var s=BF[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var GF=function(r,t){return GF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},GF(r,t)};function lr(r,t){GF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var kF=function(){return kF=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},kF.apply(this,arguments)};function Tbt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Og=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),nB=function(r){lr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Sl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Og),Ebt={scaleMode:yh.NEAREST,format:Mt.RGBA,alphaMode:Sl.NPM},fn=function(r){lr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Og)&&(e=fY(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Mt.RGBA,n.type=d||Pe.UNSIGNED_BYTE,n.target=v||rd.TEXTURE_2D,n.alphaMode=s!==void 0?s:Sl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new nB(e,{width:i,height:n}),o=e instanceof Float32Array?Pe.FLOAT:Pe.UNSIGNED_BYTE;return new t(a,Object.assign(Ebt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),cY=function(r){lr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new fn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Og?this.addResourceAt(e[n],n):this.addResourceAt(fY(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Og),wbt=function(r){lr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=rd.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(cY),Nl=function(r){lr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Sl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Og),dY=function(r){lr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Nl),Ibt=function(r){lr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=rd.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=rd.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=rd.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(cY),pY=function(r){lr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Nl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Sl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Nl),Rbt=function(r){lr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Nl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Nl),Cbt=function(r){lr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Nl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Pp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Pp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Pp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Pp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Pp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Pp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Nl),Abt=function(r){lr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Nl);BF.push(pY,Abt,dY,Cbt,Rbt,nB,Ibt,wbt);var Sbt=function(r){lr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Sl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(nB),DF=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=vi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new fn(null,{scaleMode:yh.NEAREST,resolution:1,mipmap:bd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new fn(new Sbt(null,{width:this.width,height:this.height}),{scaleMode:yh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:bd.OFF,format:Mt.DEPTH_COMPONENT,type:Pe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),vY=function(r){lr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:vi.NONE,i=r.call(this,null,e)||this,i.mipmap=bd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new DF(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(fn),yY=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Fr.add(i,Fr.NW),this.x0=h+a*Fr.uX(i),this.y0=u+o*Fr.uY(i),i=Fr.add(i,2),this.x1=h+a*Fr.uX(i),this.y1=u+o*Fr.uY(i),i=Fr.add(i,2),this.x2=h+a*Fr.uX(i),this.y2=u+o*Fr.uY(i),i=Fr.add(i,2),this.x3=h+a*Fr.uX(i),this.y3=u+o*Fr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),kX=new yY,ua=function(r){lr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new wi(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=kX,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Ku(o.x,o.y):new Ku(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===kX&&(this._uvs=new yY),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new fn(e,i)),h.baseTexture.cacheId=a,fn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(fn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new fn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof pY&&(o.url=i);var h=new t(a);return n||(n=i),fn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(fn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function Nbt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new ua(new fn(new dY(r)))}function dI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}ua.EMPTY=new ua(new fn);dI(ua.EMPTY);dI(ua.EMPTY.baseTexture);ua.WHITE=Nbt();dI(ua.WHITE);dI(ua.WHITE.baseTexture);var sB=function(r){lr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new vY(e))},t}(ua),Pbt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=vi.NONE);var n=new vY(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new sB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=vi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||vi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),DX=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Pe.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),Obt=0,ws=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Obt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Bo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Bo.ELEMENT_ARRAY_BUFFER:Bo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),Fbt={Float32Array,Uint32Array,Int32Array,Uint8Array};function Ubt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new Fbt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var $X={5126:4,5123:2,5121:1},Mbt=0,Lbt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},aB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Mbt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ws||(e instanceof Array&&(e=new Float32Array(e)),e=new ws(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new DX(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof ws||(t instanceof Array&&(t=new Uint16Array(t)),t=new ws(t)),t.type=Bo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new ws,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*$X[s.type]/4),s.buffer=0}for(i.data=Ubt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new ws(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new DX(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Bo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new Lbt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new ws(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Bo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*$X[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),Bbt=function(r){lr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(aB),Gbt=function(r){lr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new ws(e.vertices),e.uvBuffer=new ws(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(aB),kbt=0,$v=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=kbt++,this.static=!!e,this.ubo=!!i,t instanceof ws?(this.buffer=t,this.buffer.type=Bo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ws(new Float32Array(1)),this.buffer.type=Bo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),Dbt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=vi.NONE,this.sourceFrame=new wi,this.destinationFrame=new wi,this.bindingSourceFrame=new wi,this.bindingDestinationFrame=new wi,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),rT=[new Ku,new Ku,new Ku,new Ku],ES=new ya,$bt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Pbt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Bbt,this.quadUv=new Gbt,this.tempRect=new wi,this.activeState={},this.globalUniforms=new $v({outputFrame:new wi,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new Dbt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(ES.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Cu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Cu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Cu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Cu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Cu.CLEAR||e===Cu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Pg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Pg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(ya.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=vi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||vi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=rT[0],n=rT[1],s=rT[2],a=rT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?ES.copyFrom(s):ES.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),mY=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),Hbt=function(){function r(t){this.renderer=t,this.emptyRenderer=new mY(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),HX=0,Xbt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=HX++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=HX++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Hh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),Vbt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=vi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),jbt=new wi,zbt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new DF(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new wi,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Hh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=t1.COLOR|t1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new Vbt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=vi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=vi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new DF(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=jbt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new wi},r.prototype.destroy=function(){this.renderer=null},r}(),wS={5126:4,5123:2,5121:1},Wbt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Hh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*wS[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*wS[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*wS[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),Ybt=function(){function r(t){t===void 0&&(t=null),this.type=fs.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=fs.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function XX(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function VX(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function qbt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||VX(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||VX(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function IS(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function _Y(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return IS(2*t);case"bvec3":return IS(3*t);case"bvec4":return IS(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var gY={},Nm=gY;function Kbt(){if(Nm===gY||Nm&&Nm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Hh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Nm=t}return Nm}var iT;function Zbt(){if(!iT){iT=bo.MEDIUM;var r=Kbt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);iT=t.precision?bo.HIGH:bo.MEDIUM}}return iT}function jX(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===bo.HIGH&&e!==bo.HIGH&&(i=bo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==bo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var Qbt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function xY(r){return Qbt[r]}var nT=null,zX={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function bY(r,t){if(!nT){var e=Object.keys(zX);nT={};for(var i=0;i<e.length;++i){var n=e[i];nT[r[n]]=zX[n]}}return nT[t]}var Hv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Jbt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},tTt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function eTt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Hv.length;o++)if(Hv[o].test(n,s)){e.push(Hv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?Jbt:tTt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var rTt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function iTt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function nTt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=rTt.replace(/%forloop%/gi,iTt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Pm;function sTt(){if(typeof Pm=="boolean")return Pm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Pm=r({a:"b"},"a","b")===!0}catch{Pm=!1}return Pm}var aTt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,oTt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,hTt=0,sT={},oB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=hTt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),sT[i]?(sT[i]++,i+="-"+sT[i]):sT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=jX(this.vertexSrc,A.PRECISION_VERTEX,bo.HIGH),this.fragmentSrc=jX(this.fragmentSrc,A.PRECISION_FRAGMENT,Zbt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return oTt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return aTt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),TY=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof $v?this.uniformGroup=e:this.uniformGroup=new $v(e):this.uniformGroup=new $v({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=oB.from(t,e);return new r(n,i)},r}(),RS=0,CS=1,AS=2,SS=3,NS=4,PS=5,hB=function(){function r(){this.data=0,this.blendMode=_e.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<RS)},set:function(t){!!(this.data&1<<RS)!==t&&(this.data^=1<<RS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<CS)},set:function(t){!!(this.data&1<<CS)!==t&&(this.data^=1<<CS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<AS)},set:function(t){!!(this.data&1<<AS)!==t&&(this.data^=1<<AS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<SS)},set:function(t){!!(this.data&1<<SS)!==t&&(this.data^=1<<SS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<PS)},set:function(t){!!(this.data&1<<PS)!==t&&(this.data^=1<<PS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<NS)},set:function(t){!!(this.data&1<<NS)!==t&&(this.data^=1<<NS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==_e.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),uTt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,lTt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,fTt=function(r){lr(t,r);function t(e,i,n){var s=this,a=oB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new hB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return uTt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return lTt},enumerable:!1,configurable:!0}),t}(TY),cTt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,dTt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,WX=new ya,pTt=function(){function r(t,e){this._texture=t,this.mapCoord=new ya,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(WX.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(WX));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),vTt=function(r){lr(t,r);function t(e){var i=this,n=new ya;return i=r.call(this,cTt,dTt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new pTt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(fTt),yTt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new Ybt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case fs.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case fs.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case fs.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case fs.SCISSOR:this.renderer.scissor.pop();break;case fs.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case fs.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=fs.SPRITE;return}if(t.type=fs.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=fs.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new vTt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),EY=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),mTt=function(r){lr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(EY),_Tt=function(r){lr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(EY),gTt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ya,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Tf=new wi,Om=new wi,xTt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new wi,this.destinationFrame=new wi,this.viewportFrame=new wi}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Tf.width=t.frame.width,Tf.height=t.frame.height,e=Tf),i||(Om.x=t.frame.x,Om.y=t.frame.y,Om.width=e.width,Om.height=e.height,i=Om),a=s.framebuffer):(o=n.resolution,e||(Tf.width=n.screen.width,Tf.height=n.screen.height,e=Tf),i||(i=Tf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function bTt(r,t,e,i,n){e.buffer.update(n)}var TTt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},wY={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function ETt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=wY[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function wTt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function ITt(r,t){if(!r.autoManage)return{size:0,syncFunc:bTt};for(var e=wTt(r.uniforms,t),i=ETt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Hv.length;c++){var d=Hv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Hv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=xY(h.data.type),_=Math.max(wY[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=TTt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var RTt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function CTt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=bY(t,s.type),o={type:a,name:s.name,size:xY(a),location:n};e[s.name]=o}}return e}function ATt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=bY(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:_Y(h,s.size)}}return e}function STt(r,t){var e=XX(r,r.VERTEX_SHADER,t.vertexSrc),i=XX(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||qbt(r,n,e,i),t.attributeData=CTt(n,r),t.uniformData=ATt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:_Y(h.type,h.size)}}var u=new RTt(n,o);return u}var NTt=0,aT={textureCount:0,uboCount:0},PTt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=NTt++}return r.prototype.systemCheck=function(){if(!sTt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(aT.textureCount=0,aT.uboCount=0,this.syncUniformGroup(t.uniformGroup,aT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=eTt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,aT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=ITt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=STt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function OTt(r,t){return t===void 0&&(t=[]),t[_e.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.ADD]=[r.ONE,r.ONE],t[_e.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.NONE]=[0,0],t[_e.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[_e.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_e.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[_e.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[_e.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_e.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[_e.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[_e.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[_e.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[_e.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_e.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var FTt=0,UTt=1,MTt=2,LTt=3,BTt=4,GTt=5,kTt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=_e.NONE,this._blendEq=!1,this.map=[],this.map[FTt]=this.setBlend,this.map[UTt]=this.setOffset,this.map[MTt]=this.setCullFace,this.map[LTt]=this.setDepthTest,this.map[BTt]=this.setFrontFace,this.map[GTt]=this.setDepthMask,this.checks=[],this.defaultState=new hB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=OTt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),DTt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==LF.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function $Tt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Pe.UNSIGNED_BYTE]=(e={},e[Mt.RGBA]=r.RGBA8,e[Mt.RGB]=r.RGB8,e[Mt.RG]=r.RG8,e[Mt.RED]=r.R8,e[Mt.RGBA_INTEGER]=r.RGBA8UI,e[Mt.RGB_INTEGER]=r.RGB8UI,e[Mt.RG_INTEGER]=r.RG8UI,e[Mt.RED_INTEGER]=r.R8UI,e[Mt.ALPHA]=r.ALPHA,e[Mt.LUMINANCE]=r.LUMINANCE,e[Mt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Pe.BYTE]=(i={},i[Mt.RGBA]=r.RGBA8_SNORM,i[Mt.RGB]=r.RGB8_SNORM,i[Mt.RG]=r.RG8_SNORM,i[Mt.RED]=r.R8_SNORM,i[Mt.RGBA_INTEGER]=r.RGBA8I,i[Mt.RGB_INTEGER]=r.RGB8I,i[Mt.RG_INTEGER]=r.RG8I,i[Mt.RED_INTEGER]=r.R8I,i),t[Pe.UNSIGNED_SHORT]=(n={},n[Mt.RGBA_INTEGER]=r.RGBA16UI,n[Mt.RGB_INTEGER]=r.RGB16UI,n[Mt.RG_INTEGER]=r.RG16UI,n[Mt.RED_INTEGER]=r.R16UI,n[Mt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Pe.SHORT]=(s={},s[Mt.RGBA_INTEGER]=r.RGBA16I,s[Mt.RGB_INTEGER]=r.RGB16I,s[Mt.RG_INTEGER]=r.RG16I,s[Mt.RED_INTEGER]=r.R16I,s),t[Pe.UNSIGNED_INT]=(a={},a[Mt.RGBA_INTEGER]=r.RGBA32UI,a[Mt.RGB_INTEGER]=r.RGB32UI,a[Mt.RG_INTEGER]=r.RG32UI,a[Mt.RED_INTEGER]=r.R32UI,a[Mt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Pe.INT]=(o={},o[Mt.RGBA_INTEGER]=r.RGBA32I,o[Mt.RGB_INTEGER]=r.RGB32I,o[Mt.RG_INTEGER]=r.RG32I,o[Mt.RED_INTEGER]=r.R32I,o),t[Pe.FLOAT]=(h={},h[Mt.RGBA]=r.RGBA32F,h[Mt.RGB]=r.RGB32F,h[Mt.RG]=r.RG32F,h[Mt.RED]=r.R32F,h[Mt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Pe.HALF_FLOAT]=(u={},u[Mt.RGBA]=r.RGBA16F,u[Mt.RGB]=r.RGB16F,u[Mt.RG]=r.RG16F,u[Mt.RED]=r.R16F,u),t[Pe.UNSIGNED_SHORT_5_6_5]=(l={},l[Mt.RGB]=r.RGB565,l),t[Pe.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Mt.RGBA]=r.RGBA4,f),t[Pe.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Mt.RGBA]=r.RGB5_A1,c),t[Pe.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Mt.RGBA]=r.RGB10_A2,d[Mt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Pe.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Mt.RGB]=r.R11F_G11F_B10F,v),t[Pe.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Mt.RGB]=r.RGB9_E5,_),t[Pe.UNSIGNED_INT_24_8]=(m={},m[Mt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Pe.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Mt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Pe.UNSIGNED_BYTE]=(b={},b[Mt.RGBA]=r.RGBA,b[Mt.RGB]=r.RGB,b[Mt.ALPHA]=r.ALPHA,b[Mt.LUMINANCE]=r.LUMINANCE,b[Mt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Pe.UNSIGNED_SHORT_5_6_5]=(S={},S[Mt.RGB]=r.RGB,S),T[Pe.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Mt.RGBA]=r.RGBA,R),T[Pe.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Mt.RGBA]=r.RGBA,U),T),L}var OS=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Pe.UNSIGNED_BYTE,this.internalFormat=Mt.RGBA,this.samplerType=0}return r}(),HTt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new fn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=$Tt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new OS(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new OS(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==e1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new OS(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Pe.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==e1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===bd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=MF.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==bd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===yh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===yh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===yh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===yh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),FS=new ya,XTt=function(r){lr(t,r);function t(e,i){e===void 0&&(e=Ng.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new wi(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=Tbt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=sB.create(kF({width:s.width,height:s.height},o));return FS.tx=-s.x,FS.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:FS,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Ng.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),VTt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),jTt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new VTt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){lr(t,r);function t(e){var i=r.call(this,Ng.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new $v({projectionMatrix:new ya},!0),i.addSystem(yTt,"mask").addSystem(Xbt,"context").addSystem(kTt,"state").addSystem(PTt,"shader").addSystem(HTt,"texture").addSystem(jTt,"buffer").addSystem(Wbt,"geometry").addSystem(zbt,"framebuffer").addSystem(mTt,"scissor").addSystem(_Tt,"stencil").addSystem(gTt,"projection").addSystem(DTt,"textureGC").addSystem($bt,"filter").addSystem(xTt,"renderTexture").addSystem(Hbt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=vi.HIGH?this.multisample=vi.HIGH:i>=vi.MEDIUM?this.multisample=vi.MEDIUM:i>=vi.LOW?this.multisample=vi.LOW:this.multisample=vi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof sB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(XTt);var zTt=function(){function r(){this.texArray=null,this.blend=0,this.type=Pg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),WTt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),YTt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),qTt=function(r){lr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=hB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Hh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=nTt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new zTt);for(;i.length<s;)i.push(new WTt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++fn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;fn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new YTt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(mY),KTt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=$v.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new oB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ya,default:this.defaultGroupCache[t]};return new TY(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),ZTt=function(r){lr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new ws(null,e,!1),i._indexBuffer=new ws(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Pe.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Pe.FLOAT).addAttribute("aColor",i._buffer,4,!0,Pe.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Pe.FLOAT).addIndex(i._indexBuffer),i}return t}(aB),YX=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,qX=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,QTt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:YX,fragment:qX,geometryClass:ZTt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){lr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new KTt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(qTt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return YX},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return qX},enumerable:!1,configurable:!0}),r}();QTt.create();/*!
 * @pixi/spritesheet - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var JTt=function(){function r(t,e,i){i===void 0&&(i=null),this._texture=t instanceof ua?t:null,this.baseTexture=t instanceof fn?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r.prototype._updateResolution=function(t){t===void 0&&(t=null);var e=this.data.meta.scale,i=Ze(t,null);return i===null&&(i=e!==void 0?parseFloat(e):1),i!==1&&this.baseTexture.setResolution(i),i},r.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=r.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},r.prototype._processFrames=function(t){for(var e=t,i=r.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n=this._frameKeys[e],s=this._frames[n],a=s.frame;if(a){var o=null,h=null,u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,l=new wi(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new wi(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new wi(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new wi(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[n]=new ua(this.baseTexture,o,l,h,s.rotated?2:0,s.anchor),ua.addToCache(this.textures[n],n)}e++}},r.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var n=t[e][i];this.animations[e].push(this.textures[n])}}},r.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},r.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*r.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*r.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},r.prototype.destroy=function(t){var e;t===void 0&&(t=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)===null||e===void 0||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},r.BATCH_SIZE=1e3,r}(),tEt=function(){function r(){}return r.use=function(t,e){var i,n,s=this,a=t.name+"_image";if(!t.data||t.type!==qr.TYPE.JSON||!t.data.frames||s.resources[a]){e();return}var o=(n=(i=t.data)===null||i===void 0?void 0:i.meta)===null||n===void 0?void 0:n.related_multi_packs;if(Array.isArray(o))for(var h=function(v){if(typeof v!="string")return"continue";var _=v.replace(".json",""),m=mv.resolve(t.url.replace(s.baseUrl,""),v);if(s.resources[_]||Object.values(s.resources).some(function(T){return mv.format(mv.parse(T.url))===m}))return"continue";var g={crossOrigin:t.crossOrigin,loadType:qr.LOAD_TYPE.XHR,xhrType:qr.XHR_RESPONSE_TYPE.JSON,parentResource:t};s.add(_,m,g)},u=0,l=o;u<l.length;u++){var f=l[u];h(f)}var c={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},d=r.getResourcePath(t,s.baseUrl);s.add(a,d,c,function(_){if(_.error){e(_.error);return}var m=new JTt(_.texture,t.data,t.url);m.parse(function(){t.spritesheet=m,t.textures=m.textures,e()})})},r.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:mv.resolve(t.url.replace(e,""),t.data.meta.image)},r}();/*!
 * @pixi/sprite - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var $F=function(r,t){return $F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},$F(r,t)};function eEt(r,t){$F(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Fm=new Qi,rEt=new Uint16Array([0,1,2,0,2,3]),uB=function(r){eEt(t,r);function t(e){var i=r.call(this)||this;return i._anchor=new _v(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=he.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||Ce.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=rEt,i.pluginName="batch",i.isSprite=!0,i._roundPixels=A.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=cn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=cn(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,l=this.vertexData,f=e.trim,c=e.orig,d=this._anchor,v=0,_=0,m=0,g=0;if(f?(_=f.x-d._x*c.width,v=_+f.width,g=f.y-d._y*c.height,m=g+f.height):(_=-d._x*c.width,v=_+c.width,g=-d._y*c.height,m=g+c.height),l[0]=n*_+a*g+h,l[1]=o*g+s*_+u,l[2]=n*v+a*g+h,l[3]=o*g+s*v+u,l[4]=n*v+a*m+h,l[5]=o*m+s*v+u,l[6]=n*_+a*m+h,l[7]=o*m+s*_+u,this._roundPixels)for(var T=A.RESOLUTION,b=0;b<l.length;++b)l[b]=Math.round((l[b]*T|0)/T)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,l=a.d,f=a.tx,c=a.ty,d=-s._x*n.width,v=d+n.width,_=-s._y*n.height,m=_+n.height;i[0]=o*d+u*_+f,i[1]=l*_+h*d+c,i[2]=o*v+u*_+f,i[3]=l*_+h*v+c,i[4]=o*v+u*m+f,i[5]=l*m+h*v+c,i[6]=o*d+u*m+f,i[7]=l*m+h*d+c},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ke),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Fm);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return Fm.x>=s&&Fm.x<s+i&&(a=-n*this.anchor.y,Fm.y>=a&&Fm.y<a+n)},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,i){var n=e instanceof Ce?e:Ce.from(e,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=cn(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=cn(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Ce.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(_l);/*!
 * @pixi/sprite-tiling - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var HF=function(r,t){return HF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},HF(r,t)};function IY(r,t){HF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Um=new Qi;(function(r){IY(t,r);function t(e,i,n){i===void 0&&(i=100),n===void 0&&(n=100);var s=r.call(this,e)||this;return s.tileTransform=new U9,s._width=i,s._height=n,s.uvMatrix=s.texture.uvMatrix||new ML(e),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(t.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)},enumerable:!1,configurable:!0}),t.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},t.prototype._render=function(e){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,i=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,i,n,s)},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ke),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Um);var i=this._width,n=this._height,s=-i*this.anchor._x;if(Um.x>=s&&Um.x<s+i){var a=-n*this.anchor._y;if(Um.y>=a&&Um.y<a+n)return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},t.from=function(e,i){var n=e instanceof Ce?e:Ce.from(e,i);return new t(n,i.width,i.height)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!1,configurable:!0}),t})(uB);var KX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,iEt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,nEt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,oT=new Wi,sEt=function(r){IY(t,r);function t(e){var i=r.call(this,e)||this,n={globals:i.renderer.globalUniforms};return i.shader=md.from(KX,iEt,n),i.simpleShader=md.from(KX,nEt,n),i.quad=new $9,i.state=Md.for2d(),i}return t.prototype.render=function(e){var i=this.renderer,n=this.quad,s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);var a=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;s=n.uvs,s[0]=s[6]=-a,s[1]=s[3]=-o,s[2]=s[4]=1-a,s[5]=s[7]=1-o,n.invalidate();var h=e._texture,u=h.baseTexture,l=e.tileTransform.localTransform,f=e.uvMatrix,c=u.isPowerOfTwo&&h.frame.width===u.width&&h.frame.height===u.height;c&&(u._glTextures[i.CONTEXT_UID]?c=u.wrapMode!==Ah.CLAMP:u.wrapMode===Ah.CLAMP&&(u.wrapMode=Ah.REPEAT));var d=c?this.simpleShader:this.shader,v=h.width,_=h.height,m=e._width,g=e._height;oT.set(l.a*v/m,l.b*v/g,l.c*_/m,l.d*_/g,l.tx/m,l.ty/g),oT.invert(),c?oT.prepend(f.mapCoord):(d.uniforms.uMapCoord=f.mapCoord.toArray(!0),d.uniforms.uClampFrame=f.uClampFrame,d.uniforms.uClampOffset=f.uClampOffset),d.uniforms.uTransform=oT.toArray(!0),d.uniforms.uColor=N9(e.tint,e.worldAlpha,d.uniforms.uColor,u.alphaMode),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=h,i.shader.bind(d),i.geometry.bind(n),this.state.blendMode=S9(e.blendMode,u.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},t}(sI);/*!
 * @pixi/mesh - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var XF=function(r,t){return XF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},XF(r,t)};function lB(r,t){XF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var aEt=function(){function r(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return r.prototype.update=function(t){if(!(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},r}(),US=new Qi,ZX=new FE,Fg=function(r){lB(t,r);function t(e,i,n,s){s===void 0&&(s=Da.TRIANGLES);var a=r.call(this)||this;return a.geometry=e,e.refCount++,a.shader=i,a.state=n||Md.for2d(),a.drawMode=s,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=A.ROUND_PIXELS,a.batchUvs=null,a}return Object.defineProperty(t.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this.shader},set:function(e){this.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){var i=this.geometry.buffers[0].data,n=this.shader;n.batchable&&this.drawMode===Da.TRIANGLES&&i.length<t.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)},t.prototype._renderDefault=function(e){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),e.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(i),e.state.set(this.state),e.geometry.bind(this.geometry,i),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},t.prototype._renderToBatch=function(e){var i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)},t.prototype.calculateVertices=function(){var e=this.geometry,i=e.buffers[0],n=i.data,s=i._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));for(var a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,l=a.d,f=a.tx,c=a.ty,d=this.vertexData,v=0;v<d.length/2;v++){var _=n[v*2],m=n[v*2+1];d[v*2]=o*_+u*m+f,d[v*2+1]=h*_+l*m+c}if(this._roundPixels)for(var g=A.RESOLUTION,v=0;v<d.length;++v)d[v]=Math.round((d[v]*g|0)/g);this.vertexDirty=s}},t.prototype.calculateUvs=function(){var e=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new aEt(e,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},t.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,US);for(var i=this.geometry.getBuffer("aVertexPosition").data,n=ZX.points,s=this.geometry.getIndex().data,a=s.length,o=this.drawMode===4?3:1,h=0;h+2<a;h+=o){var u=s[h]*2,l=s[h+1]*2,f=s[h+2]*2;if(n[0]=i[u],n[1]=i[u+1],n[2]=i[l],n[3]=i[l+1],n[4]=i[f],n[5]=i[f+1],ZX.contains(US.x,US.y))return!0}return!1},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},t.BATCHABLE_SIZE=100,t}(_l),oEt=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,hEt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,pI=function(r){lB(t,r);function t(e,i){var n=this,s={uSampler:e,alpha:1,uTextureMatrix:Wi.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),n=r.call(this,i.program||aI.from(hEt,oEt),s)||this,n._colorDirty=!1,n.uvMatrix=new ML(e),n.batchable=i.program===void 0,n.pluginName=i.pluginName,n.tint=i.tint,n.alpha=i.alpha,n}return Object.defineProperty(t.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(this.uniforms.uSampler=e,this.uvMatrix.texture=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),t.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture;N9(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},t}(md),vI=function(r){lB(t,r);function t(e,i,n){var s=r.call(this)||this,a=new Oi(e),o=new Oi(i,!0),h=new Oi(n,!0,!0);return s.addAttribute("aVertexPosition",a,2,!1,ne.FLOAT).addAttribute("aTextureCoord",o,2,!1,ne.FLOAT).addIndex(h),s._updateId=-1,s}return Object.defineProperty(t.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),t}(_0);/*!
 * @pixi/text - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var VF=function(r,t){return VF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},VF(r,t)};function uEt(r,t){VF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Ug;(function(r){r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Ug||(Ug={}));var MS={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ug.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},lEt=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ir=function(){function r(t){this.styleID=0,this.reset(),BS(this,t,t)}return r.prototype.clone=function(){var t={};return BS(t,this,MS),new r(t)},r.prototype.reset=function(){BS(this,MS,MS)},Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=LS(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=LS(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){fEt(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=LS(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),r.prototype.toFontString=function(){var t=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&lEt.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r}();function QX(r){return typeof r=="number"?$n(r):(typeof r=="string"&&r.indexOf("0x")===0&&(r=r.replace("0x","#")),r)}function LS(r){if(Array.isArray(r)){for(var t=0;t<r.length;++t)r[t]=QX(r[t]);return r}else return QX(r)}function fEt(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(var e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function BS(r,t,e){for(var i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}var Ya=function(){function r(t,e,i,n,s,a,o,h,u){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}return r.measureText=function(t,e,i,n){n===void 0&&(n=r._canvas),i=i??e.wordWrap;var s=e.toFontString(),a=r.measureFont(s);a.fontSize===0&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var o=n.getContext("2d");o.font=s;for(var h=i?r.wordWrap(t,e,n):t,u=h.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),f=0,c=0;c<u.length;c++){var d=o.measureText(u[c]).width+(u[c].length-1)*e.letterSpacing;l[c]=d,f=Math.max(f,d)}var v=f+e.strokeThickness;e.dropShadow&&(v+=e.dropShadowDistance);var _=e.lineHeight||a.fontSize+e.strokeThickness,m=Math.max(_,a.fontSize+e.strokeThickness)+(u.length-1)*(_+e.leading);return e.dropShadow&&(m+=e.dropShadowDistance),new r(t,e,v,m,u,l,_+e.leading,f,a)},r.wordWrap=function(t,e,i){i===void 0&&(i=r._canvas);for(var n=i.getContext("2d"),s=0,a="",o="",h=Object.create(null),u=e.letterSpacing,l=e.whiteSpace,f=r.collapseSpaces(l),c=r.collapseNewlines(l),d=!f,v=e.wordWrapWidth+u,_=r.tokenize(t),m=0;m<_.length;m++){var g=_[m];if(r.isNewline(g)){if(!c){o+=r.addLine(a),d=!f,a="",s=0;continue}g=" "}if(f){var T=r.isBreakingSpace(g),b=r.isBreakingSpace(a[a.length-1]);if(T&&b)continue}var S=r.getFromCache(g,u,h,n);if(S>v)if(a!==""&&(o+=r.addLine(a),a="",s=0),r.canBreakWords(g,e.breakWords))for(var R=r.wordWrapSplit(g),U=0;U<R.length;U++){for(var L=R[U],$=1;R[U+$];){var k=R[U+$],H=L[L.length-1];if(!r.canBreakChars(H,k,g,U,e.breakWords))L+=k;else break;$++}U+=L.length-1;var it=r.getFromCache(L,u,h,n);it+s>v&&(o+=r.addLine(a),d=!1,a="",s=0),a+=L,s+=it}else{a.length>0&&(o+=r.addLine(a),a="",s=0);var tt=m===_.length-1;o+=r.addLine(g,!tt),d=!1,a="",s=0}else S+s>v&&(d=!1,o+=r.addLine(a),a="",s=0),(a.length>0||!r.isBreakingSpace(g)||d)&&(a+=g,s+=S)}return o+=r.addLine(a,!1),o},r.addLine=function(t,e){return e===void 0&&(e=!0),t=r.trimRight(t),t=e?t+`
`:t,t},r.getFromCache=function(t,e,i,n){var s=i[t];if(typeof s!="number"){var a=t.length*e;s=n.measureText(t).width+a,i[t]=s}return s},r.collapseSpaces=function(t){return t==="normal"||t==="pre-line"},r.collapseNewlines=function(t){return t==="normal"},r.trimRight=function(t){if(typeof t!="string")return"";for(var e=t.length-1;e>=0;e--){var i=t[e];if(!r.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},r.isNewline=function(t){return typeof t!="string"?!1:r._newlines.indexOf(t.charCodeAt(0))>=0},r.isBreakingSpace=function(t,e){return typeof t!="string"?!1:r._breakingSpaces.indexOf(t.charCodeAt(0))>=0},r.tokenize=function(t){var e=[],i="";if(typeof t!="string")return e;for(var n=0;n<t.length;n++){var s=t[n],a=t[n+1];if(r.isBreakingSpace(s,a)||r.isNewline(s)){i!==""&&(e.push(i),i=""),e.push(s);continue}i+=s}return i!==""&&e.push(i),e},r.canBreakWords=function(t,e){return e},r.canBreakChars=function(t,e,i,n,s){return!0},r.wordWrapSplit=function(t){return t.split("")},r.measureFont=function(t){if(r._fonts[t])return r._fonts[t];var e={ascent:0,descent:0,fontSize:0},i=r._canvas,n=r._context;n.font=t;var s=r.METRICS_STRING+r.BASELINE_SYMBOL,a=Math.ceil(n.measureText(s).width),o=Math.ceil(n.measureText(r.BASELINE_SYMBOL).width),h=Math.ceil(r.HEIGHT_MULTIPLIER*o);o=o*r.BASELINE_MULTIPLIER|0,i.width=a,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,a,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,o);var u=n.getImageData(0,0,a,h).data,l=u.length,f=a*4,c=0,d=0,v=!1;for(c=0;c<o;++c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d+=f;else break}for(e.ascent=o-c,d=l-f,v=!1,c=h;c>o;--c){for(var _=0;_<f;_+=4)if(u[d+_]!==255){v=!0;break}if(!v)d-=f;else break}return e.descent=c-o,e.fontSize=e.ascent+e.descent,r._fonts[t]=e,e},r.clearMetrics=function(t){t===void 0&&(t=""),t?delete r._fonts[t]:r._fonts={}},r}(),i1=function(){try{var r=new OffscreenCanvas(0,0),t=r.getContext("2d");return t&&t.measureText?r:document.createElement("canvas")}catch{return document.createElement("canvas")}}();i1.width=i1.height=10;Ya._canvas=i1;Ya._context=i1.getContext("2d");Ya._fonts={};Ya.METRICS_STRING="|ÉqÅ";Ya.BASELINE_SYMBOL="M";Ya.BASELINE_MULTIPLIER=1.4;Ya.HEIGHT_MULTIPLIER=2;Ya._newlines=[10,13];Ya._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var cEt={texture:!0,children:!1,baseTexture:!0};(function(r){uEt(t,r);function t(e,i,n){var s=this,a=!1;n||(n=document.createElement("canvas"),a=!0),n.width=3,n.height=3;var o=Ce.from(n);return o.orig=new Ke,o.trim=new Ke,s=r.call(this,o)||this,s._ownCanvas=a,s.canvas=n,s.context=s.canvas.getContext("2d"),s._resolution=A.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=e,s.style=i,s.localStyleID=-1,s}return t.prototype.updateText=function(e){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&e)){this._font=this._style.toFontString();var n=this.context,s=Ya.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,o=s.height,h=s.lines,u=s.lineHeight,l=s.lineWidths,f=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;for(var d,v,_=i.dropShadow?2:1,m=0;m<_;++m){var g=i.dropShadow&&m===0,T=g?Math.ceil(Math.max(1,o)+i.padding*2):0,b=T*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";var S=i.dropShadowColor,R=ai(typeof S=="number"?S:SL(S));n.shadowColor="rgba("+R[0]*255+","+R[1]*255+","+R[2]*255+","+i.dropShadowAlpha+")",n.shadowBlur=i.dropShadowBlur,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+b}else n.fillStyle=this._generateFillStyle(i,h,s),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;var U=(u-c.fontSize)/2;(!t.nextLineHeightBehavior||u-c.fontSize<0)&&(U=0);for(var L=0;L<h.length;L++)d=i.strokeThickness/2,v=i.strokeThickness/2+L*u+c.ascent+U,i.align==="right"?d+=f-l[L]:i.align==="center"&&(d+=(f-l[L])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(h[L],d+i.padding,v+i.padding-T,!0),i.fill&&this.drawLetterSpacing(h[L],d+i.padding,v+i.padding-T)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,i,n,s){s===void 0&&(s=!1);var a=this._style,o=a.letterSpacing;if(o===0){s?this.context.strokeText(e,i,n):this.context.fillText(e,i,n);return}for(var h=i,u=Array.from?Array.from(e):e.split(""),l=this.context.measureText(e).width,f=0,c=0;c<u.length;++c){var d=u[c];s?this.context.strokeText(d,h,n):this.context.fillText(d,h,n),f=this.context.measureText(e.substring(c+1)).width,h+=l-f+o,l=f}},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var i=P9(e);i.data&&(e.width=i.width,e.height=i.height,this.context.putImageData(i.data,0,0))}var n=this._texture,s=this._style,a=s.trim?0:s.padding,o=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-a,n.trim.y=-a,n.orig.width=n._frame.width-a*2,n.orig.height=n._frame.height-a*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},t.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,e)},t.prototype.getLocalBounds=function(e){return this.updateText(!0),r.prototype.getLocalBounds.call(this,e)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._generateFillStyle=function(e,i,n){var s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,o=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,u=this.canvas.width/this._resolution-o-h*2,l=this.canvas.height/this._resolution-o-h*2,f=s.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(s[0]),c.unshift(0),f.push(s[s.length-1]),c.push(1),e.fillGradientType===Ug.LINEAR_VERTICAL){a=this.context.createLinearGradient(u/2,h,u/2,l+h);for(var _=n.fontProperties.fontSize+e.strokeThickness,v=0;v<i.length;v++){var m=n.lineHeight*(v-1)+_,g=n.lineHeight*v,T=g;v>0&&m>g&&(T=(g+m)/2);var b=g+_,S=n.lineHeight*(v+1),R=b;v+1<i.length&&S<b&&(R=(b+S)/2);for(var U=(R-T)/l,L=0;L<f.length;L++){var $=0;typeof c[L]=="number"?$=c[L]:$=L/f.length;var k=Math.min(1,Math.max(0,T/l+$*U));k=Number(k.toFixed(5)),a.addColorStop(k,f[L])}}}else{a=this.context.createLinearGradient(h,l/2,u+h,l/2);for(var H=f.length+1,it=1,v=0;v<f.length;v++){var tt=void 0;typeof c[v]=="number"?tt=c[v]:tt=it/H,a.addColorStop(tt,f[v]),it++}}return a},t.prototype.destroy=function(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},cEt,e),r.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var i=cn(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var i=cn(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(e){e=e||{},e instanceof Ir?this._style=e:this._style=new Ir(e),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)},enumerable:!1,configurable:!0}),t.nextLineHeightBehavior=!1,t})(uB);/*!
 * @pixi/text-bitmap - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var jF=function(r,t){return jF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},jF(r,t)};function dEt(r,t){jF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var n1=function(){function r(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return r}(),pEt=function(){function r(){}return r.test=function(t){return typeof t=="string"&&t.indexOf("info face=")===0},r.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var n in e){var s=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var h in a){var u=a[h].split("="),l=u[0],f=u[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;o[l]=d}i[s].push(o)}var v=new n1;return i.info.forEach(function(_){return v.info.push({face:_.face,size:parseInt(_.size,10)})}),i.common.forEach(function(_){return v.common.push({lineHeight:parseInt(_.lineHeight,10)})}),i.page.forEach(function(_){return v.page.push({id:parseInt(_.id,10),file:_.file})}),i.char.forEach(function(_){return v.char.push({id:parseInt(_.id,10),page:parseInt(_.page,10),x:parseInt(_.x,10),y:parseInt(_.y,10),width:parseInt(_.width,10),height:parseInt(_.height,10),xoffset:parseInt(_.xoffset,10),yoffset:parseInt(_.yoffset,10),xadvance:parseInt(_.xadvance,10)})}),i.kerning.forEach(function(_){return v.kerning.push({first:parseInt(_.first,10),second:parseInt(_.second,10),amount:parseInt(_.amount,10)})}),v},r}(),zF=function(){function r(){}return r.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},r.parse=function(t){for(var e=new n1,i=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(var h=0;h<n.length;h++)e.common.push({lineHeight:parseInt(n[h].getAttribute("lineHeight"),10)});for(var h=0;h<s.length;h++)e.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(var h=0;h<a.length;h++){var u=a[h];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var h=0;h<o.length;h++)e.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});return e},r}(),vEt=function(){function r(){}return r.test=function(t){if(typeof t=="string"&&t.indexOf("<font>")>-1){var e=new self.DOMParser().parseFromString(t,"text/xml");return zF.test(e)}return!1},r.parse=function(t){var e=new self.DOMParser().parseFromString(t,"text/xml");return zF.parse(e)},r}(),GS=[pEt,zF,vEt];function RY(r){for(var t=0;t<GS.length;t++)if(GS[t].test(r))return GS[t];return null}function yEt(r,t,e,i,n,s){var a=e.fill;if(Array.isArray(a)){if(a.length===1)return a[0]}else return a;var o,h=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,l=r.width/i-h-u*2,f=r.height/i-h-u*2,c=a.slice(),d=e.fillGradientStops.slice();if(!d.length)for(var v=c.length+1,_=1;_<v;++_)d.push(_/v);if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),e.fillGradientType===Ug.LINEAR_VERTICAL){o=t.createLinearGradient(l/2,u,l/2,f+u);for(var m=0,g=s.fontProperties.fontSize+e.strokeThickness,T=g/f,_=0;_<n.length;_++)for(var b=s.lineHeight*_,S=0;S<c.length;S++){var R=0;typeof d[S]=="number"?R=d[S]:R=S/c.length;var U=b/f+R*T,L=Math.max(m,U);L=Math.min(L,1),o.addColorStop(L,c[S]),m=L}}else{o=t.createLinearGradient(u,f/2,l+u,f/2);for(var $=c.length+1,k=1,_=0;_<c.length;_++){var H=void 0;typeof d[_]=="number"?H=d[_]:H=k/$,o.addColorStop(H,c[_]),k++}}return o}function mEt(r,t,e,i,n,s,a){var o=e.text,h=e.fontProperties;t.translate(i,n),t.scale(s,s);var u=a.strokeThickness/2,l=-(a.strokeThickness/2);t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=yEt(r,t,a,s,[o],e),t.strokeStyle=a.stroke;var f=a.dropShadowColor,c=ai(typeof f=="number"?f:SL(f));a.dropShadow?(t.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+a.dropShadowAlpha+")",t.shadowBlur=a.dropShadowBlur,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*a.dropShadowDistance,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*a.dropShadowDistance):(t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),a.stroke&&a.strokeThickness&&t.strokeText(o,u,l+e.lineHeight-h.descent),a.fill&&t.fillText(o,u,l+e.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function _Et(r){typeof r=="string"&&(r=[r]);for(var t=[],e=0,i=r.length;e<i;e++){var n=r[e];if(Array.isArray(n)){if(n.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),a=n[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(var o=s,h=a;o<=h;o++)t.push(String.fromCharCode(o))}else t.push.apply(t,n.split(""))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}var v_=function(){function r(t,e,i){var n=t.info[0],s=t.common[0],a=t.page[0],o=Ze(a.file),h={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=s.lineHeight/o,this.chars={},this.pageTextures=h;for(var u=0;u<t.page.length;u++){var l=t.page[u],f=l.id,c=l.file;h[f]=e instanceof Array?e[u]:e[c]}for(var u=0;u<t.char.length;u++){var d=t.char[u],f=d.id,v=d.page,_=t.char[u],m=_.x,g=_.y,T=_.width,b=_.height,S=_.xoffset,R=_.yoffset,U=_.xadvance;m/=o,g/=o,T/=o,b/=o,S/=o,R/=o,U/=o;var L=new Ke(m+h[v].frame.x/o,g+h[v].frame.y/o,T,b);this.chars[f]={xOffset:S,yOffset:R,xAdvance:U,kerning:{},texture:new Ce(h[v].baseTexture,L),page:v}}for(var u=0;u<t.kerning.length;u++){var $=t.kerning[u],k=$.first,H=$.second,it=$.amount;k/=o,H/=o,it/=o,this.chars[H]&&(this.chars[H].kerning[k]=it)}}return r.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},r.install=function(t,e,i){var n;if(t instanceof n1)n=t;else{var s=RY(t);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(t)}e instanceof Ce&&(e=[e]);var a=new r(n,e,i);return r.available[a.font]=a,a},r.uninstall=function(t){var e=r.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete r.available[t]},r.from=function(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},r.defaultOptions,i),s=n.chars,a=n.padding,o=n.resolution,h=n.textureWidth,u=n.textureHeight,l=_Et(s),f=e instanceof Ir?e:new Ir(e),c=h,d=new n1;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var v=0,_=0,m,g,T,b=0,S=[],R=0;R<l.length;R++){m||(m=document.createElement("canvas"),m.width=h,m.height=u,g=m.getContext("2d"),T=new Xi(m,{resolution:o}),S.push(new Ce(T)),d.page.push({id:S.length-1,file:""}));var U=Ya.measureText(l[R],f,!1,m),L=U.width,$=Math.ceil(U.height),k=Math.ceil((f.fontStyle==="italic"?2:1)*L);if(_>=u-$*o){if(_===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--R,m=null,g=null,T=null,_=0,v=0,b=0;continue}if(b=Math.max($+U.fontProperties.descent,b),k*o+v>=c){--R,_+=b*o,_=Math.ceil(_),v=0,b=0;continue}mEt(m,g,U,v,_,o,f);var H=U.text.charCodeAt(0);d.char.push({id:H,page:S.length-1,x:v/o,y:_/o,width:k,height:$,xoffset:0,yoffset:0,xadvance:Math.ceil(L-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(k+2*a)*o,v=Math.ceil(v)}for(var R=0,it=l.length;R<it;R++)for(var tt=l[R],j=0;j<it;j++){var at=l[j],K=g.measureText(tt).width,et=g.measureText(at).width,st=g.measureText(tt+at).width,V=st-(K+et);V&&d.kerning.push({first:tt.charCodeAt(0),second:at.charCodeAt(0),amount:V})}var Y=new r(d,S,!0);return r.available[t]!==void 0&&r.uninstall(t),r.available[t]=Y,Y},r.ALPHA=[["a","z"],["A","Z"]," "],r.NUMERIC=[["0","9"]],r.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],r.ASCII=[[" ","~"]],r.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:r.ALPHANUMERIC},r.available={},r}(),JX=[],t6=[];(function(r){dEt(t,r);function t(e,i){i===void 0&&(i={});var n=r.call(this)||this;n._tint=16777215;var s=Object.assign({},t.styleDefaults,i),a=s.align,o=s.tint,h=s.maxWidth,u=s.letterSpacing,l=s.fontName,f=s.fontSize;if(!v_.available[l])throw new Error('Missing BitmapFont "'+l+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=a,n._tint=o,n._fontName=l,n._fontSize=f||v_.available[l].size,n._text=e,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=u,n._anchor=new _v(function(){n.dirty=!0},n,0,0),n._roundPixels=A.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return t.prototype.updateText=function(){for(var e,i=v_.available[this._fontName],n=this._fontSize/i.size,s=new Qi,a=[],o=[],h=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=u.length,f=this._maxWidth*i.size/this._fontSize,c=null,d=0,v=0,_=0,m=-1,g=0,T=0,b=0,S=0,R=0;R<l;R++){var U=u.charCodeAt(R),L=u.charAt(R);if(/(?:\s)/.test(L)&&(m=R,g=d,S++),L==="\r"||L===`
`){o.push(d),h.push(-1),v=Math.max(v,d),++_,++T,s.x=0,s.y+=i.lineHeight,c=null,S=0;continue}var $=i.chars[U];if($){c&&$.kerning[c]&&(s.x+=$.kerning[c]);var k=t6.pop()||{texture:Ce.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Qi};k.texture=$.texture,k.line=_,k.charCode=U,k.position.x=s.x+$.xOffset+this._letterSpacing/2,k.position.y=s.y+$.yOffset,k.prevSpaces=S,a.push(k),d=k.position.x+$.texture.orig.width,s.x+=$.xAdvance+this._letterSpacing,b=Math.max(b,$.yOffset+$.texture.height),c=U,m!==-1&&f>0&&s.x>f&&(++T,ce(a,1+m-T,1+R-m),R=m,m=-1,o.push(g),h.push(a.length>0?a[a.length-1].prevSpaces:0),v=Math.max(v,g),_++,s.x=0,s.y+=i.lineHeight,c=null,S=0)}}var H=u.charAt(u.length-1);H!=="\r"&&H!==`
`&&(/(?:\s)/.test(H)&&(d=g),o.push(d),v=Math.max(v,d),h.push(-1));for(var it=[],R=0;R<=_;R++){var tt=0;this._align==="right"?tt=v-o[R]:this._align==="center"?tt=(v-o[R])/2:this._align==="justify"&&(tt=h[R]<0?0:(v-o[R])/h[R]),it.push(tt)}for(var j=a.length,at={},K=[],et=this._activePagesMeshData,R=0;R<et.length;R++)JX.push(et[R]);for(var R=0;R<j;R++){var st=a[R].texture,V=st.baseTexture.uid;if(!at[V]){var Y=JX.pop();if(!Y){var z=new vI,Z=new pI(Ce.EMPTY),Q=new Fg(z,Z);Y={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Q,vertices:null,uvs:null,indices:null}}Y.index=0,Y.indexCount=0,Y.vertexCount=0,Y.uvsCount=0,Y.total=0;var mt=this._textureCache;mt[V]=mt[V]||new Ce(st.baseTexture),Y.mesh.texture=mt[V],Y.mesh.tint=this._tint,K.push(Y),at[V]=Y}at[V].total++}for(var R=0;R<et.length;R++)K.indexOf(et[R])===-1&&this.removeChild(et[R].mesh);for(var R=0;R<K.length;R++)K[R].mesh.parent!==this&&this.addChild(K[R].mesh);this._activePagesMeshData=K;for(var R in at){var Y=at[R],Et=Y.total;if(!(((e=Y.indices)===null||e===void 0?void 0:e.length)>6*Et)||Y.vertices.length<Fg.BATCHABLE_SIZE*2)Y.vertices=new Float32Array(4*2*Et),Y.uvs=new Float32Array(4*2*Et),Y.indices=new Uint16Array(6*Et);else for(var It=Y.total,wt=Y.vertices,ht=It*4*2;ht<wt.length;ht++)wt[ht]=0;Y.mesh.size=6*Et}for(var R=0;R<j;R++){var L=a[R],I=L.position.x+it[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(I=Math.round(I));var M=I*n,O=L.position.y*n,st=L.texture,N=at[st.baseTexture.uid],B=st.frame,G=st._uvs,W=N.index++;N.indices[W*6+0]=0+W*4,N.indices[W*6+1]=1+W*4,N.indices[W*6+2]=2+W*4,N.indices[W*6+3]=0+W*4,N.indices[W*6+4]=2+W*4,N.indices[W*6+5]=3+W*4,N.vertices[W*8+0]=M,N.vertices[W*8+1]=O,N.vertices[W*8+2]=M+B.width*n,N.vertices[W*8+3]=O,N.vertices[W*8+4]=M+B.width*n,N.vertices[W*8+5]=O+B.height*n,N.vertices[W*8+6]=M,N.vertices[W*8+7]=O+B.height*n,N.uvs[W*8+0]=G.x0,N.uvs[W*8+1]=G.y0,N.uvs[W*8+2]=G.x1,N.uvs[W*8+3]=G.y1,N.uvs[W*8+4]=G.x2,N.uvs[W*8+5]=G.y2,N.uvs[W*8+6]=G.x3,N.uvs[W*8+7]=G.y3}this._textWidth=v*n,this._textHeight=(s.y+i.lineHeight)*n;for(var R in at){var Y=at[R];if(this.anchor.x!==0||this.anchor.y!==0)for(var X=0,ut=this._textWidth*this.anchor.x,ft=this._textHeight*this.anchor.y,ct=0;ct<Y.total;ct++)Y.vertices[X++]-=ut,Y.vertices[X++]-=ft,Y.vertices[X++]-=ut,Y.vertices[X++]-=ft,Y.vertices[X++]-=ut,Y.vertices[X++]-=ft,Y.vertices[X++]-=ut,Y.vertices[X++]-=ft;this._maxLineHeight=b*n;var bt=Y.mesh.geometry.getBuffer("aVertexPosition"),Ye=Y.mesh.geometry.getBuffer("aTextureCoord"),iu=Y.mesh.geometry.getIndex();bt.data=Y.vertices,Ye.data=Y.uvs,iu.data=Y.indices,bt.update(),Ye.update(),iu.update()}for(var R=0;R<a.length;R++)t6.push(a[R])},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),r.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){if(this._tint!==e){this._tint=e;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontName",{get:function(){return this._fontName},set:function(e){if(!v_.available[e])throw new Error('Missing BitmapFont "'+e+'"');this._fontName!==e&&(this._fontName=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},set:function(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e){var i=this._textureCache;for(var n in i){var s=i[n];s.destroy(),delete i[n]}this._textureCache=null,r.prototype.destroy.call(this,e)},t.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},t})(_l);var gEt=function(){function r(){}return r.add=function(){qr.setExtensionXhrType("fnt",qr.XHR_RESPONSE_TYPE.TEXT)},r.use=function(t,e){var i=RY(t.data);if(!i){e();return}for(var n=r.getBaseUrl(this,t),s=i.parse(t.data),a={},o=function(_){a[_.metadata.pageFile]=_.texture,Object.keys(a).length===s.page.length&&(t.bitmapFont=v_.install(s,a,!0),e())},h=0;h<s.page.length;++h){var u=s.page[h].file,l=n+u,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===l){d.metadata.pageFile=u,d.texture?o(d):d.onAfterMiddleware.add(o),f=!0;break}}if(!f){var v={crossOrigin:t.crossOrigin,loadType:qr.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(l,v,o)}}},r.getBaseUrl=function(t,e){var i=e.isDataUrl?"":r.dirname(e.url);return e.isDataUrl&&(i==="."&&(i=""),t.baseUrl&&i&&t.baseUrl.charAt(t.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(t.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},r.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":e===""?"/":e},r}();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Xh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Xh||(Xh={}));var Mg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Mg||(Mg={}));var s1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(s1||(s1={}));var ge;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(ge||(ge={}));var Lg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Lg||(Lg={}));var Lt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Lt||(Lt={}));var id;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(id||(id={}));var Oe;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Oe||(Oe={}));var a1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(a1||(a1={}));var mh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(mh||(mh={}));var WF;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WF||(WF={}));var Td;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Td||(Td={}));var Pl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Pl||(Pl={}));var Au;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Au||(Au={}));var YF;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(YF||(YF={}));var To;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(To||(To={}));var cs;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(cs||(cs={}));var yi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(yi||(yi={}));var Go;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Go||(Go={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var o1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(o1||(o1={}));var kS=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Op=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kS(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=o1.NORMAL),this._addListener(new kS(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=o1.NORMAL),this._addListener(new kS(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var xEt=Math.PI*2,qF;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(qF||(qF={}));var yn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=qF.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Zu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),hT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ma=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Zu;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Zu;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(xEt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),fc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],dc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],pc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],KF=[],CY=[],uT=Math.sign;function bEt(){for(var r=0;r<16;r++){var t=[];KF.push(t);for(var e=0;e<16;e++)for(var i=uT(fc[r]*fc[e]+dc[r]*cc[e]),n=uT(cc[r]*fc[e]+pc[r]*cc[e]),s=uT(fc[r]*dc[e]+dc[r]*pc[e]),a=uT(cc[r]*dc[e]+pc[r]*pc[e]),o=0;o<16;o++)if(fc[o]===i&&cc[o]===n&&dc[o]===s&&pc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new ma;h.set(fc[r],cc[r],dc[r],pc[r],0,0),CY.push(h)}}bEt();var Ur={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return fc[r]},uY:function(r){return cc[r]},vX:function(r){return dc[r]},vY:function(r){return pc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return KF[r][t]},sub:function(r,t){return KF[r][Ur.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Ur.S:Ur.N:Math.abs(t)*2<=Math.abs(r)?r>0?Ur.E:Ur.W:t>0?r>0?Ur.SE:Ur.SW:r>0?Ur.NE:Ur.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=CY[Ur.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new ma,this.localTransform=new ma,this.position=new hT(this.onChange,this,0,0),this.scale=new hT(this.onChange,this,1,1),this.pivot=new hT(this.onChange,this,0,0),this.skew=new hT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Xh.WEBGL:Xh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var ZF=[];function AY(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=ZF.length-1;n>=0;--n){var s=ZF[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var QF=function(r,t){return QF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},QF(r,t)};function fr(r,t){QF(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var JF=function(){return JF=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},JF.apply(this,arguments)};function TEt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Bg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),fB=function(r){fr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Bg),EEt={scaleMode:mh.NEAREST,format:Lt.RGBA,alphaMode:Pl.NPM},Pn=function(r){fr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Bg)&&(e=AY(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Lt.RGBA,n.type=d||Oe.UNSIGNED_BYTE,n.target=v||id.TEXTURE_2D,n.alphaMode=s!==void 0?s:Pl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new fB(e,{width:i,height:n}),o=e instanceof Float32Array?Oe.FLOAT:Oe.UNSIGNED_BYTE;return new t(a,Object.assign(EEt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),SY=function(r){fr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Pn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Bg?this.addResourceAt(e[n],n):this.addResourceAt(AY(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Bg),wEt=function(r){fr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=id.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(SY),Ol=function(r){fr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Bg),NY=function(r){fr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Ol),IEt=function(r){fr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=id.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=id.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=id.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(SY),PY=function(r){fr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Ol.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Pl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Ol),REt=function(r){fr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Ol.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Ol),CEt=function(r){fr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Ol.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Op.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Op.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Op.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Op.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Op.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Op.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Ol),AEt=function(r){fr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Ol);ZF.push(PY,AEt,NY,CEt,REt,fB,IEt,wEt);var SEt=function(r){fr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Pl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(fB),tU=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=yi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Pn(null,{scaleMode:mh.NEAREST,resolution:1,mipmap:Td.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Pn(new SEt(null,{width:this.width,height:this.height}),{scaleMode:mh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Td.OFF,format:Lt.DEPTH_COMPONENT,type:Oe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),OY=function(r){fr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:yi.NONE,i=r.call(this,null,e)||this,i.mipmap=Td.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new tU(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Pn),FY=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Ur.add(i,Ur.NW),this.x0=h+a*Ur.uX(i),this.y0=u+o*Ur.uY(i),i=Ur.add(i,2),this.x1=h+a*Ur.uX(i),this.y1=u+o*Ur.uY(i),i=Ur.add(i,2),this.x2=h+a*Ur.uX(i),this.y2=u+o*Ur.uY(i),i=Ur.add(i,2),this.x3=h+a*Ur.uX(i),this.y3=u+o*Ur.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),e6=new FY,Vh=function(r){fr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new yn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=e6,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Zu(o.x,o.y):new Zu(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===e6&&(this._uvs=new FY),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Pn(e,i)),h.baseTexture.cacheId=a,Pn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Pn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Pn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof PY&&(o.url=i);var h=new t(a);return n||(n=i),Pn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Pn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function NEt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Vh(new Pn(new NY(r)))}function yI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Vh.EMPTY=new Vh(new Pn);yI(Vh.EMPTY);yI(Vh.EMPTY.baseTexture);Vh.WHITE=NEt();yI(Vh.WHITE);yI(Vh.WHITE.baseTexture);var cB=function(r){fr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new OY(e))},t}(Vh),PEt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=yi.NONE);var n=new OY(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new cB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=yi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||yi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),r6=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Oe.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),OEt=0,Is=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=OEt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Go.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Go.ELEMENT_ARRAY_BUFFER:Go.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),FEt={Float32Array,Uint32Array,Int32Array,Uint8Array};function UEt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new FEt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var i6={5126:4,5123:2,5121:1},MEt=0,LEt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},dB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=MEt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Is||(e instanceof Array&&(e=new Float32Array(e)),e=new Is(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new r6(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Is||(t instanceof Array&&(t=new Uint16Array(t)),t=new Is(t)),t.type=Go.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Is,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*i6[s.type]/4),s.buffer=0}for(i.data=UEt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Is(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new r6(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Go.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new LEt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Is(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Go.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*i6[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),BEt=function(r){fr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(dB),GEt=function(r){fr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Is(e.vertices),e.uvBuffer=new Is(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(dB),kEt=0,Xv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=kEt++,this.static=!!e,this.ubo=!!i,t instanceof Is?(this.buffer=t,this.buffer.type=Go.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Is(new Float32Array(1)),this.buffer.type=Go.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),DEt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=yi.NONE,this.sourceFrame=new yn,this.destinationFrame=new yn,this.bindingSourceFrame=new yn,this.bindingDestinationFrame=new yn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),lT=[new Zu,new Zu,new Zu,new Zu],DS=new ma,$Et=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new PEt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new BEt,this.quadUv=new GEt,this.tempRect=new yn,this.activeState={},this.globalUniforms=new Xv({outputFrame:new yn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new DEt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(DS.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Au.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Au.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Au.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Au.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Au.CLEAR||e===Au.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Lg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Lg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(ma.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=yi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||yi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=lT[0],n=lT[1],s=lT[2],a=lT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?DS.copyFrom(s):DS.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),UY=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),HEt=function(){function r(t){this.renderer=t,this.emptyRenderer=new UY(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),n6=0,XEt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=n6++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=n6++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Xh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),VEt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=yi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),jEt=new yn,zEt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new tU(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new yn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Xh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=s1.COLOR|s1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new VEt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=yi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=yi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new tU(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=jEt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new yn},r.prototype.destroy=function(){this.renderer=null},r}(),$S={5126:4,5123:2,5121:1},WEt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Xh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*$S[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*$S[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*$S[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),YEt=function(){function r(t){t===void 0&&(t=null),this.type=cs.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=cs.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function s6(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function a6(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function qEt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||a6(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||a6(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function HS(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function MY(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return HS(2*t);case"bvec3":return HS(3*t);case"bvec4":return HS(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var LY={},Mm=LY;function KEt(){if(Mm===LY||Mm&&Mm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Xh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Mm=t}return Mm}var fT;function ZEt(){if(!fT){fT=To.MEDIUM;var r=KEt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);fT=t.precision?To.HIGH:To.MEDIUM}}return fT}function o6(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===To.HIGH&&e!==To.HIGH&&(i=To.MEDIUM),"precision "+i+` float;
`+r}else if(e!==To.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var QEt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function BY(r){return QEt[r]}var cT=null,h6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function GY(r,t){if(!cT){var e=Object.keys(h6);cT={};for(var i=0;i<e.length;++i){var n=e[i];cT[r[n]]=h6[n]}}return cT[t]}var Vv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],JEt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},twt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function ewt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Vv.length;o++)if(Vv[o].test(n,s)){e.push(Vv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?JEt:twt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var rwt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function iwt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function nwt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=rwt.replace(/%forloop%/gi,iwt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Lm;function swt(){if(typeof Lm=="boolean")return Lm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Lm=r({a:"b"},"a","b")===!0}catch{Lm=!1}return Lm}var awt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,owt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,hwt=0,dT={},pB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=hwt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),dT[i]?(dT[i]++,i+="-"+dT[i]):dT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=o6(this.vertexSrc,A.PRECISION_VERTEX,To.HIGH),this.fragmentSrc=o6(this.fragmentSrc,A.PRECISION_FRAGMENT,ZEt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return owt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return awt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),kY=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Xv?this.uniformGroup=e:this.uniformGroup=new Xv(e):this.uniformGroup=new Xv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=pB.from(t,e);return new r(n,i)},r}(),XS=0,VS=1,jS=2,zS=3,WS=4,YS=5,vB=function(){function r(){this.data=0,this.blendMode=ge.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<XS)},set:function(t){!!(this.data&1<<XS)!==t&&(this.data^=1<<XS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<VS)},set:function(t){!!(this.data&1<<VS)!==t&&(this.data^=1<<VS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<jS)},set:function(t){!!(this.data&1<<jS)!==t&&(this.data^=1<<jS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<zS)},set:function(t){!!(this.data&1<<zS)!==t&&(this.data^=1<<zS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<YS)},set:function(t){!!(this.data&1<<YS)!==t&&(this.data^=1<<YS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<WS)},set:function(t){!!(this.data&1<<WS)!==t&&(this.data^=1<<WS)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ge.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),uwt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,lwt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,DY=function(r){fr(t,r);function t(e,i,n){var s=this,a=pB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new vB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return uwt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return lwt},enumerable:!1,configurable:!0}),t}(kY),fwt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,cwt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,u6=new ma,dwt=function(){function r(t,e){this._texture=t,this.mapCoord=new ma,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(u6.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(u6));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),pwt=function(r){fr(t,r);function t(e){var i=this,n=new ma;return i=r.call(this,fwt,cwt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new dwt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(DY),vwt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new YEt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case cs.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case cs.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case cs.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case cs.SCISSOR:this.renderer.scissor.pop();break;case cs.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case cs.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=cs.SPRITE;return}if(t.type=cs.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=cs.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new pwt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),$Y=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),ywt=function(r){fr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}($Y),mwt=function(r){fr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}($Y),_wt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ma,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Ef=new yn,Bm=new yn,gwt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new yn,this.destinationFrame=new yn,this.viewportFrame=new yn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Ef.width=t.frame.width,Ef.height=t.frame.height,e=Ef),i||(Bm.x=t.frame.x,Bm.y=t.frame.y,Bm.width=e.width,Bm.height=e.height,i=Bm),a=s.framebuffer):(o=n.resolution,e||(Ef.width=n.screen.width,Ef.height=n.screen.height,e=Ef),i||(i=Ef,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function xwt(r,t,e,i,n){e.buffer.update(n)}var bwt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},HY={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Twt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=HY[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Ewt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function wwt(r,t){if(!r.autoManage)return{size:0,syncFunc:xwt};for(var e=Ewt(r.uniforms,t),i=Twt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Vv.length;c++){var d=Vv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Vv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=BY(h.data.type),_=Math.max(HY[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=bwt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var Iwt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function Rwt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=GY(t,s.type),o={type:a,name:s.name,size:BY(a),location:n};e[s.name]=o}}return e}function Cwt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=GY(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:MY(h,s.size)}}return e}function Awt(r,t){var e=s6(r,r.VERTEX_SHADER,t.vertexSrc),i=s6(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||qEt(r,n,e,i),t.attributeData=Rwt(n,r),t.uniformData=Cwt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:MY(h.type,h.size)}}var u=new Iwt(n,o);return u}var Swt=0,pT={textureCount:0,uboCount:0},Nwt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Swt++}return r.prototype.systemCheck=function(){if(!swt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(pT.textureCount=0,pT.uboCount=0,this.syncUniformGroup(t.uniformGroup,pT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=ewt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,pT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=wwt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=Awt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function Pwt(r,t){return t===void 0&&(t=[]),t[ge.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.ADD]=[r.ONE,r.ONE],t[ge.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.NONE]=[0,0],t[ge.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[ge.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[ge.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[ge.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[ge.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ge.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[ge.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[ge.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[ge.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[ge.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[ge.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var Owt=0,Fwt=1,Uwt=2,Mwt=3,Lwt=4,Bwt=5,Gwt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ge.NONE,this._blendEq=!1,this.map=[],this.map[Owt]=this.setBlend,this.map[Fwt]=this.setOffset,this.map[Uwt]=this.setCullFace,this.map[Mwt]=this.setDepthTest,this.map[Lwt]=this.setFrontFace,this.map[Bwt]=this.setDepthMask,this.checks=[],this.defaultState=new vB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=Pwt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),kwt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==YF.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function Dwt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Oe.UNSIGNED_BYTE]=(e={},e[Lt.RGBA]=r.RGBA8,e[Lt.RGB]=r.RGB8,e[Lt.RG]=r.RG8,e[Lt.RED]=r.R8,e[Lt.RGBA_INTEGER]=r.RGBA8UI,e[Lt.RGB_INTEGER]=r.RGB8UI,e[Lt.RG_INTEGER]=r.RG8UI,e[Lt.RED_INTEGER]=r.R8UI,e[Lt.ALPHA]=r.ALPHA,e[Lt.LUMINANCE]=r.LUMINANCE,e[Lt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Oe.BYTE]=(i={},i[Lt.RGBA]=r.RGBA8_SNORM,i[Lt.RGB]=r.RGB8_SNORM,i[Lt.RG]=r.RG8_SNORM,i[Lt.RED]=r.R8_SNORM,i[Lt.RGBA_INTEGER]=r.RGBA8I,i[Lt.RGB_INTEGER]=r.RGB8I,i[Lt.RG_INTEGER]=r.RG8I,i[Lt.RED_INTEGER]=r.R8I,i),t[Oe.UNSIGNED_SHORT]=(n={},n[Lt.RGBA_INTEGER]=r.RGBA16UI,n[Lt.RGB_INTEGER]=r.RGB16UI,n[Lt.RG_INTEGER]=r.RG16UI,n[Lt.RED_INTEGER]=r.R16UI,n[Lt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Oe.SHORT]=(s={},s[Lt.RGBA_INTEGER]=r.RGBA16I,s[Lt.RGB_INTEGER]=r.RGB16I,s[Lt.RG_INTEGER]=r.RG16I,s[Lt.RED_INTEGER]=r.R16I,s),t[Oe.UNSIGNED_INT]=(a={},a[Lt.RGBA_INTEGER]=r.RGBA32UI,a[Lt.RGB_INTEGER]=r.RGB32UI,a[Lt.RG_INTEGER]=r.RG32UI,a[Lt.RED_INTEGER]=r.R32UI,a[Lt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Oe.INT]=(o={},o[Lt.RGBA_INTEGER]=r.RGBA32I,o[Lt.RGB_INTEGER]=r.RGB32I,o[Lt.RG_INTEGER]=r.RG32I,o[Lt.RED_INTEGER]=r.R32I,o),t[Oe.FLOAT]=(h={},h[Lt.RGBA]=r.RGBA32F,h[Lt.RGB]=r.RGB32F,h[Lt.RG]=r.RG32F,h[Lt.RED]=r.R32F,h[Lt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Oe.HALF_FLOAT]=(u={},u[Lt.RGBA]=r.RGBA16F,u[Lt.RGB]=r.RGB16F,u[Lt.RG]=r.RG16F,u[Lt.RED]=r.R16F,u),t[Oe.UNSIGNED_SHORT_5_6_5]=(l={},l[Lt.RGB]=r.RGB565,l),t[Oe.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Lt.RGBA]=r.RGBA4,f),t[Oe.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Lt.RGBA]=r.RGB5_A1,c),t[Oe.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Lt.RGBA]=r.RGB10_A2,d[Lt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Oe.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Lt.RGB]=r.R11F_G11F_B10F,v),t[Oe.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Lt.RGB]=r.RGB9_E5,_),t[Oe.UNSIGNED_INT_24_8]=(m={},m[Lt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Oe.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Lt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Oe.UNSIGNED_BYTE]=(b={},b[Lt.RGBA]=r.RGBA,b[Lt.RGB]=r.RGB,b[Lt.ALPHA]=r.ALPHA,b[Lt.LUMINANCE]=r.LUMINANCE,b[Lt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Oe.UNSIGNED_SHORT_5_6_5]=(S={},S[Lt.RGB]=r.RGB,S),T[Oe.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Lt.RGBA]=r.RGBA,R),T[Oe.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Lt.RGBA]=r.RGBA,U),T),L}var qS=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Oe.UNSIGNED_BYTE,this.internalFormat=Lt.RGBA,this.samplerType=0}return r}(),$wt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Pn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Dwt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new qS(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new qS(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==a1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new qS(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Oe.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==a1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Td.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=WF.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Td.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===mh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===mh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===mh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===mh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),KS=new ma,Hwt=function(r){fr(t,r);function t(e,i){e===void 0&&(e=Mg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new yn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=TEt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=cB.create(JF({width:s.width,height:s.height},o));return KS.tx=-s.x,KS.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:KS,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Mg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),Xwt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),Vwt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new Xwt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){fr(t,r);function t(e){var i=r.call(this,Mg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Xv({projectionMatrix:new ma},!0),i.addSystem(vwt,"mask").addSystem(XEt,"context").addSystem(Gwt,"state").addSystem(Nwt,"shader").addSystem($wt,"texture").addSystem(Vwt,"buffer").addSystem(WEt,"geometry").addSystem(zEt,"framebuffer").addSystem(ywt,"scissor").addSystem(mwt,"stencil").addSystem(_wt,"projection").addSystem(kwt,"textureGC").addSystem($Et,"filter").addSystem(gwt,"renderTexture").addSystem(HEt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=yi.HIGH?this.multisample=yi.HIGH:i>=yi.MEDIUM?this.multisample=yi.MEDIUM:i>=yi.LOW?this.multisample=yi.LOW:this.multisample=yi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof cB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(Hwt);var jwt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,zwt=jwt,Wwt=function(){function r(){this.texArray=null,this.blend=0,this.type=Lg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),Ywt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),qwt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),Kwt=function(r){fr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=vB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Xh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=nwt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new Wwt);for(;i.length<s;)i.push(new Ywt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Pn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Pn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new qwt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(UY),Zwt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Xv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new pB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ma,default:this.defaultGroupCache[t]};return new kY(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),Qwt=function(r){fr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Is(null,e,!1),i._indexBuffer=new Is(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Oe.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Oe.FLOAT).addAttribute("aColor",i._buffer,4,!0,Oe.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Oe.FLOAT).addIndex(i._indexBuffer),i}return t}(dB),l6=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,f6=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Jwt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:l6,fragment:f6,geometryClass:Qwt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){fr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new Zwt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(Kwt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return l6},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return f6},enumerable:!1,configurable:!0}),r}();Jwt.create();/*!
 * @pixi/filter-alpha - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var eU=function(r,t){return eU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},eU(r,t)};function t1t(r,t){eU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var e1t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;(function(r){t1t(t,r);function t(e){e===void 0&&(e=1);var i=r.call(this,zwt,e1t,{uAlpha:1})||this;return i.alpha=e,i}return Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t})(DY);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var jh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(jh||(jh={}));var Gg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Gg||(Gg={}));var h1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(h1||(h1={}));var xe;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(xe||(xe={}));var kg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(kg||(kg={}));var Bt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Bt||(Bt={}));var nd;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(nd||(nd={}));var Fe;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Fe||(Fe={}));var u1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(u1||(u1={}));var _h;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(_h||(_h={}));var rU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(rU||(rU={}));var Ed;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Ed||(Ed={}));var Fl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Fl||(Fl={}));var Su;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Su||(Su={}));var iU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(iU||(iU={}));var Eo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Eo||(Eo={}));var ds;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ds||(ds={}));var mi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(mi||(mi={}));var ko;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(ko||(ko={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var l1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(l1||(l1={}));var ZS=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Fp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ZS(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=l1.NORMAL),this._addListener(new ZS(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=l1.NORMAL),this._addListener(new ZS(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var r1t=Math.PI*2,nU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(nU||(nU={}));var mn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=nU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Qu=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),vT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),_a=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Qu;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Qu;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(r1t-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),vc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],yc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],mc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_c=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],sU=[],XY=[],yT=Math.sign;function i1t(){for(var r=0;r<16;r++){var t=[];sU.push(t);for(var e=0;e<16;e++)for(var i=yT(vc[r]*vc[e]+mc[r]*yc[e]),n=yT(yc[r]*vc[e]+_c[r]*yc[e]),s=yT(vc[r]*mc[e]+mc[r]*_c[e]),a=yT(yc[r]*mc[e]+_c[r]*_c[e]),o=0;o<16;o++)if(vc[o]===i&&yc[o]===n&&mc[o]===s&&_c[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new _a;h.set(vc[r],yc[r],mc[r],_c[r],0,0),XY.push(h)}}i1t();var Mr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return vc[r]},uY:function(r){return yc[r]},vX:function(r){return mc[r]},vY:function(r){return _c[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return sU[r][t]},sub:function(r,t){return sU[r][Mr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Mr.S:Mr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Mr.E:Mr.W:t>0?r>0?Mr.SE:Mr.SW:r>0?Mr.NE:Mr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=XY[Mr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new _a,this.localTransform=new _a,this.position=new vT(this.onChange,this,0,0),this.scale=new vT(this.onChange,this,1,1),this.pivot=new vT(this.onChange,this,0,0),this.skew=new vT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?jh.WEBGL:jh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var aU=[];function VY(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=aU.length-1;n>=0;--n){var s=aU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var oU=function(r,t){return oU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},oU(r,t)};function cr(r,t){oU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var hU=function(){return hU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},hU.apply(this,arguments)};function n1t(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Dg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),yB=function(r){cr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Fl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Dg),s1t={scaleMode:_h.NEAREST,format:Bt.RGBA,alphaMode:Fl.NPM},On=function(r){cr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Dg)&&(e=VY(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Bt.RGBA,n.type=d||Fe.UNSIGNED_BYTE,n.target=v||nd.TEXTURE_2D,n.alphaMode=s!==void 0?s:Fl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new yB(e,{width:i,height:n}),o=e instanceof Float32Array?Fe.FLOAT:Fe.UNSIGNED_BYTE;return new t(a,Object.assign(s1t,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),jY=function(r){cr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new On;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Dg?this.addResourceAt(e[n],n):this.addResourceAt(VY(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Dg),a1t=function(r){cr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=nd.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(jY),Ul=function(r){cr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Fl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Dg),zY=function(r){cr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Ul),o1t=function(r){cr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=nd.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=nd.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=nd.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(jY),WY=function(r){cr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Ul.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Fl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Ul),h1t=function(r){cr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Ul.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Ul),u1t=function(r){cr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Ul.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Fp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Fp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Fp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Fp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Fp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Fp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Ul),l1t=function(r){cr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Ul);aU.push(WY,l1t,zY,u1t,h1t,yB,o1t,a1t);var f1t=function(r){cr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Fl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(yB),uU=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=mi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new On(null,{scaleMode:_h.NEAREST,resolution:1,mipmap:Ed.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new On(new f1t(null,{width:this.width,height:this.height}),{scaleMode:_h.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ed.OFF,format:Bt.DEPTH_COMPONENT,type:Fe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),YY=function(r){cr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:mi.NONE,i=r.call(this,null,e)||this,i.mipmap=Ed.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new uU(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(On),qY=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Mr.add(i,Mr.NW),this.x0=h+a*Mr.uX(i),this.y0=u+o*Mr.uY(i),i=Mr.add(i,2),this.x1=h+a*Mr.uX(i),this.y1=u+o*Mr.uY(i),i=Mr.add(i,2),this.x2=h+a*Mr.uX(i),this.y2=u+o*Mr.uY(i),i=Mr.add(i,2),this.x3=h+a*Mr.uX(i),this.y3=u+o*Mr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),c6=new qY,zh=function(r){cr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new mn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=c6,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Qu(o.x,o.y):new Qu(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===c6&&(this._uvs=new qY),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new On(e,i)),h.baseTexture.cacheId=a,On.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(On.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new On(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof WY&&(o.url=i);var h=new t(a);return n||(n=i),On.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(On.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function c1t(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new zh(new On(new zY(r)))}function mI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}zh.EMPTY=new zh(new On);mI(zh.EMPTY);mI(zh.EMPTY.baseTexture);zh.WHITE=c1t();mI(zh.WHITE);mI(zh.WHITE.baseTexture);var mB=function(r){cr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new YY(e))},t}(zh),d1t=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=mi.NONE);var n=new YY(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new mB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=mi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||mi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),d6=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Fe.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),p1t=0,Rs=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=p1t++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===ko.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?ko.ELEMENT_ARRAY_BUFFER:ko.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),v1t={Float32Array,Uint32Array,Int32Array,Uint8Array};function y1t(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new v1t[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var p6={5126:4,5123:2,5121:1},m1t=0,_1t={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},_B=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=m1t++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Rs||(e instanceof Array&&(e=new Float32Array(e)),e=new Rs(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new d6(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Rs||(t instanceof Array&&(t=new Uint16Array(t)),t=new Rs(t)),t.type=ko.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Rs,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*p6[s.type]/4),s.buffer=0}for(i.data=y1t(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Rs(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new d6(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=ko.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new _1t[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Rs(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=ko.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*p6[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),g1t=function(r){cr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(_B),x1t=function(r){cr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Rs(e.vertices),e.uvBuffer=new Rs(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(_B),b1t=0,jv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=b1t++,this.static=!!e,this.ubo=!!i,t instanceof Rs?(this.buffer=t,this.buffer.type=ko.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Rs(new Float32Array(1)),this.buffer.type=ko.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),T1t=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=mi.NONE,this.sourceFrame=new mn,this.destinationFrame=new mn,this.bindingSourceFrame=new mn,this.bindingDestinationFrame=new mn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),mT=[new Qu,new Qu,new Qu,new Qu],QS=new _a,E1t=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new d1t,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new g1t,this.quadUv=new x1t,this.tempRect=new mn,this.activeState={},this.globalUniforms=new jv({outputFrame:new mn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new T1t,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(QS.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Su.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Su.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Su.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Su.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Su.CLEAR||e===Su.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(kg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(kg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(_a.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=mi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||mi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=mT[0],n=mT[1],s=mT[2],a=mT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?QS.copyFrom(s):QS.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),KY=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),w1t=function(){function r(t){this.renderer=t,this.emptyRenderer=new KY(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),v6=0,I1t=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=v6++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=v6++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=jh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),R1t=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=mi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),C1t=new mn,A1t=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new uU(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new mn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===jh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=h1.COLOR|h1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new R1t(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=mi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=mi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new uU(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=C1t,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new mn},r.prototype.destroy=function(){this.renderer=null},r}(),JS={5126:4,5123:2,5121:1},S1t=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===jh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*JS[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*JS[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*JS[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),N1t=function(){function r(t){t===void 0&&(t=null),this.type=ds.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ds.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function y6(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function m6(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function P1t(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||m6(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||m6(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function tN(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function ZY(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return tN(2*t);case"bvec3":return tN(3*t);case"bvec4":return tN(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var QY={},Gm=QY;function O1t(){if(Gm===QY||Gm&&Gm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=jh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Gm=t}return Gm}var _T;function F1t(){if(!_T){_T=Eo.MEDIUM;var r=O1t();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);_T=t.precision?Eo.HIGH:Eo.MEDIUM}}return _T}function _6(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===Eo.HIGH&&e!==Eo.HIGH&&(i=Eo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==Eo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var U1t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function JY(r){return U1t[r]}var gT=null,g6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function tq(r,t){if(!gT){var e=Object.keys(g6);gT={};for(var i=0;i<e.length;++i){var n=e[i];gT[r[n]]=g6[n]}}return gT[t]}var zv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],M1t={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},L1t={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function B1t(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<zv.length;o++)if(zv[o].test(n,s)){e.push(zv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?M1t:L1t,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var G1t=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function k1t(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function D1t(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=G1t.replace(/%forloop%/gi,k1t(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var km;function $1t(){if(typeof km=="boolean")return km;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");km=r({a:"b"},"a","b")===!0}catch{km=!1}return km}var H1t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,X1t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,V1t=0,xT={},gB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=V1t++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),xT[i]?(xT[i]++,i+="-"+xT[i]):xT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=_6(this.vertexSrc,A.PRECISION_VERTEX,Eo.HIGH),this.fragmentSrc=_6(this.fragmentSrc,A.PRECISION_FRAGMENT,F1t())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return X1t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return H1t},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),eq=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof jv?this.uniformGroup=e:this.uniformGroup=new jv(e):this.uniformGroup=new jv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=gB.from(t,e);return new r(n,i)},r}(),eN=0,rN=1,iN=2,nN=3,sN=4,aN=5,xB=function(){function r(){this.data=0,this.blendMode=xe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<eN)},set:function(t){!!(this.data&1<<eN)!==t&&(this.data^=1<<eN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<rN)},set:function(t){!!(this.data&1<<rN)!==t&&(this.data^=1<<rN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<iN)},set:function(t){!!(this.data&1<<iN)!==t&&(this.data^=1<<iN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<nN)},set:function(t){!!(this.data&1<<nN)!==t&&(this.data^=1<<nN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<aN)},set:function(t){!!(this.data&1<<aN)!==t&&(this.data^=1<<aN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<sN)},set:function(t){!!(this.data&1<<sN)!==t&&(this.data^=1<<sN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==xe.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),j1t=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,z1t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,bB=function(r){cr(t,r);function t(e,i,n){var s=this,a=gB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new xB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return j1t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return z1t},enumerable:!1,configurable:!0}),t}(eq),W1t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Y1t=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,x6=new _a,q1t=function(){function r(t,e){this._texture=t,this.mapCoord=new _a,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(x6.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(x6));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),K1t=function(r){cr(t,r);function t(e){var i=this,n=new _a;return i=r.call(this,W1t,Y1t)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new q1t(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(bB),Z1t=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new N1t;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ds.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ds.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ds.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case ds.SCISSOR:this.renderer.scissor.pop();break;case ds.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ds.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=ds.SPRITE;return}if(t.type=ds.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=ds.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new K1t(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),rq=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),Q1t=function(r){cr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(rq),J1t=function(r){cr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(rq),tIt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new _a,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),wf=new mn,Dm=new mn,eIt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new mn,this.destinationFrame=new mn,this.viewportFrame=new mn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(wf.width=t.frame.width,wf.height=t.frame.height,e=wf),i||(Dm.x=t.frame.x,Dm.y=t.frame.y,Dm.width=e.width,Dm.height=e.height,i=Dm),a=s.framebuffer):(o=n.resolution,e||(wf.width=n.screen.width,wf.height=n.screen.height,e=wf),i||(i=wf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function rIt(r,t,e,i,n){e.buffer.update(n)}var iIt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},iq={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function nIt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=iq[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function sIt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function aIt(r,t){if(!r.autoManage)return{size:0,syncFunc:rIt};for(var e=sIt(r.uniforms,t),i=nIt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<zv.length;c++){var d=zv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",zv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=JY(h.data.type),_=Math.max(iq[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=iIt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var oIt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function hIt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=tq(t,s.type),o={type:a,name:s.name,size:JY(a),location:n};e[s.name]=o}}return e}function uIt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=tq(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:ZY(h,s.size)}}return e}function lIt(r,t){var e=y6(r,r.VERTEX_SHADER,t.vertexSrc),i=y6(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||P1t(r,n,e,i),t.attributeData=hIt(n,r),t.uniformData=uIt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:ZY(h.type,h.size)}}var u=new oIt(n,o);return u}var fIt=0,bT={textureCount:0,uboCount:0},cIt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=fIt++}return r.prototype.systemCheck=function(){if(!$1t())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(bT.textureCount=0,bT.uboCount=0,this.syncUniformGroup(t.uniformGroup,bT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=B1t(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,bT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=aIt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=lIt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function dIt(r,t){return t===void 0&&(t=[]),t[xe.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.ADD]=[r.ONE,r.ONE],t[xe.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.NONE]=[0,0],t[xe.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[xe.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[xe.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[xe.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[xe.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[xe.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[xe.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[xe.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[xe.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[xe.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[xe.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var pIt=0,vIt=1,yIt=2,mIt=3,_It=4,gIt=5,xIt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=xe.NONE,this._blendEq=!1,this.map=[],this.map[pIt]=this.setBlend,this.map[vIt]=this.setOffset,this.map[yIt]=this.setCullFace,this.map[mIt]=this.setDepthTest,this.map[_It]=this.setFrontFace,this.map[gIt]=this.setDepthMask,this.checks=[],this.defaultState=new xB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=dIt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),bIt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==iU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function TIt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Fe.UNSIGNED_BYTE]=(e={},e[Bt.RGBA]=r.RGBA8,e[Bt.RGB]=r.RGB8,e[Bt.RG]=r.RG8,e[Bt.RED]=r.R8,e[Bt.RGBA_INTEGER]=r.RGBA8UI,e[Bt.RGB_INTEGER]=r.RGB8UI,e[Bt.RG_INTEGER]=r.RG8UI,e[Bt.RED_INTEGER]=r.R8UI,e[Bt.ALPHA]=r.ALPHA,e[Bt.LUMINANCE]=r.LUMINANCE,e[Bt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Fe.BYTE]=(i={},i[Bt.RGBA]=r.RGBA8_SNORM,i[Bt.RGB]=r.RGB8_SNORM,i[Bt.RG]=r.RG8_SNORM,i[Bt.RED]=r.R8_SNORM,i[Bt.RGBA_INTEGER]=r.RGBA8I,i[Bt.RGB_INTEGER]=r.RGB8I,i[Bt.RG_INTEGER]=r.RG8I,i[Bt.RED_INTEGER]=r.R8I,i),t[Fe.UNSIGNED_SHORT]=(n={},n[Bt.RGBA_INTEGER]=r.RGBA16UI,n[Bt.RGB_INTEGER]=r.RGB16UI,n[Bt.RG_INTEGER]=r.RG16UI,n[Bt.RED_INTEGER]=r.R16UI,n[Bt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Fe.SHORT]=(s={},s[Bt.RGBA_INTEGER]=r.RGBA16I,s[Bt.RGB_INTEGER]=r.RGB16I,s[Bt.RG_INTEGER]=r.RG16I,s[Bt.RED_INTEGER]=r.R16I,s),t[Fe.UNSIGNED_INT]=(a={},a[Bt.RGBA_INTEGER]=r.RGBA32UI,a[Bt.RGB_INTEGER]=r.RGB32UI,a[Bt.RG_INTEGER]=r.RG32UI,a[Bt.RED_INTEGER]=r.R32UI,a[Bt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Fe.INT]=(o={},o[Bt.RGBA_INTEGER]=r.RGBA32I,o[Bt.RGB_INTEGER]=r.RGB32I,o[Bt.RG_INTEGER]=r.RG32I,o[Bt.RED_INTEGER]=r.R32I,o),t[Fe.FLOAT]=(h={},h[Bt.RGBA]=r.RGBA32F,h[Bt.RGB]=r.RGB32F,h[Bt.RG]=r.RG32F,h[Bt.RED]=r.R32F,h[Bt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Fe.HALF_FLOAT]=(u={},u[Bt.RGBA]=r.RGBA16F,u[Bt.RGB]=r.RGB16F,u[Bt.RG]=r.RG16F,u[Bt.RED]=r.R16F,u),t[Fe.UNSIGNED_SHORT_5_6_5]=(l={},l[Bt.RGB]=r.RGB565,l),t[Fe.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Bt.RGBA]=r.RGBA4,f),t[Fe.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Bt.RGBA]=r.RGB5_A1,c),t[Fe.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Bt.RGBA]=r.RGB10_A2,d[Bt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Fe.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Bt.RGB]=r.R11F_G11F_B10F,v),t[Fe.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Bt.RGB]=r.RGB9_E5,_),t[Fe.UNSIGNED_INT_24_8]=(m={},m[Bt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Fe.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Bt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Fe.UNSIGNED_BYTE]=(b={},b[Bt.RGBA]=r.RGBA,b[Bt.RGB]=r.RGB,b[Bt.ALPHA]=r.ALPHA,b[Bt.LUMINANCE]=r.LUMINANCE,b[Bt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Fe.UNSIGNED_SHORT_5_6_5]=(S={},S[Bt.RGB]=r.RGB,S),T[Fe.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Bt.RGBA]=r.RGBA,R),T[Fe.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Bt.RGBA]=r.RGBA,U),T),L}var oN=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Fe.UNSIGNED_BYTE,this.internalFormat=Bt.RGBA,this.samplerType=0}return r}(),EIt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new On,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=TIt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new oN(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new oN(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==u1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new oN(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Fe.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==u1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Ed.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=rU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Ed.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===_h.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===_h.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===_h.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===_h.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),hN=new _a,wIt=function(r){cr(t,r);function t(e,i){e===void 0&&(e=Gg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new mn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=n1t(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=mB.create(hU({width:s.width,height:s.height},o));return hN.tx=-s.x,hN.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:hN,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Gg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),IIt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),RIt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new IIt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){cr(t,r);function t(e){var i=r.call(this,Gg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new jv({projectionMatrix:new _a},!0),i.addSystem(Z1t,"mask").addSystem(I1t,"context").addSystem(xIt,"state").addSystem(cIt,"shader").addSystem(EIt,"texture").addSystem(RIt,"buffer").addSystem(S1t,"geometry").addSystem(A1t,"framebuffer").addSystem(Q1t,"scissor").addSystem(J1t,"stencil").addSystem(tIt,"projection").addSystem(bIt,"textureGC").addSystem(E1t,"filter").addSystem(eIt,"renderTexture").addSystem(w1t,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=mi.HIGH?this.multisample=mi.HIGH:i>=mi.MEDIUM?this.multisample=mi.MEDIUM:i>=mi.LOW?this.multisample=mi.LOW:this.multisample=mi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof mB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(wIt);var CIt=function(){function r(){this.texArray=null,this.blend=0,this.type=kg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),AIt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),SIt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),NIt=function(r){cr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=xB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===jh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=D1t(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new CIt);for(;i.length<s;)i.push(new AIt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++On._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;On._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new SIt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(KY),PIt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=jv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new gB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new _a,default:this.defaultGroupCache[t]};return new eq(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),OIt=function(r){cr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Rs(null,e,!1),i._indexBuffer=new Rs(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Fe.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Fe.FLOAT).addAttribute("aColor",i._buffer,4,!0,Fe.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Fe.FLOAT).addIndex(i._indexBuffer),i}return t}(_B),b6=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,T6=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FIt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:b6,fragment:T6,geometryClass:OIt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){cr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new PIt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(NIt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return b6},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return T6},enumerable:!1,configurable:!0}),r}();FIt.create();/*!
 * @pixi/filter-blur - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var lU=function(r,t){return lU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},lU(r,t)};function nq(r,t){lU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var UIt=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function MIt(r,t){var e=Math.ceil(r/2),i=UIt,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<r;a++){var o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",a-(e-1)+".0"),n+=o,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}var LIt={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},BIt=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function GIt(r){for(var t=LIt[r],e=t.length,i=BIt,n="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",a,o=0;o<r;o++){var h=s.replace("%index%",o.toString());a=o,o>=e&&(a=r-o-1),h=h.replace("%value%",t[a].toString()),n+=h,n+=`
`}return i=i.replace("%blur%",n),i=i.replace("%size%",r.toString()),i}/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var E6;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(E6||(E6={}));var w6;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(w6||(w6={}));var I6;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(I6||(I6={}));var R6;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(R6||(R6={}));var C6;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(C6||(C6={}));var A6;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(A6||(A6={}));var S6;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(S6||(S6={}));var N6;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(N6||(N6={}));var P6;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(P6||(P6={}));var O6;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(O6||(O6={}));var F6;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(F6||(F6={}));var U6;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(U6||(U6={}));var M6;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(M6||(M6={}));var $g;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})($g||($g={}));var L6;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(L6||(L6={}));var B6;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(B6||(B6={}));var G6;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(G6||(G6={}));var k6;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(k6||(k6={}));var D6;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(D6||(D6={}));var $6=function(r){nq(t,r);function t(e,i,n,s,a){i===void 0&&(i=8),n===void 0&&(n=4),s===void 0&&(s=A.FILTER_RESOLUTION),a===void 0&&(a=5);var o=this,h=MIt(a,e),u=GIt(a);return o=r.call(this,h,u)||this,o.horizontal=e,o.resolution=s,o._quality=0,o.quality=n,o.blur=i,o}return t.prototype.apply=function(e,i,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/i.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,i,n,s);else{var a=e.getFilterTexture(),o=e.renderer,h=i,u=a;this.state.blend=!1,e.applyFilter(this,h,u,$g.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(h,$g.BLIT),this.uniforms.uSampler=u;var f=u;u=h,h=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,s),e.returnFilterTexture(a)}},Object.defineProperty(t.prototype,"blur",{get:function(){return this.strength},set:function(e){this.padding=1+Math.abs(e)*2,this.strength=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e},enumerable:!1,configurable:!0}),t}(bB);(function(r){nq(t,r);function t(e,i,n,s){e===void 0&&(e=8),i===void 0&&(i=4),n===void 0&&(n=A.FILTER_RESOLUTION),s===void 0&&(s=5);var a=r.call(this)||this;return a.blurXFilter=new $6(!0,e,i,n,s),a.blurYFilter=new $6(!1,e,i,n,s),a.resolution=n,a.quality=i,a.blur=e,a.repeatEdgePixels=!1,a}return t.prototype.apply=function(e,i,n,s){var a=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(a&&o){var h=e.getFilterTexture();this.blurXFilter.apply(e,i,h,$g.CLEAR),this.blurYFilter.apply(e,h,n,s),e.returnFilterTexture(h)}else o?this.blurYFilter.apply(e,i,n,s):this.blurXFilter.apply(e,i,n,s)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(t.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()},enumerable:!1,configurable:!0}),t})(bB);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Wh||(Wh={}));var Hg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Hg||(Hg={}));var f1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(f1||(f1={}));var be;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(be||(be={}));var Xg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Xg||(Xg={}));var Gt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Gt||(Gt={}));var sd;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(sd||(sd={}));var Ue;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Ue||(Ue={}));var c1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(c1||(c1={}));var gh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(gh||(gh={}));var fU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(fU||(fU={}));var wd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(wd||(wd={}));var Ml;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Ml||(Ml={}));var Nu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Nu||(Nu={}));var cU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(cU||(cU={}));var wo;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(wo||(wo={}));var ps;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ps||(ps={}));var _i;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(_i||(_i={}));var Do;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Do||(Do={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var d1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(d1||(d1={}));var uN=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Up=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new uN(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=d1.NORMAL),this._addListener(new uN(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=d1.NORMAL),this._addListener(new uN(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var kIt=Math.PI*2,dU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(dU||(dU={}));var _n=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=dU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Ju=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),TT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ga=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Ju;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Ju;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(kIt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),gc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],xc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],bc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Tc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],pU=[],sq=[],ET=Math.sign;function DIt(){for(var r=0;r<16;r++){var t=[];pU.push(t);for(var e=0;e<16;e++)for(var i=ET(gc[r]*gc[e]+bc[r]*xc[e]),n=ET(xc[r]*gc[e]+Tc[r]*xc[e]),s=ET(gc[r]*bc[e]+bc[r]*Tc[e]),a=ET(xc[r]*bc[e]+Tc[r]*Tc[e]),o=0;o<16;o++)if(gc[o]===i&&xc[o]===n&&bc[o]===s&&Tc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new ga;h.set(gc[r],xc[r],bc[r],Tc[r],0,0),sq.push(h)}}DIt();var Lr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return gc[r]},uY:function(r){return xc[r]},vX:function(r){return bc[r]},vY:function(r){return Tc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return pU[r][t]},sub:function(r,t){return pU[r][Lr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Lr.S:Lr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Lr.E:Lr.W:t>0?r>0?Lr.SE:Lr.SW:r>0?Lr.NE:Lr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=sq[Lr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new ga,this.localTransform=new ga,this.position=new TT(this.onChange,this,0,0),this.scale=new TT(this.onChange,this,1,1),this.pivot=new TT(this.onChange,this,0,0),this.skew=new TT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Wh.WEBGL:Wh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var vU=[];function aq(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=vU.length-1;n>=0;--n){var s=vU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yU=function(r,t){return yU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},yU(r,t)};function dr(r,t){yU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var mU=function(){return mU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},mU.apply(this,arguments)};function $It(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Vg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),TB=function(r){dr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ml.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Vg),HIt={scaleMode:gh.NEAREST,format:Gt.RGBA,alphaMode:Ml.NPM},Fn=function(r){dr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Vg)&&(e=aq(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Gt.RGBA,n.type=d||Ue.UNSIGNED_BYTE,n.target=v||sd.TEXTURE_2D,n.alphaMode=s!==void 0?s:Ml.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new TB(e,{width:i,height:n}),o=e instanceof Float32Array?Ue.FLOAT:Ue.UNSIGNED_BYTE;return new t(a,Object.assign(HIt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),oq=function(r){dr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Fn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Vg?this.addResourceAt(e[n],n):this.addResourceAt(aq(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Vg),XIt=function(r){dr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=sd.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(oq),Ll=function(r){dr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ml.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Vg),hq=function(r){dr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Ll),VIt=function(r){dr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=sd.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=sd.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=sd.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(oq),uq=function(r){dr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Ll.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Ml.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Ll),jIt=function(r){dr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Ll.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Ll),zIt=function(r){dr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Ll.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Up.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Up.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Up.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Up.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Up.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Up.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Ll),WIt=function(r){dr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Ll);vU.push(uq,WIt,hq,zIt,jIt,TB,VIt,XIt);var YIt=function(r){dr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ml.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(TB),_U=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=_i.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Fn(null,{scaleMode:gh.NEAREST,resolution:1,mipmap:wd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Fn(new YIt(null,{width:this.width,height:this.height}),{scaleMode:gh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:wd.OFF,format:Gt.DEPTH_COMPONENT,type:Ue.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),lq=function(r){dr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:_i.NONE,i=r.call(this,null,e)||this,i.mipmap=wd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new _U(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Fn),fq=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Lr.add(i,Lr.NW),this.x0=h+a*Lr.uX(i),this.y0=u+o*Lr.uY(i),i=Lr.add(i,2),this.x1=h+a*Lr.uX(i),this.y1=u+o*Lr.uY(i),i=Lr.add(i,2),this.x2=h+a*Lr.uX(i),this.y2=u+o*Lr.uY(i),i=Lr.add(i,2),this.x3=h+a*Lr.uX(i),this.y3=u+o*Lr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),H6=new fq,Yh=function(r){dr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new _n(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=H6,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Ju(o.x,o.y):new Ju(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===H6&&(this._uvs=new fq),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Fn(e,i)),h.baseTexture.cacheId=a,Fn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Fn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Fn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof uq&&(o.url=i);var h=new t(a);return n||(n=i),Fn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Fn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function qIt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Yh(new Fn(new hq(r)))}function _I(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Yh.EMPTY=new Yh(new Fn);_I(Yh.EMPTY);_I(Yh.EMPTY.baseTexture);Yh.WHITE=qIt();_I(Yh.WHITE);_I(Yh.WHITE.baseTexture);var EB=function(r){dr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new lq(e))},t}(Yh),KIt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=_i.NONE);var n=new lq(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new EB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=_i.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||_i.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),X6=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Ue.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),ZIt=0,Cs=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=ZIt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Do.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Do.ELEMENT_ARRAY_BUFFER:Do.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),QIt={Float32Array,Uint32Array,Int32Array,Uint8Array};function JIt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new QIt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var V6={5126:4,5123:2,5121:1},tRt=0,eRt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},wB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=tRt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Cs||(e instanceof Array&&(e=new Float32Array(e)),e=new Cs(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new X6(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Cs||(t instanceof Array&&(t=new Uint16Array(t)),t=new Cs(t)),t.type=Do.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Cs,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*V6[s.type]/4),s.buffer=0}for(i.data=JIt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Cs(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new X6(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Do.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new eRt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Cs(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Do.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*V6[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),rRt=function(r){dr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(wB),iRt=function(r){dr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Cs(e.vertices),e.uvBuffer=new Cs(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(wB),nRt=0,Wv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nRt++,this.static=!!e,this.ubo=!!i,t instanceof Cs?(this.buffer=t,this.buffer.type=Do.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Cs(new Float32Array(1)),this.buffer.type=Do.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),sRt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_i.NONE,this.sourceFrame=new _n,this.destinationFrame=new _n,this.bindingSourceFrame=new _n,this.bindingDestinationFrame=new _n,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),wT=[new Ju,new Ju,new Ju,new Ju],lN=new ga,aRt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new KIt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new rRt,this.quadUv=new iRt,this.tempRect=new _n,this.activeState={},this.globalUniforms=new Wv({outputFrame:new _n,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new sRt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(lN.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Nu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Nu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Nu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Nu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Nu.CLEAR||e===Nu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Xg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Xg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(ga.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=_i.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||_i.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=wT[0],n=wT[1],s=wT[2],a=wT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?lN.copyFrom(s):lN.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),cq=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),oRt=function(){function r(t){this.renderer=t,this.emptyRenderer=new cq(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),j6=0,hRt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=j6++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=j6++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Wh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),uRt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_i.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),lRt=new _n,fRt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new _U(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _n,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Wh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=f1.COLOR|f1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new uRt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=_i.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=_i.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new _U(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=lRt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new _n},r.prototype.destroy=function(){this.renderer=null},r}(),fN={5126:4,5123:2,5121:1},cRt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Wh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*fN[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*fN[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*fN[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),dRt=function(){function r(t){t===void 0&&(t=null),this.type=ps.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ps.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function z6(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function W6(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function pRt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||W6(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||W6(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function cN(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function dq(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return cN(2*t);case"bvec3":return cN(3*t);case"bvec4":return cN(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var pq={},$m=pq;function vRt(){if($m===pq||$m&&$m.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Wh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),$m=t}return $m}var IT;function yRt(){if(!IT){IT=wo.MEDIUM;var r=vRt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);IT=t.precision?wo.HIGH:wo.MEDIUM}}return IT}function Y6(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===wo.HIGH&&e!==wo.HIGH&&(i=wo.MEDIUM),"precision "+i+` float;
`+r}else if(e!==wo.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var mRt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vq(r){return mRt[r]}var RT=null,q6={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function yq(r,t){if(!RT){var e=Object.keys(q6);RT={};for(var i=0;i<e.length;++i){var n=e[i];RT[r[n]]=q6[n]}}return RT[t]}var Yv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],_Rt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},gRt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function xRt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Yv.length;o++)if(Yv[o].test(n,s)){e.push(Yv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?_Rt:gRt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var bRt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function TRt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function ERt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=bRt.replace(/%forloop%/gi,TRt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Hm;function wRt(){if(typeof Hm=="boolean")return Hm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Hm=r({a:"b"},"a","b")===!0}catch{Hm=!1}return Hm}var IRt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,RRt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,CRt=0,CT={},IB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=CRt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),CT[i]?(CT[i]++,i+="-"+CT[i]):CT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Y6(this.vertexSrc,A.PRECISION_VERTEX,wo.HIGH),this.fragmentSrc=Y6(this.fragmentSrc,A.PRECISION_FRAGMENT,yRt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return RRt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return IRt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),mq=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Wv?this.uniformGroup=e:this.uniformGroup=new Wv(e):this.uniformGroup=new Wv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=IB.from(t,e);return new r(n,i)},r}(),dN=0,pN=1,vN=2,yN=3,mN=4,_N=5,RB=function(){function r(){this.data=0,this.blendMode=be.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<dN)},set:function(t){!!(this.data&1<<dN)!==t&&(this.data^=1<<dN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<pN)},set:function(t){!!(this.data&1<<pN)!==t&&(this.data^=1<<pN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<vN)},set:function(t){!!(this.data&1<<vN)!==t&&(this.data^=1<<vN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<yN)},set:function(t){!!(this.data&1<<yN)!==t&&(this.data^=1<<yN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<_N)},set:function(t){!!(this.data&1<<_N)!==t&&(this.data^=1<<_N)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<mN)},set:function(t){!!(this.data&1<<mN)!==t&&(this.data^=1<<mN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==be.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),ARt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,SRt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_q=function(r){dr(t,r);function t(e,i,n){var s=this,a=IB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new RB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return ARt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return SRt},enumerable:!1,configurable:!0}),t}(mq),NRt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,PRt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,K6=new ga,ORt=function(){function r(t,e){this._texture=t,this.mapCoord=new ga,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(K6.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(K6));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),FRt=function(r){dr(t,r);function t(e){var i=this,n=new ga;return i=r.call(this,NRt,PRt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ORt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(_q),URt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new dRt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ps.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ps.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ps.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case ps.SCISSOR:this.renderer.scissor.pop();break;case ps.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ps.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=ps.SPRITE;return}if(t.type=ps.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=ps.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new FRt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),gq=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),MRt=function(r){dr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(gq),LRt=function(r){dr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(gq),BRt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ga,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),If=new _n,Xm=new _n,GRt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new _n,this.destinationFrame=new _n,this.viewportFrame=new _n}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(If.width=t.frame.width,If.height=t.frame.height,e=If),i||(Xm.x=t.frame.x,Xm.y=t.frame.y,Xm.width=e.width,Xm.height=e.height,i=Xm),a=s.framebuffer):(o=n.resolution,e||(If.width=n.screen.width,If.height=n.screen.height,e=If),i||(i=If,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function kRt(r,t,e,i,n){e.buffer.update(n)}var DRt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},xq={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function $Rt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=xq[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function HRt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function XRt(r,t){if(!r.autoManage)return{size:0,syncFunc:kRt};for(var e=HRt(r.uniforms,t),i=$Rt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Yv.length;c++){var d=Yv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Yv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=vq(h.data.type),_=Math.max(xq[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=DRt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var VRt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function jRt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=yq(t,s.type),o={type:a,name:s.name,size:vq(a),location:n};e[s.name]=o}}return e}function zRt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=yq(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:dq(h,s.size)}}return e}function WRt(r,t){var e=z6(r,r.VERTEX_SHADER,t.vertexSrc),i=z6(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||pRt(r,n,e,i),t.attributeData=jRt(n,r),t.uniformData=zRt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:dq(h.type,h.size)}}var u=new VRt(n,o);return u}var YRt=0,AT={textureCount:0,uboCount:0},qRt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=YRt++}return r.prototype.systemCheck=function(){if(!wRt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(AT.textureCount=0,AT.uboCount=0,this.syncUniformGroup(t.uniformGroup,AT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=xRt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,AT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=XRt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=WRt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function KRt(r,t){return t===void 0&&(t=[]),t[be.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.ADD]=[r.ONE,r.ONE],t[be.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.NONE]=[0,0],t[be.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[be.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[be.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[be.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[be.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[be.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[be.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[be.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[be.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[be.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[be.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var ZRt=0,QRt=1,JRt=2,tCt=3,eCt=4,rCt=5,iCt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=be.NONE,this._blendEq=!1,this.map=[],this.map[ZRt]=this.setBlend,this.map[QRt]=this.setOffset,this.map[JRt]=this.setCullFace,this.map[tCt]=this.setDepthTest,this.map[eCt]=this.setFrontFace,this.map[rCt]=this.setDepthMask,this.checks=[],this.defaultState=new RB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=KRt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),nCt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==cU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function sCt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Ue.UNSIGNED_BYTE]=(e={},e[Gt.RGBA]=r.RGBA8,e[Gt.RGB]=r.RGB8,e[Gt.RG]=r.RG8,e[Gt.RED]=r.R8,e[Gt.RGBA_INTEGER]=r.RGBA8UI,e[Gt.RGB_INTEGER]=r.RGB8UI,e[Gt.RG_INTEGER]=r.RG8UI,e[Gt.RED_INTEGER]=r.R8UI,e[Gt.ALPHA]=r.ALPHA,e[Gt.LUMINANCE]=r.LUMINANCE,e[Gt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Ue.BYTE]=(i={},i[Gt.RGBA]=r.RGBA8_SNORM,i[Gt.RGB]=r.RGB8_SNORM,i[Gt.RG]=r.RG8_SNORM,i[Gt.RED]=r.R8_SNORM,i[Gt.RGBA_INTEGER]=r.RGBA8I,i[Gt.RGB_INTEGER]=r.RGB8I,i[Gt.RG_INTEGER]=r.RG8I,i[Gt.RED_INTEGER]=r.R8I,i),t[Ue.UNSIGNED_SHORT]=(n={},n[Gt.RGBA_INTEGER]=r.RGBA16UI,n[Gt.RGB_INTEGER]=r.RGB16UI,n[Gt.RG_INTEGER]=r.RG16UI,n[Gt.RED_INTEGER]=r.R16UI,n[Gt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Ue.SHORT]=(s={},s[Gt.RGBA_INTEGER]=r.RGBA16I,s[Gt.RGB_INTEGER]=r.RGB16I,s[Gt.RG_INTEGER]=r.RG16I,s[Gt.RED_INTEGER]=r.R16I,s),t[Ue.UNSIGNED_INT]=(a={},a[Gt.RGBA_INTEGER]=r.RGBA32UI,a[Gt.RGB_INTEGER]=r.RGB32UI,a[Gt.RG_INTEGER]=r.RG32UI,a[Gt.RED_INTEGER]=r.R32UI,a[Gt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Ue.INT]=(o={},o[Gt.RGBA_INTEGER]=r.RGBA32I,o[Gt.RGB_INTEGER]=r.RGB32I,o[Gt.RG_INTEGER]=r.RG32I,o[Gt.RED_INTEGER]=r.R32I,o),t[Ue.FLOAT]=(h={},h[Gt.RGBA]=r.RGBA32F,h[Gt.RGB]=r.RGB32F,h[Gt.RG]=r.RG32F,h[Gt.RED]=r.R32F,h[Gt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Ue.HALF_FLOAT]=(u={},u[Gt.RGBA]=r.RGBA16F,u[Gt.RGB]=r.RGB16F,u[Gt.RG]=r.RG16F,u[Gt.RED]=r.R16F,u),t[Ue.UNSIGNED_SHORT_5_6_5]=(l={},l[Gt.RGB]=r.RGB565,l),t[Ue.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Gt.RGBA]=r.RGBA4,f),t[Ue.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Gt.RGBA]=r.RGB5_A1,c),t[Ue.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Gt.RGBA]=r.RGB10_A2,d[Gt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Ue.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Gt.RGB]=r.R11F_G11F_B10F,v),t[Ue.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Gt.RGB]=r.RGB9_E5,_),t[Ue.UNSIGNED_INT_24_8]=(m={},m[Gt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Ue.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Gt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Ue.UNSIGNED_BYTE]=(b={},b[Gt.RGBA]=r.RGBA,b[Gt.RGB]=r.RGB,b[Gt.ALPHA]=r.ALPHA,b[Gt.LUMINANCE]=r.LUMINANCE,b[Gt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Ue.UNSIGNED_SHORT_5_6_5]=(S={},S[Gt.RGB]=r.RGB,S),T[Ue.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Gt.RGBA]=r.RGBA,R),T[Ue.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Gt.RGBA]=r.RGBA,U),T),L}var gN=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ue.UNSIGNED_BYTE,this.internalFormat=Gt.RGBA,this.samplerType=0}return r}(),aCt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Fn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=sCt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new gN(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new gN(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==c1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new gN(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Ue.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==c1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===wd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=fU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==wd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===gh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===gh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===gh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===gh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),xN=new ga,oCt=function(r){dr(t,r);function t(e,i){e===void 0&&(e=Hg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new _n(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=$It(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=EB.create(mU({width:s.width,height:s.height},o));return xN.tx=-s.x,xN.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:xN,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Hg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),hCt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),uCt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new hCt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){dr(t,r);function t(e){var i=r.call(this,Hg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Wv({projectionMatrix:new ga},!0),i.addSystem(URt,"mask").addSystem(hRt,"context").addSystem(iCt,"state").addSystem(qRt,"shader").addSystem(aCt,"texture").addSystem(uCt,"buffer").addSystem(cRt,"geometry").addSystem(fRt,"framebuffer").addSystem(MRt,"scissor").addSystem(LRt,"stencil").addSystem(BRt,"projection").addSystem(nCt,"textureGC").addSystem(aRt,"filter").addSystem(GRt,"renderTexture").addSystem(oRt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=_i.HIGH?this.multisample=_i.HIGH:i>=_i.MEDIUM?this.multisample=_i.MEDIUM:i>=_i.LOW?this.multisample=_i.LOW:this.multisample=_i.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof EB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(oCt);var lCt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,fCt=lCt,cCt=function(){function r(){this.texArray=null,this.blend=0,this.type=Xg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),dCt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),pCt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),vCt=function(r){dr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=RB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Wh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=ERt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new cCt);for(;i.length<s;)i.push(new dCt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Fn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Fn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new pCt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(cq),yCt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Wv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new IB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ga,default:this.defaultGroupCache[t]};return new mq(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),mCt=function(r){dr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Cs(null,e,!1),i._indexBuffer=new Cs(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Ue.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Ue.FLOAT).addAttribute("aColor",i._buffer,4,!0,Ue.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Ue.FLOAT).addIndex(i._indexBuffer),i}return t}(wB),Z6=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Q6=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,_Ct=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:Z6,fragment:Q6,geometryClass:mCt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){dr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new yCt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(vCt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return Z6},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return Q6},enumerable:!1,configurable:!0}),r}();_Ct.create();/*!
 * @pixi/filter-color-matrix - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gU=function(r,t){return gU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},gU(r,t)};function gCt(r,t){gU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var xCt=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,J6=function(r){gCt(t,r);function t(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return e=r.call(this,fCt,xCt,i)||this,e.alpha=1,e}return t.prototype._loadMatrix=function(e,i){i===void 0&&(i=!1);var n=e;i&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n},t.prototype._multiply=function(e,i,n){return e[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],e[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],e[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],e[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],e[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],e[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],e[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],e[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],e[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],e[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],e[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],e[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],e[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],e[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],e[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],e[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],e[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],e[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],e[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],e[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],e},t.prototype._colorMatrix=function(e){var i=new Float32Array(e);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},t.prototype.brightness=function(e,i){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.tint=function(e,i){var n=e>>16&255,s=e>>8&255,a=e&255,o=[n/255,0,0,0,0,0,s/255,0,0,0,0,0,a/255,0,0,0,0,0,1,0];this._loadMatrix(o,i)},t.prototype.greyscale=function(e,i){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.blackAndWhite=function(e){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.hue=function(e,i){e=(e||0)/180*Math.PI;var n=Math.cos(e),s=Math.sin(e),a=Math.sqrt,o=1/3,h=a(o),u=n+(1-n)*o,l=o*(1-n)-h*s,f=o*(1-n)+h*s,c=o*(1-n)+h*s,d=n+o*(1-n),v=o*(1-n)-h*s,_=o*(1-n)-h*s,m=o*(1-n)+h*s,g=n+o*(1-n),T=[u,l,f,0,0,c,d,v,0,0,_,m,g,0,0,0,0,0,1,0];this._loadMatrix(T,i)},t.prototype.contrast=function(e,i){var n=(e||0)+1,s=-.5*(n-1),a=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.saturate=function(e,i){e===void 0&&(e=0);var n=e*2/3+1,s=(n-1)*-.5,a=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.sepia=function(e){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.technicolor=function(e){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.polaroid=function(e){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.toBGR=function(e){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.kodachrome=function(e){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.browni=function(e){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.vintage=function(e){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.colorTone=function(e,i,n,s,a){e=e||.2,i=i||.15,n=n||16770432,s=s||3375104;var o=(n>>16&255)/255,h=(n>>8&255)/255,u=(n&255)/255,l=(s>>16&255)/255,f=(s>>8&255)/255,c=(s&255)/255,d=[.3,.59,.11,0,0,o,h,u,e,0,l,f,c,i,0,o-l,h-f,u-c,0,0];this._loadMatrix(d,a)},t.prototype.night=function(e,i){e=e||.1;var n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.predator=function(e,i){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,i)},t.prototype.lsd=function(e){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.reset=function(){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)},Object.defineProperty(t.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e},enumerable:!1,configurable:!0}),t}(_q);J6.prototype.grayscale=J6.prototype.greyscale;/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var qh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(qh||(qh={}));var jg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(jg||(jg={}));var p1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(p1||(p1={}));var Te;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(Te||(Te={}));var zg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zg||(zg={}));var kt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(kt||(kt={}));var ad;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ad||(ad={}));var Me;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Me||(Me={}));var v1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(v1||(v1={}));var xh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(xh||(xh={}));var xU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(xU||(xU={}));var Id;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Id||(Id={}));var Bl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Bl||(Bl={}));var Pu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Pu||(Pu={}));var bU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(bU||(bU={}));var Io;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Io||(Io={}));var vs;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(vs||(vs={}));var gi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(gi||(gi={}));var $o;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})($o||($o={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var y1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(y1||(y1={}));var bN=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Mp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bN(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=y1.NORMAL),this._addListener(new bN(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=y1.NORMAL),this._addListener(new bN(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bCt=Math.PI*2,TU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(TU||(TU={}));var gn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=TU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),bh=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),ST=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Bs=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new bh;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new bh;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(bCt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Ec=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],wc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ic=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Rc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],EU=[],bq=[],NT=Math.sign;function TCt(){for(var r=0;r<16;r++){var t=[];EU.push(t);for(var e=0;e<16;e++)for(var i=NT(Ec[r]*Ec[e]+Ic[r]*wc[e]),n=NT(wc[r]*Ec[e]+Rc[r]*wc[e]),s=NT(Ec[r]*Ic[e]+Ic[r]*Rc[e]),a=NT(wc[r]*Ic[e]+Rc[r]*Rc[e]),o=0;o<16;o++)if(Ec[o]===i&&wc[o]===n&&Ic[o]===s&&Rc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new Bs;h.set(Ec[r],wc[r],Ic[r],Rc[r],0,0),bq.push(h)}}TCt();var Br={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Ec[r]},uY:function(r){return wc[r]},vX:function(r){return Ic[r]},vY:function(r){return Rc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return EU[r][t]},sub:function(r,t){return EU[r][Br.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Br.S:Br.N:Math.abs(t)*2<=Math.abs(r)?r>0?Br.E:Br.W:t>0?r>0?Br.SE:Br.SW:r>0?Br.NE:Br.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=bq[Br.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new Bs,this.localTransform=new Bs,this.position=new ST(this.onChange,this,0,0),this.scale=new ST(this.onChange,this,1,1),this.pivot=new ST(this.onChange,this,0,0),this.skew=new ST(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?qh.WEBGL:qh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var wU=[];function Tq(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=wU.length-1;n>=0;--n){var s=wU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var IU=function(r,t){return IU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},IU(r,t)};function pr(r,t){IU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var RU=function(){return RU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},RU.apply(this,arguments)};function ECt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Wg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),CB=function(r){pr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Bl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Wg),wCt={scaleMode:xh.NEAREST,format:kt.RGBA,alphaMode:Bl.NPM},Un=function(r){pr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Wg)&&(e=Tq(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||kt.RGBA,n.type=d||Me.UNSIGNED_BYTE,n.target=v||ad.TEXTURE_2D,n.alphaMode=s!==void 0?s:Bl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new CB(e,{width:i,height:n}),o=e instanceof Float32Array?Me.FLOAT:Me.UNSIGNED_BYTE;return new t(a,Object.assign(wCt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),Eq=function(r){pr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Un;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Wg?this.addResourceAt(e[n],n):this.addResourceAt(Tq(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Wg),ICt=function(r){pr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ad.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(Eq),Gl=function(r){pr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Bl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Wg),wq=function(r){pr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Gl),RCt=function(r){pr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=ad.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ad.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ad.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(Eq),Iq=function(r){pr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Gl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Bl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Gl),CCt=function(r){pr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Gl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Gl),ACt=function(r){pr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Gl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Mp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Mp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Mp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Mp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Mp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Mp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Gl),SCt=function(r){pr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Gl);wU.push(Iq,SCt,wq,ACt,CCt,CB,RCt,ICt);var NCt=function(r){pr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Bl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(CB),CU=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=gi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Un(null,{scaleMode:xh.NEAREST,resolution:1,mipmap:Id.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Un(new NCt(null,{width:this.width,height:this.height}),{scaleMode:xh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Id.OFF,format:kt.DEPTH_COMPONENT,type:Me.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Rq=function(r){pr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:gi.NONE,i=r.call(this,null,e)||this,i.mipmap=Id.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new CU(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Un),Cq=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Br.add(i,Br.NW),this.x0=h+a*Br.uX(i),this.y0=u+o*Br.uY(i),i=Br.add(i,2),this.x1=h+a*Br.uX(i),this.y1=u+o*Br.uY(i),i=Br.add(i,2),this.x2=h+a*Br.uX(i),this.y2=u+o*Br.uY(i),i=Br.add(i,2),this.x3=h+a*Br.uX(i),this.y3=u+o*Br.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),tV=new Cq,Kh=function(r){pr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new gn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=tV,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new bh(o.x,o.y):new bh(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===tV&&(this._uvs=new Cq),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Un(e,i)),h.baseTexture.cacheId=a,Un.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Un.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Un(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof Iq&&(o.url=i);var h=new t(a);return n||(n=i),Un.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Un.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function PCt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Kh(new Un(new wq(r)))}function gI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Kh.EMPTY=new Kh(new Un);gI(Kh.EMPTY);gI(Kh.EMPTY.baseTexture);Kh.WHITE=PCt();gI(Kh.WHITE);gI(Kh.WHITE.baseTexture);var AB=function(r){pr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new Rq(e))},t}(Kh),OCt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=gi.NONE);var n=new Rq(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new AB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=gi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||gi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),eV=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Me.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),FCt=0,As=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=FCt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===$o.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?$o.ELEMENT_ARRAY_BUFFER:$o.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),UCt={Float32Array,Uint32Array,Int32Array,Uint8Array};function MCt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new UCt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var rV={5126:4,5123:2,5121:1},LCt=0,BCt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},SB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=LCt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof As||(e instanceof Array&&(e=new Float32Array(e)),e=new As(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new eV(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof As||(t instanceof Array&&(t=new Uint16Array(t)),t=new As(t)),t.type=$o.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new As,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*rV[s.type]/4),s.buffer=0}for(i.data=MCt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new As(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new eV(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=$o.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new BCt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new As(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=$o.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*rV[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),GCt=function(r){pr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(SB),kCt=function(r){pr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new As(e.vertices),e.uvBuffer=new As(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(SB),DCt=0,qv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=DCt++,this.static=!!e,this.ubo=!!i,t instanceof As?(this.buffer=t,this.buffer.type=$o.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new As(new Float32Array(1)),this.buffer.type=$o.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),$Ct=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=gi.NONE,this.sourceFrame=new gn,this.destinationFrame=new gn,this.bindingSourceFrame=new gn,this.bindingDestinationFrame=new gn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),PT=[new bh,new bh,new bh,new bh],TN=new Bs,HCt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new OCt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new GCt,this.quadUv=new kCt,this.tempRect=new gn,this.activeState={},this.globalUniforms=new qv({outputFrame:new gn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new $Ct,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(TN.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Pu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Pu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Pu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Pu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Pu.CLEAR||e===Pu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(zg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(zg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(Bs.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=gi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||gi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=PT[0],n=PT[1],s=PT[2],a=PT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?TN.copyFrom(s):TN.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),Aq=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),XCt=function(){function r(t){this.renderer=t,this.emptyRenderer=new Aq(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),iV=0,VCt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=iV++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=iV++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=qh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),jCt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=gi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),zCt=new gn,WCt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new CU(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new gn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===qh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=p1.COLOR|p1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new jCt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=gi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=gi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new CU(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=zCt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new gn},r.prototype.destroy=function(){this.renderer=null},r}(),EN={5126:4,5123:2,5121:1},YCt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===qh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*EN[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*EN[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*EN[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),qCt=function(){function r(t){t===void 0&&(t=null),this.type=vs.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=vs.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function nV(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function sV(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function KCt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||sV(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||sV(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function wN(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function Sq(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return wN(2*t);case"bvec3":return wN(3*t);case"bvec4":return wN(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Nq={},Vm=Nq;function ZCt(){if(Vm===Nq||Vm&&Vm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=qh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Vm=t}return Vm}var OT;function QCt(){if(!OT){OT=Io.MEDIUM;var r=ZCt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);OT=t.precision?Io.HIGH:Io.MEDIUM}}return OT}function aV(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===Io.HIGH&&e!==Io.HIGH&&(i=Io.MEDIUM),"precision "+i+` float;
`+r}else if(e!==Io.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var JCt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Pq(r){return JCt[r]}var FT=null,oV={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Oq(r,t){if(!FT){var e=Object.keys(oV);FT={};for(var i=0;i<e.length;++i){var n=e[i];FT[r[n]]=oV[n]}}return FT[t]}var Kv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],tAt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},eAt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function rAt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Kv.length;o++)if(Kv[o].test(n,s)){e.push(Kv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?tAt:eAt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var iAt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function nAt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function sAt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=iAt.replace(/%forloop%/gi,nAt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var jm;function aAt(){if(typeof jm=="boolean")return jm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");jm=r({a:"b"},"a","b")===!0}catch{jm=!1}return jm}var oAt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,hAt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,uAt=0,UT={},NB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=uAt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),UT[i]?(UT[i]++,i+="-"+UT[i]):UT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=aV(this.vertexSrc,A.PRECISION_VERTEX,Io.HIGH),this.fragmentSrc=aV(this.fragmentSrc,A.PRECISION_FRAGMENT,QCt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return hAt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return oAt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),Fq=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof qv?this.uniformGroup=e:this.uniformGroup=new qv(e):this.uniformGroup=new qv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=NB.from(t,e);return new r(n,i)},r}(),IN=0,RN=1,CN=2,AN=3,SN=4,NN=5,PB=function(){function r(){this.data=0,this.blendMode=Te.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<IN)},set:function(t){!!(this.data&1<<IN)!==t&&(this.data^=1<<IN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<RN)},set:function(t){!!(this.data&1<<RN)!==t&&(this.data^=1<<RN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<CN)},set:function(t){!!(this.data&1<<CN)!==t&&(this.data^=1<<CN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<AN)},set:function(t){!!(this.data&1<<AN)!==t&&(this.data^=1<<AN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<NN)},set:function(t){!!(this.data&1<<NN)!==t&&(this.data^=1<<NN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<SN)},set:function(t){!!(this.data&1<<SN)!==t&&(this.data^=1<<SN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Te.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),lAt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,fAt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Uq=function(r){pr(t,r);function t(e,i,n){var s=this,a=NB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new PB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return lAt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return fAt},enumerable:!1,configurable:!0}),t}(Fq),cAt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,dAt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,hV=new Bs,pAt=function(){function r(t,e){this._texture=t,this.mapCoord=new Bs,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(hV.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(hV));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),vAt=function(r){pr(t,r);function t(e){var i=this,n=new Bs;return i=r.call(this,cAt,dAt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new pAt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(Uq),yAt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new qCt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case vs.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case vs.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case vs.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case vs.SCISSOR:this.renderer.scissor.pop();break;case vs.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case vs.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=vs.SPRITE;return}if(t.type=vs.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=vs.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new vAt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),Mq=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),mAt=function(r){pr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(Mq),_At=function(r){pr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(Mq),gAt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Bs,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Rf=new gn,zm=new gn,xAt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new gn,this.destinationFrame=new gn,this.viewportFrame=new gn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Rf.width=t.frame.width,Rf.height=t.frame.height,e=Rf),i||(zm.x=t.frame.x,zm.y=t.frame.y,zm.width=e.width,zm.height=e.height,i=zm),a=s.framebuffer):(o=n.resolution,e||(Rf.width=n.screen.width,Rf.height=n.screen.height,e=Rf),i||(i=Rf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function bAt(r,t,e,i,n){e.buffer.update(n)}var TAt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Lq={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function EAt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=Lq[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function wAt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function IAt(r,t){if(!r.autoManage)return{size:0,syncFunc:bAt};for(var e=wAt(r.uniforms,t),i=EAt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Kv.length;c++){var d=Kv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Kv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=Pq(h.data.type),_=Math.max(Lq[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=TAt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var RAt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function CAt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=Oq(t,s.type),o={type:a,name:s.name,size:Pq(a),location:n};e[s.name]=o}}return e}function AAt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=Oq(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:Sq(h,s.size)}}return e}function SAt(r,t){var e=nV(r,r.VERTEX_SHADER,t.vertexSrc),i=nV(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||KCt(r,n,e,i),t.attributeData=CAt(n,r),t.uniformData=AAt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:Sq(h.type,h.size)}}var u=new RAt(n,o);return u}var NAt=0,MT={textureCount:0,uboCount:0},PAt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=NAt++}return r.prototype.systemCheck=function(){if(!aAt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(MT.textureCount=0,MT.uboCount=0,this.syncUniformGroup(t.uniformGroup,MT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=rAt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,MT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=IAt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=SAt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function OAt(r,t){return t===void 0&&(t=[]),t[Te.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.ADD]=[r.ONE,r.ONE],t[Te.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.NONE]=[0,0],t[Te.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Te.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Te.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Te.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Te.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Te.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Te.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Te.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Te.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Te.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Te.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var FAt=0,UAt=1,MAt=2,LAt=3,BAt=4,GAt=5,kAt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Te.NONE,this._blendEq=!1,this.map=[],this.map[FAt]=this.setBlend,this.map[UAt]=this.setOffset,this.map[MAt]=this.setCullFace,this.map[LAt]=this.setDepthTest,this.map[BAt]=this.setFrontFace,this.map[GAt]=this.setDepthMask,this.checks=[],this.defaultState=new PB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=OAt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),DAt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==bU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function $At(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Me.UNSIGNED_BYTE]=(e={},e[kt.RGBA]=r.RGBA8,e[kt.RGB]=r.RGB8,e[kt.RG]=r.RG8,e[kt.RED]=r.R8,e[kt.RGBA_INTEGER]=r.RGBA8UI,e[kt.RGB_INTEGER]=r.RGB8UI,e[kt.RG_INTEGER]=r.RG8UI,e[kt.RED_INTEGER]=r.R8UI,e[kt.ALPHA]=r.ALPHA,e[kt.LUMINANCE]=r.LUMINANCE,e[kt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Me.BYTE]=(i={},i[kt.RGBA]=r.RGBA8_SNORM,i[kt.RGB]=r.RGB8_SNORM,i[kt.RG]=r.RG8_SNORM,i[kt.RED]=r.R8_SNORM,i[kt.RGBA_INTEGER]=r.RGBA8I,i[kt.RGB_INTEGER]=r.RGB8I,i[kt.RG_INTEGER]=r.RG8I,i[kt.RED_INTEGER]=r.R8I,i),t[Me.UNSIGNED_SHORT]=(n={},n[kt.RGBA_INTEGER]=r.RGBA16UI,n[kt.RGB_INTEGER]=r.RGB16UI,n[kt.RG_INTEGER]=r.RG16UI,n[kt.RED_INTEGER]=r.R16UI,n[kt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Me.SHORT]=(s={},s[kt.RGBA_INTEGER]=r.RGBA16I,s[kt.RGB_INTEGER]=r.RGB16I,s[kt.RG_INTEGER]=r.RG16I,s[kt.RED_INTEGER]=r.R16I,s),t[Me.UNSIGNED_INT]=(a={},a[kt.RGBA_INTEGER]=r.RGBA32UI,a[kt.RGB_INTEGER]=r.RGB32UI,a[kt.RG_INTEGER]=r.RG32UI,a[kt.RED_INTEGER]=r.R32UI,a[kt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Me.INT]=(o={},o[kt.RGBA_INTEGER]=r.RGBA32I,o[kt.RGB_INTEGER]=r.RGB32I,o[kt.RG_INTEGER]=r.RG32I,o[kt.RED_INTEGER]=r.R32I,o),t[Me.FLOAT]=(h={},h[kt.RGBA]=r.RGBA32F,h[kt.RGB]=r.RGB32F,h[kt.RG]=r.RG32F,h[kt.RED]=r.R32F,h[kt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Me.HALF_FLOAT]=(u={},u[kt.RGBA]=r.RGBA16F,u[kt.RGB]=r.RGB16F,u[kt.RG]=r.RG16F,u[kt.RED]=r.R16F,u),t[Me.UNSIGNED_SHORT_5_6_5]=(l={},l[kt.RGB]=r.RGB565,l),t[Me.UNSIGNED_SHORT_4_4_4_4]=(f={},f[kt.RGBA]=r.RGBA4,f),t[Me.UNSIGNED_SHORT_5_5_5_1]=(c={},c[kt.RGBA]=r.RGB5_A1,c),t[Me.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[kt.RGBA]=r.RGB10_A2,d[kt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Me.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[kt.RGB]=r.R11F_G11F_B10F,v),t[Me.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[kt.RGB]=r.RGB9_E5,_),t[Me.UNSIGNED_INT_24_8]=(m={},m[kt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Me.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[kt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Me.UNSIGNED_BYTE]=(b={},b[kt.RGBA]=r.RGBA,b[kt.RGB]=r.RGB,b[kt.ALPHA]=r.ALPHA,b[kt.LUMINANCE]=r.LUMINANCE,b[kt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Me.UNSIGNED_SHORT_5_6_5]=(S={},S[kt.RGB]=r.RGB,S),T[Me.UNSIGNED_SHORT_4_4_4_4]=(R={},R[kt.RGBA]=r.RGBA,R),T[Me.UNSIGNED_SHORT_5_5_5_1]=(U={},U[kt.RGBA]=r.RGBA,U),T),L}var PN=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Me.UNSIGNED_BYTE,this.internalFormat=kt.RGBA,this.samplerType=0}return r}(),HAt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Un,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=$At(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new PN(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new PN(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==v1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new PN(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Me.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==v1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Id.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=xU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Id.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===xh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===xh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===xh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===xh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),ON=new Bs,XAt=function(r){pr(t,r);function t(e,i){e===void 0&&(e=jg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new gn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=ECt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=AB.create(RU({width:s.width,height:s.height},o));return ON.tx=-s.x,ON.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:ON,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=jg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),VAt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),jAt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new VAt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){pr(t,r);function t(e){var i=r.call(this,jg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new qv({projectionMatrix:new Bs},!0),i.addSystem(yAt,"mask").addSystem(VCt,"context").addSystem(kAt,"state").addSystem(PAt,"shader").addSystem(HAt,"texture").addSystem(jAt,"buffer").addSystem(YCt,"geometry").addSystem(WCt,"framebuffer").addSystem(mAt,"scissor").addSystem(_At,"stencil").addSystem(gAt,"projection").addSystem(DAt,"textureGC").addSystem(HCt,"filter").addSystem(xAt,"renderTexture").addSystem(XCt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=gi.HIGH?this.multisample=gi.HIGH:i>=gi.MEDIUM?this.multisample=gi.MEDIUM:i>=gi.LOW?this.multisample=gi.LOW:this.multisample=gi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof AB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(XAt);var zAt=function(){function r(){this.texArray=null,this.blend=0,this.type=zg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),WAt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),YAt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),qAt=function(r){pr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=PB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===qh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=sAt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new zAt);for(;i.length<s;)i.push(new WAt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Un._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Un._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new YAt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Aq),KAt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=qv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new NB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Bs,default:this.defaultGroupCache[t]};return new Fq(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),ZAt=function(r){pr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new As(null,e,!1),i._indexBuffer=new As(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Me.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Me.FLOAT).addAttribute("aColor",i._buffer,4,!0,Me.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Me.FLOAT).addIndex(i._indexBuffer),i}return t}(SB),uV=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,lV=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,QAt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:uV,fragment:lV,geometryClass:ZAt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){pr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new KAt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(qAt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return uV},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return lV},enumerable:!1,configurable:!0}),r}();QAt.create();/*!
 * @pixi/filter-displacement - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var AU=function(r,t){return AU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},AU(r,t)};function JAt(r,t){AU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var tSt=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,eSt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;(function(r){JAt(t,r);function t(e,i){var n=this,s=new Bs;return e.renderable=!1,n=r.call(this,eSt,tSt,{mapSampler:e._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,n.maskSprite=e,n.maskMatrix=s,i==null&&(i=20),n.scale=new bh(i,i),n}return t.prototype.apply=function(e,i,n,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var a=this.maskSprite.worldTransform,o=Math.sqrt(a.a*a.a+a.b*a.b),h=Math.sqrt(a.c*a.c+a.d*a.d);o!==0&&h!==0&&(this.uniforms.rotation[0]=a.a/o,this.uniforms.rotation[1]=a.b/o,this.uniforms.rotation[2]=a.c/h,this.uniforms.rotation[3]=a.d/h),e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e},enumerable:!1,configurable:!0}),t})(Uq);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Zh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Zh||(Zh={}));var Yg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Yg||(Yg={}));var m1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(m1||(m1={}));var Ee;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(Ee||(Ee={}));var qg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(qg||(qg={}));var Dt;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Dt||(Dt={}));var od;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(od||(od={}));var Le;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Le||(Le={}));var _1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(_1||(_1={}));var Th;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Th||(Th={}));var SU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(SU||(SU={}));var Rd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Rd||(Rd={}));var kl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(kl||(kl={}));var Ou;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Ou||(Ou={}));var NU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(NU||(NU={}));var Ro;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Ro||(Ro={}));var ys;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ys||(ys={}));var xi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(xi||(xi={}));var Ho;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Ho||(Ho={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var g1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(g1||(g1={}));var FN=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Lp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new FN(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=g1.NORMAL),this._addListener(new FN(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=g1.NORMAL),this._addListener(new FN(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var rSt=Math.PI*2,PU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(PU||(PU={}));var xn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=PU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),tl=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),LT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),xa=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new tl;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new tl;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(rSt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Cc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ac=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Sc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Nc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],OU=[],Bq=[],BT=Math.sign;function iSt(){for(var r=0;r<16;r++){var t=[];OU.push(t);for(var e=0;e<16;e++)for(var i=BT(Cc[r]*Cc[e]+Sc[r]*Ac[e]),n=BT(Ac[r]*Cc[e]+Nc[r]*Ac[e]),s=BT(Cc[r]*Sc[e]+Sc[r]*Nc[e]),a=BT(Ac[r]*Sc[e]+Nc[r]*Nc[e]),o=0;o<16;o++)if(Cc[o]===i&&Ac[o]===n&&Sc[o]===s&&Nc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new xa;h.set(Cc[r],Ac[r],Sc[r],Nc[r],0,0),Bq.push(h)}}iSt();var Gr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Cc[r]},uY:function(r){return Ac[r]},vX:function(r){return Sc[r]},vY:function(r){return Nc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return OU[r][t]},sub:function(r,t){return OU[r][Gr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Gr.S:Gr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Gr.E:Gr.W:t>0?r>0?Gr.SE:Gr.SW:r>0?Gr.NE:Gr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=Bq[Gr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new xa,this.localTransform=new xa,this.position=new LT(this.onChange,this,0,0),this.scale=new LT(this.onChange,this,1,1),this.pivot=new LT(this.onChange,this,0,0),this.skew=new LT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Zh.WEBGL:Zh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var FU=[];function Gq(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=FU.length-1;n>=0;--n){var s=FU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var UU=function(r,t){return UU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},UU(r,t)};function vr(r,t){UU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var MU=function(){return MU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},MU.apply(this,arguments)};function nSt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Kg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),OB=function(r){vr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===kl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Kg),sSt={scaleMode:Th.NEAREST,format:Dt.RGBA,alphaMode:kl.NPM},Mn=function(r){vr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Kg)&&(e=Gq(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Dt.RGBA,n.type=d||Le.UNSIGNED_BYTE,n.target=v||od.TEXTURE_2D,n.alphaMode=s!==void 0?s:kl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new OB(e,{width:i,height:n}),o=e instanceof Float32Array?Le.FLOAT:Le.UNSIGNED_BYTE;return new t(a,Object.assign(sSt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),kq=function(r){vr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Mn;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Kg?this.addResourceAt(e[n],n):this.addResourceAt(Gq(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Kg),aSt=function(r){vr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=od.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(kq),Dl=function(r){vr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===kl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Kg),Dq=function(r){vr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Dl),oSt=function(r){vr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=od.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=od.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=od.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(kq),$q=function(r){vr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Dl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===kl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Dl),hSt=function(r){vr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Dl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Dl),uSt=function(r){vr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Dl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Lp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Lp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Lp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Lp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Lp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Lp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Dl),lSt=function(r){vr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Dl);FU.push($q,lSt,Dq,uSt,hSt,OB,oSt,aSt);var fSt=function(r){vr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===kl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(OB),LU=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=xi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Mn(null,{scaleMode:Th.NEAREST,resolution:1,mipmap:Rd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Mn(new fSt(null,{width:this.width,height:this.height}),{scaleMode:Th.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Rd.OFF,format:Dt.DEPTH_COMPONENT,type:Le.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),Hq=function(r){vr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:xi.NONE,i=r.call(this,null,e)||this,i.mipmap=Rd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new LU(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Mn),Xq=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Gr.add(i,Gr.NW),this.x0=h+a*Gr.uX(i),this.y0=u+o*Gr.uY(i),i=Gr.add(i,2),this.x1=h+a*Gr.uX(i),this.y1=u+o*Gr.uY(i),i=Gr.add(i,2),this.x2=h+a*Gr.uX(i),this.y2=u+o*Gr.uY(i),i=Gr.add(i,2),this.x3=h+a*Gr.uX(i),this.y3=u+o*Gr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),fV=new Xq,Qh=function(r){vr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new xn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=fV,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new tl(o.x,o.y):new tl(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===fV&&(this._uvs=new Xq),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Mn(e,i)),h.baseTexture.cacheId=a,Mn.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Mn.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Mn(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof $q&&(o.url=i);var h=new t(a);return n||(n=i),Mn.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Mn.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function cSt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Qh(new Mn(new Dq(r)))}function xI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Qh.EMPTY=new Qh(new Mn);xI(Qh.EMPTY);xI(Qh.EMPTY.baseTexture);Qh.WHITE=cSt();xI(Qh.WHITE);xI(Qh.WHITE.baseTexture);var FB=function(r){vr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new Hq(e))},t}(Qh),dSt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=xi.NONE);var n=new Hq(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new FB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=xi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||xi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),cV=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Le.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),pSt=0,Ss=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=pSt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Ho.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Ho.ELEMENT_ARRAY_BUFFER:Ho.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),vSt={Float32Array,Uint32Array,Int32Array,Uint8Array};function ySt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new vSt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var dV={5126:4,5123:2,5121:1},mSt=0,_St={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},UB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=mSt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ss||(e instanceof Array&&(e=new Float32Array(e)),e=new Ss(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new cV(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Ss||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ss(t)),t.type=Ho.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Ss,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*dV[s.type]/4),s.buffer=0}for(i.data=ySt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ss(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new cV(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Ho.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new _St[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Ss(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Ho.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*dV[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),gSt=function(r){vr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(UB),xSt=function(r){vr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ss(e.vertices),e.uvBuffer=new Ss(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(UB),bSt=0,Zv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=bSt++,this.static=!!e,this.ubo=!!i,t instanceof Ss?(this.buffer=t,this.buffer.type=Ho.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ss(new Float32Array(1)),this.buffer.type=Ho.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),TSt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=xi.NONE,this.sourceFrame=new xn,this.destinationFrame=new xn,this.bindingSourceFrame=new xn,this.bindingDestinationFrame=new xn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),GT=[new tl,new tl,new tl,new tl],UN=new xa,ESt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new dSt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new gSt,this.quadUv=new xSt,this.tempRect=new xn,this.activeState={},this.globalUniforms=new Zv({outputFrame:new xn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new TSt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(UN.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Ou.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Ou.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Ou.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Ou.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Ou.CLEAR||e===Ou.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(qg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(qg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(xa.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=xi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||xi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=GT[0],n=GT[1],s=GT[2],a=GT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?UN.copyFrom(s):UN.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),Vq=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),wSt=function(){function r(t){this.renderer=t,this.emptyRenderer=new Vq(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),pV=0,ISt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=pV++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=pV++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Zh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),RSt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=xi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),CSt=new xn,ASt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new LU(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Zh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=m1.COLOR|m1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new RSt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=xi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=xi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new LU(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=CSt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new xn},r.prototype.destroy=function(){this.renderer=null},r}(),MN={5126:4,5123:2,5121:1},SSt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Zh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*MN[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*MN[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*MN[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),NSt=function(){function r(t){t===void 0&&(t=null),this.type=ys.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ys.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function vV(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function yV(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function PSt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||yV(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||yV(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function LN(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function jq(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return LN(2*t);case"bvec3":return LN(3*t);case"bvec4":return LN(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var zq={},Wm=zq;function OSt(){if(Wm===zq||Wm&&Wm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Zh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Wm=t}return Wm}var kT;function FSt(){if(!kT){kT=Ro.MEDIUM;var r=OSt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);kT=t.precision?Ro.HIGH:Ro.MEDIUM}}return kT}function mV(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===Ro.HIGH&&e!==Ro.HIGH&&(i=Ro.MEDIUM),"precision "+i+` float;
`+r}else if(e!==Ro.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var USt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Wq(r){return USt[r]}var DT=null,_V={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Yq(r,t){if(!DT){var e=Object.keys(_V);DT={};for(var i=0;i<e.length;++i){var n=e[i];DT[r[n]]=_V[n]}}return DT[t]}var Qv=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],MSt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},LSt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function BSt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<Qv.length;o++)if(Qv[o].test(n,s)){e.push(Qv[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?MSt:LSt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var GSt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function kSt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function DSt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=GSt.replace(/%forloop%/gi,kSt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Ym;function $St(){if(typeof Ym=="boolean")return Ym;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Ym=r({a:"b"},"a","b")===!0}catch{Ym=!1}return Ym}var HSt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,XSt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,VSt=0,$T={},MB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=VSt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),$T[i]?($T[i]++,i+="-"+$T[i]):$T[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=mV(this.vertexSrc,A.PRECISION_VERTEX,Ro.HIGH),this.fragmentSrc=mV(this.fragmentSrc,A.PRECISION_FRAGMENT,FSt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return XSt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return HSt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),qq=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Zv?this.uniformGroup=e:this.uniformGroup=new Zv(e):this.uniformGroup=new Zv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=MB.from(t,e);return new r(n,i)},r}(),BN=0,GN=1,kN=2,DN=3,$N=4,HN=5,LB=function(){function r(){this.data=0,this.blendMode=Ee.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<BN)},set:function(t){!!(this.data&1<<BN)!==t&&(this.data^=1<<BN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<GN)},set:function(t){!!(this.data&1<<GN)!==t&&(this.data^=1<<GN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<kN)},set:function(t){!!(this.data&1<<kN)!==t&&(this.data^=1<<kN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<DN)},set:function(t){!!(this.data&1<<DN)!==t&&(this.data^=1<<DN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<HN)},set:function(t){!!(this.data&1<<HN)!==t&&(this.data^=1<<HN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<$N)},set:function(t){!!(this.data&1<<$N)!==t&&(this.data^=1<<$N)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Ee.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),jSt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,zSt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Kq=function(r){vr(t,r);function t(e,i,n){var s=this,a=MB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new LB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return jSt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return zSt},enumerable:!1,configurable:!0}),t}(qq),WSt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,YSt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,gV=new xa,qSt=function(){function r(t,e){this._texture=t,this.mapCoord=new xa,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(gV.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(gV));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),KSt=function(r){vr(t,r);function t(e){var i=this,n=new xa;return i=r.call(this,WSt,YSt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new qSt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(Kq),ZSt=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new NSt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ys.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ys.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ys.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case ys.SCISSOR:this.renderer.scissor.pop();break;case ys.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ys.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=ys.SPRITE;return}if(t.type=ys.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=ys.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new KSt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),Zq=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),QSt=function(r){vr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(Zq),JSt=function(r){vr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(Zq),tNt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new xa,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Cf=new xn,qm=new xn,eNt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xn,this.destinationFrame=new xn,this.viewportFrame=new xn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Cf.width=t.frame.width,Cf.height=t.frame.height,e=Cf),i||(qm.x=t.frame.x,qm.y=t.frame.y,qm.width=e.width,qm.height=e.height,i=qm),a=s.framebuffer):(o=n.resolution,e||(Cf.width=n.screen.width,Cf.height=n.screen.height,e=Cf),i||(i=Cf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function rNt(r,t,e,i,n){e.buffer.update(n)}var iNt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Qq={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function nNt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=Qq[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function sNt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function aNt(r,t){if(!r.autoManage)return{size:0,syncFunc:rNt};for(var e=sNt(r.uniforms,t),i=nNt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<Qv.length;c++){var d=Qv[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",Qv[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=Wq(h.data.type),_=Math.max(Qq[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=iNt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var oNt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function hNt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=Yq(t,s.type),o={type:a,name:s.name,size:Wq(a),location:n};e[s.name]=o}}return e}function uNt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=Yq(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:jq(h,s.size)}}return e}function lNt(r,t){var e=vV(r,r.VERTEX_SHADER,t.vertexSrc),i=vV(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||PSt(r,n,e,i),t.attributeData=hNt(n,r),t.uniformData=uNt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:jq(h.type,h.size)}}var u=new oNt(n,o);return u}var fNt=0,HT={textureCount:0,uboCount:0},cNt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=fNt++}return r.prototype.systemCheck=function(){if(!$St())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(HT.textureCount=0,HT.uboCount=0,this.syncUniformGroup(t.uniformGroup,HT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=BSt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,HT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=aNt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=lNt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function dNt(r,t){return t===void 0&&(t=[]),t[Ee.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.ADD]=[r.ONE,r.ONE],t[Ee.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.NONE]=[0,0],t[Ee.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Ee.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ee.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Ee.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Ee.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Ee.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Ee.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Ee.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Ee.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Ee.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Ee.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var pNt=0,vNt=1,yNt=2,mNt=3,_Nt=4,gNt=5,xNt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ee.NONE,this._blendEq=!1,this.map=[],this.map[pNt]=this.setBlend,this.map[vNt]=this.setOffset,this.map[yNt]=this.setCullFace,this.map[mNt]=this.setDepthTest,this.map[_Nt]=this.setFrontFace,this.map[gNt]=this.setDepthMask,this.checks=[],this.defaultState=new LB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=dNt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),bNt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==NU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function TNt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Le.UNSIGNED_BYTE]=(e={},e[Dt.RGBA]=r.RGBA8,e[Dt.RGB]=r.RGB8,e[Dt.RG]=r.RG8,e[Dt.RED]=r.R8,e[Dt.RGBA_INTEGER]=r.RGBA8UI,e[Dt.RGB_INTEGER]=r.RGB8UI,e[Dt.RG_INTEGER]=r.RG8UI,e[Dt.RED_INTEGER]=r.R8UI,e[Dt.ALPHA]=r.ALPHA,e[Dt.LUMINANCE]=r.LUMINANCE,e[Dt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Le.BYTE]=(i={},i[Dt.RGBA]=r.RGBA8_SNORM,i[Dt.RGB]=r.RGB8_SNORM,i[Dt.RG]=r.RG8_SNORM,i[Dt.RED]=r.R8_SNORM,i[Dt.RGBA_INTEGER]=r.RGBA8I,i[Dt.RGB_INTEGER]=r.RGB8I,i[Dt.RG_INTEGER]=r.RG8I,i[Dt.RED_INTEGER]=r.R8I,i),t[Le.UNSIGNED_SHORT]=(n={},n[Dt.RGBA_INTEGER]=r.RGBA16UI,n[Dt.RGB_INTEGER]=r.RGB16UI,n[Dt.RG_INTEGER]=r.RG16UI,n[Dt.RED_INTEGER]=r.R16UI,n[Dt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Le.SHORT]=(s={},s[Dt.RGBA_INTEGER]=r.RGBA16I,s[Dt.RGB_INTEGER]=r.RGB16I,s[Dt.RG_INTEGER]=r.RG16I,s[Dt.RED_INTEGER]=r.R16I,s),t[Le.UNSIGNED_INT]=(a={},a[Dt.RGBA_INTEGER]=r.RGBA32UI,a[Dt.RGB_INTEGER]=r.RGB32UI,a[Dt.RG_INTEGER]=r.RG32UI,a[Dt.RED_INTEGER]=r.R32UI,a[Dt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Le.INT]=(o={},o[Dt.RGBA_INTEGER]=r.RGBA32I,o[Dt.RGB_INTEGER]=r.RGB32I,o[Dt.RG_INTEGER]=r.RG32I,o[Dt.RED_INTEGER]=r.R32I,o),t[Le.FLOAT]=(h={},h[Dt.RGBA]=r.RGBA32F,h[Dt.RGB]=r.RGB32F,h[Dt.RG]=r.RG32F,h[Dt.RED]=r.R32F,h[Dt.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Le.HALF_FLOAT]=(u={},u[Dt.RGBA]=r.RGBA16F,u[Dt.RGB]=r.RGB16F,u[Dt.RG]=r.RG16F,u[Dt.RED]=r.R16F,u),t[Le.UNSIGNED_SHORT_5_6_5]=(l={},l[Dt.RGB]=r.RGB565,l),t[Le.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Dt.RGBA]=r.RGBA4,f),t[Le.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Dt.RGBA]=r.RGB5_A1,c),t[Le.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Dt.RGBA]=r.RGB10_A2,d[Dt.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Le.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Dt.RGB]=r.R11F_G11F_B10F,v),t[Le.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Dt.RGB]=r.RGB9_E5,_),t[Le.UNSIGNED_INT_24_8]=(m={},m[Dt.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Le.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Dt.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Le.UNSIGNED_BYTE]=(b={},b[Dt.RGBA]=r.RGBA,b[Dt.RGB]=r.RGB,b[Dt.ALPHA]=r.ALPHA,b[Dt.LUMINANCE]=r.LUMINANCE,b[Dt.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Le.UNSIGNED_SHORT_5_6_5]=(S={},S[Dt.RGB]=r.RGB,S),T[Le.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Dt.RGBA]=r.RGBA,R),T[Le.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Dt.RGBA]=r.RGBA,U),T),L}var XN=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Le.UNSIGNED_BYTE,this.internalFormat=Dt.RGBA,this.samplerType=0}return r}(),ENt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Mn,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=TNt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new XN(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new XN(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==_1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new XN(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Le.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==_1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Rd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=SU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Rd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Th.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Th.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Th.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Th.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),VN=new xa,wNt=function(r){vr(t,r);function t(e,i){e===void 0&&(e=Yg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new xn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=nSt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=FB.create(MU({width:s.width,height:s.height},o));return VN.tx=-s.x,VN.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:VN,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Yg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),INt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),RNt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new INt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){vr(t,r);function t(e){var i=r.call(this,Yg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Zv({projectionMatrix:new xa},!0),i.addSystem(ZSt,"mask").addSystem(ISt,"context").addSystem(xNt,"state").addSystem(cNt,"shader").addSystem(ENt,"texture").addSystem(RNt,"buffer").addSystem(SSt,"geometry").addSystem(ASt,"framebuffer").addSystem(QSt,"scissor").addSystem(JSt,"stencil").addSystem(tNt,"projection").addSystem(bNt,"textureGC").addSystem(ESt,"filter").addSystem(eNt,"renderTexture").addSystem(wSt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=xi.HIGH?this.multisample=xi.HIGH:i>=xi.MEDIUM?this.multisample=xi.MEDIUM:i>=xi.LOW?this.multisample=xi.LOW:this.multisample=xi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof FB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(wNt);var CNt=function(){function r(){this.texArray=null,this.blend=0,this.type=qg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),ANt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),SNt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),NNt=function(r){vr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=LB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Zh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=DSt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new CNt);for(;i.length<s;)i.push(new ANt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Mn._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Mn._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new SNt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(Vq),PNt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Zv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new MB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new xa,default:this.defaultGroupCache[t]};return new qq(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),ONt=function(r){vr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Ss(null,e,!1),i._indexBuffer=new Ss(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Le.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Le.FLOAT).addAttribute("aColor",i._buffer,4,!0,Le.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Le.FLOAT).addIndex(i._indexBuffer),i}return t}(UB),xV=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,bV=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FNt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:xV,fragment:bV,geometryClass:ONt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){vr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new PNt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(NNt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return xV},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return bV},enumerable:!1,configurable:!0}),r}();FNt.create();/*!
 * @pixi/filter-fxaa - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var BU=function(r,t){return BU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},BU(r,t)};function UNt(r,t){BU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var MNt=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,LNt=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;(function(r){UNt(t,r);function t(){return r.call(this,MNt,LNt)||this}return t})(Kq);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Jh;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(Jh||(Jh={}));var Zg;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(Zg||(Zg={}));var x1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(x1||(x1={}));var we;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(we||(we={}));var Qg;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Qg||(Qg={}));var $t;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})($t||($t={}));var hd;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(hd||(hd={}));var Be;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Be||(Be={}));var b1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(b1||(b1={}));var Eh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(Eh||(Eh={}));var GU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(GU||(GU={}));var Cd;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Cd||(Cd={}));var $l;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})($l||($l={}));var Fu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Fu||(Fu={}));var kU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(kU||(kU={}));var Co;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Co||(Co={}));var ms;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(ms||(ms={}));var bi;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(bi||(bi={}));var Xo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Xo||(Xo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var T1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(T1||(T1={}));var jN=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Bp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new jN(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=T1.NORMAL),this._addListener(new jN(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=T1.NORMAL),this._addListener(new jN(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var BNt=Math.PI*2,DU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(DU||(DU={}));var bn=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=DU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),el=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),XT=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),ba=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new el;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new el;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(BNt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Pc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Oc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Fc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Uc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$U=[],Jq=[],VT=Math.sign;function GNt(){for(var r=0;r<16;r++){var t=[];$U.push(t);for(var e=0;e<16;e++)for(var i=VT(Pc[r]*Pc[e]+Fc[r]*Oc[e]),n=VT(Oc[r]*Pc[e]+Uc[r]*Oc[e]),s=VT(Pc[r]*Fc[e]+Fc[r]*Uc[e]),a=VT(Oc[r]*Fc[e]+Uc[r]*Uc[e]),o=0;o<16;o++)if(Pc[o]===i&&Oc[o]===n&&Fc[o]===s&&Uc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new ba;h.set(Pc[r],Oc[r],Fc[r],Uc[r],0,0),Jq.push(h)}}GNt();var kr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Pc[r]},uY:function(r){return Oc[r]},vX:function(r){return Fc[r]},vY:function(r){return Uc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return $U[r][t]},sub:function(r,t){return $U[r][kr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?kr.S:kr.N:Math.abs(t)*2<=Math.abs(r)?r>0?kr.E:kr.W:t>0?r>0?kr.SE:kr.SW:r>0?kr.NE:kr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=Jq[kr.inv(t)];n.tx=e,n.ty=i,r.append(n)}};(function(){function r(){this.worldTransform=new ba,this.localTransform=new ba,this.position=new XT(this.onChange,this,0,0),this.scale=new XT(this.onChange,this,1,1),this.pivot=new XT(this.onChange,this,0,0),this.skew=new XT(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r})();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?Jh.WEBGL:Jh.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var HU=[];function tK(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=HU.length-1;n>=0;--n){var s=HU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var XU=function(r,t){return XU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},XU(r,t)};function yr(r,t){XU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var VU=function(){return VU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},VU.apply(this,arguments)};function kNt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var Jg=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),BB=function(r){yr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===$l.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(Jg),DNt={scaleMode:Eh.NEAREST,format:$t.RGBA,alphaMode:$l.NPM},Ln=function(r){yr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof Jg)&&(e=tK(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||$t.RGBA,n.type=d||Be.UNSIGNED_BYTE,n.target=v||hd.TEXTURE_2D,n.alphaMode=s!==void 0?s:$l.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new BB(e,{width:i,height:n}),o=e instanceof Float32Array?Be.FLOAT:Be.UNSIGNED_BYTE;return new t(a,Object.assign(DNt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),eK=function(r){yr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new Ln;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Jg?this.addResourceAt(e[n],n):this.addResourceAt(tK(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(Jg),$Nt=function(r){yr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=hd.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(eK),Hl=function(r){yr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===$l.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(Jg),rK=function(r){yr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Hl),HNt=function(r){yr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=hd.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=hd.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=hd.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(eK),iK=function(r){yr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Hl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===$l.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Hl),XNt=function(r){yr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Hl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Hl),VNt=function(r){yr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Hl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Bp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Bp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Bp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Bp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Bp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Bp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Hl),jNt=function(r){yr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Hl);HU.push(iK,jNt,rK,VNt,XNt,BB,HNt,$Nt);var zNt=function(r){yr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===$l.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(BB),jU=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=bi.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new Ln(null,{scaleMode:Eh.NEAREST,resolution:1,mipmap:Cd.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Ln(new zNt(null,{width:this.width,height:this.height}),{scaleMode:Eh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Cd.OFF,format:$t.DEPTH_COMPONENT,type:Be.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),nK=function(r){yr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:bi.NONE,i=r.call(this,null,e)||this,i.mipmap=Cd.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new jU(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(Ln),sK=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=kr.add(i,kr.NW),this.x0=h+a*kr.uX(i),this.y0=u+o*kr.uY(i),i=kr.add(i,2),this.x1=h+a*kr.uX(i),this.y1=u+o*kr.uY(i),i=kr.add(i,2),this.x2=h+a*kr.uX(i),this.y2=u+o*kr.uY(i),i=kr.add(i,2),this.x3=h+a*kr.uX(i),this.y3=u+o*kr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),TV=new sK,tu=function(r){yr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new bn(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=TV,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new el(o.x,o.y):new el(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===TV&&(this._uvs=new sK),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new Ln(e,i)),h.baseTexture.cacheId=a,Ln.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(Ln.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new Ln(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof iK&&(o.url=i);var h=new t(a);return n||(n=i),Ln.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(Ln.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function WNt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new tu(new Ln(new rK(r)))}function bI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}tu.EMPTY=new tu(new Ln);bI(tu.EMPTY);bI(tu.EMPTY.baseTexture);tu.WHITE=WNt();bI(tu.WHITE);bI(tu.WHITE.baseTexture);var GB=function(r){yr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new nK(e))},t}(tu),YNt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=bi.NONE);var n=new nK(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new GB(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=bi.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||bi.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),EV=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Be.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),qNt=0,Ns=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=qNt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Xo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Xo.ELEMENT_ARRAY_BUFFER:Xo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),KNt={Float32Array,Uint32Array,Int32Array,Uint8Array};function ZNt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new KNt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var wV={5126:4,5123:2,5121:1},QNt=0,JNt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},kB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=QNt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ns||(e instanceof Array&&(e=new Float32Array(e)),e=new Ns(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new EV(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Ns||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ns(t)),t.type=Xo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Ns,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*wV[s.type]/4),s.buffer=0}for(i.data=ZNt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ns(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new EV(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Xo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new JNt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Ns(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Xo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*wV[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),t2t=function(r){yr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(kB),e2t=function(r){yr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ns(e.vertices),e.uvBuffer=new Ns(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(kB),r2t=0,Jv=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=r2t++,this.static=!!e,this.ubo=!!i,t instanceof Ns?(this.buffer=t,this.buffer.type=Xo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ns(new Float32Array(1)),this.buffer.type=Xo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),i2t=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=bi.NONE,this.sourceFrame=new bn,this.destinationFrame=new bn,this.bindingSourceFrame=new bn,this.bindingDestinationFrame=new bn,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),jT=[new el,new el,new el,new el],zN=new ba,n2t=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new YNt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new t2t,this.quadUv=new e2t,this.tempRect=new bn,this.activeState={},this.globalUniforms=new Jv({outputFrame:new bn,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new i2t,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(zN.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Fu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Fu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Fu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Fu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Fu.CLEAR||e===Fu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Qg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Qg.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(ba.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=bi.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||bi.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=jT[0],n=jT[1],s=jT[2],a=jT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?zN.copyFrom(s):zN.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),aK=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),s2t=function(){function r(t){this.renderer=t,this.emptyRenderer=new aK(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),IV=0,a2t=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=IV++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=IV++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=Jh.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),o2t=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=bi.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),h2t=new bn,u2t=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new jU(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new bn,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===Jh.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=x1.COLOR|x1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new o2t(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=bi.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=bi.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new jU(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=h2t,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new bn},r.prototype.destroy=function(){this.renderer=null},r}(),WN={5126:4,5123:2,5121:1},l2t=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===Jh.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*WN[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*WN[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*WN[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),f2t=function(){function r(t){t===void 0&&(t=null),this.type=ms.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ms.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function RV(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function CV(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function c2t(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||CV(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||CV(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function YN(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function oK(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return YN(2*t);case"bvec3":return YN(3*t);case"bvec4":return YN(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var hK={},Km=hK;function d2t(){if(Km===hK||Km&&Km.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=Jh.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Km=t}return Km}var zT;function p2t(){if(!zT){zT=Co.MEDIUM;var r=d2t();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);zT=t.precision?Co.HIGH:Co.MEDIUM}}return zT}function AV(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===Co.HIGH&&e!==Co.HIGH&&(i=Co.MEDIUM),"precision "+i+` float;
`+r}else if(e!==Co.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var v2t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function uK(r){return v2t[r]}var WT=null,SV={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function lK(r,t){if(!WT){var e=Object.keys(SV);WT={};for(var i=0;i<e.length;++i){var n=e[i];WT[r[n]]=SV[n]}}return WT[t]}var ty=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],y2t={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},m2t={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function _2t(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<ty.length;o++)if(ty[o].test(n,s)){e.push(ty[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?y2t:m2t,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var g2t=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function x2t(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function b2t(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=g2t.replace(/%forloop%/gi,x2t(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var Zm;function T2t(){if(typeof Zm=="boolean")return Zm;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");Zm=r({a:"b"},"a","b")===!0}catch{Zm=!1}return Zm}var E2t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,w2t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,I2t=0,YT={},DB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=I2t++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),YT[i]?(YT[i]++,i+="-"+YT[i]):YT[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=AV(this.vertexSrc,A.PRECISION_VERTEX,Co.HIGH),this.fragmentSrc=AV(this.fragmentSrc,A.PRECISION_FRAGMENT,p2t())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return w2t},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return E2t},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),fK=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Jv?this.uniformGroup=e:this.uniformGroup=new Jv(e):this.uniformGroup=new Jv({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=DB.from(t,e);return new r(n,i)},r}(),qN=0,KN=1,ZN=2,QN=3,JN=4,t2=5,$B=function(){function r(){this.data=0,this.blendMode=we.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<qN)},set:function(t){!!(this.data&1<<qN)!==t&&(this.data^=1<<qN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<KN)},set:function(t){!!(this.data&1<<KN)!==t&&(this.data^=1<<KN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<ZN)},set:function(t){!!(this.data&1<<ZN)!==t&&(this.data^=1<<ZN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<QN)},set:function(t){!!(this.data&1<<QN)!==t&&(this.data^=1<<QN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<t2)},set:function(t){!!(this.data&1<<t2)!==t&&(this.data^=1<<t2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<JN)},set:function(t){!!(this.data&1<<JN)!==t&&(this.data^=1<<JN)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==we.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),R2t=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,C2t=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,cK=function(r){yr(t,r);function t(e,i,n){var s=this,a=DB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new $B,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return R2t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return C2t},enumerable:!1,configurable:!0}),t}(fK),A2t=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,S2t=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,NV=new ba,N2t=function(){function r(t,e){this._texture=t,this.mapCoord=new ba,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&(NV.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(NV));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),P2t=function(r){yr(t,r);function t(e){var i=this,n=new ba;return i=r.call(this,A2t,S2t)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new N2t(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(cK),O2t=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new f2t;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case ms.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case ms.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case ms.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case ms.SCISSOR:this.renderer.scissor.pop();break;case ms.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case ms.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=ms.SPRITE;return}if(t.type=ms.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=ms.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new P2t(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),dK=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),F2t=function(r){yr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(dK),U2t=function(r){yr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(dK),M2t=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ba,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Af=new bn,Qm=new bn,L2t=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new bn,this.destinationFrame=new bn,this.viewportFrame=new bn}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Af.width=t.frame.width,Af.height=t.frame.height,e=Af),i||(Qm.x=t.frame.x,Qm.y=t.frame.y,Qm.width=e.width,Qm.height=e.height,i=Qm),a=s.framebuffer):(o=n.resolution,e||(Af.width=n.screen.width,Af.height=n.screen.height,e=Af),i||(i=Af,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function B2t(r,t,e,i,n){e.buffer.update(n)}var G2t={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},pK={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function k2t(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=pK[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function D2t(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function $2t(r,t){if(!r.autoManage)return{size:0,syncFunc:B2t};for(var e=D2t(r.uniforms,t),i=k2t(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<ty.length;c++){var d=ty[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",ty[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=uK(h.data.type),_=Math.max(pK[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=G2t[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var H2t=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function X2t(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=lK(t,s.type),o={type:a,name:s.name,size:uK(a),location:n};e[s.name]=o}}return e}function V2t(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=lK(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:oK(h,s.size)}}return e}function j2t(r,t){var e=RV(r,r.VERTEX_SHADER,t.vertexSrc),i=RV(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||c2t(r,n,e,i),t.attributeData=X2t(n,r),t.uniformData=V2t(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:oK(h.type,h.size)}}var u=new H2t(n,o);return u}var z2t=0,qT={textureCount:0,uboCount:0},W2t=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=z2t++}return r.prototype.systemCheck=function(){if(!T2t())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(qT.textureCount=0,qT.uboCount=0,this.syncUniformGroup(t.uniformGroup,qT)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=_2t(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,qT,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=$2t(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=j2t(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function Y2t(r,t){return t===void 0&&(t=[]),t[we.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.ADD]=[r.ONE,r.ONE],t[we.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.NONE]=[0,0],t[we.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[we.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[we.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[we.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[we.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[we.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[we.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[we.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[we.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[we.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[we.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var q2t=0,K2t=1,Z2t=2,Q2t=3,J2t=4,tPt=5,ePt=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=we.NONE,this._blendEq=!1,this.map=[],this.map[q2t]=this.setBlend,this.map[K2t]=this.setOffset,this.map[Z2t]=this.setCullFace,this.map[Q2t]=this.setDepthTest,this.map[J2t]=this.setFrontFace,this.map[tPt]=this.setDepthMask,this.checks=[],this.defaultState=new $B,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=Y2t(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),rPt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==kU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function iPt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Be.UNSIGNED_BYTE]=(e={},e[$t.RGBA]=r.RGBA8,e[$t.RGB]=r.RGB8,e[$t.RG]=r.RG8,e[$t.RED]=r.R8,e[$t.RGBA_INTEGER]=r.RGBA8UI,e[$t.RGB_INTEGER]=r.RGB8UI,e[$t.RG_INTEGER]=r.RG8UI,e[$t.RED_INTEGER]=r.R8UI,e[$t.ALPHA]=r.ALPHA,e[$t.LUMINANCE]=r.LUMINANCE,e[$t.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Be.BYTE]=(i={},i[$t.RGBA]=r.RGBA8_SNORM,i[$t.RGB]=r.RGB8_SNORM,i[$t.RG]=r.RG8_SNORM,i[$t.RED]=r.R8_SNORM,i[$t.RGBA_INTEGER]=r.RGBA8I,i[$t.RGB_INTEGER]=r.RGB8I,i[$t.RG_INTEGER]=r.RG8I,i[$t.RED_INTEGER]=r.R8I,i),t[Be.UNSIGNED_SHORT]=(n={},n[$t.RGBA_INTEGER]=r.RGBA16UI,n[$t.RGB_INTEGER]=r.RGB16UI,n[$t.RG_INTEGER]=r.RG16UI,n[$t.RED_INTEGER]=r.R16UI,n[$t.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Be.SHORT]=(s={},s[$t.RGBA_INTEGER]=r.RGBA16I,s[$t.RGB_INTEGER]=r.RGB16I,s[$t.RG_INTEGER]=r.RG16I,s[$t.RED_INTEGER]=r.R16I,s),t[Be.UNSIGNED_INT]=(a={},a[$t.RGBA_INTEGER]=r.RGBA32UI,a[$t.RGB_INTEGER]=r.RGB32UI,a[$t.RG_INTEGER]=r.RG32UI,a[$t.RED_INTEGER]=r.R32UI,a[$t.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Be.INT]=(o={},o[$t.RGBA_INTEGER]=r.RGBA32I,o[$t.RGB_INTEGER]=r.RGB32I,o[$t.RG_INTEGER]=r.RG32I,o[$t.RED_INTEGER]=r.R32I,o),t[Be.FLOAT]=(h={},h[$t.RGBA]=r.RGBA32F,h[$t.RGB]=r.RGB32F,h[$t.RG]=r.RG32F,h[$t.RED]=r.R32F,h[$t.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Be.HALF_FLOAT]=(u={},u[$t.RGBA]=r.RGBA16F,u[$t.RGB]=r.RGB16F,u[$t.RG]=r.RG16F,u[$t.RED]=r.R16F,u),t[Be.UNSIGNED_SHORT_5_6_5]=(l={},l[$t.RGB]=r.RGB565,l),t[Be.UNSIGNED_SHORT_4_4_4_4]=(f={},f[$t.RGBA]=r.RGBA4,f),t[Be.UNSIGNED_SHORT_5_5_5_1]=(c={},c[$t.RGBA]=r.RGB5_A1,c),t[Be.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[$t.RGBA]=r.RGB10_A2,d[$t.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Be.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[$t.RGB]=r.R11F_G11F_B10F,v),t[Be.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[$t.RGB]=r.RGB9_E5,_),t[Be.UNSIGNED_INT_24_8]=(m={},m[$t.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Be.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[$t.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Be.UNSIGNED_BYTE]=(b={},b[$t.RGBA]=r.RGBA,b[$t.RGB]=r.RGB,b[$t.ALPHA]=r.ALPHA,b[$t.LUMINANCE]=r.LUMINANCE,b[$t.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Be.UNSIGNED_SHORT_5_6_5]=(S={},S[$t.RGB]=r.RGB,S),T[Be.UNSIGNED_SHORT_4_4_4_4]=(R={},R[$t.RGBA]=r.RGBA,R),T[Be.UNSIGNED_SHORT_5_5_5_1]=(U={},U[$t.RGBA]=r.RGBA,U),T),L}var e2=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Be.UNSIGNED_BYTE,this.internalFormat=$t.RGBA,this.samplerType=0}return r}(),nPt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ln,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=iPt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new e2(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new e2(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==b1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new e2(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Be.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==b1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Cd.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=GU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Cd.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Eh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Eh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Eh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Eh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),r2=new ba,sPt=function(r){yr(t,r);function t(e,i){e===void 0&&(e=Zg.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new bn(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=kNt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=GB.create(VU({width:s.width,height:s.height},o));return r2.tx=-s.x,r2.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:r2,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Zg.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),aPt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),oPt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new aPt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){yr(t,r);function t(e){var i=r.call(this,Zg.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Jv({projectionMatrix:new ba},!0),i.addSystem(O2t,"mask").addSystem(a2t,"context").addSystem(ePt,"state").addSystem(W2t,"shader").addSystem(nPt,"texture").addSystem(oPt,"buffer").addSystem(l2t,"geometry").addSystem(u2t,"framebuffer").addSystem(F2t,"scissor").addSystem(U2t,"stencil").addSystem(M2t,"projection").addSystem(rPt,"textureGC").addSystem(n2t,"filter").addSystem(L2t,"renderTexture").addSystem(s2t,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=bi.HIGH?this.multisample=bi.HIGH:i>=bi.MEDIUM?this.multisample=bi.MEDIUM:i>=bi.LOW?this.multisample=bi.LOW:this.multisample=bi.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof GB?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(sPt);var hPt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,uPt=hPt,lPt=function(){function r(){this.texArray=null,this.blend=0,this.type=Qg.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),fPt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),cPt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),dPt=function(r){yr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=$B.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===Jh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=b2t(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new lPt);for(;i.length<s;)i.push(new fPt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++Ln._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;Ln._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new cPt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(aK),pPt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Jv.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new DB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ba,default:this.defaultGroupCache[t]};return new fK(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),vPt=function(r){yr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Ns(null,e,!1),i._indexBuffer=new Ns(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Be.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Be.FLOAT).addAttribute("aColor",i._buffer,4,!0,Be.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Be.FLOAT).addIndex(i._indexBuffer),i}return t}(kB),PV=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,OV=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,yPt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:PV,fragment:OV,geometryClass:vPt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){yr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new pPt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(dPt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return PV},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return OV},enumerable:!1,configurable:!0}),r}();yPt.create();/*!
 * @pixi/filter-noise - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var zU=function(r,t){return zU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},zU(r,t)};function mPt(r,t){zU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var _Pt=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;(function(r){mPt(t,r);function t(e,i){e===void 0&&(e=.5),i===void 0&&(i=Math.random());var n=r.call(this,uPt,_Pt,{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=i,n}return Object.defineProperty(t.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e},enumerable:!1,configurable:!0}),t})(cK);/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var eu;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(eu||(eu={}));var t0;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(t0||(t0={}));var E1;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(E1||(E1={}));var Ie;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(Ie||(Ie={}));var e0;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(e0||(e0={}));var Ht;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ht||(Ht={}));var ud;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(ud||(ud={}));var Ge;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(Ge||(Ge={}));var w1;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(w1||(w1={}));var wh;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(wh||(wh={}));var WU;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(WU||(WU={}));var Ad;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(Ad||(Ad={}));var Xl;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Xl||(Xl={}));var Uu;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Uu||(Uu={}));var YU;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(YU||(YU={}));var Ao;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(Ao||(Ao={}));var _s;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(_s||(_s={}));var Ti;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(Ti||(Ti={}));var Vo;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Vo||(Vo={}));/*!
 * @pixi/ticker - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.TARGET_FPMS=.06;var I1;(function(r){r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY"})(I1||(I1={}));var i2=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=n}return r.prototype.match=function(t,e){return e===void 0&&(e=null),this.fn===t&&this.context===e},r.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},r.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},r.prototype.destroy=function(t){t===void 0&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},r}(),Gp=function(){function r(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new i2(null,null,1/0),this.deltaMS=1/A.TARGET_FPMS,this.elapsedMS=1/A.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return r.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(t,e,i){return i===void 0&&(i=I1.NORMAL),this._addListener(new i2(t,e,i))},r.prototype.addOnce=function(t,e,i){return i===void 0&&(i=I1.NORMAL),this._addListener(new i2(t,e,i,!0))},r.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this},r.prototype.remove=function(t,e){for(var i=this._head.next;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(r.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},r.prototype.update=function(t){t===void 0&&(t=performance.now());var e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*A.TARGET_FPMS;for(var n=this._head,s=n.next;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(r.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,A.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(t===0)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(r,"shared",{get:function(){if(!r._shared){var t=r._shared=new r;t.autoStart=!0,t._protected=!0}return r._shared},enumerable:!1,configurable:!0}),Object.defineProperty(r,"system",{get:function(){if(!r._system){var t=r._system=new r;t.autoStart=!0,t._protected=!0}return r._system},enumerable:!1,configurable:!0}),r}();/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gPt=Math.PI*2,xPt=180/Math.PI,bPt=Math.PI/180,qU;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(qU||(qU={}));var si=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=qU.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Ih=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),y_=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),Gs=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Ih;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Ih;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(gPt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Mc=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Lc=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Bc=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gc=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],KU=[],vK=[],KT=Math.sign;function TPt(){for(var r=0;r<16;r++){var t=[];KU.push(t);for(var e=0;e<16;e++)for(var i=KT(Mc[r]*Mc[e]+Bc[r]*Lc[e]),n=KT(Lc[r]*Mc[e]+Gc[r]*Lc[e]),s=KT(Mc[r]*Bc[e]+Bc[r]*Gc[e]),a=KT(Lc[r]*Bc[e]+Gc[r]*Gc[e]),o=0;o<16;o++)if(Mc[o]===i&&Lc[o]===n&&Bc[o]===s&&Gc[o]===a){t.push(o);break}}for(var r=0;r<16;r++){var h=new Gs;h.set(Mc[r],Lc[r],Bc[r],Gc[r],0,0),vK.push(h)}}TPt();var Dr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(r){return Mc[r]},uY:function(r){return Lc[r]},vX:function(r){return Bc[r]},vY:function(r){return Gc[r]},inv:function(r){return r&8?r&15:-r&7},add:function(r,t){return KU[r][t]},sub:function(r,t){return KU[r][Dr.inv(t)]},rotate180:function(r){return r^4},isVertical:function(r){return(r&3)===2},byDirection:function(r,t){return Math.abs(r)*2<=Math.abs(t)?t>=0?Dr.S:Dr.N:Math.abs(t)*2<=Math.abs(r)?r>0?Dr.E:Dr.W:t>0?r>0?Dr.SE:Dr.SW:r>0?Dr.NE:Dr.NW},matrixAppendRotationInv:function(r,t,e,i){e===void 0&&(e=0),i===void 0&&(i=0);var n=vK[Dr.inv(t)];n.tx=e,n.ty=i,r.append(n)}},EPt=function(){function r(){this.worldTransform=new Gs,this.localTransform=new Gs,this.position=new y_(this.onChange,this,0,0),this.scale=new y_(this.onChange,this,1,1),this.pivot=new y_(this.onChange,this,0,0),this.skew=new y_(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/core - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.PREFER_ENV=Kr.any?eu.WEBGL:eu.WEBGL2;A.STRICT_TEXTURE_CACHE=!1;var ZU=[];function yK(r,t){if(!r)return null;var e="";if(typeof r=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(var n=ZU.length-1;n>=0;--n){var s=ZU[n];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var QU=function(r,t){return QU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},QU(r,t)};function mr(r,t){QU(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var JU=function(){return JU=Object.assign||function(t){for(var e=arguments,i,n=1,s=arguments.length;n<s;n++){i=e[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},JU.apply(this,arguments)};function wPt(r,t){var e={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&t.indexOf(i)<0&&(e[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)t.indexOf(i[n])<0&&(e[i[n]]=r[i[n]]);return e}var r0=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new J("setRealSize"),this.onUpdate=new J("update"),this.onError=new J("onError")}return r.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},r.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},r.prototype.resize=function(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(r.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),r.prototype.update=function(){this.destroyed||this.onUpdate.emit()},r.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),r.prototype.style=function(t,e,i){return!1},r.prototype.dispose=function(){},r.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},r.test=function(t,e){return!1},r}(),HB=function(r){mr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;if(!a||!o)throw new Error("BufferResource width or height invalid");return n=r.call(this,a,o)||this,n.data=e,n}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Xl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array},t}(r0),IPt={scaleMode:wh.NEAREST,format:Ht.RGBA,alphaMode:Xl.NPM},ji=function(r){mr(t,r);function t(e,i){e===void 0&&(e=null),i===void 0&&(i=null);var n=r.call(this)||this;i=i||{};var s=i.alphaMode,a=i.mipmap,o=i.anisotropicLevel,h=i.scaleMode,u=i.width,l=i.height,f=i.wrapMode,c=i.format,d=i.type,v=i.target,_=i.resolution,m=i.resourceOptions;return e&&!(e instanceof r0)&&(e=yK(e,m),e.internal=!0),n.resolution=_||A.RESOLUTION,n.width=Math.round((u||0)*n.resolution)/n.resolution,n.height=Math.round((l||0)*n.resolution)/n.resolution,n._mipmap=a!==void 0?a:A.MIPMAP_TEXTURES,n.anisotropicLevel=o!==void 0?o:A.ANISOTROPIC_LEVEL,n._wrapMode=f||A.WRAP_MODE,n._scaleMode=h!==void 0?h:A.SCALE_MODE,n.format=c||Ht.RGBA,n.type=d||Ge.UNSIGNED_BYTE,n.target=v||ud.TEXTURE_2D,n.alphaMode=s!==void 0?s:Xl.UNPACK,n.uid=Jt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=u>0&&l>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Object.defineProperty(t.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mipmap",{get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),t.prototype.setStyle=function(e,i){var n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this},t.prototype.setSize=function(e,i,n){return n=n||this.resolution,this.setRealSize(e*n,i*n,n)},t.prototype.setRealSize=function(e,i,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},t.prototype._refreshPOT=function(){this.isPowerOfTwo=er(this.realWidth)&&er(this.realHeight)},t.prototype.setResolution=function(e){var i=this.resolution;return i===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*i)/e,this.height=Math.round(this.height*i)/e,this.emit("update",this)),this._refreshPOT(),this)},t.prototype.setResource=function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this},t.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},t.prototype.onError=function(e){this.emit("error",this,e)},t.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete xt[this.cacheId],delete dt[this.cacheId],this.cacheId=null),this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.castToBaseTexture=function(){return this},t.from=function(e,i,n){n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=xt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return h||(h=new t(e,i),h.cacheId=a,t.addToCache(h,a)),h},t.fromBuffer=function(e,i,n,s){e=e||new Float32Array(i*n*4);var a=new HB(e,{width:i,height:n}),o=e instanceof Float32Array?Ge.FLOAT:Ge.UNSIGNED_BYTE;return new t(a,Object.assign(IPt,s||{width:i,height:n,type:o}))},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),xt[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),xt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=xt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete xt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)delete xt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},t._globalBatch=0,t}(re),mK=function(r){mr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height;n=r.call(this,a,o)||this,n.items=[],n.itemDirtyIds=[];for(var h=0;h<e;h++){var u=new ji;n.items.push(u),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return t.prototype.initFromArray=function(e,i){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof r0?this.addResourceAt(e[n],n):this.addResourceAt(yK(e[n],i),n))},t.prototype.dispose=function(){for(var e=0,i=this.length;e<i;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(e,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[i].setResource(e),this},t.prototype.bind=function(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");r.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},t.prototype.unbind=function(e){r.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),n=i.map(function(s){return s.load()});return this._load=Promise.all(n).then(function(){var s=e.items[0],a=s.realWidth,o=s.realHeight;return e.resize(a,o),Promise.resolve(e)}),this._load},t}(r0),RPt=function(r){mr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h,u;return Array.isArray(e)?(h=e,u=e.length):u=e,n=r.call(this,u,{width:a,height:o})||this,h&&n.initFromArray(h,i),n}return t.prototype.addBaseTextureAt=function(e,i){if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ud.TEXTURE_2D_ARRAY},t.prototype.upload=function(e,i,n){var s=this,a=s.length,o=s.itemDirtyIds,h=s.items,u=e.gl;n.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,i.format,n.type,null);for(var l=0;l<a;l++){var f=h[l];o[l]<f.dirtyId&&(o[l]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,l,f.resource.width,f.resource.height,1,i.format,n.type,f.resource.source))}return!0},t}(mK),Vl=function(r){mr(t,r);function t(e){var i=this,n=e,s=n.naturalWidth||n.videoWidth||n.width,a=n.naturalHeight||n.videoHeight||n.height;return i=r.call(this,s,a)||this,i.source=e,i.noSubImage=!1,i}return t.crossOrigin=function(e,i,n){n===void 0&&i.indexOf("data:")!==0?e.crossOrigin=Xs(i):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")},t.prototype.upload=function(e,i,n,s){var a=e.gl,o=i.realWidth,h=i.realHeight;return s=s||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Xl.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&n.width===o&&n.height===h?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,n.type,s):(n.width=o,n.height=h,a.texImage2D(i.target,0,n.internalFormat,i.format,n.type,s)),!0},t.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(i,n),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(r0),_K=function(r){mr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){var i=self.OffscreenCanvas;return i&&e instanceof i?!0:self.HTMLCanvasElement&&e instanceof HTMLCanvasElement},t}(Vl),CPt=function(r){mr(t,r);function t(e,i){var n=this,s=i||{},a=s.width,o=s.height,h=s.autoLoad,u=s.linkBaseTexture;if(e&&e.length!==t.SIDES)throw new Error("Invalid length. Got "+e.length+", expected 6");n=r.call(this,6,{width:a,height:o})||this;for(var l=0;l<t.SIDES;l++)n.items[l].target=ud.TEXTURE_CUBE_MAP_POSITIVE_X+l;return n.linkBaseTexture=u!==!1,e&&n.initFromArray(e,i),h!==!1&&n.load(),n}return t.prototype.bind=function(e){r.prototype.bind.call(this,e),e.target=ud.TEXTURE_CUBE_MAP},t.prototype.addBaseTextureAt=function(e,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ud.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},t.prototype.upload=function(e,i,n){for(var s=this.itemDirtyIds,a=0;a<t.SIDES;a++){var o=this.items[a];s[a]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[a]=o.dirtyId):s[a]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),s[a]=-1))}return!0},t.test=function(e){return Array.isArray(e)&&e.length===t.SIDES},t.SIDES=6,t}(mK),gK=function(r){mr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;Vl.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=r.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(i.createBitmap!==void 0?i.createBitmap:A.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,n.bitmap=null,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(e){var i=this;return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise(function(n,s){var a=i.source;i.url=a.src;var o=function(){i.destroyed||(a.onload=null,a.onerror=null,i.resize(a.width,a.height),i._load=null,i.createBitmap?n(i.process()):n(i))};a.complete&&a.src?o():(a.onload=o,a.onerror=function(h){s(h),i.onError.emit(h)})}),this._load)},t.prototype.process=function(){var e=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(a){return a.blob()}).then(function(a){return n(a,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===Xl.UNPACK?"premultiply":"none"})}).then(function(a){return e.destroyed?Promise.reject():(e.bitmap=a,e.update(),e._process=null,Promise.resolve(e))}),this._process},t.prototype.upload=function(e,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return r.prototype.upload.call(this,e,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(r.prototype.upload.call(this,e,i,n,this.bitmap),!this.preserveBitmap){var s=!0,a=i._glTextures;for(var o in a){var h=a[o];if(h!==n&&h.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,r.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t.test=function(e){return typeof e=="string"||e instanceof HTMLImageElement},t}(Vl),APt=function(r){mr(t,r);function t(e,i){var n=this;return i=i||{},n=r.call(this,document.createElement("canvas"))||this,n._width=0,n._height=0,n.svg=e,n.scale=i.scale||1,n._overrideWidth=i.width,n._overrideHeight=i.height,n._resolve=null,n._crossorigin=i.crossorigin,n._load=null,i.autoLoad!==!1&&n.load(),n}return t.prototype.load=function(){var e=this;return this._load?this._load:(this._load=new Promise(function(i){if(e._resolve=function(){e.resize(e.source.width,e.source.height),i(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},t.prototype._loadSvg=function(){var e=this,i=new Image;Vl.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(n){e._resolve&&(i.onerror=null,e.onError.emit(n))},i.onload=function(){if(e._resolve){var n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var a=n*e.scale,o=s*e.scale;(e._overrideWidth||e._overrideHeight)&&(a=e._overrideWidth||e._overrideHeight/s*n,o=e._overrideHeight||e._overrideWidth/n*s),a=Math.round(a),o=Math.round(o);var h=e.source;h.width=a,h.height=o,h._pixiId="canvas_"+Jt(),h.getContext("2d").drawImage(i,0,0,n,s,0,0,a,o),e._resolve(),e._resolve=null}}},t.getSize=function(e){var i=t.SVG_SIZE.exec(e),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n},t.prototype.dispose=function(){r.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},t.test=function(e,i){return i==="svg"||typeof e=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(e)||typeof e=="string"&&t.SVG_XML.test(e)},t.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t}(Vl),SPt=function(r){mr(t,r);function t(e,i){var n=this;if(i=i||{},!(e instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);var a=e[0].src||e[0];Vl.crossOrigin(s,a,i.crossorigin);for(var o=0;o<e.length;++o){var h=document.createElement("source"),u=e[o],l=u.src,f=u.mime;l=l||e[o];var c=l.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||t.MIME_TYPES[d]||"video/"+d,h.src=l,h.type=f,s.appendChild(h)}e=s}return n=r.call(this,e)||this,n.noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=i.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=i.autoPlay!==!1,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),i.autoLoad!==!1&&n.load(),n}return t.prototype.update=function(e){if(!this.destroyed){var i=Gp.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(r.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},t.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){e.valid?n(e):(e._resolve=n,i.load())}),this._load},t.prototype._onError=function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)},t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&e.paused===!1&&e.ended===!1&&e.readyState>2},t.prototype._isSourceReady=function(){var e=this.source;return e.readyState===3||e.readyState===4},t.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Gp.shared.add(this.update,this),this._isConnectedToTicker=!0)},t.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Gp.shared.remove(this.update,this),this._isConnectedToTicker=!1)},t.prototype._onCanPlay=function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(e.videoWidth,e.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()},t.prototype.dispose=function(){this._isConnectedToTicker&&(Gp.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),r.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Gp.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Gp.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)},enumerable:!1,configurable:!0}),t.test=function(e,i){return self.HTMLVideoElement&&e instanceof HTMLVideoElement||t.TYPES.indexOf(i)>-1},t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t}(Vl),NPt=function(r){mr(t,r);function t(e){return r.call(this,e)||this}return t.test=function(e){return!!self.createImageBitmap&&e instanceof ImageBitmap},t}(Vl);ZU.push(gK,NPt,_K,SPt,APt,HB,CPt,RPt);var PPt=function(r){mr(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.upload=function(e,i,n){var s=e.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Xl.UNPACK);var a=i.realWidth,o=i.realHeight;return n.width===a&&n.height===o?s.texSubImage2D(i.target,0,0,0,a,o,i.format,n.type,this.data):(n.width=a,n.height=o,s.texImage2D(i.target,0,n.internalFormat,a,o,0,i.format,n.type,this.data)),!0},t}(HB),tM=function(){function r(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new J("disposeFramebuffer"),this.multisample=Ti.NONE}return Object.defineProperty(r.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),r.prototype.addColorTexture=function(t,e){return t===void 0&&(t=0),this.colorTextures[t]=e||new ji(null,{scaleMode:wh.NEAREST,resolution:1,mipmap:Ad.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ji(new PPt(null,{width:this.width,height:this.height}),{scaleMode:wh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ad.OFF,format:Ht.DEPTH_COMPONENT,type:Ge.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},r.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var n=this.colorTextures[i],s=n.resolution;n.setSize(t/s,e/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},r}(),xK=function(r){mr(t,r);function t(e){var i=this;if(typeof e=="number"){var n=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];e={width:n,height:s,scaleMode:a,resolution:o}}return e.width=e.width||100,e.height=e.height||100,e.multisample=e.multisample!==void 0?e.multisample:Ti.NONE,i=r.call(this,null,e)||this,i.mipmap=Ad.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new tM(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return t.prototype.resize=function(e,i){this.framebuffer.resize(e*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},t.prototype.dispose=function(){this.framebuffer.dispose(),r.prototype.dispose.call(this)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},t}(ji),bK=function(){function r(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return r.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var a=t.width/2/n,o=t.height/2/s,h=t.x/n+a,u=t.y/s+o;i=Dr.add(i,Dr.NW),this.x0=h+a*Dr.uX(i),this.y0=u+o*Dr.uY(i),i=Dr.add(i,2),this.x1=h+a*Dr.uX(i),this.y1=u+o*Dr.uY(i),i=Dr.add(i,2),this.x2=h+a*Dr.uX(i),this.y2=u+o*Dr.uY(i),i=Dr.add(i,2),this.x3=h+a*Dr.uX(i),this.y3=u+o*Dr.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},r.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},r}(),FV=new bK,Tn=function(r){mr(t,r);function t(e,i,n,s,a,o){var h=r.call(this)||this;if(h.noFrame=!1,i||(h.noFrame=!0,i=new si(0,0,1,1)),e instanceof t&&(e=e.baseTexture),h.baseTexture=e,h._frame=i,h.trim=s,h.valid=!1,h._uvs=FV,h.uvMatrix=null,h.orig=n||i,h._rotate=Number(a||0),a===!0)h._rotate=2;else if(h._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Ih(o.x,o.y):new Ih(0,0),h._updateID=0,h.textureCacheIds=[],e.valid?h.noFrame?e.valid&&h.onBaseTextureUpdated(e):h.frame=i:e.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&e.on("update",h.onBaseTextureUpdated,h),h}return t.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},t.prototype.onBaseTextureUpdated=function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},t.prototype.destroy=function(e){if(this.baseTexture){if(e){var i=this.baseTexture.resource;i&&i.url&&dt[i.url]&&t.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){var e=this._frame.clone(),i=this._frame===this.orig?e:this.orig.clone(),n=new t(this.baseTexture,!this.noFrame&&e,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=e),n},t.prototype.updateUvs=function(){this._uvs===FV&&(this._uvs=new bK),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.from=function(e,i,n){i===void 0&&(i={}),n===void 0&&(n=A.STRICT_TEXTURE_CACHE);var s=typeof e=="string",a=null;if(s)a=e;else{if(!e._pixiId){var o=i&&i.pixiIdPrefix||"pixiid";e._pixiId=o+"_"+Jt()}a=e._pixiId}var h=dt[a];if(s&&n&&!h)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return h||(i.resolution||(i.resolution=Ze(e)),h=new t(new ji(e,i)),h.baseTexture.cacheId=a,ji.addToCache(h.baseTexture,a),t.addToCache(h,a)),h},t.fromURL=function(e,i){var n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=t.from(e,Object.assign({resourceOptions:n},i),!1),a=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):a.load().then(function(){return Promise.resolve(s)})},t.fromBuffer=function(e,i,n,s){return new t(ji.fromBuffer(e,i,n,s))},t.fromLoader=function(e,i,n,s){var a=new ji(e,Object.assign({scaleMode:A.SCALE_MODE,resolution:Ze(i)},s)),o=a.resource;o instanceof gK&&(o.url=i);var h=new t(a);return n||(n=i),ji.addToCache(h.baseTexture,n),t.addToCache(h,n),n!==i&&(ji.addToCache(h.baseTexture,i),t.addToCache(h,i)),h.baseTexture.valid?Promise.resolve(h):new Promise(function(u){h.baseTexture.once("loaded",function(){return u(h)})})},t.addToCache=function(e,i){i&&(e.textureCacheIds.indexOf(i)===-1&&e.textureCacheIds.push(i),dt[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),dt[i]=e)},t.removeFromCache=function(e){if(typeof e=="string"){var i=dt[e];if(i){var n=i.textureCacheIds.indexOf(e);return n>-1&&i.textureCacheIds.splice(n,1),delete dt[e],i}}else if(e&&e.textureCacheIds){for(var s=0;s<e.textureCacheIds.length;++s)dt[e.textureCacheIds[s]]===e&&delete dt[e.textureCacheIds[s]];return e.textureCacheIds.length=0,e}return null},Object.defineProperty(t.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var i=e.x,n=e.y,s=e.width,a=e.height,o=i+s>this.baseTexture.width,h=n+a>this.baseTexture.height;if(o||h){var u=o&&h?"and":"or",l="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,f="Y: "+n+" + "+a+" = "+(n+a)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(l+" "+u+" "+f))}this.valid=s&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),t.prototype.castToBaseTexture=function(){return this.baseTexture},t}(re);function OPt(){var r=document.createElement("canvas");r.width=16,r.height=16;var t=r.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,16,16),new Tn(new ji(new _K(r)))}function TI(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}Tn.EMPTY=new Tn(new ji);TI(Tn.EMPTY);TI(Tn.EMPTY.baseTexture);Tn.WHITE=OPt();TI(Tn.WHITE);TI(Tn.WHITE.baseTexture);var g0=function(r){mr(t,r);function t(e,i){var n=r.call(this,e,i)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Object.defineProperty(t.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i,n){n===void 0&&(n=!0);var s=this.baseTexture.resolution,a=Math.round(e*s)/s,o=Math.round(i*s)/s;this.valid=a>0&&o>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(a,o),this.updateUvs()},t.prototype.setResolution=function(e){var i=this.baseTexture;i.resolution!==e&&(i.setResolution(e),this.resize(i.width,i.height,!1))},t.create=function(e){for(var i=arguments,n=[],s=1;s<arguments.length;s++)n[s-1]=i[s];return typeof e=="number"&&(zt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),e={width:e,height:n[0],scaleMode:n[1],resolution:n[2]}),new t(new xK(e))},t}(Tn),FPt=function(){function r(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return r.prototype.createTexture=function(t,e,i){i===void 0&&(i=Ti.NONE);var n=new xK(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new g0(n)},r.prototype.getOptimalTexture=function(t,e,i,n){i===void 0&&(i=1),n===void 0&&(n=Ti.NONE);var s;t=Math.ceil(t*i),e=Math.ceil(e*i),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ee(t),e=ee(e),s=((t&65535)<<16|e&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);var a=this.texturePool[s].pop();return a||(a=this.createTexture(t,e,n)),a.filterPoolKey=s,a.setResolution(i),a},r.prototype.getFilterTexture=function(t,e,i){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ti.NONE);return n.filterFrame=t.filterFrame,n},r.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},r.prototype.returnFilterTexture=function(t){this.returnTexture(t)},r.prototype.clear=function(t){if(t=t!==!1,t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},r.prototype.setScreenSize=function(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(var e in this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},r.SCREEN_KEY=-1,r}(),UV=function(){function r(t,e,i,n,s,a,o){e===void 0&&(e=0),i===void 0&&(i=!1),n===void 0&&(n=Ge.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=s,this.start=a,this.instance=o}return r.prototype.destroy=function(){this.buffer=null},r.from=function(t,e,i,n,s){return new r(t,e,i,n,s)},r}(),UPt=0,Ps=function(){function r(t,e,i){e===void 0&&(e=!0),i===void 0&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=UPt++,this.disposeRunner=new J("disposeBuffer")}return r.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(r.prototype,"index",{get:function(){return this.type===Vo.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?Vo.ELEMENT_ARRAY_BUFFER:Vo.ARRAY_BUFFER},enumerable:!1,configurable:!0}),r.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new r(t)},r}(),MPt={Float32Array,Uint32Array,Int32Array,Uint8Array};function LPt(r,t){for(var e=0,i=0,n={},s=0;s<r.length;s++)i+=t[s],e+=r[s].length;for(var a=new ArrayBuffer(e*4),o=null,h=0,s=0;s<r.length;s++){var u=t[s],l=r[s],f=nr(l);n[f]||(n[f]=new MPt[f](a)),o=n[f];for(var c=0;c<l.length;c++){var d=(c/u|0)*i+h,v=c%u;o[d+v]=l[c]}h+=u}return new Float32Array(a)}var MV={5126:4,5123:2,5121:1},BPt=0,GPt={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},XB=function(){function r(t,e){t===void 0&&(t=[]),e===void 0&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=BPt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new J("disposeGeometry"),this.refCount=0}return r.prototype.addAttribute=function(t,e,i,n,s,a,o,h){if(i===void 0&&(i=0),n===void 0&&(n=!1),h===void 0&&(h=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ps||(e instanceof Array&&(e=new Float32Array(e)),e=new Ps(e));var u=t.split("|");if(u.length>1){for(var l=0;l<u.length;l++)this.addAttribute(u[l],e,i,n,s);return this}var f=this.buffers.indexOf(e);return f===-1&&(this.buffers.push(e),f=this.buffers.length-1),this.attributes[t]=new UV(f,i,n,s,a,o,h),this.instanced=this.instanced||h,this},r.prototype.getAttribute=function(t){return this.attributes[t]},r.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},r.prototype.addIndex=function(t){return t instanceof Ps||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ps(t)),t.type=Vo.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.indexOf(t)===-1&&this.buffers.push(t),this},r.prototype.getIndex=function(){return this.indexBuffer},r.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var t=[],e=[],i=new Ps,n;for(n in this.attributes){var s=this.attributes[n],a=this.buffers[s.buffer];t.push(a.data),e.push(s.size*MV[s.type]/4),s.buffer=0}for(i.data=LPt(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},r.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t],i=this.buffers[e.buffer];return i.data.length/(e.stride/4||e.size)}return 0},r.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},r.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},r.prototype.clone=function(){for(var t=new r,e=0;e<this.buffers.length;e++)t.buffers[e]=new Ps(this.buffers[e].data.slice(0));for(var e in this.attributes){var i=this.attributes[e];t.attributes[e]=new UV(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Vo.ELEMENT_ARRAY_BUFFER),t},r.merge=function(t){for(var e=new r,i=[],n=[],s=[],a,o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)n[h]=n[h]||0,n[h]+=a.buffers[h].data.length,s[h]=0}for(var o=0;o<a.buffers.length;o++)i[o]=new GPt[nr(a.buffers[o].data)](n[o]),e.buffers[o]=new Ps(i[o]);for(var o=0;o<t.length;o++){a=t[o];for(var h=0;h<a.buffers.length;h++)i[h].set(a.buffers[h].data,s[h]),s[h]+=a.buffers[h].data.length}if(e.attributes=a.attributes,a.indexBuffer){e.indexBuffer=e.buffers[a.buffers.indexOf(a.indexBuffer)],e.indexBuffer.type=Vo.ELEMENT_ARRAY_BUFFER;for(var u=0,l=0,f=0,c=0,o=0;o<a.buffers.length;o++)if(a.buffers[o]!==a.indexBuffer){c=o;break}for(var o in a.attributes){var d=a.attributes[o];(d.buffer|0)===c&&(l+=d.size*MV[d.type]/4)}for(var o=0;o<t.length;o++){for(var v=t[o].indexBuffer.data,h=0;h<v.length;h++)e.indexBuffer.data[h+f]+=u;u+=t[o].buffers[c].data.length/l,f+=v.length}}return e},r}(),kPt=function(r){mr(t,r);function t(){var e=r.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return t}(XB),DPt=function(r){mr(t,r);function t(){var e=r.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ps(e.vertices),e.uvBuffer=new Ps(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return t.prototype.map=function(e,i){var n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+i.width/e.width,this.uvs[3]=s,this.uvs[4]=n+i.width/e.width,this.uvs[5]=s+i.height/e.height,this.uvs[6]=n,this.uvs[7]=s+i.height/e.height,n=i.x,s=i.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+i.width,this.vertices[3]=s,this.vertices[4]=n+i.width,this.vertices[5]=s+i.height,this.vertices[6]=n,this.vertices[7]=s+i.height,this.invalidate(),this},t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},t}(XB),$Pt=0,ey=function(){function r(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$Pt++,this.static=!!e,this.ubo=!!i,t instanceof Ps?(this.buffer=t,this.buffer.type=Vo.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Ps(new Float32Array(1)),this.buffer.type=Vo.UNIFORM_BUFFER,this.autoManage=!0))}return r.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},r.prototype.add=function(t,e,i){if(!this.ubo)this.uniforms[t]=new r(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},r.from=function(t,e,i){return new r(t,e,i)},r.uboFrom=function(t,e){return new r(t,e??!0,!0)},r}(),HPt=function(){function r(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ti.NONE,this.sourceFrame=new si,this.destinationFrame=new si,this.bindingSourceFrame=new si,this.bindingDestinationFrame=new si,this.filters=[],this.transform=null}return r.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},r}(),ZT=[new Ih,new Ih,new Ih,new Ih],n2=new Gs,XPt=function(){function r(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new FPt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new kPt,this.quadUv=new DPt,this.tempRect=new si,this.activeState={},this.globalUniforms=new ey({outputFrame:new si,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return r.prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new HPt,a=this.renderer.renderTexture,o=e[0].resolution,h=e[0].multisample,u=e[0].padding,l=e[0].autoFit,f=e[0].legacy,c=1;c<e.length;c++){var d=e[c];o=Math.min(o,d.resolution),h=Math.min(h,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,l=l&&d.autoFit,f=f||d.legacy}if(n.length===1&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(s),s.resolution=o,s.multisample=h,s.legacy=f,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(u),l){var v=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(n2.copyFrom(i.projection.transform).invert(),v),s.sourceFrame.fit(v)}this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,o,h),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)},r.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var s=n.inputSize,a=n.inputPixel,o=n.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],a[0]=Math.round(s[0]*e.resolution),a[1]=Math.round(s[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*s[2]-.5*a[2],o[3]=e.sourceFrame.height*s[3]-.5*a[3],e.legacy){var h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var u=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,u.renderTexture,Uu.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,f=this.getOptimalFilterTexture(l.width,l.height,e.resolution);f.filterFrame=l.filterFrame;var c=0;for(c=0;c<i.length-1;++c){c===1&&e.multisample>1&&(f=this.getOptimalFilterTexture(l.width,l.height,e.resolution),f.filterFrame=l.filterFrame),i[c].apply(this,l,f,Uu.CLEAR,e);var d=l;l=f,f=d}i[c].apply(this,l,u.renderTexture,Uu.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(f)}e.clear(),this.statePool.push(e)},r.prototype.bindAndClear=function(t,e){e===void 0&&(e=Uu.CLEAR);var i=this.renderer,n=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,n.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=s.stateId&1||this.forceClear;(e===Uu.CLEAR||e===Uu.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)},r.prototype.applyFilter=function(t,e,i,n){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(e0.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(e0.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,s=i.destinationFrame,a=e._texture.orig,o=t.set(s.width,0,0,s.height,n.x,n.y),h=e.worldTransform.copyTo(Gs.TEMP_MATRIX);return h.invert(),o.prepend(h),o.scale(1/a.width,1/a.height),o.translate(e.anchor.x,e.anchor.y),o},r.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(t,e,i,n){return i===void 0&&(i=1),n===void 0&&(n=Ti.NONE),this.texturePool.getOptimalTexture(t,e,i,n)},r.prototype.getFilterTexture=function(t,e,i){if(typeof t=="number"){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||Ti.NONE);return s.filterFrame=t.filterFrame,s},r.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r.prototype.transformAABB=function(t,e){var i=ZT[0],n=ZT[1],s=ZT[2],a=ZT[3];i.set(e.left,e.top),n.set(e.left,e.bottom),s.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(n,n),t.apply(s,s),t.apply(a,a);var o=Math.min(i.x,n.x,s.x,a.x),h=Math.min(i.y,n.y,s.y,a.y),u=Math.max(i.x,n.x,s.x,a.x),l=Math.max(i.y,n.y,s.y,a.y);e.x=o,e.y=h,e.width=u-o,e.height=l-h},r.prototype.roundFrame=function(t,e,i,n,s){if(s){var a=s.a,o=s.b,h=s.c,u=s.d;if((Math.abs(o)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}s=s?n2.copyFrom(s):n2.identity(),s.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(e),this.transformAABB(s.invert(),t)},r}(),TK=function(){function r(t){this.renderer=t}return r.prototype.flush=function(){},r.prototype.destroy=function(){this.renderer=null},r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.render=function(t){},r}(),VPt=function(){function r(t){this.renderer=t,this.emptyRenderer=new TK(t),this.currentRenderer=this.emptyRenderer}return r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},r.prototype.boundArray=function(t,e,i,n){for(var s=t.elements,a=t.ids,o=t.count,h=0,u=0;u<o;u++){var l=s[u],f=l._batchLocation;if(f>=0&&f<n&&e[f]===l){a[u]=f;continue}for(;h<n;){var c=e[h];if(c&&c._batchEnabled===i&&c._batchLocation===h){h++;continue}a[u]=h,l._batchLocation=h,e[h]=l;break}}},r.prototype.destroy=function(){this.renderer=null},r}(),LV=0,jPt=function(){function r(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=LV++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=LV++,this.renderer.runners.contextChange.emit(t)},r.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},r.prototype.createContext=function(t,e){var i;if(A.PREFER_ENV>=eu.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(),zPt=function(){function r(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ti.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return r}(),WPt=new si,YPt=function(){function r(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new tM(10,10),this.msaaSamples=null}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new si,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;A.PREFER_ENV===eu.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(n){return e.drawBuffersWEBGL(n)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},r.prototype.bind=function(t,e,i){i===void 0&&(i=0);var n=this.gl;if(t){var s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=i),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a=0;a<t.colorTextures.length;a++){var o=t.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var h=e.width>>i,u=e.height>>i,l=h/e.width;this.setViewport(e.x*l,e.y*l,h,u)}else{var h=t.width>>i,u=t.height>>i;this.setViewport(0,0,h,u)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(t,e,i,n){var s=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),n=Math.round(n),(s.width!==i||s.height!==n||s.x!==t||s.y!==e)&&(s.x=t,s.y=e,s.width=i,s.height=n,this.gl.viewport(t,e,i,n))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(t,e,i,n,s){s===void 0&&(s=E1.COLOR|E1.DEPTH);var a=this.gl;a.clearColor(t,e,i,n),a.clear(s)},r.prototype.initFramebuffer=function(t){var e=this.gl,i=new zPt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},r.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,s=n.length;e.drawBuffers||(s=Math.min(s,1));for(var a=0;a<s;a++){var o=n[a],h=o.parentTextureArray||o;this.renderer.texture.bind(h,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},r.prototype.updateFramebuffer=function(t,e){var i=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures,a=s.length;i.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(i.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null);for(var o=[],h=0;h<a;h++){var u=s[h],l=u.parentTextureArray||u;this.renderer.texture.bind(l,0),!(h===0&&n.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+h,u.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+h))}if(o.length>1&&i.drawBuffers(o),t.depthTexture){var f=this.writeDepthTexture;if(f){var c=t.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,e)}}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.stencil)):n.stencil&&(i.deleteRenderbuffer(n.stencil),n.stencil=null)},r.prototype.canMultisampleFramebuffer=function(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture},r.prototype.detectSamples=function(t){var e=this.msaaSamples,i=Ti.NONE;if(t<=1||e===null)return i;for(var n=0;n<e.length;n++)if(e[n]<=t){i=e[n];break}return i===1&&(i=Ti.NONE),i},r.prototype.blit=function(t,e,i){var n=this,s=n.current,a=n.renderer,o=n.gl,h=n.CONTEXT_UID;if(a.context.webGLVersion===2&&s){var u=s.glFramebuffers[h];if(u){if(!t){if(!u.msaaBuffer)return;u.blitFramebuffer||(u.blitFramebuffer=new tM(s.width,s.height),u.blitFramebuffer.addColorTexture(0,s.colorTextures[0])),t=u.blitFramebuffer,t.width=s.width,t.height=s.height}e||(e=WPt,e.width=s.width,e.height=s.height),i||(i=e);var l=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR)}}},r.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&n.deleteRenderbuffer(i.msaaBuffer),i.stencil&&n.deleteRenderbuffer(i.stencil))}},r.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},r.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(!(!e||e.stencil)){t.stencil=!0;var i=t.width,n=t.height,s=this.gl,a=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,a),e.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,e.multisample,s.DEPTH24_STENCIL8,i,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,n),e.stencil=a,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,a)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new si},r.prototype.destroy=function(){this.renderer=null},r}(),s2={5126:4,5123:2,5121:1},qPt=function(){function r(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return r.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;A.PREFER_ENV===eu.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},t.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(e.webGLVersion!==2){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(s,a){return n.vertexAttribDivisorANGLE(s,a)},t.drawElementsInstanced=function(s,a,o,h,u){return n.drawElementsInstancedANGLE(s,a,o,h,u)},t.drawArraysInstanced=function(s,a,o,h){return n.drawArraysInstancedANGLE(s,a,o,h)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex},r.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);var a=n[e.program.id]||this.initGeometryVao(t,e,s);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var n=t.buffers[i];e.update(n)}},r.prototype.checkCompatibility=function(t,e){var i=t.attributes,n=e.attributeData;for(var s in n)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},r.prototype.getSignature=function(t,e){var i=t.attributes,n=e.attributeData,s=["g",t.id];for(var a in i)n[a]&&s.push(a);return s.join("-")},r.prototype.initGeometryVao=function(t,e,i){i===void 0&&(i=!0);var n=this.gl,s=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[s]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var h=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],l=u[h];if(l)return u[o.id]=l,l;var f=t.buffers,c=t.attributes,d={},v={};for(var _ in f)d[_]=0,v[_]=0;for(var _ in c)!c[_].size&&o.attributeData[_]?c[_].size=o.attributeData[_].size:c[_].size||console.warn("PIXI Geometry attribute '"+_+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[_].buffer]+=c[_].size*s2[c[_].type];for(var _ in c){var m=c[_],g=m.size;m.stride===void 0&&(d[m.buffer]===g*s2[m.type]?m.stride=0:m.stride=d[m.buffer]),m.start===void 0&&(m.start=v[m.buffer],v[m.buffer]+=g*s2[m.type])}l=n.createVertexArray(),n.bindVertexArray(l);for(var T=0;T<f.length;T++){var b=f[T];a.bind(b),i&&b._glBuffers[s].refCount++}return this.activateVao(t,o),this._activeVao=l,u[o.id]=l,u[h]=l,l},r.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,a=t.buffers,o=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(var h=0;h<a.length;h++){var u=a[h]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(a[h],e))}if(!e){for(var l in n)if(l[0]==="g"){var f=n[l];this._activeVao===f&&this.unbind(),s.deleteVertexArray(f)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},r.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);var h=null;for(var u in o){var l=o[u],f=a[l.buffer],c=f._glBuffers[n];if(e.attributeData[u]){h!==c&&(s.bind(f),h=c);var d=e.attributeData[u].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance)if(this.hasInstance)i.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},r.prototype.draw=function(t,e,i,n){var s=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,h=o===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;o===2||o===4&&this.canUseUInt32ElementIndex?a.instanced?s.drawElementsInstanced(t,e||a.indexBuffer.data.length,h,(i||0)*o,n||1):s.drawElements(t,e||a.indexBuffer.data.length,h,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?s.drawArraysInstanced(t,i,e||a.getSize(),n||1):s.drawArrays(t,i,e||a.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r.prototype.destroy=function(){this.renderer=null},r}(),KPt=function(){function r(t){t===void 0&&(t=null),this.type=_s.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=A.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return r.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=_s.NONE,this.autoDetect=!0),this._target=null},r.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},r}();function BV(r,t,e){var i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function GV(r,t){var e=r.getShaderSource(t).split(`
`).map(function(u,l){return l+": "+u}),i=r.getShaderInfoLog(t),n=i.split(`
`),s={},a=n.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!s[u]?(s[u]=!0,!0):!1}),o=[""];a.forEach(function(u){e[u-1]="%c"+e[u-1]+"%c",o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var h=e.join(`
`);o[0]=h,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,o),console.groupEnd()}function ZPt(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||GV(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||GV(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}function a2(r){for(var t=new Array(r),e=0;e<t.length;e++)t[e]=!1;return t}function EK(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return a2(2*t);case"bvec3":return a2(3*t);case"bvec4":return a2(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var wK={},Jm=wK;function QPt(){if(Jm===wK||Jm&&Jm.isContextLost()){var r=document.createElement("canvas"),t=void 0;A.PREFER_ENV>=eu.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Jm=t}return Jm}var QT;function JPt(){if(!QT){QT=Ao.MEDIUM;var r=QPt();if(r&&r.getShaderPrecisionFormat){var t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);QT=t.precision?Ao.HIGH:Ao.MEDIUM}}return QT}function kV(r,t,e){if(r.substring(0,9)!=="precision"){var i=t;return t===Ao.HIGH&&e!==Ao.HIGH&&(i=Ao.MEDIUM),"precision "+i+` float;
`+r}else if(e!==Ao.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var tOt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function IK(r){return tOt[r]}var JT=null,DV={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function RK(r,t){if(!JT){var e=Object.keys(DV);JT={};for(var i=0;i<e.length;++i){var n=e[i];JT[r[n]]=DV[n]}}return JT[t]}var ry=[{test:function(r){return r.type==="float"&&r.size===1},code:function(r){return`
            if(uv["`+r+'"] !== ud["'+r+`"].value)
            {
                ud["`+r+'"].value = uv["'+r+`"]
                gl.uniform1f(ud["`+r+'"].location, uv["'+r+`"])
            }
            `}},{test:function(r){return(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray},code:function(r){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+r+`"], t);

            if(ud["`+r+`"].value !== t)
            {
                ud["`+r+`"].value = t;
                gl.uniform1i(ud["`+r+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(r,t){return r.type==="mat3"&&r.size===1&&t.a!==void 0},code:function(r){return`
            gl.uniformMatrix3fv(ud["`+r+'"].location, false, uv["'+r+`"].toArray(true));
            `},codeUbo:function(r){return`
                var `+r+"_matrix = uv."+r+`.toArray(true);

                data[offset] = `+r+`_matrix[0];
                data[offset+1] = `+r+`_matrix[1];
                data[offset+2] = `+r+`_matrix[2];
        
                data[offset + 4] = `+r+`_matrix[3];
                data[offset + 5] = `+r+`_matrix[4];
                data[offset + 6] = `+r+`_matrix[5];
        
                data[offset + 8] = `+r+`_matrix[6];
                data[offset + 9] = `+r+`_matrix[7];
                data[offset + 10] = `+r+`_matrix[8];
            `}},{test:function(r,t){return r.type==="vec2"&&r.size===1&&t.x!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+r+`"].location, v.x, v.y);
                }`},codeUbo:function(r){return`
                v = uv.`+r+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(r){return r.type==="vec2"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+r+`"].location, v[0], v[1]);
                }
            `}},{test:function(r,t){return r.type==="vec4"&&r.size===1&&t.width!==void 0},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+r+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(r){return`
                    v = uv.`+r+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(r){return r.type==="vec4"&&r.size===1},code:function(r){return`
                cv = ud["`+r+`"].value;
                v = uv["`+r+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+r+`"].location, v[0], v[1], v[2], v[3])
                }`}}],eOt={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},rOt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function iOt(r,t){var e=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var i in r.uniforms){var n=t[i];if(!n){r.uniforms[i].group&&(r.uniforms[i].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+i+", '"+i+`');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.`+i+`, syncData);
                    `));continue}for(var s=r.uniforms[i],a=!1,o=0;o<ry.length;o++)if(ry[o].test(n,s)){e.push(ry[o].code(i,s)),a=!0;break}if(!a){var h=n.size===1?eOt:rOt,u=h[n.type].replace("location",'ud["'+i+'"].location');e.push(`
            cv = ud["`+i+`"].value;
            v = uv["`+i+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}var nOt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function sOt(r){for(var t="",e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+="if(test == "+e+".0){}");return t}function aOt(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var e=t.createShader(t.FRAGMENT_SHADER);;){var i=nOt.replace(/%forloop%/gi,sOt(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}var t_;function oOt(){if(typeof t_=="boolean")return t_;try{var r=new Function("param1","param2","param3","return param1[param2] === param3;");t_=r({a:"b"},"a","b")===!0}catch{t_=!1}return t_}var hOt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,uOt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,lOt=0,tE={},VB=function(){function r(t,e,i){i===void 0&&(i="pixi-shader"),this.id=lOt++,this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),tE[i]?(tE[i]++,i+="-"+tE[i]):tE[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=kV(this.vertexSrc,A.PRECISION_VERTEX,Ao.HIGH),this.fragmentSrc=kV(this.fragmentSrc,A.PRECISION_FRAGMENT,JPt())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(r,"defaultVertexSrc",{get:function(){return uOt},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return hOt},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=t+e,s=ir[n];return s||(ir[n]=s=new r(t,e,i)),s},r}(),CK=function(){function r(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof ey?this.uniformGroup=e:this.uniformGroup=new ey(e):this.uniformGroup=new ey({})}return r.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},r.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(r.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),r.from=function(t,e,i){var n=VB.from(t,e);return new r(n,i)},r}(),o2=0,h2=1,u2=2,l2=3,f2=4,c2=5,jB=function(){function r(){this.data=0,this.blendMode=Ie.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(r.prototype,"blend",{get:function(){return!!(this.data&1<<o2)},set:function(t){!!(this.data&1<<o2)!==t&&(this.data^=1<<o2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"offsets",{get:function(){return!!(this.data&1<<h2)},set:function(t){!!(this.data&1<<h2)!==t&&(this.data^=1<<h2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"culling",{get:function(){return!!(this.data&1<<u2)},set:function(t){!!(this.data&1<<u2)!==t&&(this.data^=1<<u2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthTest",{get:function(){return!!(this.data&1<<l2)},set:function(t){!!(this.data&1<<l2)!==t&&(this.data^=1<<l2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"depthMask",{get:function(){return!!(this.data&1<<c2)},set:function(t){!!(this.data&1<<c2)!==t&&(this.data^=1<<c2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<f2)},set:function(t){!!(this.data&1<<f2)!==t&&(this.data^=1<<f2)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==Ie.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},r.for2d=function(){var t=new r;return t.depthTest=!1,t.blend=!0,t},r}(),fOt=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,cOt=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,dOt=function(r){mr(t,r);function t(e,i,n){var s=this,a=VB.from(e||t.defaultVertexSrc,i||t.defaultFragmentSrc);return s=r.call(this,a,n)||this,s.padding=0,s.resolution=A.FILTER_RESOLUTION,s.multisample=A.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new jB,s}return t.prototype.apply=function(e,i,n,s,a){e.applyFilter(this,i,n,s)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultVertexSrc",{get:function(){return fOt},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return cOt},enumerable:!1,configurable:!0}),t}(CK),pOt=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,vOt=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,$V=new Gs,yOt=function(){function r(t,e){this._texture=t,this.mapCoord=new Gs,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}return Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),r.prototype.multiplyUvs=function(t,e){e===void 0&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var s=t[n],a=t[n+1];e[n]=s*i.a+a*i.c+i.tx,e[n+1]=s*i.b+a*i.d+i.ty}return e},r.prototype.update=function(t){var e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,s=e.trim;s&&($V.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append($V));var a=e.baseTexture,o=this.uClampFrame,h=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(e._frame.x+h+u)/a.width,o[1]=(e._frame.y+h+u)/a.height,o[2]=(e._frame.x+e._frame.width-h+u)/a.width,o[3]=(e._frame.y+e._frame.height-h+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&e.rotate===0,!0},r}(),mOt=function(r){mr(t,r);function t(e){var i=this,n=new Gs;return i=r.call(this,pOt,vOt)||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=n,i}return t.prototype.apply=function(e,i,n,s){var a=this.maskSprite,o=a._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new yOt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,i,n,s))},t}(dOt),_Ot=function(){function r(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return r.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},r.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var n=this.maskDataPool.pop()||new KPt;n.pooled=!0,n.maskObject=e,i=n}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=t,i.type){case _s.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case _s.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case _s.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i);break}},r.prototype.pop=function(t){var e=this.maskStack.pop();if(!(!e||e._target!==t)){switch(e.type){case _s.SCISSOR:this.renderer.scissor.pop();break;case _s.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case _s.SPRITE:this.popSpriteMask();break}e.reset(),e.pooled&&this.maskDataPool.push(e)}},r.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite){t.type=_s.SPRITE;return}if(t.type=_s.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a),s=Math.atan2(i.d,i.c);n=Math.round(n*(180/Math.PI)*100),s=Math.round(s*(180/Math.PI)*100)-n,n=(n%9e3+9e3)%9e3,s=(s%18e3+18e3)%18e3,n===0&&s===9e3&&(t.type=_s.SCISSOR)}},r.prototype.pushSpriteMask=function(t){var e,i,n=t.maskObject,s=t._target,a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new mOt(n)]);var o=this.renderer,h=o.renderTexture,u,l;if(h.current){var f=h.current;u=t.resolution||f.resolution,l=(e=t.multisample)!==null&&e!==void 0?e:f.multisample}else u=t.resolution||o.resolution,l=(i=t.multisample)!==null&&i!==void 0?i:o.multisample;a[0].resolution=u,a[0].multisample=l,a[0].maskSprite=n;var c=s.filterArea;s.filterArea=n.getBounds(!0),o.filter.push(s,a),s.filterArea=c,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r.prototype.destroy=function(){this.renderer=null},r}(),AK=function(){function r(t){this.renderer=t,this.maskStack=[],this.glConst=0}return r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==i&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){this.renderer=null,this.maskStack=null},r}(),gOt=function(r){mr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0},t.prototype.push=function(e){var i=e.maskObject;i.renderable=!0;var n=e._scissorRect,s=i.getBounds(!0),a=this.renderer.gl;i.renderable=!1,n?s.fit(n):a.enable(a.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=s,this._useCurrent()},t.prototype.pop=function(){var e=this.renderer.gl;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},t.prototype._useCurrent=function(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,i=this.renderer.renderTexture.current,n=this.renderer.projection,s=n.transform,a=n.sourceFrame,o=n.destinationFrame,h=i?i.resolution:this.renderer.resolution,u=o.width/a.width,l=o.height/a.height,f=((e.x-a.x)*u+o.x)*h,c=((e.y-a.y)*l+o.y)*h,d=e.width*u*h,v=e.height*l*h;s&&(f+=s.tx*h,c+=s.ty*h),i||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},t}(AK),xOt=function(r){mr(t,r);function t(e){var i=r.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return t.prototype.getStackLength=function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0},t.prototype.push=function(e){var i=e.maskObject,n=this.renderer.gl,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),e._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,s,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,this._useCurrent()},t.prototype.pop=function(e){var i=this.renderer.gl;this.getStackLength()===0?(i.disable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),i.clearStencil(0)):(i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(AK),bOt=function(){function r(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Gs,this.transform=null}return r.prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(t,e,i,n){var s=this.projectionMatrix,a=n?-1:1;s.identity(),s.a=1/e.width*2,s.d=a*(1/e.height*2),s.tx=-1-e.x*s.a,s.ty=-a-e.y*s.d},r.prototype.setTransform=function(t){},r.prototype.destroy=function(){this.renderer=null},r}(),Sf=new si,e_=new si,TOt=function(){function r(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new si,this.destinationFrame=new si,this.viewportFrame=new si}return r.prototype.bind=function(t,e,i){t===void 0&&(t=null);var n=this.renderer;this.current=t;var s,a,o;t?(s=t.baseTexture,o=s.resolution,e||(Sf.width=t.frame.width,Sf.height=t.frame.height,e=Sf),i||(e_.x=t.frame.x,e_.y=t.frame.y,e_.width=e.width,e_.height=e.height,i=e_),a=s.framebuffer):(o=n.resolution,e||(Sf.width=n.screen.width,Sf.height=n.screen.height,e=Sf),i||(i=Sf,i.width=e.width,i.height=e.height));var h=this.viewportFrame;h.x=i.x*o,h.y=i.y*o,h.width=i.width*o,h.height=i.height*o,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(a,h),this.renderer.projection.update(i,e,o,!a),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},r.prototype.clear=function(t,e){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.clearColor;var i=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==n.width||i.height!==n.height;if(s){var a=this.viewportFrame,o=a.x,h=a.y,u=a.width,l=a.height;o=Math.round(o),h=Math.round(h),u=Math.round(u),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,h,u,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),s&&this.renderer.scissor.pop()},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r.prototype.destroy=function(){this.renderer=null},r}();function EOt(r,t,e,i,n){e.buffer.update(n)}var wOt={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},SK={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function IOt(r){for(var t=r.map(function(h){return{data:h,offset:0,dataLen:0,dirty:0}}),e=0,i=0,n=0,s=0;s<t.length;s++){var a=t[s];if(e=SK[a.data.type],a.data.size>1&&(e=Math.max(e,16)*a.data.size),a.dataLen=e,i%e!==0&&i<16){var o=i%e%16;i+=o,n+=o}i+e>16?(n=Math.ceil(n/16)*16,a.offset=n,n+=e,i=e):(a.offset=n,i+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function ROt(r,t){var e=[];for(var i in r)t[i]&&e.push(t[i]);return e.sort(function(n,s){return n.index-s.index}),e}function COt(r,t){if(!r.autoManage)return{size:0,syncFunc:EOt};for(var e=ROt(r.uniforms,t),i=IOt(e),n=i.uboElements,s=i.size,a=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],o=0;o<n.length;o++){for(var h=n[o],u=r.uniforms[h.data.name],l=h.data.name,f=!1,c=0;c<ry.length;c++){var d=ry[c];if(d.codeUbo&&d.test(h.data,u)){a.push("offset = "+h.offset/4+";",ry[c].codeUbo(h.data.name,u)),f=!0;break}}if(!f)if(h.data.size>1){var v=IK(h.data.type),_=Math.max(SK[h.data.type]/16,1),m=v/_,g=(4-m%4)%4;a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;

                t = 0;

                for(var i=0; i < `+h.data.size*_+`; i++)
                {
                    for(var j = 0; j < `+m+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=wOt[h.data.type];a.push(`
                cv = ud.`+l+`.value;
                v = uv.`+l+`;
                offset = `+h.offset/4+`;
                `+T+`;
                `)}}return a.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}var AOt=function(){function r(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return r.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},r}();function SOt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var s=t.getActiveAttrib(r,n);if(!s.name.startsWith("gl_")){var a=RK(t,s.type),o={type:a,name:s.name,size:IK(a),location:n};e[s.name]=o}}return e}function NOt(r,t){for(var e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var s=t.getActiveUniform(r,n),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),h=RK(t,s.type);e[a]={name:a,index:n,type:h,size:s.size,isArray:o,value:EK(h,s.size)}}return e}function POt(r,t){var e=BV(r,r.VERTEX_SHADER,t.vertexSrc),i=BV(r,r.FRAGMENT_SHADER,t.fragmentSrc),n=r.createProgram();r.attachShader(n,e),r.attachShader(n,i),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||ZPt(r,n,e,i),t.attributeData=SOt(n,r),t.uniformData=NOt(n,r);var s=Object.keys(t.attributeData);s.sort(function(l,f){return l>f?1:-1});for(var a=0;a<s.length;a++)t.attributeData[s[a]].location=a,r.bindAttribLocation(n,a,s[a]);r.linkProgram(n),r.deleteShader(e),r.deleteShader(i);var o={};for(var a in t.uniformData){var h=t.uniformData[a];o[a]={location:r.getUniformLocation(n,a),value:EK(h.type,h.size)}}var u=new AOt(n,o);return u}var OOt=0,eE={textureCount:0,uboCount:0},FOt=function(){function r(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=OOt++}return r.prototype.systemCheck=function(){if(!oOt())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(t){this.gl=t,this.reset()},r.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(eE.textureCount=0,eE.uboCount=0,this.syncUniformGroup(t.uniformGroup,eE)),n},r.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},r.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},r.prototype.syncUniforms=function(t,e,i){var n=t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t);n(e.uniformData,t.uniforms,this.renderer,i)},r.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=iOt(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},r.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;var n=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),n(i.uniformData,t.uniforms,this.renderer,eE,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},r.prototype.createSyncBufferGroup=function(t,e,i){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var s=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=COt(t,this.shader.program.uniformData)),t.autoManage){var h=new Float32Array(o.size/4);t.buffer.update(h)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},r.prototype.getSignature=function(t,e,i){var n=t.uniforms,s=[i+"-"];for(var a in n)s.push(a),e[a]&&s.push(e[a].type);return s.join("-")},r.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateProgram=function(t){var e=this.gl,i=t.program,n=POt(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=n,n},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},r}();function UOt(r,t){return t===void 0&&(t=[]),t[Ie.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.ADD]=[r.ONE,r.ONE],t[Ie.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.NONE]=[0,0],t[Ie.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[Ie.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[Ie.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[Ie.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[Ie.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Ie.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[Ie.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[Ie.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[Ie.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[Ie.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[Ie.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}var MOt=0,LOt=1,BOt=2,GOt=3,kOt=4,DOt=5,$Ot=function(){function r(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ie.NONE,this._blendEq=!1,this.map=[],this.map[MOt]=this.setBlend,this.map[LOt]=this.setOffset,this.map[BOt]=this.setCullFace,this.map[GOt]=this.setDepthTest,this.map[kOt]=this.setFrontFace,this.map[DOt]=this.setDepthMask,this.checks=[],this.defaultState=new jB,this.defaultState.blend=!0}return r.prototype.contextChange=function(t){this.gl=t,this.blendModes=UOt(t),this.set(this.defaultState),this.reset()},r.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,t)},r.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},r.prototype.setBlend=function(t){this.updateCheck(r.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(t){this.updateCheck(r.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setDepthMask=function(t){this.gl.depthMask(t)},r.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},r.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},r.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)},r.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},r.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},r.prototype.destroy=function(){this.gl=null},r}(),HOt=function(){function r(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=A.GC_MAX_IDLE,this.checkCountMax=A.GC_MAX_CHECK_COUNT,this.mode=A.GC_MODE}return r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==YU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var s=e[n];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),e[n]=null,i=!0)}if(i){for(var a=0,n=0;n<e.length;n++)e[n]!==null&&(e[a++]=e[n]);e.length=a}},r.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},r.prototype.destroy=function(){this.renderer=null},r}();function XOt(r){var t,e,i,n,s,a,o,h,u,l,f,c,d,v,_,m,g,T,b,S,R,U,L;return"WebGL2RenderingContext"in self&&r instanceof self.WebGL2RenderingContext?L=(t={},t[Ge.UNSIGNED_BYTE]=(e={},e[Ht.RGBA]=r.RGBA8,e[Ht.RGB]=r.RGB8,e[Ht.RG]=r.RG8,e[Ht.RED]=r.R8,e[Ht.RGBA_INTEGER]=r.RGBA8UI,e[Ht.RGB_INTEGER]=r.RGB8UI,e[Ht.RG_INTEGER]=r.RG8UI,e[Ht.RED_INTEGER]=r.R8UI,e[Ht.ALPHA]=r.ALPHA,e[Ht.LUMINANCE]=r.LUMINANCE,e[Ht.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,e),t[Ge.BYTE]=(i={},i[Ht.RGBA]=r.RGBA8_SNORM,i[Ht.RGB]=r.RGB8_SNORM,i[Ht.RG]=r.RG8_SNORM,i[Ht.RED]=r.R8_SNORM,i[Ht.RGBA_INTEGER]=r.RGBA8I,i[Ht.RGB_INTEGER]=r.RGB8I,i[Ht.RG_INTEGER]=r.RG8I,i[Ht.RED_INTEGER]=r.R8I,i),t[Ge.UNSIGNED_SHORT]=(n={},n[Ht.RGBA_INTEGER]=r.RGBA16UI,n[Ht.RGB_INTEGER]=r.RGB16UI,n[Ht.RG_INTEGER]=r.RG16UI,n[Ht.RED_INTEGER]=r.R16UI,n[Ht.DEPTH_COMPONENT]=r.DEPTH_COMPONENT16,n),t[Ge.SHORT]=(s={},s[Ht.RGBA_INTEGER]=r.RGBA16I,s[Ht.RGB_INTEGER]=r.RGB16I,s[Ht.RG_INTEGER]=r.RG16I,s[Ht.RED_INTEGER]=r.R16I,s),t[Ge.UNSIGNED_INT]=(a={},a[Ht.RGBA_INTEGER]=r.RGBA32UI,a[Ht.RGB_INTEGER]=r.RGB32UI,a[Ht.RG_INTEGER]=r.RG32UI,a[Ht.RED_INTEGER]=r.R32UI,a[Ht.DEPTH_COMPONENT]=r.DEPTH_COMPONENT24,a),t[Ge.INT]=(o={},o[Ht.RGBA_INTEGER]=r.RGBA32I,o[Ht.RGB_INTEGER]=r.RGB32I,o[Ht.RG_INTEGER]=r.RG32I,o[Ht.RED_INTEGER]=r.R32I,o),t[Ge.FLOAT]=(h={},h[Ht.RGBA]=r.RGBA32F,h[Ht.RGB]=r.RGB32F,h[Ht.RG]=r.RG32F,h[Ht.RED]=r.R32F,h[Ht.DEPTH_COMPONENT]=r.DEPTH_COMPONENT32F,h),t[Ge.HALF_FLOAT]=(u={},u[Ht.RGBA]=r.RGBA16F,u[Ht.RGB]=r.RGB16F,u[Ht.RG]=r.RG16F,u[Ht.RED]=r.R16F,u),t[Ge.UNSIGNED_SHORT_5_6_5]=(l={},l[Ht.RGB]=r.RGB565,l),t[Ge.UNSIGNED_SHORT_4_4_4_4]=(f={},f[Ht.RGBA]=r.RGBA4,f),t[Ge.UNSIGNED_SHORT_5_5_5_1]=(c={},c[Ht.RGBA]=r.RGB5_A1,c),t[Ge.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[Ht.RGBA]=r.RGB10_A2,d[Ht.RGBA_INTEGER]=r.RGB10_A2UI,d),t[Ge.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[Ht.RGB]=r.R11F_G11F_B10F,v),t[Ge.UNSIGNED_INT_5_9_9_9_REV]=(_={},_[Ht.RGB]=r.RGB9_E5,_),t[Ge.UNSIGNED_INT_24_8]=(m={},m[Ht.DEPTH_STENCIL]=r.DEPTH24_STENCIL8,m),t[Ge.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[Ht.DEPTH_STENCIL]=r.DEPTH32F_STENCIL8,g),t):L=(T={},T[Ge.UNSIGNED_BYTE]=(b={},b[Ht.RGBA]=r.RGBA,b[Ht.RGB]=r.RGB,b[Ht.ALPHA]=r.ALPHA,b[Ht.LUMINANCE]=r.LUMINANCE,b[Ht.LUMINANCE_ALPHA]=r.LUMINANCE_ALPHA,b),T[Ge.UNSIGNED_SHORT_5_6_5]=(S={},S[Ht.RGB]=r.RGB,S),T[Ge.UNSIGNED_SHORT_4_4_4_4]=(R={},R[Ht.RGBA]=r.RGBA,R),T[Ge.UNSIGNED_SHORT_5_5_5_1]=(U={},U[Ht.RGBA]=r.RGBA,U),T),L}var d2=function(){function r(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ge.UNSIGNED_BYTE,this.internalFormat=Ht.RGBA,this.samplerType=0}return r}(),VOt=function(){function r(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ji,this.hasIntegerTextures=!1}return r.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=XOt(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new d2(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new d2(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},r.prototype.bind=function(t,e){e===void 0&&(e=0);var i=this.gl;if(t=t==null?void 0:t.castToBaseTexture(),t&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},r.prototype.unbind=function(t){var e=this,i=e.gl,n=e.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<n.length;s++)n[s]===t&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[s]=null)},r.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,n=e.hasIntegerTextures,s=e.CONTEXT_UID;if(n)for(var a=t-1;a>=0;--a){var o=i[a];if(o){var h=o._glTextures[s];h.samplerType!==w1.FLOAT&&this.renderer.texture.unbind(o)}}},r.prototype.initTexture=function(t){var e=new d2(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},r.prototype.initTextureType=function(t,e){var i,n;e.internalFormat=(n=(i=this.internalFormats[t.type])===null||i===void 0?void 0:i[t.format])!==null&&n!==void 0?n:t.format,this.webGLVersion===2&&t.type===Ge.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},r.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==w1.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,s=t.realHeight,a=i.gl;(e.width!==n||e.height!==s||e.dirtyId<0)&&(e.width=n,e.height=s,a.texImage2D(t.target,0,e.internalFormat,n,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},r.prototype.destroyTexture=function(t,e){var i=this.gl;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);n!==-1&&ce(this.managedTextures,n,1)}},r.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Ad.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=WU.CLAMP:e.wrapMode=t.wrapMode,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},r.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==Ad.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===wh.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===wh.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===wh.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===wh.LINEAR?i.LINEAR:i.NEAREST)},r.prototype.destroy=function(){this.renderer=null},r}(),p2=new Gs,jOt=function(r){mr(t,r);function t(e,i){e===void 0&&(e=t0.UNKNOWN);var n=r.call(this)||this;return i=Object.assign({},A.RENDER_OPTIONS,i),n.options=i,n.type=e,n.screen=new si(0,0,i.width,i.height),n.view=i.view||document.createElement("canvas"),n.resolution=i.resolution||A.RESOLUTION,n.useContextAlpha=i.useContextAlpha,n.autoDensity=!!i.autoDensity,n.preserveDrawingBuffer=i.preserveDrawingBuffer,n.clearBeforeRender=i.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=i.backgroundColor||n._backgroundColor,n.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(zt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=i.transparent,n.backgroundAlpha=i.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return t.prototype.initPlugins=function(e){for(var i in e)this.plugins[i]=new e[i](this)},Object.defineProperty(t.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),t.prototype.resize=function(e,i){this.view.width=Math.round(e*this.resolution),this.view.height=Math.round(i*this.resolution);var n=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=s+"px"),this.emit("resize",n,s)},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={}),typeof i=="number"&&(zt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:n,region:s});var a=i.region,o=wPt(i,["region"]);s=a||e.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var h=g0.create(JU({width:s.width,height:s.height},o));return p2.tx=-s.x,p2.ty=-s.y,this.render(e,{renderTexture:h,clear:!1,transform:p2,skipUpdateTransform:!!e.parent}),h},t.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=t0.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=$n(e),ai(e,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(e){this._backgroundColorRgba[3]=e},enumerable:!1,configurable:!0}),t}(re),zOt=function(){function r(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return r}(),WOt=function(){function r(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return r.prototype.destroy=function(){this.renderer=null},r.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},r.prototype.bind=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,s.buffer)},r.prototype.bindBufferBase=function(t,e){var i=this,n=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var a=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,a.buffer)}},r.prototype.bindBufferRange=function(t,e,i){var n=this,s=n.gl,a=n.CONTEXT_UID;i=i||0;var o=t._glBuffers[a]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)},r.prototype.update=function(t){var e=this,i=e.gl,n=e.CONTEXT_UID,s=t._glBuffers[n];if(t._updateID!==s.updateID)if(s.updateID=t._updateID,i.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{var a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}},r.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},r.prototype.createGLBuffer=function(t){var e=this,i=e.CONTEXT_UID,n=e.gl;return t._glBuffers[i]=new zOt(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]},r}();(function(r){mr(t,r);function t(e){var i=r.call(this,t0.WEBGL,e)||this;return e=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new J("destroy"),contextChange:new J("contextChange"),reset:new J("reset"),update:new J("update"),postrender:new J("postrender"),prerender:new J("prerender"),resize:new J("resize")},i.runners.contextChange.add(i),i.globalUniforms=new ey({projectionMatrix:new Gs},!0),i.addSystem(_Ot,"mask").addSystem(jPt,"context").addSystem($Ot,"state").addSystem(FOt,"shader").addSystem(VOt,"texture").addSystem(WOt,"buffer").addSystem(qPt,"geometry").addSystem(YPt,"framebuffer").addSystem(gOt,"scissor").addSystem(xOt,"stencil").addSystem(bOt,"projection").addSystem(HOt,"textureGC").addSystem(XPt,"filter").addSystem(TOt,"renderTexture").addSystem(VPt,"batch"),i.initPlugins(t.__plugins),i.multisample=void 0,e.context?i.context.initFromContext(e.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:e.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,$s(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return t.create=function(e){if(Hs())return new t(e);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},t.prototype.contextChange=function(){var e=this.gl,i;if(this.context.webGLVersion===1){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),i=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}i>=Ti.HIGH?this.multisample=Ti.HIGH:i>=Ti.MEDIUM?this.multisample=Ti.MEDIUM:i>=Ti.LOW?this.multisample=Ti.LOW:this.multisample=Ti.NONE},t.prototype.addSystem=function(e,i){var n=new e(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=n;for(var s in this.runners)this.runners[s].add(n);return this},t.prototype.render=function(e,i){var n,s,a,o;if(i&&(i instanceof g0?(zt("6.0.0","Renderer#render arguments changed, use options instead."),n=i,s=arguments[2],a=arguments[3],o=arguments[4]):(n=i.renderTexture,s=i.clear,a=i.transform,o=i.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=a,!this.context.isLost){if(n||(this._lastObjectRendered=e),!o){var h=e.enableTempParent();e.updateTransform(),e.disableTempParent(h)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},t.prototype.generateTexture=function(e,i,n,s){i===void 0&&(i={});var a=r.prototype.generateTexture.call(this,e,i,n,s);return this.framebuffer.blit(),a},t.prototype.resize=function(e,i){r.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},t.prototype.reset=function(){return this.runners.reset.emit(),this},t.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},t.prototype.destroy=function(e){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();r.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(t.prototype,"extract",{get:function(){return zt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),t.registerPlugin=function(e,i){t.__plugins=t.__plugins||{},t.__plugins[e]=i},t})(jOt);var YOt=function(){function r(){this.texArray=null,this.blend=0,this.type=e0.TRIANGLES,this.start=0,this.size=0,this.data=null}return r}(),qOt=function(){function r(){this.elements=[],this.ids=[],this.count=0}return r.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},r}(),KOt=function(){function r(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(r.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),r.prototype.view=function(t){return this[t+"View"]},r.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},r.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},r}(),ZOt=function(r){mr(t,r);function t(e){var i=r.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=jB.for2d(),i.size=A.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return t.prototype.contextChange=function(){var e=this.renderer.gl;A.PREFER_ENV===eu.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),A.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=aOt(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},t.prototype.initFlushBuffers=function(){for(var e=t._drawCallPool,i=t._textureArrayPool,n=this.size/4,s=Math.floor(n/this.MAX_TEXTURES)+1;e.length<n;)e.push(new YOt);for(;i.length<s;)i.push(new qOt);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},t.prototype.onPrerender=function(){this._flushId=0},t.prototype.render=function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)},t.prototype.buildTexturesAndDrawCalls=function(){var e=this,i=e._bufferedTextures,n=e.MAX_TEXTURES,s=t._textureArrayPool,a=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count,u=++ji._globalBatch,l=0,f=s[0],c=0;a.copyBoundTextures(o,n);for(var d=0;d<this._bufferSize;++d){var v=i[d];i[d]=null,v._batchEnabled!==u&&(f.count>=n&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,d),c=d,f=s[++l],++u),v._batchEnabled=u,v.touched=h,f.elements[f.count++]=v)}f.count>0&&(a.boundArray(f,o,u,n),this.buildDrawCalls(f,c,this._bufferSize),++l,++u);for(var d=0;d<o.length;d++)o[d]=null;ji._globalBatch=u},t.prototype.buildDrawCalls=function(e,i,n){var s=this,a=s._bufferedElements,o=s._attributeBuffer,h=s._indexBuffer,u=s.vertexSize,l=t._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=l[f];v.start=this._iIndex,v.texArray=e;for(var _=i;_<n;++_){var m=a[_],g=m._texture.baseTexture,T=Jn[g.alphaMode?1:0][m.blendMode];a[_]=null,i<_&&v.blend!==T&&(v.size=d-v.start,i=_,v=l[++f],v.texArray=e,v.start=d),this.packInterleavedGeometry(m,o,h,c,d),c+=m.vertexData.length/2*u,d+=m.indices.length,v.blend=T}i<n&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},t.prototype.bindAndClearTexArray=function(e){for(var i=this.renderer.texture,n=0;n<e.count;n++)i.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0},t.prototype.updateGeometry=function(){var e=this,i=e._packedGeometries,n=e._attributeBuffer,s=e._indexBuffer;A.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(n.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},t.prototype.drawBatches=function(){for(var e=this._dcIndex,i=this.renderer,n=i.gl,s=i.state,a=t._drawCallPool,o=null,h=0;h<e;h++){var u=a[h],l=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=v,s.set(this.state),n.drawElements(f,c,n.UNSIGNED_SHORT,d*2)}},t.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},t.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),A.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),r.prototype.destroy.call(this)},t.prototype.getAttributeBuffer=function(e){var i=ee(Math.ceil(e/8)),n=rr(i),s=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._aBuffers[s];return a||(this._aBuffers[s]=a=new KOt(s*this.vertexSize*4)),a},t.prototype.getIndexBuffer=function(e){var i=ee(Math.ceil(e/12)),n=rr(i),s=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var a=this._iBuffers[n];return a||(this._iBuffers[n]=a=new Uint16Array(s)),a},t.prototype.packInterleavedGeometry=function(e,i,n,s,a){for(var o=i.uint32View,h=i.float32View,u=s/this.vertexSize,l=e.uvs,f=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,v=Math.min(e.worldAlpha,1),_=v<1&&e._texture.baseTexture.alphaMode?In(e._tintRGB,v):e._tintRGB+(v*255<<24),m=0;m<c.length;m+=2)h[s++]=c[m],h[s++]=c[m+1],h[s++]=l[m],h[s++]=l[m+1],o[s++]=_,h[s++]=d;for(var m=0;m<f.length;m++)n[a++]=u+f[m]},t._drawCallPool=[],t._textureArrayPool=[],t}(TK),QOt=function(){function r(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return r.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=ey.from({uSamplers:e},!0);var n=this.fragTemplate;n=n.replace(/%count%/gi,""+t),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new VB(this.vertexSrc,n)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Gs,default:this.defaultGroupCache[t]};return new CK(this.programCache[t],s)},r.prototype.generateSampleSrc=function(t){var e="";e+=`
`,e+=`
`;for(var i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+=`
{`,e+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",e+=`
}`;return e+=`
`,e+=`
`,e},r}(),JOt=function(r){mr(t,r);function t(e){e===void 0&&(e=!1);var i=r.call(this)||this;return i._buffer=new Ps(null,e,!1),i._indexBuffer=new Ps(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Ge.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Ge.FLOAT).addAttribute("aColor",i._buffer,4,!0,Ge.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Ge.FLOAT).addIndex(i._indexBuffer),i}return t}(XB),HV=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,XV=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,tFt=function(){function r(){}return r.create=function(t){var e=Object.assign({vertex:HV,fragment:XV,geometryClass:JOt,vertexSize:6},t),i=e.vertex,n=e.fragment,s=e.vertexSize,a=e.geometryClass;return function(o){mr(h,o);function h(u){var l=o.call(this,u)||this;return l.shaderGenerator=new QOt(i,n),l.geometryClass=a,l.vertexSize=s,l}return h}(ZOt)},Object.defineProperty(r,"defaultVertexSrc",{get:function(){return HV},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentTemplate",{get:function(){return XV},enumerable:!1,configurable:!0}),r}();tFt.create();/*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var VV;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(VV||(VV={}));var jV;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(jV||(jV={}));var zV;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(zV||(zV={}));var eM;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(eM||(eM={}));var WV;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(WV||(WV={}));var YV;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(YV||(YV={}));var qV;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(qV||(qV={}));var KV;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(KV||(KV={}));var ZV;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(ZV||(ZV={}));var QV;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(QV||(QV={}));var JV;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(JV||(JV={}));var tj;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(tj||(tj={}));var ej;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(ej||(ej={}));var rj;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(rj||(rj={}));var ij;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(ij||(ij={}));var nj;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(nj||(nj={}));var sj;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(sj||(sj={}));var aj;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(aj||(aj={}));var oj;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(oj||(oj={}));/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var hj=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?si.EMPTY:(t=t||new si(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rM=function(r,t){return rM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},rM(r,t)};function zB(r,t){rM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var rn=function(r){zB(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new EPt,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new hj,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new si),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new si),e=this._localBoundsRect),this._localBounds||(this._localBounds=new hj);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new eFt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*xPt},set:function(e){this.transform.rotation=e*bPt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),eFt=function(r){zB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(rn);rn.prototype.displayObjectUpdateTransform=rn.prototype.updateTransform;function rFt(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var iM=function(r){zB(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(rFt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(rn);iM.prototype.containerUpdateTransform=iM.prototype.updateTransform;/*!
 * @pixi/sprite - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nM=function(r,t){return nM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},nM(r,t)};function iFt(r,t){nM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var r_=new Ih,nFt=new Uint16Array([0,1,2,0,2,3]),NK=function(r){iFt(t,r);function t(e){var i=r.call(this)||this;return i._anchor=new y_(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=eM.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||Tn.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=nFt,i.pluginName="batch",i.isSprite=!0,i._roundPixels=A.ROUND_PIXELS,i}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=cn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=cn(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){var e=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===e._updateID)){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,l=this.vertexData,f=e.trim,c=e.orig,d=this._anchor,v=0,_=0,m=0,g=0;if(f?(_=f.x-d._x*c.width,v=_+f.width,g=f.y-d._y*c.height,m=g+f.height):(_=-d._x*c.width,v=_+c.width,g=-d._y*c.height,m=g+c.height),l[0]=n*_+a*g+h,l[1]=o*g+s*_+u,l[2]=n*v+a*g+h,l[3]=o*g+s*v+u,l[4]=n*v+a*m+h,l[5]=o*m+s*v+u,l[6]=n*_+a*m+h,l[7]=o*m+s*_+u,this._roundPixels)for(var T=A.RESOLUTION,b=0;b<l.length;++b)l[b]=Math.round((l[b]*T|0)/T)}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,i=this.vertexTrimmedData,n=e.orig,s=this._anchor,a=this.transform.worldTransform,o=a.a,h=a.b,u=a.c,l=a.d,f=a.tx,c=a.ty,d=-s._x*n.width,v=d+n.width,_=-s._y*n.height,m=_+n.height;i[0]=o*d+u*_+f,i[1]=l*_+h*d+c,i[2]=o*v+u*_+f,i[3]=l*_+h*v+c,i[4]=o*v+u*m+f,i[5]=l*m+h*v+c,i[6]=o*d+u*m+f,i[7]=l*m+h*d+c},t.prototype._render=function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,i=this._texture.orig;!e||e.width===i.width&&e.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(e){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new si),e=this._localBoundsRect),this._bounds.getRectangle(e)):r.prototype.getLocalBounds.call(this,e)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,r_);var i=this._texture.orig.width,n=this._texture.orig.height,s=-i*this.anchor.x,a=0;return r_.x>=s&&r_.x<s+i&&(a=-n*this.anchor.y,r_.y>=a&&r_.y<a+n)},t.prototype.destroy=function(e){r.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof e=="boolean"?e:e&&e.texture;if(i){var n=typeof e=="boolean"?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},t.from=function(e,i){var n=e instanceof Tn?e:Tn.from(e,i);return new t(n)},Object.defineProperty(t.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var i=cn(this.scale.x)||1;this.scale.x=i*e/this._texture.orig.width,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var i=cn(this.scale.y)||1;this.scale.y=i*e/this._texture.orig.height,this._height=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Tn.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),t}(iM);/*!
 * @pixi/mixin-cache-as-bitmap - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var uj;(function(r){r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2"})(uj||(uj={}));var lj;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS"})(lj||(lj={}));var fj;(function(r){r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL"})(fj||(fj={}));var cj;(function(r){r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR"})(cj||(cj={}));var dj;(function(r){r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(dj||(dj={}));var pj;(function(r){r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(pj||(pj={}));var vj;(function(r){r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(vj||(vj={}));var yj;(function(r){r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT"})(yj||(yj={}));var mj;(function(r){r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT"})(mj||(mj={}));var _j;(function(r){r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR"})(_j||(_j={}));var gj;(function(r){r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(gj||(gj={}));var xj;(function(r){r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL"})(xj||(xj={}));var bj;(function(r){r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(bj||(bj={}));var Tj;(function(r){r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT"})(Tj||(Tj={}));var Ej;(function(r){r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL"})(Ej||(Ej={}));var wj;(function(r){r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp"})(wj||(wj={}));var Ij;(function(r){r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE"})(Ij||(Ij={}));var sM;(function(r){r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH"})(sM||(sM={}));var Rj;(function(r){r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Rj||(Rj={}));var PK=new Gs;rn.prototype._cacheAsBitmap=!1;rn.prototype._cacheData=null;rn.prototype._cacheAsBitmapResolution=null;rn.prototype._cacheAsBitmapMultisample=sM.NONE;var sFt=function(){function r(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return r}();Object.defineProperties(rn.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(r){if(this._cacheAsBitmap!==r){this._cacheAsBitmap=r;var t;r?(this._cacheData||(this._cacheData=new sFt),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}});rn.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};rn.prototype._initCachedDisplayObject=function(t){var e;if(!(this._cacheData&&this._cacheData.sprite)){var i=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters){var s=this.filters[0].padding;n.pad(s)}n.ceil(A.RESOLUTION);var a=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),h=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,l=g0.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:t.multisample}),f="cacheAsBitmap_"+Jt();this._cacheData.textureCacheId=f,ji.addToCache(l.baseTexture,f),Tn.addToCache(l,f);var c=this.transform.localTransform.copyTo(PK).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(a,o,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new NK(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}};rn.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};rn.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var n=t.context,s=t._projTransform;e.ceil(A.RESOLUTION);var a=g0.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+Jt();this._cacheData.textureCacheId=o,ji.addToCache(a.baseTexture,o),Tn.addToCache(a,o);var h=PK;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=e.x,h.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:a,clear:!0,transform:h,skipUpdateTransform:!1}),t.context=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var u=new NK(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};rn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};rn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};rn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ji.removeFromCache(this._cacheData.textureCacheId),Tn.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};rn.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var aFt=Math.PI*2,oFt=180/Math.PI,hFt=Math.PI/180,aM;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(aM||(aM={}));var R1=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=aM.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),Cj=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),rE=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),oM=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new Cj;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new Cj;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(aFt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),kp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Dp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$p=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hp=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],iE=Math.sign;function uFt(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=iE(kp[r]*kp[e]+$p[r]*Dp[e]),n=iE(Dp[r]*kp[e]+Hp[r]*Dp[e]),s=iE(kp[r]*$p[e]+$p[r]*Hp[e]),a=iE(Dp[r]*$p[e]+Hp[r]*Hp[e]),o=0;o<16;o++)if(kp[o]===i&&Dp[o]===n&&$p[o]===s&&Hp[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new oM;h.set(kp[r],Dp[r],$p[r],Hp[r],0,0)}}uFt();var lFt=function(){function r(){this.worldTransform=new oM,this.localTransform=new oM,this.position=new rE(this.onChange,this,0,0),this.scale=new rE(this.onChange,this,1,1),this.pivot=new rE(this.onChange,this,0,0),this.skew=new rE(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var Aj=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?R1.EMPTY:(t=t||new R1(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hM=function(r,t){return hM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},hM(r,t)};function WB(r,t){hM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var i0=function(r){WB(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new lFt,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Aj,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new R1),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new R1),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Aj);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new fFt),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*oFt},set:function(e){this.transform.rotation=e*hFt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),fFt=function(r){WB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(i0);i0.prototype.displayObjectUpdateTransform=i0.prototype.updateTransform;function cFt(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var uM=function(r){WB(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(cFt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(i0);uM.prototype.containerUpdateTransform=uM.prototype.updateTransform;/*!
 * @pixi/mixin-get-child-by-name - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */i0.prototype.name=null;uM.prototype.getChildByName=function(t,e){for(var i=0,n=this.children.length;i<n;i++)if(this.children[i].name===t)return this.children[i];if(e)for(var i=0,n=this.children.length;i<n;i++){var s=this.children[i];if(s.getChildByName){var a=this.children[i].getChildByName(t,!0);if(a)return a}}return null};/*!
 * @pixi/math - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var dFt=Math.PI*2,pFt=180/Math.PI,vFt=Math.PI/180,lM;(function(r){r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC"})(lM||(lM={}));var C1=function(){function r(t,e,i,n){t===void 0&&(t=0),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=lM.RECT}return Object.defineProperty(r.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(r,"EMPTY",{get:function(){return new r(0,0,0,0)},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},r.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},r.prototype.pad=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this},r.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(s-n,0),this},r.prototype.ceil=function(t,e){t===void 0&&(t=1),e===void 0&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},r.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=s-n,this},r.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},r}(),fM=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},r.prototype.copyTo=function(t){return t.set(this.x,this.y),t},r.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),this.x=t,this.y=e,this},r.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},r}(),nE=function(){function r(t,e,i,n){i===void 0&&(i=0),n===void 0&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}return r.prototype.clone=function(t,e){return t===void 0&&(t=this.cb),e===void 0&&(e=this.scope),new r(t,e,this._x,this._y)},r.prototype.set=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=t),(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this},r.prototype.copyFrom=function(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},r.prototype.copyTo=function(t){return t.set(this._x,this._y),t},r.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(r.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),r}(),cM=function(){function r(t,e,i,n,s,a){t===void 0&&(t=1),e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}return r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.set=function(t,e,i,n,s,a){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a,this},r.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},r.prototype.apply=function(t,e){e=e||new fM;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new fM;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,a=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},r.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},r.prototype.setTransform=function(t,e,i,n,s,a,o,h,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-h)*a,this.d=Math.cos(o-h)*a,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},r.prototype.prepend=function(t){var e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,a=t.pivot,o=-Math.atan2(-n,s),h=Math.atan2(i,e),u=Math.abs(o+h);return u<1e-5||Math.abs(dFt-u)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(a.x*e+a.y*n),t.position.y=this.ty+(a.x*i+a.y*s),t},r.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,a=t*n-e*i;return this.a=n/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-n*s)/a,this.ty=-(t*this.ty-e*s)/a,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},r.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(r,"IDENTITY",{get:function(){return new r},enumerable:!1,configurable:!0}),Object.defineProperty(r,"TEMP_MATRIX",{get:function(){return new r},enumerable:!1,configurable:!0}),r}(),Xp=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Vp=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],jp=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zp=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],sE=Math.sign;function yFt(){for(var r=0;r<16;r++)for(var t=[],e=0;e<16;e++)for(var i=sE(Xp[r]*Xp[e]+jp[r]*Vp[e]),n=sE(Vp[r]*Xp[e]+zp[r]*Vp[e]),s=sE(Xp[r]*jp[e]+jp[r]*zp[e]),a=sE(Vp[r]*jp[e]+zp[r]*zp[e]),o=0;o<16;o++)if(Xp[o]===i&&Vp[o]===n&&jp[o]===s&&zp[o]===a){t.push(o);break}for(var r=0;r<16;r++){var h=new cM;h.set(Xp[r],Vp[r],jp[r],zp[r],0,0)}}yFt();var mFt=function(){function r(){this.worldTransform=new cM,this.localTransform=new cM,this.position=new nE(this.onChange,this,0,0),this.scale=new nE(this.onChange,this,1,1),this.pivot=new nE(this.onChange,this,0,0),this.skew=new nE(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return r.prototype.onChange=function(){this._localID++},r.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},r.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},r.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},r.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},r.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(r.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),r.IDENTITY=new r,r}();/*!
 * @pixi/display - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */A.SORTABLE_CHILDREN=!1;var Sj=function(){function r(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return r.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},r.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},r.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?C1.EMPTY:(t=t||new C1(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},r.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},r.prototype.addPointMatrix=function(t,e){var i=t.a,n=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,u=i*e.x+s*e.y+o,l=n*e.x+a*e.y+h;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},r.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY,a=t[0],o=t[1];e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[2],o=t[3],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[4],o=t[5],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,a=t[6],o=t[7],e=a<e?a:e,i=o<i?o:i,n=a>n?a:n,s=o>s?o:s,this.minX=e,this.minY=i,this.maxX=n,this.maxY=s},r.prototype.addFrame=function(t,e,i,n,s){this.addFrameMatrix(t.worldTransform,e,i,n,s)},r.prototype.addFrameMatrix=function(t,e,i,n,s){var a=t.a,o=t.b,h=t.c,u=t.d,l=t.tx,f=t.ty,c=this.minX,d=this.minY,v=this.maxX,_=this.maxY,m=a*e+h*i+l,g=o*e+u*i+f;c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*i+l,g=o*n+u*i+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*e+h*s+l,g=o*e+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,m=a*n+h*s+l,g=o*n+u*s+f,c=m<c?m:c,d=g<d?g:d,v=m>v?m:v,_=g>_?g:_,this.minX=c,this.minY=d,this.maxX=v,this.maxY=_},r.prototype.addVertexData=function(t,e,i){for(var n=this.minX,s=this.minY,a=this.maxX,o=this.maxY,h=e;h<i;h+=2){var u=t[h],l=t[h+1];n=u<n?u:n,s=l<s?l:s,a=u>a?u:a,o=l>o?l:o}this.minX=n,this.minY=s,this.maxX=a,this.maxY=o},r.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},r.prototype.addVerticesMatrix=function(t,e,i,n,s,a){s===void 0&&(s=0),a===void 0&&(a=s);for(var o=t.a,h=t.b,u=t.c,l=t.d,f=t.tx,c=t.ty,d=this.minX,v=this.minY,_=this.maxX,m=this.maxY,g=i;g<n;g+=2){var T=e[g],b=e[g+1],S=o*T+u*b+f,R=l*b+h*T+c;d=Math.min(d,S-s),_=Math.max(_,S+s),v=Math.min(v,R-a),m=Math.max(m,R+a)}this.minX=d,this.minY=v,this.maxX=_,this.maxY=m},r.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s},r.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,s=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},r.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,s=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=s&&n<=a){var o=this.minX,h=this.minY,u=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<h?n:h,this.maxX=s>u?s:u,this.maxY=a>l?a:l}},r.prototype.pad=function(t,e){t===void 0&&(t=0),e===void 0&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},r.prototype.addFramePad=function(t,e,i,n,s,a){t-=s,e-=a,i+=s,n+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var dM=function(r,t){return dM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},dM(r,t)};function YB(r,t){dM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var n0=function(r){YB(t,r);function t(){var e=r.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new mFt,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Sj,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return t.mixin=function(e){for(var i=Object.keys(e),n=0;n<i.length;++n){var s=i[n];Object.defineProperty(t.prototype,s,Object.getOwnPropertyDescriptor(e,s))}},Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.prototype.getBounds=function(e,i){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new C1),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(e){e||(this._localBoundsRect||(this._localBoundsRect=new C1),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Sj);var i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,a=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-a,o},t.prototype.toGlobal=function(e,i,n){return n===void 0&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,i)},t.prototype.toLocal=function(e,i,n,s){return i&&(e=i.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,i,n,s,a,o,h,u,l){return e===void 0&&(e=0),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),h===void 0&&(h=0),u===void 0&&(u=0),l===void 0&&(l=0),this.position.x=e,this.position.y=i,this.scale.x=n||1,this.scale.y=s||1,this.rotation=a,this.skew.x=o,this.skew.y=h,this.pivot.x=u,this.pivot.y=l,this},t.prototype.destroy=function(e){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(t.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new _Ft),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),t.prototype.enableTempParent=function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e},t.prototype.disableTempParent=function(e){this.parent=e},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},set:function(e){this.transform.position.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},set:function(e){this.transform.position.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skew",{get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this.transform.rotation*pFt},set:function(e){this.transform.rotation=e*vFt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zIndex",{get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask},set:function(e){if(this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!0,i.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},enumerable:!1,configurable:!0}),t}(re),_Ft=function(r){YB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.sortDirty=null,e}return t}(n0);n0.prototype.displayObjectUpdateTransform=n0.prototype.updateTransform;function gFt(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}var Nj=function(r){YB(t,r);function t(){var e=r.call(this)||this;return e.children=[],e.sortableChildren=A.SORTABLE_CHILDREN,e.sortDirty=!1,e}return t.prototype.onChildrenChange=function(e){},t.prototype.addChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var a=i[0];a.parent&&a.parent.removeChild(a),a.parent=this,this.sortDirty=!0,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",a,this,this.children.length-1),a.emit("added",this)}return i[0]},t.prototype.addChildAt=function(e,i){if(i<0||i>this.children.length)throw new Error(e+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(i,0,e),this._boundsID++,this.onChildrenChange(i),e.emit("added",this),this.emit("childAdded",e,this,i),e},t.prototype.swapChildren=function(e,i){if(e!==i){var n=this.getChildIndex(e),s=this.getChildIndex(i);this.children[n]=i,this.children[s]=e,this.onChildrenChange(n<s?n:s)}},t.prototype.getChildIndex=function(e){var i=this.children.indexOf(e);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(e,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);ce(this.children,n,1),this.children.splice(i,0,e),this.onChildrenChange(i)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var a=i[0],o=this.children.indexOf(a);if(o===-1)return null;a.parent=null,a.transform._parentID=-1,ce(this.children,o,1),this._boundsID++,this.onChildrenChange(o),a.emit("removed",this),this.emit("childRemoved",a,this,o)}return i[0]},t.prototype.removeChildAt=function(e){var i=this.getChildAt(e);return i.parent=null,i.transform._parentID=-1,ce(this.children,e,1),this._boundsID++,this.onChildrenChange(e),i.emit("removed",this),this.emit("childRemoved",i,this,e),i},t.prototype.removeChildren=function(e,i){e===void 0&&(e=0),i===void 0&&(i=this.children.length);var n=e,s=i,a=s-n,o;if(a>0&&a<=s){o=this.children.splice(n,a);for(var h=0;h<o.length;++h)o[h].parent=null,o[h].transform&&(o[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var h=0;h<o.length;++h)o[h].emit("removed",this),this.emit("childRemoved",o[h],this,h);return o}else if(a===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e=!1,i=0,n=this.children.length;i<n;++i){var s=this.children[i];s._lastSortedIndex=i,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(gFt),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e];n.visible&&n.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var i=this.children[e];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var n=i._mask.maskObject||i._mask;n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},t.prototype.getLocalBounds=function(e,i){i===void 0&&(i=!1);var n=r.prototype.getLocalBounds.call(this,e);if(!i)for(var s=0,a=this.children.length;s<a;++s){var o=this.children[s];o.visible&&o.updateTransform()}return n},t.prototype._calculateBounds=function(){},t.prototype.render=function(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);for(var s=0,a=this.children.length;s<a;s++)this.children[s].render(e);e.batch.flush(),n&&e.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function(e){},t.prototype.destroy=function(e){r.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof e=="boolean"?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<n.length;++s)n[s].destroy(e)},Object.defineProperty(t.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var i=this.getLocalBounds().width;i!==0?this.scale.x=e/i:this.scale.x=1,this._width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var i=this.getLocalBounds().height;i!==0?this.scale.y=e/i:this.scale.y=1,this._height=e},enumerable:!1,configurable:!0}),t}(n0);Nj.prototype.containerUpdateTransform=Nj.prototype.updateTransform;/*!
 * @pixi/mixin-get-global-position - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */n0.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new fM),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/graphics - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var rl;(function(r){r.MITER="miter",r.BEVEL="bevel",r.ROUND="round"})(rl||(rl={}));var il;(function(r){r.BUTT="butt",r.ROUND="round",r.SQUARE="square"})(il||(il={}));var s0={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(r,t){if(t===void 0&&(t=20),!this.adaptive||!r||isNaN(r))return t;var e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}},OK=function(){function r(){this.color=16777215,this.alpha=1,this.texture=Ce.WHITE,this.matrix=null,this.visible=!1,this.reset()}return r.prototype.clone=function(){var t=new r;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},r.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ce.WHITE,this.matrix=null,this.visible=!1},r.prototype.destroy=function(){this.texture=null,this.matrix=null},r}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var pM=function(r,t){return pM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},pM(r,t)};function qB(r,t){pM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var FK={build:function(r){r.points=r.shape.points.slice()},triangulate:function(r,t){var e=r.points,i=r.holes,n=t.points,s=t.indices;if(e.length>=6){for(var a=[],o=0;o<i.length;o++){var h=i[o];a.push(e.length/2),e=e.concat(h.points)}var u=d0(e,a,2);if(!u)return;for(var l=n.length/2,o=0;o<u.length;o+=3)s.push(u[o]+l),s.push(u[o+1]+l),s.push(u[o+2]+l);for(var o=0;o<e.length;o++)n.push(e[o])}}},Pj={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s,a;if(e.length=0,r.type===ri.CIRC)s=t.radius,a=t.radius;else{var o=r.shape;s=o.width,a=o.height}if(!(s===0||a===0)){var h=Math.floor(30*Math.sqrt(t.radius))||Math.floor(15*Math.sqrt(s+a));h/=2.3;for(var u=Math.PI*2/h,l=0;l<h-.5;l++)e.push(i+Math.sin(-u*l)*s,n+Math.cos(-u*l)*a);e.push(e[0],e[1])}},triangulate:function(r,t){var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=s,o=r.shape,h=r.matrix,u=o.x,l=o.y;i.push(r.matrix?h.a*u+h.c*l+h.tx:u,r.matrix?h.b*u+h.d*l+h.ty:l);for(var f=0;f<e.length;f+=2)i.push(e[f],e[f+1]),n.push(s++,a,s)}},xFt={build:function(r){var t=r.shape,e=t.x,i=t.y,n=t.width,s=t.height,a=r.points;a.length=0,a.push(e,i,e+n,i,e+n,i+s,e,i+s)},triangulate:function(r,t){var e=r.points,i=t.points,n=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function Wp(r,t,e){var i=t-r;return r+i*e}function aE(r,t,e,i,n,s,a){a===void 0&&(a=[]);for(var o=20,h=a,u=0,l=0,f=0,c=0,d=0,v=0,_=0,m=0;_<=o;++_)m=_/o,u=Wp(r,e,m),l=Wp(t,i,m),f=Wp(e,n,m),c=Wp(i,s,m),d=Wp(u,f,m),v=Wp(l,c,m),!(_===0&&h[h.length-2]===d&&h[h.length-1]===v)&&h.push(d,v);return h}var bFt={build:function(r){var t=r.shape,e=r.points,i=t.x,n=t.y,s=t.width,a=t.height,o=Math.max(0,Math.min(t.radius,Math.min(s,a)/2));e.length=0,o?(aE(i,n+o,i,n,i+o,n,e),aE(i+s-o,n,i+s,n,i+s,n+o,e),aE(i+s,n+a-o,i+s,n+a,i+s-o,n+a,e),aE(i+o,n+a,i,n+a,i,n+a-o,e)):e.push(i,n,i+s,n,i+s,n+a,i,n+a)},triangulate:function(r,t){for(var e=r.points,i=t.points,n=t.indices,s=i.length/2,a=d0(e,null,2),o=0,h=a.length;o<h;o+=3)n.push(a[o]+s),n.push(a[o+1]+s),n.push(a[o+2]+s);for(var o=0,h=e.length;o<h;o++)i.push(e[o],e[++o])}};function Oj(r,t,e,i,n,s,a,o){var h=r-e*n,u=t-i*n,l=r+e*s,f=t+i*s,c,d;a?(c=i,d=-e):(c=-i,d=e);var v=h+c,_=u+d,m=l+c,g=f+d;return o.push(v,_),o.push(m,g),2}function Yp(r,t,e,i,n,s,a,o){var h=e-r,u=i-t,l=Math.atan2(h,u),f=Math.atan2(n-r,s-t);o&&l<f?l+=Math.PI*2:!o&&l>f&&(f+=Math.PI*2);var c=l,d=f-l,v=Math.abs(d),_=Math.sqrt(h*h+u*u),m=(15*v*Math.sqrt(_)/Math.PI>>0)+1,g=d/m;if(c+=g,o){a.push(r,t),a.push(e,i);for(var T=1,b=c;T<m;T++,b+=g)a.push(r,t),a.push(r+Math.sin(b)*_,t+Math.cos(b)*_);a.push(r,t),a.push(n,s)}else{a.push(e,i),a.push(r,t);for(var T=1,b=c;T<m;T++,b+=g)a.push(r+Math.sin(b)*_,t+Math.cos(b)*_),a.push(r,t);a.push(n,s),a.push(r,t)}return m*2}function TFt(r,t){var e=r.shape,i=r.points||e.points.slice(),n=t.closePointEps;if(i.length!==0){var s=r.lineStyle,a=new Qi(i[0],i[1]),o=new Qi(i[i.length-2],i[i.length-1]),h=e.type!==ri.POLY||e.closeStroke,u=Math.abs(a.x-o.x)<n&&Math.abs(a.y-o.y)<n;if(h){i=i.slice(),u&&(i.pop(),i.pop(),o.set(i[i.length-2],i[i.length-1]));var l=(a.x+o.x)*.5,f=(o.y+a.y)*.5;i.unshift(l,f),i.push(l,f)}var c=t.points,d=i.length/2,v=i.length,_=c.length/2,m=s.width/2,g=m*m,T=s.miterLimit*s.miterLimit,b=i[0],S=i[1],R=i[2],U=i[3],L=0,$=0,k=-(S-U),H=b-R,it=0,tt=0,j=Math.sqrt(k*k+H*H);k/=j,H/=j,k*=m,H*=m;var at=s.alignment,K=(1-at)*2,et=at*2;h||(s.cap===il.ROUND?v+=Yp(b-k*(K-et)*.5,S-H*(K-et)*.5,b-k*K,S-H*K,b+k*et,S+H*et,c,!0)+2:s.cap===il.SQUARE&&(v+=Oj(b,S,k,H,K,et,!0,c))),c.push(b-k*K,S-H*K),c.push(b+k*et,S+H*et);for(var st=1;st<d-1;++st){b=i[(st-1)*2],S=i[(st-1)*2+1],R=i[st*2],U=i[st*2+1],L=i[(st+1)*2],$=i[(st+1)*2+1],k=-(S-U),H=b-R,j=Math.sqrt(k*k+H*H),k/=j,H/=j,k*=m,H*=m,it=-(U-$),tt=R-L,j=Math.sqrt(it*it+tt*tt),it/=j,tt/=j,it*=m,tt*=m;var V=R-b,Y=S-U,z=R-L,Z=$-U,Q=Y*z-Z*V,mt=Q<0;if(Math.abs(Q)<.1){c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et);continue}var Et=(-k+b)*(-H+U)-(-k+R)*(-H+S),It=(-it+L)*(-tt+U)-(-it+R)*(-tt+$),wt=(V*It-z*Et)/Q,ht=(Z*Et-Y*It)/Q,I=(wt-R)*(wt-R)+(ht-U)*(ht-U),M=R+(wt-R)*K,O=U+(ht-U)*K,N=R-(wt-R)*et,B=U-(ht-U)*et,G=Math.min(V*V+Y*Y,z*z+Z*Z),W=mt?K:et,X=G+W*W*g,ut=I<=X;ut?s.join===rl.BEVEL||I/g>T?(mt?(c.push(M,O),c.push(R+k*et,U+H*et),c.push(M,O),c.push(R+it*et,U+tt*et)):(c.push(R-k*K,U-H*K),c.push(N,B),c.push(R-it*K,U-tt*K),c.push(N,B)),v+=2):s.join===rl.ROUND?mt?(c.push(M,O),c.push(R+k*et,U+H*et),v+=Yp(R,U,R+k*et,U+H*et,R+it*et,U+tt*et,c,!0)+4,c.push(M,O),c.push(R+it*et,U+tt*et)):(c.push(R-k*K,U-H*K),c.push(N,B),v+=Yp(R,U,R-k*K,U-H*K,R-it*K,U-tt*K,c,!1)+4,c.push(R-it*K,U-tt*K),c.push(N,B)):(c.push(M,O),c.push(N,B)):(c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et),s.join===rl.BEVEL||I/g>T||(s.join===rl.ROUND?mt?v+=Yp(R,U,R+k*et,U+H*et,R+it*et,U+tt*et,c,!0)+2:v+=Yp(R,U,R-k*K,U-H*K,R-it*K,U-tt*K,c,!1)+2:(mt?(c.push(N,B),c.push(N,B)):(c.push(M,O),c.push(M,O)),v+=2)),c.push(R-it*K,U-tt*K),c.push(R+it*et,U+tt*et),v+=2)}b=i[(d-2)*2],S=i[(d-2)*2+1],R=i[(d-1)*2],U=i[(d-1)*2+1],k=-(S-U),H=b-R,j=Math.sqrt(k*k+H*H),k/=j,H/=j,k*=m,H*=m,c.push(R-k*K,U-H*K),c.push(R+k*et,U+H*et),h||(s.cap===il.ROUND?v+=Yp(R-k*(K-et)*.5,U-H*(K-et)*.5,R-k*K,U-H*K,R+k*et,U+H*et,c,!1)+2:s.cap===il.SQUARE&&(v+=Oj(R,U,k,H,K,et,!1,c)));for(var ft=t.indices,ct=s0.epsilon*s0.epsilon,st=_;st<v+_-2;++st)b=c[st*2],S=c[st*2+1],R=c[(st+1)*2],U=c[(st+1)*2+1],L=c[(st+2)*2],$=c[(st+2)*2+1],!(Math.abs(b*(U-$)+R*($-S)+L*(S-U))<ct)&&ft.push(st,st+1,st+2)}}function EFt(r,t){var e=0,i=r.shape,n=r.points||i.points,s=i.type!==ri.POLY||i.closeStroke;if(n.length!==0){var a=t.points,o=t.indices,h=n.length/2,u=a.length/2,l=u;for(a.push(n[0],n[1]),e=1;e<h;e++)a.push(n[e*2],n[e*2+1]),o.push(l,l+1),l++;s&&o.push(l,u)}}function Fj(r,t){r.lineStyle.native?EFt(r,t):TFt(r,t)}var Uj=function(){function r(){}return r.curveTo=function(t,e,i,n,s,a){var o=a[a.length-2],h=a[a.length-1],u=h-e,l=o-t,f=n-e,c=i-t,d=Math.abs(u*c-l*f);if(d<1e-8||s===0)return(a[a.length-2]!==t||a[a.length-1]!==e)&&a.push(t,e),null;var v=u*u+l*l,_=f*f+c*c,m=u*f+l*c,g=s*Math.sqrt(v)/d,T=s*Math.sqrt(_)/d,b=g*m/v,S=T*m/_,R=g*c+T*l,U=g*f+T*u,L=l*(T+b),$=u*(T+b),k=c*(g+S),H=f*(g+S),it=Math.atan2($-U,L-R),tt=Math.atan2(H-U,k-R);return{cx:R+t,cy:U+e,radius:s,startAngle:it,endAngle:tt,anticlockwise:l*f>c*u}},r.arc=function(t,e,i,n,s,a,o,h,u){for(var l=o-a,f=s0._segmentsCount(Math.abs(l)*s,Math.ceil(Math.abs(l)/Sw)*40),c=l/(f*2),d=c*2,v=Math.cos(c),_=Math.sin(c),m=f-1,g=m%1/m,T=0;T<=m;++T){var b=T+g*T,S=c+a+d*b,R=Math.cos(S),U=-Math.sin(S);u.push((v*R+_*U)*s+i,(v*-U+_*R)*s+n)}},r}(),wFt=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a,o,h){for(var u=10,l=0,f=0,c=0,d=0,v=0,_=0,m=0,g=0,T=0,b=0,S=0,R=t,U=e,L=1;L<=u;++L)f=L/u,c=f*f,d=c*f,v=1-f,_=v*v,m=_*v,g=m*t+3*_*f*i+3*v*c*s+d*o,T=m*e+3*_*f*n+3*v*c*a+d*h,b=R-g,S=U-T,R=g,U=T,l+=Math.sqrt(b*b+S*S);return l},r.curveTo=function(t,e,i,n,s,a,o){var h=o[o.length-2],u=o[o.length-1];o.length-=2;var l=s0._segmentsCount(r.curveLength(h,u,t,e,i,n,s,a)),f=0,c=0,d=0,v=0,_=0;o.push(h,u);for(var m=1,g=0;m<=l;++m)g=m/l,f=1-g,c=f*f,d=c*f,v=g*g,_=v*g,o.push(d*h+3*c*g*t+3*f*v*i+_*s,d*u+3*c*g*e+3*f*v*n+_*a)},r}(),IFt=function(){function r(){}return r.curveLength=function(t,e,i,n,s,a){var o=t-2*i+s,h=e-2*n+a,u=2*i-2*t,l=2*n-2*e,f=4*(o*o+h*h),c=4*(o*u+h*l),d=u*u+l*l,v=2*Math.sqrt(f+c+d),_=Math.sqrt(f),m=2*f*_,g=2*Math.sqrt(d),T=c/_;return(m*v+_*c*(v-g)+(4*d*f-c*c)*Math.log((2*_+T+v)/(T+g)))/(4*m)},r.curveTo=function(t,e,i,n,s){for(var a=s[s.length-2],o=s[s.length-1],h=s0._segmentsCount(r.curveLength(a,o,t,e,i,n)),u=0,l=0,f=1;f<=h;++f){var c=f/h;u=a+(t-a)*c,l=o+(e-o)*c,s.push(u+(t+(i-t)*c-u)*c,l+(e+(n-e)*c-l)*c)}},r}(),RFt=function(){function r(){this.reset()}return r.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},r.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},r.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},r}(),Nf,v2=(Nf={},Nf[ri.POLY]=FK,Nf[ri.CIRC]=Pj,Nf[ri.ELIP]=Pj,Nf[ri.RECT]=xFt,Nf[ri.RREC]=bFt,Nf),Mj=[],oE=[];function CFt(r){for(var t=r.points,e=0,i=0;i<t.length-2;i+=2)e+=(t[i+2]-t[i])*(t[i+3]+t[i+1]);return e>0}var Lj=function(){function r(t,e,i,n){e===void 0&&(e=null),i===void 0&&(i=null),n===void 0&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type}return r.prototype.clone=function(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)},r.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},r}(),qp=new Qi,AFt=new Nw,SFt=function(r){qB(t,r);function t(){var e=r.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Nw,e.boundsDirty=-1,e}return Object.defineProperty(t.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),t.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),oE.push(this.drawCalls[e]);this.drawCalls.length=0;for(var e=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),Mj.push(i)}this.batches.length=0},t.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},t.prototype.drawShape=function(e,i,n,s){i===void 0&&(i=null),n===void 0&&(n=null),s===void 0&&(s=null);var a=new Lj(e,i,n,s);return this.graphicsData.push(a),this.dirty++,this},t.prototype.drawHole=function(e,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var n=new Lj(e,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this},t.prototype.destroy=function(){r.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},t.prototype.containsPoint=function(e){for(var i=this.graphicsData,n=0;n<i.length;++n){var s=i[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,qp):qp.copyFrom(e),s.shape.contains(qp.x,qp.y))){var a=!1;if(s.holes)for(var o=0;o<s.holes.length;o++){var h=s.holes[o];if(h.shape.contains(qp.x,qp.y)){a=!0;break}}if(!a)return!0}}return!1},t.prototype.updateBatches=function(e){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,n=this.graphicsData,s=null,a=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],a=s.style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var h=n[o],u=h.fillStyle,l=h.lineStyle,f=v2[h.type];f.build(h),h.matrix&&this.transformPoints(h.points,h.matrix);for(var c=0;c<2;c++){var d=c===0?u:l;if(d.visible){var v=d.texture.baseTexture,_=this.indices.length,m=this.points.length/2;v.wrapMode=Ah.REPEAT,c===0?this.processFill(h):this.processLine(h);var g=this.points.length/2-m;g!==0&&(s&&!this._compareStyles(a,d)&&(s.end(_,m),s=null),s||(s=Mj.pop()||new RFt,s.begin(d,_,m),this.batches.push(s),a=d),this.addUvs(this.points,i,d.texture,m,g,d.matrix))}}}var T=this.indices.length,b=this.points.length/2;if(s&&s.end(T,b),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var S=b>65535&&e;this.indicesUint16=S?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},t.prototype._compareStyles=function(e,i){return!(!e||!i||e.texture.baseTexture!==i.texture.baseTexture||e.color+e.alpha!==i.color+i.alpha||!!e.native!=!!i.native)},t.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,i=this.graphicsData.length;e<i;e++){var n=this.graphicsData[e],s=n.fillStyle,a=n.lineStyle;if(s&&!s.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0},t.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,i=0,n=e.length;i<n;i++)for(var s=e[i],a=0;a<s.size;a++){var o=s.start+a;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}},t.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var e=this.batches,i=0;i<e.length;i++)if(e[i].style.native)return!1;return this.points.length<t.BATCHABLE_SIZE*2},t.prototype.buildDrawCalls=function(){for(var e=++Xi._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),oE.push(this.drawCalls[i]);this.drawCalls.length=0;var n=this.colors,s=this.textureIds,a=oE.pop();a||(a=new FO,a.texArray=new UO),a.texArray.count=0,a.start=0,a.size=0,a.type=Da.TRIANGLES;var o=0,h=null,u=0,l=!1,f=Da.TRIANGLES,c=0;this.drawCalls.push(a);for(var i=0;i<this.batches.length;i++){var d=this.batches[i],v=8,_=d.style,m=_.texture.baseTexture;l!==!!_.native&&(l=!!_.native,f=l?Da.LINES:Da.TRIANGLES,h=null,o=v,e++),h!==m&&(h=m,m._batchEnabled!==e&&(o===v&&(e++,o=0,a.size>0&&(a=oE.pop(),a||(a=new FO,a.texArray=new UO),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=f),m.touched=1,m._batchEnabled=e,m._batchLocation=o,m.wrapMode=Ah.REPEAT,a.texArray.elements[a.texArray.count++]=m,o++)),a.size+=d.size,c+=d.size,u=m._batchLocation,this.addColors(n,_.color,_.alpha,d.attribSize,d.attribStart),this.addTextureIds(s,u,d.attribSize,d.attribStart)}Xi._globalBatch=e,this.packAttributes()},t.prototype.packAttributes=function(){for(var e=this.points,i=this.uvs,n=this.colors,s=this.textureIds,a=new ArrayBuffer(e.length*3*4),o=new Float32Array(a),h=new Uint32Array(a),u=0,l=0;l<e.length/2;l++)o[u++]=e[l*2],o[u++]=e[l*2+1],o[u++]=i[l*2],o[u++]=i[l*2+1],h[u++]=n[l],o[u++]=s[l];this._buffer.update(a),this._indexBuffer.update(this.indicesUint16)},t.prototype.processFill=function(e){if(e.holes.length)this.processHoles(e.holes),FK.triangulate(e,this);else{var i=v2[e.type];i.triangulate(e,this)}},t.prototype.processLine=function(e){Fj(e,this);for(var i=0;i<e.holes.length;i++)Fj(e.holes[i],this)},t.prototype.processHoles=function(e){for(var i=0;i<e.length;i++){var n=e[i],s=v2[n.type];s.build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},t.prototype.calculateBounds=function(){var e=this._bounds,i=AFt,n=Wi.IDENTITY;this._bounds.clear(),i.clear();for(var s=0;s<this.graphicsData.length;s++){var a=this.graphicsData[s],o=a.shape,h=a.type,u=a.lineStyle,l=a.matrix||Wi.IDENTITY,f=0;if(u&&u.visible){var c=u.alignment;f=u.width,h===ri.POLY?CFt(o)?f=f*(1-c):f=f*c:f=f*Math.max(0,c)}if(n!==l&&(i.isEmpty()||(e.addBoundsMatrix(i,n),i.clear()),n=l),h===ri.RECT||h===ri.RREC){var d=o;i.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(h===ri.CIRC){var v=o;i.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(h===ri.ELIP){var _=o;i.addFramePad(_.x,_.y,_.x,_.y,_.width+f,_.height+f)}else{var m=o;e.addVerticesMatrix(n,m.points,0,m.points.length,f,f)}}i.isEmpty()||e.addBoundsMatrix(i,n),e.pad(this.boundsPadding,this.boundsPadding)},t.prototype.transformPoints=function(e,i){for(var n=0;n<e.length/2;n++){var s=e[n*2],a=e[n*2+1];e[n*2]=i.a*s+i.c*a+i.tx,e[n*2+1]=i.b*s+i.d*a+i.ty}},t.prototype.addColors=function(e,i,n,s,a){a===void 0&&(a=0);var o=(i>>16)+(i&65280)+((i&255)<<16),h=In(o,n);e.length=Math.max(e.length,a+s);for(var u=0;u<s;u++)e[a+u]=h},t.prototype.addTextureIds=function(e,i,n,s){s===void 0&&(s=0),e.length=Math.max(e.length,s+n);for(var a=0;a<n;a++)e[s+a]=i},t.prototype.addUvs=function(e,i,n,s,a,o){o===void 0&&(o=null);for(var h=0,u=i.length,l=n.frame;h<a;){var f=e[(s+h)*2],c=e[(s+h)*2+1];if(o){var d=o.a*f+o.c*c+o.tx;c=o.b*f+o.d*c+o.ty,f=d}h++,i.push(f/l.width,c/l.height)}var v=n.baseTexture;(l.width<v.width||l.height<v.height)&&this.adjustUvs(i,n,u,a)},t.prototype.adjustUvs=function(e,i,n,s){for(var a=i.baseTexture,o=1e-6,h=n+s*2,u=i.frame,l=u.width/a.width,f=u.height/a.height,c=u.x/u.width,d=u.y/u.height,v=Math.floor(e[n]+o),_=Math.floor(e[n+1]+o),m=n+2;m<h;m+=2)v=Math.min(v,Math.floor(e[m]+o)),_=Math.min(_,Math.floor(e[m+1]+o));c-=v,d-=_;for(var m=n;m<h;m+=2)e[m]=(e[m]+c)*l,e[m+1]=(e[m+1]+d)*f},t.BATCHABLE_SIZE=100,t}(Y9),NFt=function(r){qB(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=il.BUTT,e.join=rl.MITER,e.miterLimit=10,e}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e},t.prototype.reset=function(){r.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},t}(OK),PFt=new Float32Array(3),y2={};(function(r){qB(t,r);function t(e){e===void 0&&(e=null);var i=r.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new OK,i._lineStyle=new NFt,i._matrix=null,i._holeMode=!1,i.state=Md.for2d(),i._geometry=e||new SFt,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=he.NORMAL,i}return Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return this.finishPoly(),new t(this._geometry)},Object.defineProperty(t.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tint",{get:function(){return this._tint},set:function(e){this._tint=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),t.prototype.lineStyle=function(e,i,n,s,a){return e===void 0&&(e=null),i===void 0&&(i=0),n===void 0&&(n=1),s===void 0&&(s=.5),a===void 0&&(a=!1),typeof e=="number"&&(e={width:e,color:i,alpha:n,alignment:s,native:a}),this.lineTextureStyle(e)},t.prototype.lineTextureStyle=function(e){e=Object.assign({width:0,texture:Ce.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:il.BUTT,join:rl.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this},t.prototype.startPoly=function(){if(this.currentPath){var e=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new FE,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[i-2],e[i-1]))}else this.currentPath=new FE,this.currentPath.closeStroke=!1},t.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},t.prototype.moveTo=function(e,i){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=i,this},t.prototype.lineTo=function(e,i){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,s=n[n.length-2],a=n[n.length-1];return(s!==e||a!==i)&&n.push(e,i),this},t.prototype._initCurve=function(e,i){e===void 0&&(e=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,i]):this.moveTo(e,i)},t.prototype.quadraticCurveTo=function(e,i,n,s){this._initCurve();var a=this.currentPath.points;return a.length===0&&this.moveTo(0,0),IFt.curveTo(e,i,n,s,a),this},t.prototype.bezierCurveTo=function(e,i,n,s,a,o){return this._initCurve(),wFt.curveTo(e,i,n,s,a,o,this.currentPath.points),this},t.prototype.arcTo=function(e,i,n,s,a){this._initCurve(e,i);var o=this.currentPath.points,h=Uj.curveTo(e,i,n,s,a,o);if(h){var u=h.cx,l=h.cy,f=h.radius,c=h.startAngle,d=h.endAngle,v=h.anticlockwise;this.arc(u,l,f,c,d,v)}return this},t.prototype.arc=function(e,i,n,s,a,o){if(o===void 0&&(o=!1),s===a)return this;!o&&a<=s?a+=Sw:o&&s<=a&&(s+=Sw);var h=a-s;if(h===0)return this;var u=e+Math.cos(s)*n,l=i+Math.sin(s)*n,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-u),v=Math.abs(c[c.length-1]-l);d<f&&v<f||c.push(u,l)}else this.moveTo(u,l),c=this.currentPath.points;return Uj.arc(u,l,e,i,n,s,a,o,c),this},t.prototype.beginFill=function(e,i){return e===void 0&&(e=0),i===void 0&&(i=1),this.beginTextureFill({texture:Ce.WHITE,color:e,alpha:i})},t.prototype.beginTextureFill=function(e){e=Object.assign({texture:Ce.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this},t.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},t.prototype.drawRect=function(e,i,n,s){return this.drawShape(new Ke(e,i,n,s))},t.prototype.drawRoundedRect=function(e,i,n,s,a){return this.drawShape(new Dct(e,i,n,s,a))},t.prototype.drawCircle=function(e,i,n){return this.drawShape(new Gct(e,i,n))},t.prototype.drawEllipse=function(e,i,n,s){return this.drawShape(new kct(e,i,n,s))},t.prototype.drawPolygon=function(){for(var e=arguments,i=[],n=0;n<arguments.length;n++)i[n]=e[n];var s,a=!0,o=i[0];o.points?(a=o.closeStroke,s=o.points):Array.isArray(i[0])?s=i[0]:s=i;var h=new FE(s);return h.closeStroke=a,this.drawShape(h),this},t.prototype.drawShape=function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},t.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},t.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===ri.RECT&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},t.prototype._render=function(e){this.finishPoly();var i=this._geometry,n=e.context.supports.uint32Indices;i.updateBatches(n),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))},t.prototype._populateBatches=function(){var e=this._geometry,i=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var s=0;s<n;s++){var a=e.batches[s],o=a.style.color,h=new Float32Array(this.vertexData.buffer,a.attribStart*4*2,a.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,a.attribStart*4*2,a.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,a.start*2,a.size),f={vertexData:h,blendMode:i,indices:l,uvs:u,_batchRGB:ai(o),_tintRGB:o,_texture:a.style.texture,alpha:a.style.alpha,worldAlpha:1};this.batches[s]=f}},t.prototype._renderBatched=function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,n=this.batches.length;i<n;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}},t.prototype._renderDirect=function(e){var i=this._resolveDirectShader(e),n=this._geometry,s=this.tint,a=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(s>>16&255)/255*a,o.tint[1]=(s>>8&255)/255*a,o.tint[2]=(s&255)/255*a,o.tint[3]=a,e.shader.bind(i),e.geometry.bind(n,i),e.state.set(this.state);for(var u=0,l=h.length;u<l;u++)this._renderDrawCallDirect(e,n.drawCalls[u])},t.prototype._renderDrawCallDirect=function(e,i){for(var n=i.texArray,s=i.type,a=i.size,o=i.start,h=n.count,u=0;u<h;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(s,a,o)},t.prototype._resolveDirectShader=function(e){var i=this.shader,n=this.pluginName;if(!i){if(!y2[n]){for(var s=e.plugins.batch.MAX_TEXTURES,a=new Int32Array(s),o=0;o<s;o++)a[o]=o;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new Wi,default:Kc.from({uSamplers:a},!0)},u=e.plugins[n]._shader.program;y2[n]=new md(u,h)}i=y2[n]}return i},t.prototype._calculateBounds=function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var i=e.bounds,n=i.minX,s=i.minY,a=i.maxX,o=i.maxY;this._bounds.addFrame(this.transform,n,s,a,o)}},t.prototype.containsPoint=function(e){return this.worldTransform.applyInverse(e,t._TEMP_POINT),this._geometry.containsPoint(t._TEMP_POINT)},t.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=ai(this.tint,PFt),i=0;i<this.batches.length;i++){var n=this.batches[i],s=n._batchRGB,a=e[0]*s[0]*255,o=e[1]*s[1]*255,h=e[2]*s[2]*255,u=(a<<16)+(o<<8)+(h|0);n._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},t.prototype.calculateVertices=function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var i=this.transform.worldTransform,n=i.a,s=i.b,a=i.c,o=i.d,h=i.tx,u=i.ty,l=this._geometry.points,f=this.vertexData,c=0,d=0;d<l.length;d+=2){var v=l[d],_=l[d+1];f[c++]=n*v+a*_+h,f[c++]=o*_+s*v+u}}},t.prototype.closePath=function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this},t.prototype.setMatrix=function(e){return this._matrix=e,this},t.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},t.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},t.prototype.destroy=function(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,r.prototype.destroy.call(this,e)},t._TEMP_POINT=new Qi,t})(_l);/*!
 * @pixi/mesh-extras - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var vM=function(r,t){return vM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},vM(r,t)};function Sy(r,t){vM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var OFt=function(r){Sy(t,r);function t(e,i,n,s){e===void 0&&(e=100),i===void 0&&(i=100),n===void 0&&(n=10),s===void 0&&(s=10);var a=r.call(this)||this;return a.segWidth=n,a.segHeight=s,a.width=e,a.height=i,a.build(),a}return t.prototype.build=function(){for(var e=this.segWidth*this.segHeight,i=[],n=[],s=[],a=this.segWidth-1,o=this.segHeight-1,h=this.width/a,u=this.height/o,l=0;l<e;l++){var f=l%this.segWidth,c=l/this.segWidth|0;i.push(f*h,c*u),n.push(f/a,c/o)}for(var d=a*o,l=0;l<d;l++){var v=l%a,_=l/a|0,m=_*this.segWidth+v,g=_*this.segWidth+v+1,T=(_+1)*this.segWidth+v,b=(_+1)*this.segWidth+v+1;s.push(m,g,T,g,b,T)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},t}(vI),FFt=function(r){Sy(t,r);function t(e,i,n){e===void 0&&(e=200),n===void 0&&(n=0);var s=r.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return s.points=i,s._width=e,s.textureScale=n,s.build(),s}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),t.prototype.build=function(){var e=this.points;if(e){var i=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(e.length<1)){i.data.length/4!==e.length&&(i.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));var a=n.data,o=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;for(var h=0,u=e[0],l=this._width*this.textureScale,f=e.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var v=u.x-e[c].x,_=u.y-e[c].y,m=Math.sqrt(v*v+_*_);u=e[c],h+=m/l}else h=c/(f-1);a[d]=h,a[d+1]=0,a[d+2]=h,a[d+3]=1}for(var g=0,c=0;c<f-1;c++){var d=c*2;o[g++]=d,o[g++]=d+1,o[g++]=d+2,o[g++]=d+2,o[g++]=d+1,o[g++]=d+3}n.update(),s.update(),this.updateVertices()}}},t.prototype.updateVertices=function(){var e=this.points;if(!(e.length<1)){for(var i=e[0],n,s=0,a=0,o=this.buffers[0].data,h=e.length,u=0;u<h;u++){var l=e[u],f=u*4;u<e.length-1?n=e[u+1]:n=l,a=-(n.x-i.x),s=n.y-i.y;var c=Math.sqrt(s*s+a*a),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=c,a/=c,s*=d,a*=d,o[f]=l.x+s,o[f+1]=l.y+a,o[f+2]=l.x-s,o[f+3]=l.y-a,i=l}this.buffers[0].update()}},t.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},t}(vI);(function(r){Sy(t,r);function t(e,i,n){n===void 0&&(n=0);var s=this,a=new FFt(e.height,i,n),o=new pI(e);return n>0&&(e.baseTexture.wrapMode=Ah.REPEAT),s=r.call(this,a,o)||this,s.autoUpdate=!0,s}return t.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),r.prototype._render.call(this,e)},t})(Fg);var UFt=function(r){Sy(t,r);function t(e,i,n){var s=this,a=new OFt(e.width,e.height,i,n),o=new pI(Ce.WHITE);return s=r.call(this,a,o)||this,s.texture=e,s.autoResize=!0,s}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,i=this.shader.texture,n=i.width,s=i.height;this.autoResize&&(e.width!==n||e.height!==s)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())},Object.defineProperty(t.prototype,"texture",{get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),r.prototype._render.call(this,e)},t.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),r.prototype.destroy.call(this,e)},t}(Fg);(function(r){Sy(t,r);function t(e,i,n,s,a){e===void 0&&(e=Ce.EMPTY);var o=this,h=new vI(i,n,s);h.getBuffer("aVertexPosition").static=!1;var u=new pI(e);return o=r.call(this,h,u,null,a)||this,o.autoUpdate=!0,o}return Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),r.prototype._render.call(this,e)},t})(Fg);var hE=10;(function(r){Sy(t,r);function t(e,i,n,s,a){i===void 0&&(i=hE),n===void 0&&(n=hE),s===void 0&&(s=hE),a===void 0&&(a=hE);var o=r.call(this,Ce.WHITE,4,4)||this;return o._origWidth=e.orig.width,o._origHeight=e.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=i,o._rightWidth=s,o._topHeight=n,o._bottomHeight=a,o.texture=e,o}return t.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(t.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e},enumerable:!1,configurable:!0}),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,i=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,i=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._getMinScale=function(){var e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n,a=Math.min(i,s);return a},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topHeight",{get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()},enumerable:!1,configurable:!0}),t.prototype._refresh=function(){var e=this.texture,i=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=n*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-n*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},t})(UFt);/*!
 * @pixi/sprite-animated - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yM=function(r,t){return yM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])},yM(r,t)};function MFt(r,t){yM(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}(function(r){MFt(t,r);function t(e,i){i===void 0&&(i=!0);var n=r.call(this,e[0]instanceof Ce?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=i,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return t.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(ea.shared.remove(this.update,this),this._isConnectedToTicker=!1))},t.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(ea.shared.add(this.update,this,my.HIGH),this._isConnectedToTicker=!0))},t.prototype.gotoAndStop=function(e){this.stop();var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var i=this.currentFrame;this._currentTime=e,i!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){if(this._playing){var i=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var a=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())}},t.prototype.updateTexture=function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},t.prototype.destroy=function(e){this.stop(),r.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},t.fromFrames=function(e){for(var i=[],n=0;n<e.length;++n)i.push(Ce.from(e[n]));return new t(i)},t.fromImages=function(e){for(var i=[],n=0;n<e.length;++n)i.push(Ce.from(e[n]));return new t(i)},Object.defineProperty(t.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},set:function(e){if(e[0]instanceof Ce)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<e.length;i++)this._textures.push(e[i].texture),this._durations.push(e[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentFrame",{get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(ea.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(ea.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),t})(uB);/*!
 * pixi.js - v6.1.2
 * Compiled Thu, 12 Aug 2021 17:11:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ql.registerPlugin("accessibility",wct);Ql.registerPlugin("extract",Jvt);Ql.registerPlugin("interaction",Mct);Ql.registerPlugin("particle",Qgt);Ql.registerPlugin("prepare",gbt);Ql.registerPlugin("batch",_pt);Ql.registerPlugin("tilingSprite",sEt);Yo.registerPlugin(gEt);Yo.registerPlugin(Cgt);Yo.registerPlugin(Vgt);Yo.registerPlugin(qgt);Yo.registerPlugin(tEt);LL.registerPlugin(Vct);LL.registerPlugin($mt);var UK={exports:{}};(function(r,t){(function(e,i){r.exports=i(F)})(typeof self<"u"?self:m_,function(e){return function(i){var n={};function s(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return i[a].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=i,s.c=n,s.d=function(a,o,h){s.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:h})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,o){if(1&o&&(a=s(a)),8&o||4&o&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&o&&typeof a!="string")for(var u in a)s.d(h,u,(function(l){return a[l]}).bind(null,u));return h},s.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(o,"a",o),o},s.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},s.p="",s(s.s=2)}([function(i,n){i.exports=e},function(i,n,s){var a={linear:function(o,h,u,l){return(u-h)*o/l+h},easeInQuad:function(o,h,u,l){return(u-h)*(o/=l)*o+h},easeOutQuad:function(o,h,u,l){return-(u-h)*(o/=l)*(o-2)+h},easeInOutQuad:function(o,h,u,l){var f=u-h;return(o/=l/2)<1?f/2*o*o+h:-f/2*(--o*(o-2)-1)+h},easeInCubic:function(o,h,u,l){return(u-h)*(o/=l)*o*o+h},easeOutCubic:function(o,h,u,l){return(u-h)*((o=o/l-1)*o*o+1)+h},easeInOutCubic:function(o,h,u,l){var f=u-h;return(o/=l/2)<1?f/2*o*o*o+h:f/2*((o-=2)*o*o+2)+h},easeInQuart:function(o,h,u,l){return(u-h)*(o/=l)*o*o*o+h},easeOutQuart:function(o,h,u,l){return-(u-h)*((o=o/l-1)*o*o*o-1)+h},easeInOutQuart:function(o,h,u,l){var f=u-h;return(o/=l/2)<1?f/2*o*o*o*o+h:-f/2*((o-=2)*o*o*o-2)+h},easeInQuint:function(o,h,u,l){return(u-h)*(o/=l)*o*o*o*o+h},easeOutQuint:function(o,h,u,l){return(u-h)*((o=o/l-1)*o*o*o*o+1)+h},easeInOutQuint:function(o,h,u,l){var f=u-h;return(o/=l/2)<1?f/2*o*o*o*o*o+h:f/2*((o-=2)*o*o*o*o+2)+h},easeInSine:function(o,h,u,l){var f=u-h;return-f*Math.cos(o/l*(Math.PI/2))+f+h},easeOutSine:function(o,h,u,l){return(u-h)*Math.sin(o/l*(Math.PI/2))+h},easeInOutSine:function(o,h,u,l){return-(u-h)/2*(Math.cos(Math.PI*o/l)-1)+h},easeInExpo:function(o,h,u,l){return o==0?h:(u-h)*Math.pow(2,10*(o/l-1))+h},easeOutExpo:function(o,h,u,l){var f=u-h;return o==l?h+f:f*(1-Math.pow(2,-10*o/l))+h},easeInOutExpo:function(o,h,u,l){var f=u-h;return o===0?h:o===l?h+f:(o/=l/2)<1?f/2*Math.pow(2,10*(o-1))+h:f/2*(2-Math.pow(2,-10*--o))+h},easeInCirc:function(o,h,u,l){return-(u-h)*(Math.sqrt(1-(o/=l)*o)-1)+h},easeOutCirc:function(o,h,u,l){return(u-h)*Math.sqrt(1-(o=o/l-1)*o)+h},easeInOutCirc:function(o,h,u,l){var f=u-h;return(o/=l/2)<1?-f/2*(Math.sqrt(1-o*o)-1)+h:f/2*(Math.sqrt(1-(o-=2)*o)+1)+h},easeInElastic:function(o,h,u,l){var f,c,d,v=u-h;return d=1.70158,o===0?h:(o/=l)==1?h+v:((c=0)||(c=.3*l),(f=v)<Math.abs(v)?(f=v,d=c/4):d=c/(2*Math.PI)*Math.asin(v/f),-f*Math.pow(2,10*(o-=1))*Math.sin((o*l-d)*(2*Math.PI)/c)+h)},easeOutElastic:function(o,h,u,l){var f,c,d,v=u-h;return d=1.70158,o===0?h:(o/=l)==1?h+v:((c=0)||(c=.3*l),(f=v)<Math.abs(v)?(f=v,d=c/4):d=c/(2*Math.PI)*Math.asin(v/f),f*Math.pow(2,-10*o)*Math.sin((o*l-d)*(2*Math.PI)/c)+v+h)},easeInOutElastic:function(o,h,u,l){var f,c,d,v=u-h;return d=1.70158,o===0?h:(o/=l/2)==2?h+v:((c=0)||(c=l*.44999999999999996),(f=v)<Math.abs(v)?(f=v,d=c/4):d=c/(2*Math.PI)*Math.asin(v/f),o<1?f*Math.pow(2,10*(o-=1))*Math.sin((o*l-d)*(2*Math.PI)/c)*-.5+h:f*Math.pow(2,-10*(o-=1))*Math.sin((o*l-d)*(2*Math.PI)/c)*.5+v+h)},easeInBack:function(o,h,u,l,f){return f===void 0&&(f=1.70158),(u-h)*(o/=l)*o*((f+1)*o-f)+h},easeOutBack:function(o,h,u,l,f){return f===void 0&&(f=1.70158),(u-h)*((o=o/l-1)*o*((f+1)*o+f)+1)+h},easeInOutBack:function(o,h,u,l,f){var c=u-h;return f===void 0&&(f=1.70158),(o/=l/2)<1?c/2*(o*o*((1+(f*=1.525))*o-f))+h:c/2*((o-=2)*o*((1+(f*=1.525))*o+f)+2)+h},easeInBounce:function(o,h,u,l){var f=u-h;return f-a.easeOutBounce(l-o,0,f,l)+h},easeOutBounce:function(o,h,u,l){var f=u-h;return(o/=l)<.36363636363636365?f*(7.5625*o*o)+h:o<.7272727272727273?f*(7.5625*(o-=.5454545454545454)*o+.75)+h:o<.9090909090909091?f*(7.5625*(o-=.8181818181818182)*o+.9375)+h:f*(7.5625*(o-=.9545454545454546)*o+.984375)+h},easeInOutBounce:function(o,h,u,l){var f=u-h;return o<l/2?.5*a.easeInBounce(2*o,0,f,l)+h:.5*a.easeOutBounce(2*o-l,0,f,l)+.5*f+h}};i.exports=a},function(i,n,s){i.exports=s(3)},function(i,n,s){s.r(n),s.d(n,"ReactConfetti",function(){return ht});var a,o,h=s(0),u=s.n(h),l=s(1),f=s.n(l);function c(I,M){return I+Math.random()*(M-I)}function d(I,M){for(var O=0;O<M.length;O++){var N=M[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}function v(I,M,O){return M in I?Object.defineProperty(I,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[M]=O,I}(function(I){I[I.Circle=0]="Circle",I[I.Square=1]="Square",I[I.Strip=2]="Strip"})(a||(a={})),function(I){I[I.Positive=1]="Positive",I[I.Negative=-1]="Negative"}(o||(o={}));var _=function(){function I(N,B,G,W){(function(iu,Ny){if(!(iu instanceof Ny))throw new TypeError("Cannot call a class as a function")})(this,I),v(this,"context",void 0),v(this,"radius",void 0),v(this,"x",void 0),v(this,"y",void 0),v(this,"w",void 0),v(this,"h",void 0),v(this,"vx",void 0),v(this,"vy",void 0),v(this,"shape",void 0),v(this,"angle",void 0),v(this,"angularSpin",void 0),v(this,"color",void 0),v(this,"rotateY",void 0),v(this,"rotationDirection",void 0),v(this,"getOptions",void 0),this.getOptions=B;var X,ut,ft=this.getOptions(),ct=ft.colors,bt=ft.initialVelocityX,Ye=ft.initialVelocityY;this.context=N,this.x=G,this.y=W,this.w=c(5,20),this.h=c(5,20),this.radius=c(5,10),this.vx=typeof bt=="number"?c(-bt,bt):c(bt.min,bt.max),this.vy=typeof Ye=="number"?c(-Ye,0):c(Ye.min,Ye.max),this.shape=(X=0,ut=2,Math.floor(X+Math.random()*(ut-X+1))),this.angle=c(0,360)*Math.PI/180,this.angularSpin=c(-.2,.2),this.color=ct[Math.floor(Math.random()*ct.length)],this.rotateY=c(0,1),this.rotationDirection=c(0,1)?o.Positive:o.Negative}var M,O;return M=I,(O=[{key:"update",value:function(){var N=this.getOptions(),B=N.gravity,G=N.wind,W=N.friction,X=N.opacity,ut=N.drawShape;this.x+=this.vx,this.y+=this.vy,this.vy+=B,this.vx+=G,this.vx*=W,this.vy*=W,this.rotateY>=1&&this.rotationDirection===o.Positive?this.rotationDirection=o.Negative:this.rotateY<=-1&&this.rotationDirection===o.Negative&&(this.rotationDirection=o.Positive);var ft=.1*this.rotationDirection;if(this.rotateY+=ft,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=X,this.context.lineCap="round",this.context.lineWidth=2,ut&&typeof ut=="function")ut.call(this,this.context);else switch(this.shape){case a.Circle:this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break;case a.Square:this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break;case a.Strip:this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h)}this.context.closePath(),this.context.restore()}}])&&d(M.prototype,O),I}();function m(I,M,O){return M in I?Object.defineProperty(I,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[M]=O,I}var g=function I(M,O){var N=this;(function(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")})(this,I),m(this,"canvas",void 0),m(this,"context",void 0),m(this,"getOptions",void 0),m(this,"x",0),m(this,"y",0),m(this,"w",0),m(this,"h",0),m(this,"lastNumberOfPieces",0),m(this,"tweenInitTime",Date.now()),m(this,"particles",[]),m(this,"particlesGenerated",0),m(this,"removeParticleAt",function(G){N.particles.splice(G,1)}),m(this,"getParticle",function(){var G=c(N.x,N.w+N.x),W=c(N.y,N.h+N.y);return new _(N.context,N.getOptions,G,W)}),m(this,"animate",function(){var G=N.canvas,W=N.context,X=N.particlesGenerated,ut=N.lastNumberOfPieces,ft=N.getOptions(),ct=ft.run,bt=ft.recycle,Ye=ft.numberOfPieces,iu=ft.debug,Ny=ft.tweenFunction,Py=ft.tweenDuration;if(!ct)return!1;var qo=N.particles.length,Jl=bt?qo:X,Oy=Date.now();if(Jl<Ye){ut!==Ye&&(N.tweenInitTime=Oy,N.lastNumberOfPieces=Ye);for(var x0=N.tweenInitTime,EI=Ny(Oy-x0>Py?Py:Math.max(0,Oy-x0),Jl,Ye,Py),b0=Math.round(EI-Jl),T0=0;T0<b0;T0++)N.particles.push(N.getParticle());N.particlesGenerated+=b0}return iu&&(W.font="12px sans-serif",W.fillStyle="#333",W.textAlign="right",W.fillText("Particles: ".concat(qo),G.width-10,G.height-20)),N.particles.forEach(function(tf,E0){tf.update(),(tf.y>G.height||tf.y<-100||tf.x>G.width+100||tf.x<-100)&&(bt&&Jl<=Ye?N.particles[E0]=N.getParticle():N.removeParticleAt(E0))}),qo>0||Jl<Ye}),this.canvas=M;var B=this.canvas.getContext("2d");if(!B)throw new Error("Could not get canvas context");this.context=B,this.getOptions=O};function T(I,M){var O=Object.keys(I);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(I);M&&(N=N.filter(function(B){return Object.getOwnPropertyDescriptor(I,B).enumerable})),O.push.apply(O,N)}return O}function b(I){for(var M=1;M<arguments.length;M++){var O=arguments[M]!=null?arguments[M]:{};M%2?T(Object(O),!0).forEach(function(N){R(I,N,O[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(O)):T(Object(O)).forEach(function(N){Object.defineProperty(I,N,Object.getOwnPropertyDescriptor(O,N))})}return I}function S(I,M){for(var O=0;O<M.length;O++){var N=M[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}function R(I,M,O){return M in I?Object.defineProperty(I,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[M]=O,I}var U={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:f.a.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0},L=function(){function I(N,B){var G=this;(function(X,ut){if(!(X instanceof ut))throw new TypeError("Cannot call a class as a function")})(this,I),R(this,"canvas",void 0),R(this,"context",void 0),R(this,"_options",void 0),R(this,"generator",void 0),R(this,"rafId",void 0),R(this,"setOptionsWithDefaults",function(X){var ut={confettiSource:{x:0,y:0,w:G.canvas.width,h:0}};G._options=b(b(b({},ut),U),X),Object.assign(G,X.confettiSource)}),R(this,"update",function(){var X=G.options,ut=X.run,ft=X.onConfettiComplete,ct=G.canvas,bt=G.context;ut&&(bt.fillStyle="white",bt.clearRect(0,0,ct.width,ct.height)),G.generator.animate()?G.rafId=requestAnimationFrame(G.update):(ft&&typeof ft=="function"&&G.generator.particlesGenerated>0&&ft.call(G,G),G._options.run=!1)}),R(this,"reset",function(){G.generator&&G.generator.particlesGenerated>0&&(G.generator.particlesGenerated=0,G.generator.particles=[],G.generator.lastNumberOfPieces=0)}),R(this,"stop",function(){G.options={run:!1},G.rafId&&(cancelAnimationFrame(G.rafId),G.rafId=void 0)}),this.canvas=N;var W=this.canvas.getContext("2d");if(!W)throw new Error("Could not get canvas context");this.context=W,this.generator=new g(this.canvas,function(){return G.options}),this.options=B,this.update()}var M,O;return M=I,(O=[{key:"options",get:function(){return this._options},set:function(N){var B=this._options&&this._options.run,G=this._options&&this._options.recycle;this.setOptionsWithDefaults(N),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof N.recycle=="boolean"&&N.recycle&&G===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof N.run=="boolean"&&N.run&&B===!1&&this.update()}}])&&S(M.prototype,O),I}();function $(I){return function(M){if(Array.isArray(M))return K(M)}(I)||function(M){if(typeof Symbol<"u"&&Symbol.iterator in Object(M))return Array.from(M)}(I)||at(I)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(I){return(k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(I)}function H(){return(H=Object.assign||function(I){for(var M=1;M<arguments.length;M++){var O=arguments[M];for(var N in O)Object.prototype.hasOwnProperty.call(O,N)&&(I[N]=O[N])}return I}).apply(this,arguments)}function it(I,M){var O=Object.keys(I);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(I);M&&(N=N.filter(function(B){return Object.getOwnPropertyDescriptor(I,B).enumerable})),O.push.apply(O,N)}return O}function tt(I){for(var M=1;M<arguments.length;M++){var O=arguments[M]!=null?arguments[M]:{};M%2?it(Object(O),!0).forEach(function(N){mt(I,N,O[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(O)):it(Object(O)).forEach(function(N){Object.defineProperty(I,N,Object.getOwnPropertyDescriptor(O,N))})}return I}function j(I,M){return function(O){if(Array.isArray(O))return O}(I)||function(O,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(O)))){var B=[],G=!0,W=!1,X=void 0;try{for(var ut,ft=O[Symbol.iterator]();!(G=(ut=ft.next()).done)&&(B.push(ut.value),!N||B.length!==N);G=!0);}catch(ct){W=!0,X=ct}finally{try{G||ft.return==null||ft.return()}finally{if(W)throw X}}return B}}(I,M)||at(I,M)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function at(I,M){if(I){if(typeof I=="string")return K(I,M);var O=Object.prototype.toString.call(I).slice(8,-1);return O==="Object"&&I.constructor&&(O=I.constructor.name),O==="Map"||O==="Set"?Array.from(I):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?K(I,M):void 0}}function K(I,M){(M==null||M>I.length)&&(M=I.length);for(var O=0,N=new Array(M);O<M;O++)N[O]=I[O];return N}function et(I,M){if(!(I instanceof M))throw new TypeError("Cannot call a class as a function")}function st(I,M){for(var O=0;O<M.length;O++){var N=M[O];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(I,N.key,N)}}function V(I,M){return(V=Object.setPrototypeOf||function(O,N){return O.__proto__=N,O})(I,M)}function Y(I){var M=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var O,N=Q(I);if(M){var B=Q(this).constructor;O=Reflect.construct(N,arguments,B)}else O=N.apply(this,arguments);return z(this,O)}}function z(I,M){return!M||k(M)!=="object"&&typeof M!="function"?Z(I):M}function Z(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}function Q(I){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(I)}function mt(I,M,O){return M in I?Object.defineProperty(I,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):I[M]=O,I}var Et=u.a.createRef(),It=function(I){(function(G,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(W&&W.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),W&&V(G,W)})(B,I);var M,O,N=Y(B);function B(G){var W;et(this,B);for(var X=arguments.length,ut=new Array(X>1?X-1:0),ft=1;ft<X;ft++)ut[ft-1]=arguments[ft];return mt(Z(W=N.call.apply(N,[this,G].concat(ut))),"canvas",u.a.createRef()),mt(Z(W),"confetti",void 0),W.canvas=G.canvasRef||Et,W}return M=B,(O=[{key:"componentDidMount",value:function(){if(this.canvas.current){var G=wt(this.props)[0];this.confetti=new L(this.canvas.current,G)}}},{key:"componentDidUpdate",value:function(){var G=wt(this.props)[0];this.confetti&&(this.confetti.options=G)}},{key:"componentWillUnmount",value:function(){this.confetti&&this.confetti.stop(),this.confetti=void 0}},{key:"render",value:function(){var G=j(wt(this.props),2),W=G[0],X=G[1],ut=tt({zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0},X.style);return u.a.createElement("canvas",H({width:W.width,height:W.height,ref:this.canvas},X,{style:ut}))}}])&&st(M.prototype,O),B}(h.Component);function wt(I){var M={},O={},N=[].concat($(Object.keys(U)),["confettiSource","drawShape","onConfettiComplete"]),B=["canvasRef"];for(var G in I){var W=I[G];N.includes(G)?M[G]=W:B.includes(G)?B[G]=W:O[G]=W}return[M,O,{}]}mt(It,"defaultProps",tt({},U)),mt(It,"displayName","ReactConfetti");var ht=u.a.forwardRef(function(I,M){return u.a.createElement(It,H({canvasRef:M},I))});n.default=ht}]).default})})(UK);var LFt=UK.exports;const oi=Sd(LFt),Ri=[{grid:["a","x","a","x","n","u","v","u","t","r","n","m","a","l","i","o","a","o","x","l","t","d","p","q","b","r","w"],words:["ant","tan","nib","bat"]},{grid:["a","x","e","p","n","d","e","j","n","a","n","q","a","o","i","b","a","l","o","d","r","u","t","c","h","g","r"],words:["one","eat","tie","ear"]},{grid:["a","c","b","t","e","k","r","i","s","p","a","o","l","u","a","k","d","f","n","c","e","s","r","u","i","c","o","w","x","u","s","r","g","e","q","j","f","n","x","r","c","b","r","n","o","e","q","l","w","u","r","k","b","r","t","k","k","z","y","o","d","l","a","n"],words:["went","tent","trip","pond","desk"]},{grid:["j","o","d","s","e","l","l","x","z","k","u","s","f","s","o","f","i","o","q","e","m","h","m","e","k","u","k","w","u","r","p","u","l","l","j","s","e","a","s","t"],words:["jump","pull","less","sell","like","east","trek"]},{grid:["t","w","m","t","e","x","d","e","r","n","a","e","p","b","n","a","n","r","n","i","o","s","a","k","o","x","a","i","a","r","b","i","t","r","g","l","u","f","h","g"],words:["boat","tear","road","drag","grin"]},{grid:["e","x","n","r","d","a","p","c","p","n","e","o","a","i","o","a","o","a","d","g","d","k","p","u","t","m","n"],words:["end","den","nod","dad","dip","pop","pat","top","pan"]},{grid:["m","f","t","s","t","v","t","k","t","a","r","a","o","a","e","i","a","o","u","e","o","u","p","k","p","b","p","r","p","w","n","c","n"],words:["map","pot","tap","pet","tip","pat","top","put","ten","nor","run"]},{grid:["h","u","d","l","p","f","t","i","p","t","p","f","i","a","i","o","i","o","a","o","a","r","b","s","s","m","p","c","n","l","g","e","n"],words:["his","sip","pin","nap","pan","bid","dip","pit","tag","gap"]},{grid:["b","o","d","r","t","i","t","l","t","o","u","y","i","d","e","h","e","k","o","n","o","q","b","c","g","f","n","j","n","m","y","p","n"],words:["big","get","ten","not","ton","bid","den","net","toy","you"]},{grid:["t","d","w","t","r","x","t","n","d","l","o","p","t","s","t","p","b","i","s","o","e","s","u","a","l","q","a","i","l","u","o","o","z","e","l","x","a","s","w","a","n","t","n","n","c","r","c","y","b","c","f","l","i","j","t","m","o","k","s","d","d","i","r","k"],words:["till","last","tank","knit","tuck","best","test","tall","land","drop"]}];function BFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[0].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(0),[K,et]=F.useState(!1),[st,V]=F.useState(!1),[Y,z]=F.useState(!1),[Z,Q]=F.useState(!1),mt=F.useMemo(()=>Ri[0].grid,[]),Et=F.useCallback(()=>{const M=document.querySelector(".stage");M&&(M.style.display="block")},[]),It=M=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",Et),()=>{window.removeEventListener("orientationchange",Et)}),[Et]);function wt(M){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var O=new SpeechSynthesisUtterance;O.text=M,window.speechSynthesis.speak(O)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const M=k-L;tt(M)}},[L,k]),F.useEffect(()=>{let M=null;return L&&!k?M=setInterval(()=>{at((new Date-L)/1e3)},1e3):k&&clearInterval(M),()=>clearInterval(M)},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const ht=F.useCallback(M=>{g.length>0&&g.forEach(O=>{O.clear===!0&&M.clear}),u.length>=2&&!_&&(M.clear(),M.lineStyle(2,15853020),g.length>0&&g.forEach(O=>{O.clear===!0?M.clear:(M.moveTo(O.start_x,O.start_y),M.lineTo(O.end_x,O.end_y)),console.log("Length of line: "+g.length)}),M.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),M.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),console.log("length: "+g.length),M.endFill()),_&&(g.forEach(O=>{O.clear==="none"&&M.clear}),m(!1))},[u,e,_,g]),I=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let M,O=0,N=[];for(let B=0;B<27;B++){B<=8?M=150:B<=17?(M=50,B===9&&(O=0)):(M=-50,B===18&&(O=0));let G=r.width/2-400+100*O,W=r.height/2-M;O++,N.push({text:mt[B],xPos:G,yPos:W,color:"black",index:B,selected:!1,initColor:"black"})}i(N)}else{let M,O=0,N=[];et(!0);for(let B=0;B<27;B++){B<=8?M=50:B<=17?(M=0,B===9&&(O=0)):(M=-50,B===18&&(O=0));let G=r.width/2-300+70*O,W=r.height/2-M*2;O++,N.push({text:mt[B],xPos:G,yPos:W,color:"black",index:B,selected:!1,initColor:"black"})}i(N)}},[r]),F.useEffect(()=>{const M=B=>{let G,W;if(o){const X=e.map(ut=>{window.innerHeight>630&&window.innerWidth>830?(G=B.clientX+window.scrollX,W=B.clientY+window.scrollY):(G=B.clientX,W=B.clientY);let ft=ut.color;const ct={x:ut.xPos,y:ut.yPos},bt=Math.sqrt(Math.pow(G-ct.x,2)+Math.pow(W-ct.y,2));return bt<40&&ut.selected===!1&&(console.log(ut.text),a(Ye=>Ye+ut.text),l([...u,ut.index]),ut.selected=!0,u.length>=2&&T(Ye=>[...Ye,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...ut,color:bt<=40?"green":ft}});i(X)}else{const X=e.map(ut=>{const ft=B.clientX+window.scrollX,ct=B.clientY+window.scrollY,bt={x:ut.xPos,y:ut.yPos},Ye=Math.sqrt(Math.pow(ft-bt.x,2)+Math.pow(ct-bt.y,2));return Ye<40&&!K?(console.log(ut.text),{...ut,color:Ye<=40?"green":ut.initColor}):(console.log(ut.text),{...ut,color:Ye==0?"green":ut.initColor})});i(X)}},O=B=>{const G=e.map(W=>{let X,ut;window.innerHeight>630&&window.innerWidth>830?(X=B.clientX+window.scrollX,ut=B.clientY+window.scrollY):(X=B.clientX,ut=B.clientY);const ft={x:W.xPos,y:W.yPos},ct=Math.sqrt(Math.pow(X-ft.x,2)+Math.pow(ut-ft.y,2));return ct<40&&!K?(z(!0),console.log(W.text),h(!0),a(bt=>bt+W.text),l([...u,W.index]),W.selected=!0,U(R++),{...W,color:"green"}):ct<40&&K?(z(!0),console.log(W.text),h(!0),a(bt=>bt+W.text),l([...u,W.index]),W.selected=!0,U(R++),{...W,color:"green"}):W});i(G)},N=()=>{for(let B=0;B<u.length;B++)e[u[B]].selected=!1;if(o&&U(B=>B+1),h(!1),console.log(u),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),wt(s),a("");else{h(!1),wt(s),v([...d,s+"		"]),S(B=>B+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(B=>[...B,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let B=0;B<u.length;B++)for(let G=0;G<e.length;G++)u[B]===e[G].index&&(e[G].initColor="green",i(e),g.forEach(W=>{W.clear==="none"&&(W.clear=!1)}))}else{for(let B=0;B<u.length;B++)for(let G=0;G<e.length;G++)u[B]===e[G].index&&(e[G].color="black",e[G].selected=!1,i(e),g.forEach(W=>{W.clear==="none"&&(W.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",O),window.addEventListener("pointerup",N),window.addEventListener("pointermove",M),window.addEventListener("touchmove",M),window.addEventListener("touchstart",O),window.addEventListener("touchend",N),()=>{window.removeEventListener("pointerdown",O),window.removeEventListener("pointerup",N),window.removeEventListener("pointermove",M),window.removeEventListener("touchmove",M),window.removeEventListener("touchstart",O),window.removeEventListener("touchend",N)}},[e,s,u,n,d,o,g,R,K]),F.useEffect(()=>{d.length===n.length&&V(!0)},[d,n]),F.useEffect(()=>{if(st&&!Z){const M={gameId:16,tries:R,timer:j.toFixed(0),status:!0};try{fetch("https://jwlgamesbackend.vercel.app/api/caretaker/sendgamedata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)}).then(O=>{if(!O.ok)throw new Error("Failed to send game data");return console.log(M),Q(!0),O.json()}).then(O=>{console.log("Success:",O)}).catch(O=>{console.error("Error while saving the data...:",O)})}catch(O){console.error("Error while preparing game data:",O)}}},[st,R,it,j,Z]),window.innerHeight>630&&window.innerWidth>830?(It(),C.jsxs(C.Fragment,{children:[st&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>wt("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",j.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:ht}),C.jsx(Rt.Container,{name:"textArea",children:e.map(M=>C.jsx(Rt.Text,{text:M.text,anchor:.5,x:M.xPos,y:M.yPos,style:new Ir({fill:M.color}),interactive:!0},M.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game2",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[st&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>wt("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h5",{style:{marginLeft:window.innerWidth/15,padding:0,width:100},children:["Time: ",j.toFixed(0)]}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12,padding:0,width:100},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:" #B1AFCF"},height:r.height,width:r.width-100,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:ht}),C.jsx(Rt.Container,{name:"textArea",children:e.map(M=>C.jsx(Rt.Text,{text:M.text,anchor:.5,x:M.xPos,y:M.yPos,style:new Ir({fill:M.color}),interactive:!0},M.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game2",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function GFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[1].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(0),[K,et]=F.useState(!1),[st,V]=F.useState(!1),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[1].grid,[]),Q=F.useCallback(()=>{const ht=document.querySelector(".stage");ht&&(ht.style.display="block")},[]),mt=ht=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",Q),()=>{window.removeEventListener("orientationchange",Q)}),[Q]);function Et(ht){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var I=new SpeechSynthesisUtterance;I.text=ht,window.speechSynthesis.speak(I)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const ht=k-L;tt(ht)}},[L,k]),F.useEffect(()=>{let ht=null;return L&&!k?ht=setInterval(()=>{at((new Date-L)/1e3)},1e3):k&&clearInterval(ht),()=>clearInterval(ht)},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const It=F.useCallback(ht=>{g.length>0&&g.forEach(I=>{I.clear===!0&&ht.clear}),u.length>=2&&!_&&(ht.clear(),ht.lineStyle(2,15853020),g.length>0&&g.forEach(I=>{I.clear===!0?ht.clear:(ht.moveTo(I.start_x,I.start_y),ht.lineTo(I.end_x,I.end_y)),console.log("Length of line: "+g.length)}),ht.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),ht.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),ht.endFill()),_&&(g.forEach(I=>{I.clear==="none"&&ht.clear}),m(!1))},[u,e,_,g]),wt=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",wt),()=>{window.removeEventListener("resize",wt)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let ht,I=0,M=[];for(let O=0;O<27;O++){O<=8?ht=150:O<=17?(ht=50,O===9&&(I=0)):(ht=-50,O===18&&(I=0));let N=r.width/2-400+100*I,B=r.height/2-ht;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let ht,I=0,M=[];et(!0);for(let O=0;O<27;O++){O<=8?ht=50:O<=17?(ht=0,O===9&&(I=0)):(ht=-50,O===18&&(I=0));let N=r.width/2-300+70*I,B=r.height/2-ht*2;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const ht=O=>{let N,B;if(o){const G=e.map(W=>{window.innerHeight>630&&window.innerWidth>830?(N=O.clientX+window.scrollX,B=O.clientY+window.scrollY):(N=O.clientX,B=O.clientY);let X=W.color;const ut={x:W.xPos,y:W.yPos},ft=Math.sqrt(Math.pow(N-ut.x,2)+Math.pow(B-ut.y,2));return ft<40&&W.selected===!1&&(a(ct=>ct+W.text),l([...u,W.index]),W.selected=!0,u.length>=2&&T(ct=>[...ct,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...W,color:ft<=40?"green":X}});i(G)}else{const G=e.map(W=>{const X=O.clientX+window.scrollX,ut=O.clientY+window.scrollY,ft={x:W.xPos,y:W.yPos},ct=Math.sqrt(Math.pow(X-ft.x,2)+Math.pow(ut-ft.y,2));return ct<40&&!K?{...W,color:ct<=40?"green":W.initColor}:{...W,color:ct==0?"green":W.initColor}});i(G)}},I=O=>{const N=e.map(B=>{let G,W;window.innerHeight>630&&window.innerWidth>830?(G=O.clientX+window.scrollX,W=O.clientY+window.scrollY):(G=O.clientX,W=O.clientY);const X={x:B.xPos,y:B.yPos},ut=Math.sqrt(Math.pow(G-X.x,2)+Math.pow(W-X.y,2));return ut<40&&!K?(h(!0),a(ft=>ft+B.text),l([...u,B.index]),B.selected=!0,U(R++),z(!0),{...B,color:"green"}):ut<40&&K?(h(!0),a(ft=>ft+B.text),l([...u,B.index]),B.selected=!0,U(R++),z(!0),{...B,color:"green"}):B});i(N)},M=()=>{for(let O=0;O<u.length;O++)e[u[O]].selected=!1;if(o&&U(O=>O+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),Et(s),a("");else{h(!1),Et(s),v([...d,s+"		"]),S(O=>O+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(O=>[...O,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let O=0;O<u.length;O++)for(let N=0;N<e.length;N++)u[O]===e[N].index&&(e[N].initColor="green",i(e),g.forEach(B=>{B.clear==="none"&&(B.clear=!1)}))}else{for(let O=0;O<u.length;O++)for(let N=0;N<e.length;N++)u[O]===e[N].index&&(e[N].color="black",e[N].selected=!1,i(e),g.forEach(B=>{B.clear==="none"&&(B.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",I),window.addEventListener("pointerup",M),window.addEventListener("pointermove",ht),window.addEventListener("touchmove",ht),window.addEventListener("touchstart",I),window.addEventListener("touchend",M),()=>{window.removeEventListener("pointerdown",I),window.removeEventListener("pointerup",M),window.removeEventListener("pointermove",ht),window.removeEventListener("touchmove",ht),window.removeEventListener("touchstart",I),window.removeEventListener("touchend",M)}},[e,s,u,n,d,o,g,R,K]),F.useEffect(()=>{d.length===n.length&&V(!0)},[d,n]),F.useEffect(()=>{if(st){const ht={gameId:"1",tries:R,timer:1e3,status:!0};try{fetch("https://jwlgamesbackend.vercel.app/api/caretaker/sendgamedata",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ht)}).then(I=>{if(!I.ok)throw new Error("Failed to send game data");return I.json()}).then(I=>{console.log("Success:",I)}).catch(I=>{console.error("Error while saving the data...:",I)})}catch(I){console.error("Error while preparing game data:",I)}}},[st,R,it]),window.innerHeight>630&&window.innerWidth>830?(mt(),C.jsxs(C.Fragment,{children:[st&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>Et("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",j.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:It}),C.jsx(Rt.Container,{name:"textArea",children:e.map(ht=>C.jsx(Rt.Text,{text:ht.text,anchor:.5,x:ht.xPos,y:ht.yPos,style:new Ir({fill:ht.color}),interactive:!0},ht.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game1",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game3",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[st&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>Et("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h5",{style:{marginLeft:window.innerWidth/15,padding:0,width:100},children:["Time: ",j.toFixed(0)]}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12,padding:0,width:100},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:" #B1AFCF"},height:r.height,width:r.width-100,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:It}),C.jsx(Rt.Container,{name:"textArea",children:e.map(ht=>C.jsx(Rt.Text,{text:ht.text,anchor:.5,x:ht.xPos,y:ht.yPos,style:new Ir({fill:ht.color}),interactive:!0},ht.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game1",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game3",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function kFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[5].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),Y=F.useMemo(()=>Ri[5].grid,[]),[z,Z]=F.useState(!1);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]),Et=I=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{z&&$(new Date)},[z]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<27;O++){O<=8?Q=150:O<=17?(Q=50,O===9&&(I=0)):(Q=-50,O===18&&(I=0));let N=r.width/2-400+100*I,B=r.height/2-Q;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<27;O++){O<=8?Q=50:O<=17?(Q=0,O===9&&(I=0)):(Q=-50,O===18&&(I=0));let N=r.width/2-250+55*I,B=r.height/2-Q*2;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game2",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game4",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h5",{style:{marginLeft:window.innerWidth/15,padding:0,width:100},children:["Time: ",st.toFixed(0)]}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12,padding:0,width:100},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game2",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game5",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function DFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[6].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[6].grid,[]);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]),Et=I=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Z.length;O++){O<=10?Q=150:O<=21?(Q=50,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Z.length;O++){O<=10?Q=50:O<=21?(Q=0,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-250+50*I,B=r.height/2-Q*2;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game3",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game5",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function $Ft(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[7].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[7].grid,[]);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]),Et=I=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Z.length;O++){O<=10?Q=150:O<=21?(Q=50,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Z.length;O++){O<=10?Q=50:O<=21?(Q=0,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-300+50*I,B=r.height/2-Q*2;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game4",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game6",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h5",{style:{marginLeft:window.innerWidth/15,padding:0,width:100},children:["Time: ",st.toFixed(0)]}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12,padding:0,width:100},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game3",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game6",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function HFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[8].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[8].grid,[]);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]);F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);const Et=I=>{document.body.style.overflow="hidden"};function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Z.length;O++){O<=10?Q=150:O<=21?(Q=50,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Z.length;O++){O<=10?Q=50:O<=21?(Q=0,O===11&&(I=0)):(Q=-50,O===22&&(I=0));let N=r.width/2-300+50*I,B=r.height/2-Q*2;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game5",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game7",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h5",{style:{marginLeft:window.innerWidth/15,padding:0,width:100},children:["Time: ",st.toFixed(0)]}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12,padding:0,width:100},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/word-matching/game5",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function XFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[2].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[2].grid,[]);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]);F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);function Et(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const It=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),wt=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};F.useEffect(()=>(window.addEventListener("resize",wt),()=>{window.removeEventListener("resize",wt)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Z.length;O++){O<=15?Q=150:O<=31?(Q=75,O===16&&(I=0)):O<=47?(Q=0,O===32&&(I=0)):(Q=-75,O===48&&(I=0));let N=r.width/2-600+80*I,B=r.height/2-Q-60;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Z.length;O++){O<=15?Q=150:O<=31?(Q=75,O===16&&(I=0)):O<=47?(Q=0,O===32&&(I=0)):(Q=-75,O===48&&(I=0));let N=r.width/2-400+50*I,B=r.height/2-Q;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),Et(s),a("");else{h(!1),Et(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]);const ht=I=>{document.body.style.overflow="hidden"};return F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(ht(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>Et("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:It}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game6",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game8",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>Et("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:It}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function VFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[9].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),[Y,z]=F.useState(!1),Z=F.useMemo(()=>Ri[9].grid,[]);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]),Et=I=>{document.body.style.overflow="hidden"};F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{Y&&$(new Date)},[Y]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Z.length;O++){O<=15?Q=150:O<=31?(Q=75,O===16&&(I=0)):O<=47?(Q=0,O===32&&(I=0)):(Q=-75,O===48&&(I=0));let N=r.width/2-600+80*I,B=r.height/2-Q-60;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Z.length;O++){O<=15?Q=150:O<=31?(Q=75,O===16&&(I=0)):O<=47?(Q=0,O===32&&(I=0)):(Q=-75,O===48&&(I=0));let N=r.width/2-400+50*I,B=r.height/2-Q;I++,M.push({text:Z[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game7",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game9",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function jFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[3].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),Y=F.useMemo(()=>Ri[3].grid,[]),[z,Z]=F.useState(!1);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]);F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);const Et=I=>{document.body.style.overflow="hidden"};function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{z&&$(new Date)},[z]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Y.length;O++){O<=9?Q=150:O<=19?(Q=75,O===10&&(I=0)):O<=29?(Q=0,O===20&&(I=0)):(Q=-75,O===30&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q-80;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Y.length;O++){O<=9?Q=150:O<=19?(Q=75,O===10&&(I=0)):O<=29?(Q=0,O===20&&(I=0)):(Q=-75,O===30&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q-80;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game8",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game10",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function zFt(){const[r,t]=F.useState({width:window.innerWidth,height:window.innerHeight}),[e,i]=F.useState([]);let n=F.useMemo(()=>Ri[4].words,[]);const[s,a]=F.useState(""),[o,h]=F.useState(!1),[u,l]=F.useState([]),[f,c]=F.useState(""),[d,v]=F.useState([]),[_,m]=F.useState(!1),[g,T]=F.useState([]),[b,S]=F.useState("");let[R,U]=F.useState(0);const[L,$]=F.useState(null),[k,H]=F.useState(null),[it,tt]=F.useState(null),[j,at]=F.useState(!1),[K,et]=F.useState(!1),[st,V]=F.useState(0),Y=F.useMemo(()=>Ri[4].grid,[]),[z,Z]=F.useState(!1);let Q;const mt=F.useCallback(()=>{const I=document.querySelector(".stage");I&&(I.style.display="block")},[]);F.useEffect(()=>(window.addEventListener("orientationchange",mt),()=>{window.removeEventListener("orientationchange",mt)}),[mt]);const Et=I=>{document.body.style.overflow="hidden"};function It(I){"speechSynthesis"in window||alert("Sorry, your browser doesn't support text to speech!");var M=new SpeechSynthesisUtterance;M.text=I,window.speechSynthesis.speak(M)}F.useEffect(()=>{z&&$(new Date)},[z]),F.useEffect(()=>{d.length===n.length&&L&&H(new Date)},[d,n,L]),F.useEffect(()=>{if(L&&k){const I=k-L;tt(I)}},[L,k]),F.useEffect(()=>{it!==null&&alert(`Congratulations! You completed the game in ${it/1e3} seconds.`)},[it]),F.useEffect(()=>{c(n.join("		"))},[n]);const wt=F.useCallback(I=>{g.length>0&&g.forEach(M=>{M.clear===!0&&I.clear}),u.length>=2&&!_&&(I.clear(),I.lineStyle(2,15853020),g.length>0&&g.forEach(M=>{M.clear===!0?I.clear:(I.moveTo(M.start_x,M.start_y),I.lineTo(M.end_x,M.end_y)),console.log("Length of line: "+g.length)}),I.moveTo(e[u[u.length-2]].xPos,e[u[u.length-2]].yPos),I.lineTo(e[u[u.length-1]].xPos,e[u[u.length-1]].yPos),I.endFill()),_&&(g.forEach(M=>{M.clear==="none"&&I.clear}),m(!1))},[u,e,_,g]),ht=()=>{t({width:window.innerWidth,height:window.innerHeight}),T([])};return F.useEffect(()=>(window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}),[]),F.useEffect(()=>{if(window.innerHeight>630&&window.innerWidth>830){let I=0,M=[];for(let O=0;O<Y.length;O++){O<=9?Q=150:O<=19?(Q=75,O===10&&(I=0)):O<=29?(Q=0,O===20&&(I=0)):(Q=-75,O===30&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q-80;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}else{let I=0,M=[];at(!0);for(let O=0;O<Y.length;O++){O<=9?Q=150:O<=19?(Q=75,O===10&&(I=0)):O<=29?(Q=0,O===20&&(I=0)):(Q=-75,O===30&&(I=0));let N=r.width/2-400+90*I,B=r.height/2-Q-80;I++,M.push({text:Y[O],xPos:N,yPos:B,color:"black",index:O,selected:!1,initColor:"black"})}i(M)}},[r]),F.useEffect(()=>{const I=N=>{let B,G;if(o){const W=e.map(X=>{window.innerHeight>630&&window.innerWidth>830?(B=N.clientX+window.scrollX,G=N.clientY+window.scrollY):(B=N.clientX,G=N.clientY);let ut=X.color;const ft={x:X.xPos,y:X.yPos},ct=Math.sqrt(Math.pow(B-ft.x,2)+Math.pow(G-ft.y,2));return ct<40&&X.selected===!1&&(a(bt=>bt+X.text),l([...u,X.index]),X.selected=!0,u.length>=2&&T(bt=>[...bt,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos,clear:"none"}])),{...X,color:ct<=40?"green":ut}});i(W)}else{const W=e.map(X=>{const ut=N.clientX+window.scrollX,ft=N.clientY+window.scrollY,ct={x:X.xPos,y:X.yPos},bt=Math.sqrt(Math.pow(ut-ct.x,2)+Math.pow(ft-ct.y,2));return bt<40&&!j?{...X,color:bt<=40?"green":X.initColor}:{...X,color:bt==0?"green":X.initColor}});i(W)}},M=N=>{const B=e.map(G=>{let W,X;window.innerHeight>630&&window.innerWidth>830?(W=N.clientX+window.scrollX,X=N.clientY+window.scrollY):(W=N.clientX,X=N.clientY);const ut={x:G.xPos,y:G.yPos},ft=Math.sqrt(Math.pow(W-ut.x,2)+Math.pow(X-ut.y,2));return ft<40&&!j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):ft<40&&j?(Z(!0),h(!0),a(ct=>ct+G.text),l([...u,G.index]),G.selected=!0,U(R++),{...G,color:"green"}):G});i(B)},O=()=>{for(let N=0;N<u.length;N++)e[u[N]].selected=!1;if(o&&U(N=>N+1),h(!1),n.includes(s))if(d.includes(s))alert("Already found the word "+s+"!!"),It(s),a("");else{h(!1),It(s),v([...d,s+"		"]),S(N=>N+s+"		"),console.log("completed:"+d[0]),u.length>=2&&T(N=>[...N,{start_x:e[u[u.length-2]].xPos,start_y:e[u[u.length-2]].yPos,end_x:e[u[u.length-1]].xPos,end_y:e[u[u.length-1]].yPos}]),a(""),l([]);for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].initColor="green",i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!1)}))}else{for(let N=0;N<u.length;N++)for(let B=0;B<e.length;B++)u[N]===e[B].index&&(e[B].color="black",e[B].selected=!1,i(e),g.forEach(G=>{G.clear==="none"&&(G.clear=!0)}));a(""),h(!1),l([]),m(!0)}};return window.addEventListener("pointerdown",M),window.addEventListener("pointerup",O),window.addEventListener("pointermove",I),window.addEventListener("touchmove",I),window.addEventListener("touchstart",M),window.addEventListener("touchend",O),()=>{window.removeEventListener("pointerdown",M),window.removeEventListener("pointerup",O),window.removeEventListener("pointermove",I),window.removeEventListener("touchmove",I),window.removeEventListener("touchstart",M),window.removeEventListener("touchend",O)}},[e,s,u,n,d,o,g,R,j]),F.useEffect(()=>{d.length===n.length&&et(!0)},[d,n]),F.useEffect(()=>{let I=null;return L&&!k?I=setInterval(()=>{V((new Date-L)/1e3)},1e3):k&&clearInterval(I),()=>clearInterval(I)},[L,k]),window.innerHeight>630&&window.innerWidth>830?(Et(),C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsxs("div",{className:"App",children:[C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/2+80},children:["Time: ",st.toFixed(0)]})]})]}),C.jsxs("div",{style:{marginLeft:window.innerWidth-150},children:[C.jsxs("h4",{children:["Tries: ",R]})," "]})]}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height-250,width:r.width,children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsx("br",{}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4+100},children:[C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/game9",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary btn-lg",href:"/word-matching/Completed",style:{marginLeft:window.innerWidth/4},children:"Next"})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsx("br",{})]})):C.jsxs(C.Fragment,{children:[K&&C.jsx(oi,{}),C.jsx("div",{className:"A",children:C.jsxs("div",{className:"image-container",children:[C.jsx("img",{src:"../info_pic.png",alt:"Descriptive Image",className:"hover-image",onClick:()=>It("Find the words listed below  Click and drag on the letters to select them"),style:{height:35}}),C.jsxs("span",{style:{display:"flex"},children:[C.jsx("div",{className:"description",children:"Find the words listed below  Click and drag on the letters to select them."}),C.jsxs("h4",{style:{marginLeft:window.innerWidth/12},children:["Tries: ",R]})]})]})}),C.jsxs(Rt.Stage,{x:0,y:0,options:{backgroundColor:11644879},height:r.height,width:r.width-150,className:"stage-container",children:[C.jsx(Rt.Graphics,{draw:wt}),C.jsx(Rt.Container,{name:"textArea",children:e.map(I=>C.jsx(Rt.Text,{text:I.text,anchor:.5,x:I.xPos,y:I.yPos,style:new Ir({fill:I.color}),interactive:!0},I.index))})]}),C.jsx("br",{}),C.jsx("br",{}),C.jsxs("h3",{children:["Selected Word: ",s]}),C.jsxs("h1",{children:["Given Words: ",f]}),C.jsxs("h3",{children:["Completed Words: ",b]}),C.jsxs("div",{style:{marginLeft:window.innerWidth/4},children:[C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",children:"Previous"}),C.jsx("a",{type:"button",className:"btn btn-secondary",href:"/",style:{marginLeft:window.innerWidth/4},children:"Next"})]})]})}function WFt(){return document.body.style="overflow: hidden; background-color: #B1AFCF;font-family: Arial, sans-serif; display: flex;justify-content: center;align-items: center;height: 100vh;margin: 0;",C.jsxs(C.Fragment,{children:[C.jsx(oi,{}),C.jsxs("div",{className:"all-levels-completed",children:[C.jsx("h1",{children:"All Levels Completed!"}),C.jsx("h2",{children:"Congratulations !!!"}),C.jsx(dP,{to:"/word-matching",children:C.jsx("button",{children:"Replay"})})]})]})}function YFt(){return C.jsx(yet,{children:C.jsxs(het,{children:[C.jsx(ns,{exact:!0,path:"/word-matching",element:C.jsx(xet,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game1",element:C.jsx(BFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game2",element:C.jsx(GFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game3",element:C.jsx(kFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game4",element:C.jsx(DFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game5",element:C.jsx($Ft,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game6",element:C.jsx(HFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game7",element:C.jsx(XFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game8",element:C.jsx(VFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game9",element:C.jsx(jFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/game10",element:C.jsx(zFt,{})}),C.jsx(ns,{exact:!0,path:"/word-matching/Completed",element:C.jsx(WFt,{})})]})})}m2.createRoot(document.getElementById("root")).render(C.jsx($a.StrictMode,{children:C.jsx(YFt,{})}))});export default qFt();
